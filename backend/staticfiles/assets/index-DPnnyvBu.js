import{j as i,r as Z,c as Jl,T as Zl,C as Ql,B as at,a as Ls,M as ec,b as Vr,d as xn,X as ja,e as tc,f as rc,A as sc,g as nc,h as ic,R as Dr,i as rs,k as ss,l as ni,u as ns,s as is,m as os,n as as,o as Qe,p as oc,q as Sa,P as yn,t as Ca,v as Na,w as ac,S as Tr,x as lc,D as Aa,y as cc,I as Qr,z as dc,E as uc,F as fc,G as vn,H as pr,J as Ta,K as Ea,L as hc,N as Ia,O as nr,Q as Ma,U as Ra,V as mc,W as pc,Y as gc,Z as bc,_ as zt,$ as xc,a0 as qr,a1 as yc,a2 as Ds,a3 as vc,a4 as Ni,a5 as Fn,a6 as Ai,a7 as Pa,a8 as Da,a9 as wc,aa as Ks,ab as _c,ac as kc,ad as Ln,ae as Ti,af as Ei,ag as Ii,ah as jc,ai as Sc,aj as Cc,ak as Nc,al as Ac,am as Tc}from"./ui-COhFZ9MN.js";import{a as Ec,g as ii,c as vt}from"./vendor-Dvwkxfce.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))h(f);new MutationObserver(f=>{for(const l of f)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function e(f){const l={};return f.integrity&&(l.integrity=f.integrity),f.referrerPolicy&&(l.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?l.credentials="include":f.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(f){if(f.ep)return;f.ep=!0;const l=e(f);fetch(f.href,l)}})();var Js={},Mi;function Ic(){if(Mi)return Js;Mi=1;var m=Ec();return Js.createRoot=m.createRoot,Js.hydrateRoot=m.hydrateRoot,Js}var Mc=Ic();const Rc=ii(Mc),st={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},or=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Pc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),dn=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z"})}),Hr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Dc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.95-4.243l-1.59-1.591M3.75 12H3m4.243-4.95l-1.59-1.591M12 6.75A5.25 5.25 0 006.75 12a5.25 5.25 0 005.25 5.25 5.25 5.25 0 005.25-5.25A5.25 5.25 0 0012 6.75z"})}),Fc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),_r=m=>i.jsxs("svg",{...st,...m,children:[i.jsx("path",{d:"M12 14.25c-4.97 0-9-1.12-9-2.5V10.5c0-1.38 4.03-2.5 9-2.5s9 1.12 9 2.5v1.25c0 1.38-4.03 2.5-9 2.5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14.25L12 18.75M12 14.25a2.25 2.25 0 01-2.25-2.25V6.75a2.25 2.25 0 012.25-2.25v0a2.25 2.25 0 012.25 2.25v5.25a2.25 2.25 0 01-2.25 2.25v0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a2.25 2.25 0 01-2.25-2.25V6.75a2.25 2.25 0 012.25-2.25v0a2.25 2.25 0 012.25 2.25v9.75A2.25 2.25 0 0112 18.75z"}),i.jsx("path",{d:"M12 14.25c-4.97 0-9-1.12-9-2.5V10.5c0-1.38 4.03-2.5 9-2.5s9 1.12 9 2.5v1.25c0 1.38-4.03 2.5-9 2.5z",strokeLinecap:"round",strokeLinejoin:"round"})]}),Fr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962c.57-1.023.995-2.148 1.255-3.376m-1.255 3.376L3 18.72m12.75-2.962c.26-.621.455-1.28.586-1.976m.586-1.976l-.61-.61a3.75 3.75 0 00-5.304-5.304l-.61.61m0 0l-6.75-6.75m6.75 6.75L3 3m6 6c-1.373 0-2.5 1.127-2.5 2.5S7.627 11 9 11s2.5-1.127 2.5-2.5S10.373 6 9 6z"})}),oi=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),ai=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6.375a.625.625 0 01.625.625v3.375a.625.625 0 01-.625.625H9v-4.625zM9.75 6.75v4.625m6-4.625v4.625"})}),li=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),js=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),kr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h12A2.25 2.25 0 0120.25 6v12A2.25 2.25 0 0118 20.25H6A2.25 2.25 0 013.75 18V6zM3.75 12h16.5m-16.5 0v6.75m16.5-6.75v6.75m0-6.75H3.75M6.75 20.25h10.5M9 3.75v16.5M15 3.75v16.5"})}),Fa=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"})}),wn=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),mn=m=>i.jsxs("svg",{...st,...m,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),ci=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})}),Lr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.12-1.588H6.88a2.25 2.25 0 00-2.12 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"})}),un=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),Lc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),lr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.662V18a2.25 2.25 0 002.25 2.25h1.5M12 4.5A2.25 2.25 0 0114.25 2.25h1.5A2.25 2.25 0 0118 4.5v2.25m-6-4.5v2.25m0-2.25h-5.25A2.25 2.25 0 002.25 4.5v13.5A2.25 2.25 0 004.5 20.25h5.25"})}),La=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bs=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Cs=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.003 1.11-1.226M12 20.25v-2.25m-3.866-4.25a7.5 7.5 0 1011.632-4.25 7.5 7.5 0 00-11.632 4.25zM12 18a.375.375 0 00.375-.375v-1.5a.375.375 0 00-.75 0v1.5c0 .207.168.375.375.375z"})}),_n=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 11.25h.008v.008H12v-.008z"})}),Oa=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),Us=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),Ft=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.25 21l-.648-.428a2.25 2.25 0 01-1.47-2.47l.428-1.594a2.25 2.25 0 012.47-1.47l1.594.428a2.25 2.25 0 011.47 2.47l-.428 1.594a2.25 2.25 0 01-2.47 1.47z"})}),es=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Ot=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),cr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z"})}),Ba=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Kt=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),rr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Oc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),er=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),Gt=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),di=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Er=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Xr=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m6.75 12l-3-3m0 0l-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),$s=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-3.181-1.162a8.25 8.25 0 00-11.664 0l-3.181 3.183"})}),Ss=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21L3 16.5m0 0L7.5 12M3 16.5h18m-7.5-14L21 6.5m0 0L16.5 12M21 6.5H3"})}),Bc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),Ri=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3.375 3.375 0 1118.375 9.09l-10.94 10.94a2.25 2.25 0 01-3.182-3.182m5.526-1.353l3.182 3.182"})}),Uc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),$c=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Or=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.76 9.76 0 01-2.53-0.417m-10.74-3.92l-.01-.01A9.755 9.755 0 013 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})}),Ua=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),ui=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),zc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.184m-1.5.184a6.01 6.01 0 01-1.5-.184m3 7.425a6.01 6.01 0 01-3 0m3 0a6.01 6.01 0 003 0m-3 0a6.01 6.01 0 01-3 0m0 0a6.01 6.01 0 00-3 0m6 0a6.01 6.01 0 003 0m-6 0a6.01 6.01 0 01-3 0m0 0c-1.296 0-2.484-.21-3.627-.611m12.254 0c-1.143.401-2.331.611-3.627.611M12 3a9 9 0 00-9 9c0 2.398.905 4.646 2.458 6.331m13.084-6.331A9 9 0 0012 3z"})}),qc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),Vc=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859M2.25 9.75h19.5v5.625c0 .621-.504 1.125-1.125 1.125H3.375A1.125 1.125 0 012.25 15.375V9.75z"})}),fi=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),$a=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),qs=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),za=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),qa=m=>i.jsx("svg",{...st,...m,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Va=Z.createContext(void 0),Hc=({children:m})=>{const[a,e]=Z.useState(()=>{if(typeof window<"u"){const l=localStorage.getItem("theme");return l==="light"||l==="dark"?l:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}return"light"});Z.useEffect(()=>{const l=window.document.documentElement;l.classList.remove(a==="light"?"dark":"light"),l.classList.add(a),localStorage.setItem("theme",a)},[a]);const h=Z.useCallback(()=>{e(l=>l==="light"?"dark":"light")},[]),f=Z.useMemo(()=>Jl({palette:{mode:a},typography:{fontFamily:"'Times New Roman', Times, serif"}}),[a]);return i.jsx(Va.Provider,{value:{theme:a,toggleTheme:h},children:i.jsxs(Zl,{theme:f,children:[i.jsx(Ql,{}),m]})})},Wc=()=>{const m=Z.useContext(Va);if(m===void 0)throw new Error("useTheme must be used within a ThemeProvider");return m},mr={year:365*24*60*60*1e3,month:720*60*60*1e3,week:10080*60*1e3,day:1440*60*1e3,hour:3600*1e3,minute:60*1e3};function ls(m,a){const e=new Date(m).getTime(),h=new Date().getTime()-e;if(h<mr.minute)return a("justNow");if(h<mr.hour){const f=Math.floor(h/mr.minute);return`${f} ${f>1?a("minutes"):a("minute")} ${a("ago")}`}else if(h<mr.day){const f=Math.floor(h/mr.hour);return`${f} ${f>1?a("hours"):a("hour")} ${a("ago")}`}else if(h<mr.week){const f=Math.floor(h/mr.day);return`${f} ${f>1?a("days"):a("day")} ${a("ago")}`}else if(h<mr.month){const f=Math.floor(h/mr.week);return`${f} ${f>1?a("weeks"):a("week")} ${a("ago")}`}else if(h<mr.month*12){const f=Math.floor(h/mr.month);return`${f} ${f>1?a("months"):a("month")} ${a("ago")}`}else{const f=Math.floor(h/mr.year);return`${f} ${f>1?a("years"):a("year")} ${a("ago")}`}}const Ha=Z.createContext(void 0),Gc=({children:m})=>{const[a,e]=Z.useState(()=>{if(typeof window<"u"){const f=localStorage.getItem("language");if(f==="en"||f==="lo")return f}return"en"});Z.useEffect(()=>{localStorage.setItem("language",a),document.documentElement.lang=a},[a]);const h={language:a,setLanguage:e};return i.jsx(Ha.Provider,{value:h,children:m})},Wa=()=>{const m=Z.useContext(Ha);if(m===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return m},Xc={abbreviation:{en:"Abbreviation",lo:"ຊື່ຫຍໍ້"},abbreviationExists:{en:"This abbreviation already exists.",lo:"ຕົວຫຍໍ້ນີ້ມີຢູ່ແລ້ວ."},abbreviationRequired:{en:"Abbreviation is required.",lo:"ຕ້ອງໃສ່ຊື່ຫຍໍ້."},acceptAndReplace:{en:"Accept & Replace",lo:"ຍອມຮັບ ແລະ ແທນທີ່"},action:{en:"Action",lo:"ການກະທຳ"},actionCenter:{en:"Action Center",lo:"ສູນລວມວຽກ"},actionItems:{en:"Action Items",lo:"ລາຍການທີ່ຕ້ອງເຮັດ"},actions:{en:"Actions",lo:"ການກະທຳ"},addAdvisor:{en:"Add Advisor",lo:"ເພີ່ມອາຈານທີ່ປຶກສາ"},addAdvisorTitle:{en:"Add New Advisor",lo:"ເພີ່ມທີ່ປຶກສາໃໝ່"},addClassroom:{en:"Add Classroom",lo:"ເພີ່ມຫ້ອງຮຽນ"},addDeptAdmin:{en:"Add Dept. Admin",lo:"ເພີ່ມຜູ້ບໍລິຫານພະແນກ"},addItem:{en:"Add Item",lo:"ເພີ່ມລາຍການ"},addMajor:{en:"Add Major",lo:"ເພີ່ມສາຂາວິຊາ"},addRoom:{en:"Add Room",lo:"ເພີ່ມຫ້ອງ"},addSecondStudent:{en:"Add a second student",lo:"ເພີ່ມນັກສຶກສາຄົນທີສອງ"},addStudent:{en:"Add New Student",lo:"ເພີ່ມນັກສຶກສາໃໝ່"},addTask:{en:"Add Task",lo:"ເພີ່ມໜ້າວຽກ"},addTemplate:{en:"Add Template",lo:"ເພີ່ມແມ່ແບບ"},admin:{en:"Admin",lo:"ຜູ້​ดูแล"},adminDashboardDescription:{en:"A global overview of all system activity.",lo:"ພາບລວມທົ່ວໄປຂອງກິດຈະກຳທັງໝົດໃນລະບົບ."},adminDashboardTitle:{en:"Administrator Dashboard",lo:"ກະດານຂ່າວຜູ້ດູແລລະບົບ"},advisor:{en:"Advisor",lo:"ອາຈານທີ່ປຶກສາ"},advisorAddedSuccess:{en:"Advisor added successfully!",lo:"ເພີ່ມທີ່ປຶກສາສຳເລັດແລ້ວ!"},advisorDashboardDescription:{en:"Here's an overview of your projects and action items.",lo:"ນີ້ແມ່ນພາບລວມຂອງໂຄງການ ແລະ ລາຍການທີ່ຕ້ອງເຮັດຂອງທ່ານ."},advisorDashboardWelcome:{en:"Welcome, {name}!",lo:"ຍິນດີຕ້ອນຮັບ, {name}!"},advisorDeletedSuccess:{en:"Advisor deleted successfully!",lo:"ລຶບທີ່ປຶກສາສຳເລັດແລ້ວ!"},advisorExportSuccess:{en:"Advisors report exported successfully!",lo:"ສົ່ງອອກລາຍງານທີ່ປຶກສາສຳເລັດແລ້ວ!"},advisorFeedback:{en:"Advisor Feedback",lo:"ຄຳຕິຊົມຂອງທີ່ປຶກສາ"},advisorId:{en:"Advisor ID",lo:"ລະຫັດທີ່ປຶກສາ"},advisorInformation:{en:"Advisor Information",lo:"ຂໍ້ມູນທີ່ປຶກສາ"},advisorNameExists:{en:"An advisor with this name already exists.",lo:"ມີທີ່ປຶກສາທີ່ມີຊື່ນີ້ຢູ່ແລ້ວ."},advisorPrefix:{en:"Advisor: ",lo:"ທີ່ປຶກສາ: "},advisorReport:{en:"Advisor Workload Report",lo:"ລາຍງານພາລະວຽກທີ່ປຶກສາ"},advisorRequired:{en:"An advisor must be selected.",lo:"ຕ້ອງເລືອກທີ່ປຶກສາ."},advisorRubric:{en:"Advisor Rubric",lo:"ຮູບແບບການໃຫ້ຄະແນນຂອງທີ່ປຶກສາ"},advisorScore:{en:"Advisor Score",lo:"ຄະແນນທີ່ປຶກສາ"},advisorScoreSubmitted:{en:"Advisor score submitted successfully!",lo:"ສົ່ງຄະແນນທີ່ປຶກສາສຳເລັດແລ້ວ!"},advisorSuggesterDescription:{en:"Get AI-powered recommendations for the best advisor for a project based on specialization and workload.",lo:"ຮັບຄຳແນະນຳທີ່ຂັບເຄື່ອນດ້ວຍ AI ສຳລັບທີ່ປຶກສາທີ່ເໝາະສົມທີ່ສຸດສຳລັບໂຄງການໂດຍອີງໃສ່ຄວາມຊ່ຽວຊານ ແລະ ພາລະວຽກ."},advisorSuggesterTitle:{en:"Advisor Assignment Suggester",lo:"ຜູ້ແນະນຳການມອບໝາຍທີ່ປຶກສາ"},advisorSuggestionFailed:{en:"Could not generate advisor suggestions.",lo:"ບໍ່ສາມາດສ້າງຄຳແນະນຳທີ່ປຶກສາໄດ້."},advisorUpdatedSuccess:{en:"Advisor updated successfully!",lo:"ອັບເດດທີ່ປຶກສາສຳເລັດແລ້ວ!"},advisorWorkloadOverview:{en:"Advisor Workload Overview",lo:"ພາບລວມພາລະວຽກທີ່ປຶກສາ"},advisorWorkloadSnapshot:{en:"Advisor Workload Snapshot",lo:"ສະຫຼຸບພາລະວຽກທີ່ປຶກສາ"},advisors:{en:"Advisors",lo:"ອາຈານທີ່ປຶກສາ"},advisorsDescription:{en:"View, add, edit, or remove faculty advisors.",lo:"ເບິ່ງ, ເພີ່ມ, ແກ້ໄຂ, ຫຼື ລົບອາຈານທີ່ປຶກສາ."},advisorsExist:{en:"Advisors Exist",lo:"ມີທີ່ປຶກສາ"},advisorsExist_error:{en:"No advisors have been added to the system. This is a critical issue.",lo:"ຍັງບໍ່ມີການເພີ່ມທີ່ປຶກສາເຂົ້າໃນລະບົບ. ນີ້ແມ່ນບັນຫາທີ່ສຳຄັນ."},advisorsExist_ok:{en:"Advisors have been added to the system.",lo:"ເພີ່ມທີ່ປຶກສາເຂົ້າໃນລະບົບແລ້ວ."},advisorsOnly:{en:"Advisors Only",lo:"ສະເພາະອາຈານທີ່ປຶກສາ"},advisorsOverQuota:{en:"Advisors Over Quota",lo:"ທີ່ປຶກສາເກີນໂຄຕ້າ"},advisorsOverQuota_ok:{en:"All advisors are within their project supervision quotas.",lo:"ທີ່ປຶກສາທຸກຄົນຢູ່ໃນໂຄຕ້າການດູແລໂຄງການ."},advisorsOverQuota_warning:{en:"{count} advisors are over their supervision quota: {names}.",lo:"ທີ່ປຶກສາ {count} ຄົນມີພາລະວຽກເກີນໂຄຕ້າ: {names}."},advisorsUpdatedSuccess:{en:"${count} advisors updated successfully.",lo:"ອັບເດດທີ່ປຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},advisorsDeletedSuccess:{en:"${count} advisors deleted successfully.",lo:"ລຶບທີ່ປຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},advisorsImportedSuccess:{en:"${count} advisors imported successfully.",lo:"ນຳເຂົ້າທີ່ປຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},ago:{en:"ago",lo:"ທີ່ຜ່ານມາ"},aiAdminCapabilities:{en:"What can AI in Admin do?",lo:"AI in Admin ສາ​ມາດ​ເຮັດ​ຫຍັງ​ແດ່"},aiAdminEnhancementQuestion:{en:"How can we make AI a complete, smart, and comprehensive assistant for Admins?",lo:"ຈະ​ເຮັດ​ແນວ​ໃດ​ໃຫ້ AI ​ເຮັດ​ໜ້າ​ທີ່ຊ່ວຍ​ວຽກ Admin ໄດ້​ແບບ​ສົມ​ບູນ​ແບບ smart ຄົບ​ຖ້ວນ"},aiAnalysis:{en:"AI Analysis",lo:"ການວິເຄາະ AI"},aiAssistant:{en:"AI Assistant",lo:"ຜູ້ຊ່ວຍ AI"},aiAssistantDescription:{en:"Enable or disable AI-powered features for students and advisors.",lo:"ເປີດ ຫຼື ປິດການນຳໃຊ້ຄຸນສົມບັດທີ່ຂັບເຄື່ອນໂດຍ AI ສຳລັບນັກສຶກສາ ແລະ ອາຈານທີ່ປຶກສາ"},aiCareerPathSuggestions:{en:"AI Career Path Suggestions",lo:"ຄຳແນະນຳເສັ້ນທາງອາຊີບ AI"},aiCommunicationAnalysis:{en:"AI Communication Analysis",lo:"ການວິເຄາະການສື່ສານ AI"},aiDisclaimer:{en:"AI-generated insights may not be fully accurate.",lo:"ຂໍ້ມູນທີ່ສ້າງໂດຍ AI ອາດຈະບໍ່ຖືກຕ້ອງທັງໝົດ."},aiFeatureNotConfigured:{en:"AI feature is not configured. Please contact an administrator.",lo:"ຄຸນສົມບັດ AI ຍັງບໍ່ໄດ້ຕັ້ງຄ່າ. ກະລຸນາຕິດຕໍ່ຜູ້ດູແລ."},aiHealthAnalysisComplete:{en:"AI health analysis is complete.",lo:"ການວິເຄາະສຸຂະພາບດ້ວຍ AI ສຳເລັດແລ້ວ."},aiHealthAnalysisStarted:{en:"AI health analysis has started. This may take a moment.",lo:"ການວິເຄາະສຸຂະພາບດ້ວຍ AI ໄດ້ເລີ່ມຕົ້ນແລ້ວ. ອາດຈະໃຊ້ເວລາຈັກໜ່ອຍ."},aiMentoringStyleAnalysis:{en:"AI Mentoring Style Analysis",lo:"ການວິເຄາະຮູບແບບການໃຫ້ຄຳປຶກສາ AI"},aiMessageGenerated:{en:"AI message template generated.",lo:"ສ້າງແມ່ແບບຂໍ້ຄວາມ AI ສຳເລັດ."},aiPlagiarismCheckResults:{en:"AI Plagiarism Check Results",lo:"ຜົນການກວດສອບການລັກລອບຜົນງານ AI"},aiRubricGenerator:{en:"AI Rubric Generator",lo:"ເຄື່ອງມືສ້າງຮູບແບບການໃຫ້ຄະແນນ AI"},aiSecurityAuditStarted:{en:"AI security audit has started.",lo:"ການກວດສອບຄວາມປອດໄພ AI ໄດ້ເລີ່ມຕົ້ນແລ້ວ."},aiSkillsAnalysis:{en:"AI Skills Analysis",lo:"ການວິເຄາະທັກສະ AI"},aiSkillsAnalysisDescription:{en:"Get an AI-powered summary of the skills you are demonstrating through your project work.",lo:"ຂໍສະຫຼຸບທີ່ຂັບເຄື່ອນດ້ວຍ AI ກ່ຽວກັບທັກສະທີ່ເຈົ້າກໍາລັງສະແດງຜ່ານວຽກໂຄງການຂອງເຈົ້າ."},aiSummary:{en:"AI Summary & Insights",lo:"ສະຫຼຸບ ແລະ ຄວາມເຂົ້າໃຈຈາກ AI"},aiSummaryFailed:{en:"Failed to generate AI summary.",lo:"ການສ້າງສະຫຼຸບ AI ຜິດພາດ."},aiSystemHealthAnalysisStarted:{en:"AI system health analysis has started.",lo:"ການວິເຄາະສຸຂະພາບລະບົບດ້ວຍ AI ໄດ້ເລີ່ມຕົ້ນແລ້ວ."},aiTemplates:{en:"AI Templates:",lo:"ແມ່ແບບ AI:"},aiTools:{en:"AI Tools",lo:"ເຄື່ອງມື AI"},aiToolsDescription:{en:"Leverage AI to assist with management and analysis tasks.",lo:"ໃຊ້ AI ເພື່ອຊ່ວຍໃນການຈັດການ ແລະ ວິເຄາະວຽກ."},aiToolsShortDescription:{en:"Use AI for suggestions, analysis, and system health checks.",lo:"ໃຊ້ AI ເພື່ອຊ່ວຍແນະນຳ, ວິເຄາະ, ແລະກວດສອບລະບົບ."},aiToolsTitle:{en:"AI Tools for Administration",lo:"ເຄື່ອງມື AI ສຳລັບການບໍລິຫານ"},aiTopicFilled:{en:"AI topic has been filled in.",lo:"ຫົວຂໍ້ຈາກ AI ໄດ້ຖືກປ້ອນແລ້ວ."},aiTopicSuggester:{en:"AI Topic Suggester",lo:"ຜູ້ແນະນຳຫົວຂໍ້ AI"},aiTopicSuggestion:{en:"AI Topic Suggestion",lo:"ແນະນຳຫົວຂໍ້ໂດຍ AI"},aiWritingAssistant:{en:"AI Writing Assistant",lo:"ຜູ້ຊ່ວຍຂຽນ AI"},all:{en:"All",lo:"ທັງໝົດ"},allCaughtUp:{en:"You're all caught up!",lo:"ທຸກຢ່າງທັນສະໄໝແລ້ວ!"},allColumns:{en:"All Columns",lo:"ທຸກຖັນ"},allCommittees:{en:"All Committees",lo:"ທຸກຄະນະກຳມະການ"},allDone:{en:"All Done!",lo:"ສຳເລັດທັງໝົດ!"},allMilestonesComplete:{en:"All milestones are complete!",lo:"Milestones ທັງໝົດສຳເລັດແລ້ວ!"},allSchedules:{en:"All Schedules",lo:"ທຸກຕາຕະລາງ"},allSchedulesCleared:{en:"All schedules and committees have been cleared.",lo:"ທຸກຕາຕະລາງ ແລະ ຄະນະກຳມະການຖືກລ້າງແລ້ວ."},allStatuses:{en:"All Statuses",lo:"ສະຖານະທັງໝົດ"},allUpdatesAndMentions:{en:"All your updates and mentions will appear here.",lo:"ທຸກການອັບເດດ ແລະ ການກ່າວເຖິງຂອງທ່ານຈະປາກົດທີ່ນີ້."},allUsers:{en:"All Users",lo:"ຜູ້ໃຊ້ທັງໝົດ"},allAdvisors:{en:"All Advisors",lo:"ທີ່ປຶກສາທັງໝົດ"},allGenders:{en:"All Genders",lo:"ທຸກເພດ"},allMajors:{en:"All Majors",lo:"ສາຂາວິຊາທັງໝົດ"},analysisFailed:{en:"Analysis Failed",lo:"ການວິເຄາະຜິດພາດ"},analyzeDocument:{en:"Analyze Document",lo:"ວິເຄາະເອກະສານ"},analyzingDocument:{en:"Analyzing Document",lo:"ກຳລັງວິເຄາະເອກະສານ"},analyzeMySkills:{en:"Analyze My Skills",lo:"ວິເຄາະທັກສະຂອງຂ້ອຍ"},analyzeWithAI:{en:"Analyze with AI",lo:"ວິເຄາະດ້ວຍ AI"},analyzing:{en:"Analyzing...",lo:"ກຳລັງວິເຄາະ..."},analyzingLog:{en:"Analyzing communication log...",lo:"ກຳລັງວິເຄາະບັນທຶກການສື່ສານ..."},analyzingSkills:{en:"Analyzing your skills...",lo:"ກຳລັງວິເຄາະທັກສະຂອງທ່ານ."},announcement:{en:"Announcement",lo:"ປະກາດ"},announcementDeletedSuccess:{en:"Announcement deleted successfully!",lo:"ລຶບປະກາດສຳເລັດແລ້ວ!"},announcementPostedSuccess:{en:"Announcement posted successfully!",lo:"ປະກາດສຳເລັດແລ້ວ!"},announcementUpdatedSuccess:{en:"Announcement updated successfully!",lo:"ອັບເດດປະກາດສຳເລັດແລ້ວ!"},announcements:{en:"Announcements",lo:"ປະກາດ"},anyAdvisor:{en:"Any Available Advisor",lo:"ທີ່ປຶກສາທີ່ຫວ່າງ"},appReadinessStatus:{en:"Application Readiness Status",lo:"ສະຖານະຄວາມພ້ອມຂອງແອັບພລິເຄຊັນ"},approve:{en:"Approve",lo:"ອະນຸມັດ"},approveButton:{en:"Approve",lo:"ອະນຸມັດ"},approveFeedbackPrompt:{en:'Provide optional positive feedback for milestone "{milestoneName}".',lo:'ໃຫ້ຄຳຕິຊົມທາງບວກ (ຖ້າມີ) ສຳລັບ milestone "{milestoneName}".'},approveMilestone:{en:"Approve Milestone",lo:"ອະນຸມັດ Milestone"},approveProject:{en:"Approve Project",lo:"ອະນຸມັດໂຄງການ"},approveProjectPrompt:{en:'You are about to approve the project "{projectName}". You can add an optional comment.',lo:'ທ່ານກຳລັງຈະອະນຸມັດໂຄງການ "{projectName}". ທ່ານສາມາດເພີ່ມຄຳເຫັນໄດ້.'},approved:{en:"Approved",lo:"ອະນຸມັດແລ້ວ"},approvedMilestones:{en:"{approved} of {total} milestones approved",lo:"{approved} ຈາກທັງໝົດ {total} milestones ໄດ້ຮັບການອະນຸມັດແລ້ວ"},approvedStudent:{en:"Approved student ${name}",lo:"ອະນຸມັດນັກສຶກສາ ${name}"},approvedStudents:{en:"Approved Students",lo:"ນັກສຶກສາທີ່ອະນຸມັດແລ້ວ"},assigned:{en:"Assigned",lo:"ຖືກກຳນົດແລ້ວ"},atLeastOneTask:{en:"At least one task is required.",lo:"ຕ້ອງມີຢ່າງໜ້ອຍໜຶ່ງໜ້າວຽກ."},audience:{en:"Audience",lo:"ຜູ້ຊົມ"},author:{en:"Author",lo:"ຜູ້ຂຽນ"},autoSchedule:{en:"Auto-Schedule",lo:"ຈັດຕາຕະລາງອັດຕະໂນມັດ"},autoScheduleCommitteesToast:{en:"Auto-scheduling complete. Assigned committees to ${committeesAssigned} projects.",lo:"ການຈັດຕາຕະລາງອັດຕະໂນມັດສຳເລັດ. ໄດ້ກຳນົດຄະນະກຳມະການໃຫ້ ${committeesAssigned} ໂຄງການ."},autoScheduleCompleteToast:{en:"Auto-scheduling complete!",lo:"ການຈັດຕາຕະລາງອັດຕະໂນມັດສຳເລັດແລ້ວ!"},autoScheduleDefensesToast:{en:"Auto-scheduling complete. Scheduled ${defensesScheduled} defenses.",lo:"ການຈັດຕາຕະລາງອັດຕະໂນມັດສຳເລັດ. ໄດ້ຈັດຕາຕະລາງປ້ອງກັນ ${defensesScheduled} ຄັ້ງ."},autoScheduleNoChangesToast:{en:"Auto-scheduling ran, but no changes were needed.",lo:"ການຈັດຕາຕະລາງອັດຕະໂນມັດເຮັດວຽກ, ແຕ່ບໍ່ມີການປ່ຽນແປງທີ່ຈຳເປັນ."},autoScheduleResultToast:{en:"Auto-scheduling complete. Assigned committees to ${committeesAssigned} projects and scheduled ${defensesScheduled} defenses.",lo:"ການຈັດຕາຕະລາງອັດຕະໂນມັດສຳເລັດ. ໄດ້ກຳນົດຄະນະກຳມະການໃຫ້ ${committeesAssigned} ໂຄງການ ແລະ ຈັດຕາຕະລາງປ້ອງກັນ ${defensesScheduled} ຄັ້ງ."},availableRooms:{en:"Available rooms: ${roomOptions}",lo:"ຫ້ອງທີ່ວ່າງ: ${roomOptions}"},availableTimes:{en:"Available times: ${timeSlots}",lo:"ເວລາທີ່ວ່າງ: ${timeSlots}"},avgLoad:{en:"Avg. Load / Advisor",lo:"ພາລະວຽກສະເລ່ຍ / ທີ່ປຶກສາ"},ay:{en:"AY:",lo:"ສ.ຮ:"},accountPendingApproval:{en:"Your account is pending approval by an administrator.",lo:"ບັນຊີຂອງທ່ານກໍາລັງລໍຖ້າการອະນຸມັດຈາກຜູ້ດູແລ."},academicYear:{en:"Academic Year:",lo:"ສົກຮຽນ:"},analytics:{en:"Analytics",lo:"ການວິເຄາະ"},analyticsDescription:{en:"Visual overview of project data and trends.",lo:"ພາບລວມຂອງຂໍ້ມູນ ແລະ ທ່າອ່ຽງຂອງໂຄງການ."},analyticsExportSuccess:{en:"Analytics report exported successfully!",lo:"ສົ່ງອອກລາຍງານການວິເຄາະສຳເລັດແລ້ວ!"},automatedSecurityScanCompleteNoIssues:{en:"Automated security scan complete. No new issues found.",lo:"ການກວດສອບຄວາມປອດໄພອັດຕະໂນມັດສຳເລັດ. ບໍ່ພົບບັນຫາໃໝ່."},automatedSecurityScanFailed:{en:"Automated security scan failed.",lo:"ການກວດສອບຄວາມປອດໄພອັດຕະໂນມັດລົ້ມເຫຼວ."},automatedSecurityScanFoundIssues:{en:"Automated security scan found ${count} issue(s). Check your notifications.",lo:"ການກວດສອບຄວາມປອດໄພອັດຕະໂນມັດພົບ ${count} ບັນຫາ. ກວດສອບການແຈ້ງເຕືອນຂອງທ່ານ."},automatedSecurityScanRunning:{en:"Automated security scan running in the background...",lo:"ກຳລັງດຳເນີນການກວດສອບຄວາມປອດໄພອັດຕະໂນມັດ..."},back:{en:"Back",lo:"ກັບຄືນ"},backToDashboard:{en:"Back to Dashboard",lo:"ກັບໄປທີ່ກະດານຂ່າວ"},backToList:{en:"Back to List",lo:"ກັບໄປທີ່ລາຍການ"},browseAllProjects:{en:"Browse All Projects",lo:"ເບິ່ງໂຄງການທັງໝົດ"},bulkActionsSelected:{en:"${count} selected",lo:"ເລືອກ ${count} ລາຍການ"},bulkDeleteAdvisorMessage:{en:"Are you sure you want to delete ${count} selected advisors? This cannot be undone.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບທີ່ປຶກສາທີ່ເລືອກ ${count} ຄົນ? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້."},bulkDeleteAdvisorTitle:{en:"Delete ${count} Advisors?",lo:"ລຶບທີ່ປຶກສາ ${count} ຄົນ?"},bulkDeleteStudentMessage:{en:"Are you sure you want to delete ${count} selected students? This cannot be undone.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບນັກສຶກສາທີ່ເລືອກ ${count} ຄົນ? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້."},bulkDeleteStudentTitle:{en:"Delete ${count} Students?",lo:"ລຶບນັກສຶກສາ ${count} ຄົນ?"},bulkEditAdvisorDescription:{en:"Only fields you fill in will be updated for the selected advisors. Leave fields blank to keep their current values.",lo:"ສະເພາະຊ່ອງຂໍ້ມູນທີ່ທ່ານປ້ອນເທົ່ານັ້ນທີ່ຈະຖືກອັບເດດສຳລັບທີ່ປຶກສາທີ່ເລືອກ. ປະໄວ້ຫວ່າງເພື່ອຮັກສາຄ່າປັດຈຸບັນ."},bulkEditAdvisorTitle:{en:"Bulk Edit ${count} Advisors",lo:"ແກ້ໄຂທີ່ປຶກສາ ${count} ຄົນ"},bulkEditDescription:{en:"Only fields you change will be updated for the selected students.",lo:"ສະເພາະຊ່ອງຂໍ້ມູນທີ່ທ່ານປ່ຽນເທົ່ານັ້ນທີ່ຈະຖືກອັບເດດສຳລັບນັກສຶກສາທີ່ເລືອກ."},bulkEditTitle:{en:"Bulk Edit ${count} Students",lo:"ແກ້ໄຂນັກສຶກສາ ${count} ຄົນ"},bulkMessageSuccess:{en:"Message sent to selected project groups.",lo:"ສົ່ງຂໍ້ຄວາມຫາທຸກກຸ່ມທີ່ເລືອກສຳເລັດແລ້ວ."},calendar:{en:"Calendar",lo:"ປະຕິທິນ"},calendarDescription:{en:"Overview of all project deadlines and events.",lo:"ພາບລວມຂອງກຳນົດສົ່ງໂຄງການ ແລະ ກິດຈະກຳທັງໝົດ."},canRegisterProject:{en:"You can register a new project or browse existing ones.",lo:"ທ່ານສາມາດລົງທະບຽນໂຄງການໃໝ່ ຫຼື ເບິ່ງໂຄງການທີ່ມີຢູ່ແລ້ວ."},cancel:{en:"Cancel",lo:"ຍົກເລີກ"},cannotDeleteAdvisorWithProjects:{en:"Cannot delete advisor. They are supervising active projects.",lo:"ບໍ່ສາມາດລຶບທີ່ປຶກສາໄດ້. ພວກເຂົາກຳລັງດູແລໂຄງການທີ່ດຳເນີນຢູ່."},cannotDeleteAdvisorsWithProjects:{en:"Cannot delete ${count} advisors because they are supervising projects.",lo:"ບໍ່ສາມາດລຶບທີ່ປຶກສາ ${count} ຄົນໄດ້ ເນື່ອງຈາກພວກເຂົາກຳລັງດູແລໂຄງການ."},cannotDeleteStudentWithProject:{en:"Cannot delete student. They are assigned to a project.",lo:"ບໍ່ສາມາດລຶບນັກສຶກສາໄດ້. ພວກເຂົາຖືກກຳນົດໃຫ້ຢູ່ໃນໂຄງການ."},cannotDeleteStudentsWithProjects:{en:"Cannot delete ${count} students because they are assigned to projects.",lo:"ບໍ່ສາມາດລຶບນັກສຶກສາ ${count} ຄົນໄດ້ ເນື່ອງຈາກພວກເຂົາຖືກກຳນົດໃຫ້ຢູ່ໃນໂຄງການ."},cannotDemoteSelf:{en:"You cannot demote yourself.",lo:"ທ່ານບໍ່ສາມາດປົດຕຳແໜ່ງຕົວເອງໄດ້."},checkAppReadiness:{en:"Check App Readiness",lo:"ກວດສອບຄວາມພ້ອມຂອງແອັບ"},checkAppReadinessDescription:{en:"Run diagnostics to ensure the system is ready for the academic year.",lo:"ກວດສອບເພື່ອໃຫ້ແນ່ໃຈວ່າລະບົບພ້ອມໃຊ້ງານສຳລັບສົກຮຽນ."},checkPlagiarismWithAI:{en:"Check Plagiarism with AI",lo:"ກວດສອບການລັກລອບຜົນງານດ້ວຍ AI"},checkingForPlagiarism:{en:"Checking for plagiarism...",lo:"ກຳລັງກວດສອບການລັກລອບຜົນງານ..."},checkingForSimilarity:{en:"Checking for topic similarity...",lo:"ກຳລັງກວດສອບຄວາມຄ້າຍຄືກັນຂອງຫົວຂໍ້..."},checkForSimilarity:{en:"Check for Similarity",lo:"ກວດສອບຄວາມຄ້າຍຄື"},classroom:{en:"Classroom",lo:"ຫ້ອງຮຽນ"},classroomId:{en:"Classroom ID",lo:"ລະຫັດຫ້ອງຮຽນ"},classroomInUseError:{en:'Cannot delete "${classroomName}" because students are assigned to it.',lo:'ບໍ່ສາມາດລຶບ "${classroomName}" ໄດ້ ເນື່ອງຈາກມີນັກສຶກສາຖືກກຳນົດໃຫ້ຢູ່ໃນຫ້ອງຮຽນນີ້.'},classroomName:{en:"Classroom Name",lo:"ຊື່ຫ້ອງຮຽນ"},classroomNameExists:{en:"A classroom with this name already exists.",lo:"ມີຫ້ອງຮຽນທີ່ມີຊື່ນີ້ຢູ່ແລ້ວ."},classroomNameRequired:{en:"Classroom name is required.",lo:"ຕ້ອງປ້ອນຊື່ຫ້ອງຮຽນ."},classroomRequired:{en:"Classroom is required.",lo:"ຕ້ອງປ້ອນຫ້ອງຮຽນ."},classrooms:{en:"Classrooms",lo:"ຫ້ອງຮຽນ"},classroomsExist:{en:"Classrooms Exist",lo:"ມີຫ້ອງຮຽນ"},classroomsExist_warning:{en:"No classrooms have been added. This may prevent student registration.",lo:"ຍັງບໍ່ມີການເພີ່ມຫ້ອງຮຽນ. ອາດຈະເຮັດໃຫ້ການລົງທະບຽນນັກສຶກສາບໍ່ໄດ້."},classroomsExist_ok:{en:"Classrooms have been configured.",lo:"ຕັ້ງຄ່າຫ້ອງຮຽນແລ້ວ."},classroomAddedSuccess:{en:"Classroom added successfully!",lo:"ເພີ່ມຫ້ອງຮຽນສຳເລັດແລ້ວ!"},classroomDeletedSuccess:{en:"Classroom deleted successfully!",lo:"ລຶບຫ້ອງຮຽນສຳເລັດແລ້ວ!"},classroomUpdatedSuccess:{en:"Classroom updated successfully!",lo:"ອັບເດດຫ້ອງຮຽນສຳເລັດແລ້ວ!"},classroomExportSuccess:{en:"Classrooms report exported successfully!",lo:"ສົ່ງອອກລາຍງານຫ້ອງຮຽນສຳເລັດແລ້ວ!"},clearAll:{en:"Clear All",lo:"ລ້າງທັງໝົດ"},clearAllConfirm:{en:"Yes, Clear Everything",lo:"ແມ່ນ, ລ້າງທັງໝົດ"},clearAllMessage:{en:"Are you sure you want to clear all schedules and committee assignments for this academic year? This action cannot be undone.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລ້າງທຸກຕາຕະລາງ ແລະ ການກຳນົດຄະນະກຳມະການສຳລັບສົກຮຽນນີ້? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້."},clearAllTitle:{en:"Clear All Schedules & Committees?",lo:"ລ້າງທຸກຕາຕະລາງ ແລະ ຄະນະກຳມະການ?"},clearScheduleConfirm:{en:"Clear Schedule",lo:"ລ້າງຕາຕະລາງ"},clearScheduleMessage:{en:"Are you sure you want to clear the defense schedule for project ${projectId}?",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລ້າງຕາຕະລາງປ້ອງກັນຂອງໂຄງການ ${projectId}?"},clearScheduleTitle:{en:"Clear Defense Schedule?",lo:"ລ້າງຕາຕະລາງປ້ອງກັນ?"},close:{en:"Close",lo:"ປິດ"},closeBtn:{en:"Close",lo:"ປິດ"},closeRegistrationModal:{en:"Close registration modal",lo:"ປິດໜ້າຕ່າງການລົງທະບຽນ"},columns:{en:"Columns",lo:"ຖັນ"},columnsSelected:{en:"{count} columns selected",lo:"ເລືອກ {count} ຖັນ"},commentRequiredForRejection:{en:"A comment is required for rejection.",lo:"ຕ້ອງມີຄຳເຫັນສຳລັບການປະຕິເສດ."},committeeAssignedAdvisorNotif:{en:"You have been assigned as ${role} for project ${projectId}.",lo:"ທ່ານໄດ້ຖືກມອບໝາຍໃຫ້ເປັນ ${role} ສໍາລັບໂຄງການ ${projectId}."},committeeAssignedStudentNotif:{en:"${advisorName} has been assigned as ${role} for your project.",lo:"${advisorName} ໄດ້ຖືກມອບໝາຍໃຫ້ເປັນ ${role} ສໍາລັບໂຄງການຂອງທ່ານ."},committeeAssignment:{en:"Committee Assignment",lo:"ການມອບໝາຍຄະນະກຳມະການ"},committeeAssignmentStatus:{en:"Committee Assignment Status",lo:"ສະຖານະການກຳນົດຄະນະກຳມະການ"},committeeAssignments:{en:"Committee Assignments",lo:"ການກຳນົດຄະນະກຳມະການ"},committeeAvg:{en:"Committee Avg.",lo:"ຄະແນນສະເລ່ຍກຳມະການ"},committeeManagement:{en:"Committee & Schedule Management",lo:"ການຈັດການຄະນະກຳມະການ ແລະ ຕາຕະລາງ"},committeeManagementDescription:{en:"Assign committees and schedule defense dates for all projects.",lo:"ກຳນົດຄະນະກຳມະການ ແລະ ຈັດຕາຕະລາງປ້ອງກັນສຳລັບທຸກໂຄງການ."},committeeRubric:{en:"Committee Rubric",lo:"ຮູບແບບການໃຫ້ຄະແນນຂອງຄະນະກຳມະການ"},committeeScoreSubmitted:{en:"Committee score submitted!",lo:"ສົ່ງຄະແນນຄະນະກຳມະການສຳເລັດແລ້ວ!"},committeeSchedulingStatus:{en:"Committee & Scheduling Status",lo:"ສະຖານະຄະນະກຳມະການ ແລະ ການຈັດຕາຕະລາງ"},committeeUpdatedToast:{en:"Committee for ${projectId} updated to ${advisorName}.",lo:"ຄະນະກຳມະການສຳລັບ ${projectId} ຖືກອັບເດດເປັນ ${advisorName}."},committees:{en:"Committees",lo:"ຄະນະກຳມະການ"},communicationLog:{en:"Communication Log",lo:"ບັນທຶກການສື່ສານ"},confirm:{en:"Confirm",lo:"ຢືນຢັນ"},confirmApproval:{en:"Confirm Approval",lo:"ຢືນຢັນການອະນຸມັດ"},confirmDelete:{en:"Confirm Delete",lo:"ຢືນຢັນການລຶບ"},confirmDemotion:{en:"Confirm Demotion",lo:"ຢືນຢັນການປົດຕຳແໜ່ງ"},confirmNewPassword:{en:"Confirm New Password",lo:"ຢືນຢັນລະຫັດຜ່ານໃໝ່"},confirmPassword:{en:"Confirm Password",lo:"ຢືນຢັນລະຫັດຜ່ານ"},confirmRejection:{en:"Confirm Rejection",lo:"ຢືນຢັນການປະຕິເສດ"},confirmStartNewYear:{en:"Confirm Start New Year",lo:"ຢືນຢັນການເລີ່ມສົກຮຽນໃໝ່"},confirmTransfer:{en:"Confirm Transfer",lo:"ຢືນຢັນການຍ້າຍ"},configuration:{en:"Configuration",lo:"ການຕັ້ງຄ່າ"},consultOffice:{en:"Please consult the academic office for your final grade.",lo:"ກະລຸນາຕິດຕໍ່ຫ້ອງການວິຊາການສຳລັບຄະແນນສຸດທ້າຍຂອງທ່ານ."},content:{en:"Content",lo:"ເນື້ອໃນ"},contentMarkdown:{en:"Content (Markdown Supported)",lo:"ເນື້ອໃນ (ຮອງຮັບ Markdown)"},contentRequired:{en:"Content is required.",lo:"ຕ້ອງປ້ອນເນື້ອໃນ."},count:{en:"Count",lo:"ຈຳນວນ"},couldNotGenerateAnalysis:{en:"Could not generate analysis.",lo:"ບໍ່ສາມາດສ້າງການວິເຄາະໄດ້."},couldNotAnalyzeMentoring:{en:"Could not analyze mentoring style.",lo:"ບໍ່ສາມາດວິເຄາະຮູບແບບການໃຫ້ຄຳປຶກສາໄດ້."},couldNotAnalyzeSkills:{en:"Could not analyze skills.",lo:"ບໍ່ສາມາດວິເຄາະທັກສະໄດ້."},couldNotFindProject:{en:"Could not find project ${projectId}.",lo:"ບໍ່ພົບໂຄງການ ${projectId}."},couldNotGenerateMessage:{en:"Could not generate AI message.",lo:"ບໍ່ສາມາດສ້າງຂໍ້ຄວາມ AI ໄດ້."},couldNotReadUnsupportedFile:{en:"Could not read file. Only plain text files are supported for analysis.",lo:"ບໍ່ສາມາດອ່ານໄຟລ໌ໄດ້. ຮອງຮັບສະເພາະໄຟລ໌ຂໍ້ຄວາມທຳມະດາສຳລັບການວິເຄາະ."},couldNotRetrieveFile:{en:"Could not retrieve file data.",lo:"ບໍ່ສາມາດດຶງຂໍ້ມູນໄຟລ໌ໄດ້."},couldNotSuggestCareers:{en:"Could not suggest career paths.",lo:"ບໍ່ສາມາດແນະນຳເສັ້ນທາງອາຊີບໄດ້."},coreData:{en:"Core Data",lo:"ຂໍ້ມູນຫຼັກ"},correctedText:{en:"Corrected Text",lo:"ຂໍ້ຄວາມທີ່ແກ້ໄຂແລ້ວ"},currentPassword:{en:"Current Password",lo:"ລະຫັດຜ່ານປັດຈຸບັນ"},currentPasswordMismatch:{en:"Current password does not match.",lo:"ລະຫັດຜ່ານປັດຈຸບັນບໍ່ຖືກຕ້ອງ."},dashboard:{en:"Dashboard",lo:"ກະດານຂ່າວ"},dataIntegrity:{en:"Data Integrity",lo:"ຄວາມສົມບູນຂອງຂໍ້ມູນ"},date:{en:"Date",lo:"ວັນທີ"},day:{en:"day",lo:"ມື້"},days:{en:"days",lo:"ມື້"},durationInDays:{en:"Duration (days)",lo:"ໄລຍະເວລາ (ມື້)"},daysPositiveError:{en:"Days must be a positive number.",lo:"ຈຳນວນມື້ຕ້ອງເປັນເລກບວກ."},deadlineReminder:{en:"Deadline Reminder",lo:"ແຈ້ງເຕືອນກຳນົດສົ່ງ"},declining:{en:"Declining",lo:"ຫຼຸດລົງ"},defense:{en:"Defense",lo:"ການປ້ອງກັນ"},defenseDate:{en:"Defense Date",lo:"ວັນທີປ້ອງກັນ"},defenseRoom:{en:"Defense Room",lo:"ຫ້ອງປ້ອງກັນ"},defenseSchedule:{en:"Defense Schedule",lo:"ຕາຕະລາງປ້ອງກັນ"},defenseScheduleCommittee:{en:"Defense Schedule & Committee",lo:"ຕາຕະລາງປ້ອງກັນ ແລະ ຄະນະກຳມະການ"},defenseScheduledNotif:{en:"Defense for project ${projectId} is scheduled for ${date} at ${time} in ${room}.",lo:"ການປ້ອງກັນໂຄງການ ${projectId} ໄດ້ຖືກກຳນົດເວລາໃນວັນທີ ${date} ເວລາ ${time} ທີ່ຫ້ອງ ${room}."},defenseScheduleUpdatedMessage:{en:"The defense schedule for project ${projectId} has been updated to: ${scheduleText}.",lo:"ຕາຕະລາງປ້ອງກັນຂອງໂຄງການ ${projectId} ຖືກອັບເດດເປັນ: ${scheduleText}."},defenseScheduleUpdatedTitle:{en:"Defense Schedule Updated",lo:"ຕາຕະລາງປ້ອງກັນອັບເດດ"},defenseScheduling:{en:"Defense Scheduling",lo:"ການຈັດຕາຕະລາງປ້ອງກັນ"},defenseSchedulingStatus:{en:"Defense Scheduling Status",lo:"ສະຖານະການຈັດຕາຕະລາງປ້ອງກັນ"},defenseSettingsConfigured:{en:"Defense Settings Configured",lo:"ຕັ້ງຄ່າການປ້ອງກັນແລ້ວ"},defenseSettingsConfigured_error:{en:"Defense settings are incomplete. A start date, time slots, and at least one room are required for auto-scheduling.",lo:"ການຕັ້ງຄ່າການປ້ອງກັນບໍ່ສົມບູນ. ຕ້ອງມີວັນທີເລີ່ມ, ຊ່ວງເວລາ, ແລະ ຢ່າງໜ້ອຍໜຶ່ງຫ້ອງສຳລັບການຈັດຕາຕະລາງອັດຕະໂນມັດ."},defenseSettingsConfigured_ok:{en:"Defense start date, time slots, and rooms are configured.",lo:"ຕັ້ງຄ່າວັນທີເລີ່ມປ້ອງກັນ, ຊ່ວງເວລາ, ແລະ ຫ້ອງແລ້ວ."},defenseSettingsSaved:{en:"Defense settings saved successfully!",lo:"ບັນທຶກການຕັ້ງຄ່າການປ້ອງກັນສຳເລັດແລ້ວ!"},defenseTime:{en:"Defense Time",lo:"ເວລາປ້ອງກັນ"},defenseTimeSlots:{en:"Defense Time Slots",lo:"ຊ່ວງເວລາປ້ອງກັນ"},delete:{en:"Delete",lo:"ລຶບ"},deleteAdvisorMessage:{en:"Are you sure you want to delete ${name}? This cannot be undone.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບ ${name}? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້."},deleteAdvisorTitle:{en:"Delete Advisor?",lo:"ລຶບທີ່ປຶກສາ?"},deleteAnnouncementMessage:{en:'Are you sure you want to delete the announcement "${title}"?',lo:'ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບປະກາດ "${title}"?'},deleteAnnouncementTitle:{en:"Delete Announcement?",lo:"ລຶບປະກາດ?"},deleteMajorMessage:{en:'Are you sure you want to delete "${majorName}"? This action cannot be undone.',lo:'ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບ "${majorName}"? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້.'},deleteMajorTitle:{en:"Delete Major?",lo:"ລຶບສາຂາວິຊາ?"},deleteProjectConfirmation:{en:'Are you sure you want to delete the project "${topic}"? This action cannot be undone.',lo:'ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບໂຄງການ "${topic}"? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້.'},deleteProjectTitle:{en:"Delete Project?",lo:"ລຶບໂຄງການ?"},deleteSchedule:{en:"Delete Schedule",lo:"ລຶບຕາຕະລາງ"},deleteStudentMessage:{en:"Are you sure you want to delete ${name}? This cannot be undone.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບ ${name}? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້."},deleteStudentTitle:{en:"Delete Student?",lo:"ລຶບນັກສຶກສາ?"},deleteTemplateMessage:{en:'Are you sure you want to delete the template "${templateName}"?',lo:'ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບແມ່ແບບ "${templateName}"?'},deleteTemplateTitle:{en:"Delete Template?",lo:"ລຶບແມ່ແບບ?"},demoteDeptAdminMessage:{en:"Are you sure you want to demote ${name} to a regular Advisor role?",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການປົດຕຳແໜ່ງ ${name} ເປັນທີ່ປຶກສາທຳມະດາ?"},demoteDeptAdminTitle:{en:"Demote Department Admin?",lo:"ປົດຕຳແໜ່ງຜູ້ບໍລິຫານພະແນກ?"},demoteToAdvisor:{en:"Demote to Advisor",lo:"ປົດເປັນທີ່ປຶກສາ"},demotedSuccess:{en:"${name} has been demoted to an Advisor.",lo:"${name} ໄດ້ຖືກປົດເປັນທີ່ປຶກສາແລ້ວ."},departmentDashboardDescription:{en:"An overview of activity in your managed departments.",lo:"ພາບລວມຂອງກິດຈະກຳໃນພະແນກທີ່ທ່ານຈັດການ."},departmentDashboardTitle:{en:"${managedMajorNames} Department Dashboard",lo:"ກະດານຂ່າວພະແນກ ${managedMajorNames}"},deptAdmin:{en:"Dept. Admin",lo:"ຜູ້ບໍລິຫານພະແນກ"},deptAdminAddedSuccess:{en:"Department Admin added successfully!",lo:"ເພີ່ມຜູ້ບໍລິຫານພະແນກສຳເລັດແລ້ວ!"},deptAdminPrefix:{en:"Dept. Admin: ",lo:"ຜູ້ບໍລິຫານພະແນກ: "},deptAdminUpdatedSuccess:{en:"Department Admin updated successfully!",lo:"ອັບເດດຜູ້ບໍລິຫານພະແນກສຳເລັດແລ້ວ!"},deptAdmins:{en:"Dept. Admins",lo:"ຜູ້ບໍລິຫານພະແນກ"},description:{en:"Description",lo:"ລາຍລະອຽດ"},descriptionRequired:{en:"Description is required.",lo:"ຕ້ອງປ້ອນລາຍລະອຽດ."},detailView:{en:"Detail View",lo:"ມຸມມອງລະອຽດ"},details:{en:"Details",lo:"ລາຍລະອຽດ"},dontChange:{en:"-- Don't Change --",lo:"-- ບໍ່ປ່ຽນແປງ --"},download:{en:"Download",lo:"ດາວໂຫຼດ"},downloadAll:{en:"Download All (${count})",lo:"ດາວໂຫຼດທັງໝົດ (${count})"},due:{en:"Due:",lo:"ກຳນົດສົ່ງ:"},dueLabel:{en:"Due",lo:"ກຳນົດສົ່ງ"},duplicateMinScoreError:{en:"Duplicate minimum score of ${score} found. Scores must be unique.",lo:"ພົບຄະແນນຂັ້ນຕໍ່າ ${score} ຊໍ້າ. ຄະແນນຕ້ອງບໍ່ຊໍ້າກັນ."},edit:{en:"Edit",lo:"ແກ້ໄຂ"},editAction:{en:"Edit",lo:"ແກ້ໄຂ"},editAdvisor:{en:"Edit Advisor",lo:"ແກ້ໄຂຂໍ້ມູນທີ່ປຶກສາ"},editAnnouncement:{en:"Edit Announcement",lo:"ແກ້ໄຂປະກາດ"},editAndResubmit:{en:"Edit & Resubmit",lo:"ແກ້ໄຂ ແລະ ສົ່ງໃໝ່"},editClassroom:{en:"Edit Classroom",lo:"ແກ້ໄຂຫ້ອງຮຽນ"},editMajor:{en:"Edit Major",lo:"ແກ້ໄຂສາຂາວິຊາ"},editProject:{en:"Edit Project",lo:"ແກ້ໄຂໂຄງການ"},editScore:{en:"Edit Score",lo:"ແກ້ໄຂຄະແນນ"},editStudent:{en:"Edit Student",lo:"ແກ້ໄຂຂໍ້ມູນນັກສຶກສາ"},editTemplate:{en:"Edit Template",lo:"ແກ້ໄຂແມ່ແບບ"},editView:{en:"Edit View",lo:"ມຸມມອງແກ້ໄຂ"},email:{en:"Email",lo:"ອີເມວ"},emailExample:{en:"e.g., student.name@university.edu",lo:"ຕົວຢ່າງ: student.name@university.edu"},emailRequired:{en:"Email is required.",lo:"ຕ້ອງປ້ອນອີເມວ."},emailUpdatedSuccess:{en:"Email updated successfully!",lo:"ອັບເດດອີເມວສຳເລັດແລ້ວ!"},engTopicPlaceholder:{en:"Enter topic in English",lo:"ປ້ອນຫົວຂໍ້ເປັນພາສາອັງກິດ"},engTopicRequired:{en:"English topic is required.",lo:"ຕ້ອງປ້ອນຫົວຂໍ້ພາສາອັງກິດ."},engTopicSuggested:{en:"English topic suggested.",lo:"ແນະນຳຫົວຂໍ້ພາສາອັງກິດ."},enterAction:{en:"Enter",lo:"ປ້ອນ"},enterCommentPlaceholder:{en:"Enter comment (optional for approval, required for rejection)",lo:"ປ້ອນຄຳເຫັນ (ຖ້າມີສຳລັບອະນຸມັດ, ຈຳເປັນສຳລັບປະຕິເສດ)"},enterScore:{en:"Enter Score",lo:"ປ້ອນຄະແນນ"},enterTopicToCheck:{en:"Please enter a topic to check.",lo:"ກະລຸນາປ້ອນຫົວຂໍ້ທີ່ຈະກວດສອບ."},error:{en:"Error",lo:"ຜິດພາດ"},executiveSummary:{en:"Executive Summary",lo:"ສະຫຼຸບໂດຍຫຍໍ້"},excelExportSuccess:{en:"Excel report exported successfully!",lo:"ສົ່ງອອກລາຍງານ Excel ສຳເລັດແລ້ວ!"},export:{en:"Export",lo:"ສົ່ງອອກ"},exportCsv:{en:"Export CSV",lo:"ສົ່ງອອກ CSV"},exportExcel:{en:"Export Excel",lo:"ສົ່ງອອກ Excel"},exportGrades:{en:"Export Grades",lo:"ສົ່ງອອກຄະແນນ"},exportGradesSuccessToast:{en:"Final grades report exported successfully!",lo:"ສົ່ງອອກລາຍງານຄະແນນສຸດທ້າຍສຳເລັດແລ້ວ!"},exportMergedSuccessToast:{en:"Merged schedule report exported successfully!",lo:"ສົ່ງອອກລາຍງານຕາຕະລາງລວມສຳເລັດແລ້ວ!"},exportReport:{en:"Export Report",lo:"ສົ່ງອອກລາຍງານ"},exportScoringReport:{en:"Export Scoring Report",lo:"ສົ່ງອອກລາຍງານຄະແນນ"},exportScoringSuccess:{en:"Scoring report exported successfully!",lo:"ສົ່ງອອກລາຍງານຄະແນນສຳເລັດແລ້ວ!"},exportToExcel:{en:"Export to Excel",lo:"ສົ່ງອອກໄປ Excel"},female:{en:"Female",lo:"ຍິງ"},feedback:{en:"Feedback",lo:"ຄຳຕິຊົມ"},feedbackGeneratedSuccess:{en:"Feedback generated successfully!",lo:"ສ້າງຄຳຕິຊົມສຳເລັດແລ້ວ!"},feedbackGenerationFailed:{en:"Failed to generate feedback.",lo:"ສ້າງຄຳຕິຊົມຜິດພາດ."},feedbackLabel:{en:"Feedback",lo:"ຄຳຕິຊົມ"},feedbackPlaceholder:{en:"Provide constructive feedback here...",lo:"ໃຫ້ຄຳຕິຊົມທີ່ສ້າງສັນທີ່ນີ້..."},fileIsEmpty:{en:"File is empty, nothing to analyze.",lo:"ໄຟລ໌ວ່າງເປົ່າ, ບໍ່ມີຫຍັງໃຫ້ວິເຄາະ."},fileNotFound:{en:"File data not found in local storage.",lo:"ບໍ່ພົບຂໍ້ມູນໄຟລ໌ໃນບ່ອນເກັບຂໍ້ມູນ"},fileNotFoundError:{en:"File not found or has been removed.",lo:"ບໍ່ພົບໄຟລ໌ ຫຼື ໄຟລ໌ຖືກລົບໄປແລ້ວ."},fileName:{en:"File Name",lo:"ຊື່ໄຟລ໌"},fileParseError:{en:"Error parsing the file. Please check the format.",lo:"ຜິດພາດໃນການອ່ານໄຟລ໌. ກະລຸນາກວດສອບຮູບແບບ."},fileSizeLimitError:{en:"File size cannot exceed 2MB.",lo:"ຂະໜາດໄຟລ໌ຕ້ອງບໍ່ເກີນ 2MB."},finalDocumentSubmittedMessage:{en:"The ${type} document for project ${projectId} has been submitted.",lo:"ເອກະສານ ${type} ສໍາລັບໂຄງການ ${projectId} ໄດ້ຖືກສົ່ງແລ້ວ."},finalDocumentSubmittedTitle:{en:"Final Document Submitted",lo:"ສົ່ງເອກະສານສຸດທ້າຍ"},finalGrade:{en:"Final Grade",lo:"ຄະແນນສຸດທ້າຍ"},finalGrades:{en:"Final Grades",lo:"ຄະແນນສຸດທ້າຍ"},finalGradesDescription:{en:"Review and assign final letter grades to completed projects.",lo:"ກວດສອບ ແລະ ມອບໝາຍຄະແນນຕົວອັກສອນສຸດທ້າຍໃຫ້ໂຄງການທີ່ສຳເລັດແລ້ວ."},finalGradesReports:{en:"Final Grades & Reports",lo:"ຄະແນນສຸດທ້າຍ ແລະ ລາຍງານ"},finalProjectDashboard:{en:"Final Project Dashboard",lo:"ກະດານຂ່າວໂຄງການຈົບຊັ້ນ"},finalProjectManagement:{en:"Final Project Management",lo:"ລະບົບຈັດການໂຄງການຈົບຊັ້ນ"},finalReport:{en:"Final Report",lo:"ລາຍງານສຸດທ້າຍ"},finalScore:{en:"Final Score",lo:"ຄະແນນລວມ"},finalScoreAndGrade:{en:"Final Score & Grade",lo:"ຄະແນນລວມ ແລະ ເກຣດ"},finalSubmissions:{en:"Final Submissions",lo:"ການສົ່ງສຸດທ້າຍ"},finish:{en:"Finish",lo:"ສິ້ນສຸດ"},forEvaluator:{en:"for evaluator: {name}",lo:"ສຳລັບຜູ້ປະເມີນ: {name}"},foundSecurityIssues:{en:"Found ${count} potential security issues.",lo:"ພົບ ${count} ບັນຫາຄວາມປອດໄພທີ່ອາດຈະເກີດຂຶ້ນ."},foundSystemHealthIssues:{en:"Found ${count} potential system health issues.",lo:"ພົບ ${count} ບັນຫາສຸຂະພາບລະບົບທີ່ອາດຈະເກີດຂຶ້ນ."},fri:{en:"Fri",lo:"ສຸກ"},full:{en:"Full",lo:"ເຕັມ"},fullName:{en:"Full Name",lo:"ຊື່ ແລະ ນາມສະກຸນ"},fullyAssigned:{en:"Fully Assigned",lo:"ກຳນົດຄົບຖ້ວນ"},gender:{en:"Gender",lo:"ເພດ"},general:{en:"General",lo:"ທົ່ວໄປ"},generalScheduleSettings:{en:"General Schedule Settings",lo:"ການຕັ້ງຄ່າຕາຕະລາງທົ່ວໄປ"},generate:{en:"Generate",lo:"ສ້າງ"},generateReport:{en:"Generate Report",lo:"ສ້າງລາຍງານ"},generateReportFirst:{en:"Generate a report before exporting.",lo:"ກະລຸນາສ້າງລາຍງານກ່ອນສົ່ງອອກ."},generateReportWithDataFirst:{en:"Generate a report with data first.",lo:"ກະລຸນາສ້າງລາຍງານທີ່ມີຂໍ້ມູນກ່ອນ."},generateRubric:{en:"Generate Rubric",lo:"ສ້າງຮູບແບບການໃຫ້ຄະແນນ"},generateWithAI:{en:"Generate with AI",lo:"ສ້າງດ້ວຍ AI"},generatedRubricPreview:{en:"Generated Rubric Preview",lo:"ຕົວຢ່າງຮູບແບບການໃຫ້ຄະແນນທີ່ສ້າງ"},generating:{en:"Generating...",lo:"ກຳລັງສ້າງ..."},getStartedRegister:{en:"Get started by registering a new project.",lo:"ເລີ່ມຕົ້ນໂດຍການລົງທະບຽນໂຄງການໃໝ່."},gradeBoundaries:{en:"Grade Boundaries",lo:"ຂອບເຂດຄະແນນ"},gradeBoundariesDescription:{en:"Set the minimum score required for each letter grade.",lo:"ກຳນົດຄະແນນຂັ້ນຕໍ່າທີ່ຕ້ອງການສຳລັບແຕ່ລະເກຣດ."},gradeDistribution:{en:"Grade Distribution",lo:"ການກະຈາຍຄະແນນ"},gradeSavedToast:{en:"Grade saved for project ${projectId}.",lo:"ບັນທຶກຄະແນນສຳລັບໂຄງການ ${projectId} ແລ້ວ."},gradeScoreError:{en:"The minimum score for grade ${grade} must be between 0 and 100.",lo:"ຄະແນນຂັ້ນຕໍ່າສຳລັບເກຣດ ${grade} ຕ້ອງຢູ່ລະຫວ່າງ 0 ແລະ 100."},groupMembers:{en:"Group Members",lo:"ສະມາຊິກກຸ່ມ"},health:{en:"Health",lo:"ສຸຂະພາບ"},highSimilarity:{en:"High Similarity",lo:"ຄວາມຄ້າຍຄືສູງ"},hour:{en:"hour",lo:"ຊົ່ວໂມງ"},hours:{en:"hours",lo:"ຊົ່ວໂມງ"},id:{en:"ID",lo:"ລະຫັດ"},identifiedStyle:{en:"Identified Style",lo:"ຮູບແບບທີ່ລະບຸ"},improving:{en:"Improving",lo:"ດີຂຶ້ນ"},import:{en:"Import",lo:"ນຳເຂົ້າ"},importSchedulesSuccessToast:{en:"${count} schedules imported/updated successfully!",lo:"ນຳເຂົ້າ/ອັບເດດ ${count} ຕາຕະລາງສຳເລັດແລ້ວ!"},inRoom:{en:"in Room",lo:"ໃນຫ້ອງ"},incomplete:{en:"Incomplete",lo:"ບໍ່ສົມບູນ"},information:{en:"Information",lo:"ຂໍ້ມູນ"},inputRequired:{en:"This field is required.",lo:"ຊ່ອງຂໍ້ມູນນີ້ຈຳເປັນ."},interestRequiredError:{en:"Please enter an area of interest.",lo:"ກະລຸນາປ້ອນຂະແໜງທີ່ສົນໃຈ."},invalidAdminPassword:{en:"Invalid admin password.",lo:"ລະຫັດຜ່ານຜູ້ດູແລບໍ່ຖືກຕ້ອງ."},invalidEmail:{en:"Invalid email address.",lo:"ທີ່ຢູ່ອີເມວບໍ່ຖືກຕ້ອງ."},invalidIdFormat:{en:"Invalid ID format. Ex: 155N1234/21",lo:"ຮູບແບບ ID ບໍ່ຖືກຕ້ອງ. ຕົວຢ່າງ: 155N1234/21"},invalidMajorSelected:{en:"Invalid major selected.",lo:"ເລືອກສາຂາວິຊາບໍ່ຖືກຕ້ອງ."},invalidStaffCredentials:{en:"Invalid staff name or password.",lo:"ຊື່ພະນັກງານ ຫຼື ລະຫັດຜ່ານບໍ່ຖືກຕ້ອງ."},invalidStudentCredentials:{en:"Invalid student ID or password.",lo:"ລະຫັດນັກສຶກສາ ຫຼື ລະຫັດຜ່ານບໍ່ຖືກຕ້ອງ."},invalidTel:{en:"Invalid telephone number.",lo:"ເບີໂທລະສັບບໍ່ຖືກຕ້ອງ."},justNow:{en:"just now",lo:"ເມື່ອ​ກີ້​ນີ້"},laoTopicPlaceholder:{en:"Enter topic in Lao",lo:"ປ້ອນຫົວຂໍ້ເປັນພາສາລາວ"},laoTopicRequired:{en:"Lao topic is required.",lo:"ຕ້ອງປ້ອນຫົວຂໍ້ພາສາລາວ."},laoTopicSuggested:{en:"Lao topic suggested.",lo:"ແນະນຳຫົວຂໍ້ພາສາລາວ."},lastActivity:{en:"Last Activity",lo:"ກິດຈະກຳຫຼ້າສຸດ"},leaveBlankNoChange:{en:"Leave blank for no change",lo:"ປະໄວ້ຫວ່າງເພື່ອບໍ່ປ່ຽນແປງ"},libraryDatabase:{en:"Library Database",lo:"ຖານຂໍ້ມູນຫໍສະໝຸດ"},loading:{en:"Loading...",lo:"ກຳລັງໂຫຼດ..."},logout:{en:"Logout",lo:"ອອກຈາກລະບົບ"},lowSimilarity:{en:"Low Similarity",lo:"ຄວາມຄ້າຍຄືຕໍ່າ"},mainAdvisor:{en:"Main Advisor",lo:"ທີ່ປຶກສາຫຼັກ"},mainCommittee:{en:"Main Committee",lo:"ກຳມະການຫຼັກ"},mainCommitteeQuota:{en:"Main Committee Quota",lo:"ໂຄຕ້າກຳມະການຫຼັກ"},major:{en:"Major",lo:"ສາຂາວິຊາ"},majorAverage:{en:"Major Average",lo:"ຄະແນນສະເລ່ຍຂອງສາຂາ"},majorExportSuccess:{en:"Majors report exported successfully!",lo:"ສົ່ງອອກລາຍງານສາຂາວິຊາສຳເລັດແລ້ວ!"},majorId:{en:"Major ID",lo:"ລະຫັດສາຂາວິຊາ"},majorInUseClassroomError:{en:'Cannot delete "${majorName}" because it is used by classrooms.',lo:'ບໍ່ສາມາດລຶບ "${majorName}" ໄດ້ ເນື່ອງຈາກມັນຖືກໃຊ້ໂດຍຫ້ອງຮຽນ.'},majorInUseStudentsError:{en:'Cannot delete "${majorName}" because students are assigned to it.',lo:'ບໍ່ສາມາດລຶບ "${majorName}" ໄດ້ ເນື່ອງຈາກມີນັກສຶກສາຖືກກຳນົດໃຫ້ຢູ່ໃນສາຂານີ້.'},majorName:{en:"Major Name",lo:"ຊື່ສາຂາວິຊາ"},majorNameExists:{en:"This major name already exists.",lo:"ຊື່ສາຂາວິຊານີ້ມີຢູ່ແລ້ວ."},majorNameRequired:{en:"Major name is required.",lo:"ຕ້ອງປ້ອນຊື່ສາຂາວິຊາ."},majorRequired:{en:"Major is required.",lo:"ຕ້ອງປ້ອນສາຂາວິຊາ."},majors:{en:"Majors",lo:"ສາຂາວິຊາ"},majorsExist:{en:"Majors Exist",lo:"ມີສາຂາວິຊາ"},majorsExist_error:{en:"No majors have been added. This is a critical issue.",lo:"ຍັງບໍ່ມີການເພີ່ມສາຂາວິຊາ. ນີ້ແມ່ນບັນຫາທີ່ສຳຄັນ."},majorsExist_ok:{en:"Majors have been configured.",lo:"ຕັ້ງຄ່າສາຂາວິຊາແລ້ວ."},majorAddedSuccess:{en:"Major added successfully!",lo:"ເພີ່ມສາຂາວິຊາສຳເລັດແລ້ວ!"},majorDeletedSuccess:{en:"Major deleted successfully!",lo:"ລຶບສາຂາວິຊາສຳເລັດແລ້ວ!"},majorUpdatedSuccess:{en:"Major updated successfully!",lo:"ອັບເດດສາຂາວິຊາສຳເລັດແລ້ວ!"},male:{en:"Male",lo:"ຊາຍ"},manageAdvisors:{en:"Manage Advisors",lo:"ຈັດການອາຈານທີ່ປຶກສາ"},manageAllStudents:{en:"Manage All Students",lo:"ຈັດການນັກສຶກສາທັງໝົດ"},manageAnnouncements:{en:"Manage Announcements",lo:"ຈັດການປະກາດ"},manageAnnouncementsDescription:{en:"Create, edit, and view announcements for all users.",lo:"ສ້າງ, ແກ້ໄຂ, ແລະ ເບິ່ງປະກາດສຳລັບຜູ້ໃຊ້ທັງໝົດ."},manageClassrooms:{en:"Manage Classrooms",lo:"ຈັດການຫ້ອງຮຽນ"},manageClassroomsDescription:{en:"Define classrooms and assign them to majors.",lo:"ກຳນົດຫ້ອງຮຽນ ແລະ ມອບໝາຍໃຫ້ສາຂາວິຊາ."},manageDeptAdmins:{en:"Manage Dept. Admins",lo:"ຈັດການຜູ້ບໍລິຫານພະແນກ"},manageDeptAdminsDescription:{en:"Promote or demote advisors to Department Admin roles.",lo:"ສົ່ງເສີມ ຫຼື ປົດທີ່ປຶກສາໃຫ້ເປັນຜູ້ບໍລິຫານພະແນກ."},manageMajors:{en:"Manage Majors",lo:"ຈັດການສາຂາວິຊາ"},manageMajorsDescription:{en:"Add, edit, or remove academic majors.",lo:"ເພີ່ມ, ແກ້ໄຂ, ຫຼື ລົບສາຂາວິຊາ."},manageMilestoneTemplates:{en:"Manage Milestone Templates",lo:"ຈັດການແມ່ແບບ Milestone"},manageMilestoneTemplatesDescription:{en:"Create and manage reusable templates for project milestones.",lo:"ສ້າງ ແລະ ຈັດການແມ່ແບບທີ່ໃຊ້ซ้ำໄດ້ສຳລັບ milestones ໂຄງການ."},manageScoringTitle:{en:"Manage Scoring",lo:"ຈັດການການໃຫ້ຄະແນນ"},manageScoringDescription:{en:"Review scores from all evaluators for each project.",lo:"ກວດສອບຄະແນນຈາກຜູ້ປະເມີນທຸກຄົນສຳລັບແຕ່ລະໂຄງການ."},managedMajors:{en:"Managed Majors",lo:"ສາຂາວິຊາທີ່ຈັດການ"},markdownHelp:{en:"Basic Markdown is supported: **bold**, *italic*.",lo:"ຮອງຮັບ Markdown ພື້ນຖານ: **ໂຕໜາ**, *ໂຕອຽງ*."},markAllAsRead:{en:"Mark all as read",lo:"ໝາຍທັງໝົດວ່າອ່ານແລ້ວ"},match:{en:"Match",lo:"ຄ້າຍຄື"},matchPercentage:{en:"{percentage}% match",lo:"ຄ້າຍຄື {percentage}%"},maxScoreLabel:{en:"Max",lo:"ສູງສຸດ"},message:{en:"Message",lo:"ຂໍ້ຄວາມ"},messageCannotBeEmpty:{en:"Message cannot be empty.",lo:"ຂໍ້ຄວາມຕ້ອງບໍ່ຫວ່າງເປົ່າ."},messageSentTo:{en:"Message will be sent to the following groups:",lo:"ຂໍ້ຄວາມຈະຖືກສົ່ງໄປຫາກຸ່ມຕໍ່ໄປນີ້:"},messageWillBeSentTo:{en:"Message will be sent to ${count} project groups.",lo:"ຂໍ້ຄວາມຈະຖືກສົ່ງໄປຫາ ${count} ກຸ່ມໂຄງການ."},milestone:{en:"Milestone",lo:"Milestone"},milestoneDue:{en:"Milestone Due",lo:"Milestone Due"},milestoneDueDateUpdated:{en:"Milestone Due Date Updated",lo:"ອັບເດດກຳນົດສົ່ງ Milestone"},milestoneDueDateUpdatedMessage:{en:'The due date for milestone "${milestoneName}" has been changed to ${newDate}.',lo:'ກຳນົດສົ່ງສຳລັບ milestone "${milestoneName}" ໄດ້ຖືກປ່ຽນເປັນ ${newDate}.'},milestoneProgress:{en:"Milestone Progress",lo:"ຄວາມຄືບໜ້າ Milestone"},milestoneReviews:{en:"Milestone Reviews",lo:"ການກວດສອບ Milestone"},milestoneStatusUpdateMessage:{en:'The status for milestone "${milestoneName}" has been updated to ${status}.',lo:'ສະຖານະຂອງ milestone "${milestoneName}" ຖືກອັບເດດເປັນ ${status}.'},milestoneStatusUpdateTitle:{en:"Milestone Status: ${status}",lo:"ສະຖານະ Milestone: ${status}"},milestoneSubmittedMessage:{en:'Milestone "${milestoneName}" for project ${projectId} has been submitted for review.',lo:'Milestone "${milestoneName}" ສໍາລັບໂຄງການ ${projectId} ໄດ້ຖືກສົ່ງເພື່ອກວດສອບແລ້ວ.'},milestoneSubmittedTitle:{en:"Milestone Submitted",lo:"ສົ່ງ Milestone ແລ້ວ"},milestoneTasks:{en:"Milestone Tasks",lo:"ໜ້າວຽກ Milestone"},milestoneTemplate:{en:"Milestone Template",lo:"ແມ່ແບບ Milestone"},milestoneTemplates:{en:"Milestone Templates",lo:"ແມ່ແບບ Milestone"},milestoneTemplatesExist:{en:"Milestone Templates Exist",lo:"ມີແມ່ແບບ Milestone"},milestoneTemplatesExist_warning:{en:"No milestone templates are configured. This will prevent project approvals.",lo:"ຍັງບໍ່ມີການຕັ້ງຄ່າແມ່ແບບ milestone. ຈະເຮັດໃຫ້ການອະນຸມັດໂຄງການບໍ່ໄດ້."},milestoneTemplatesExist_ok:{en:"At least one milestone template is configured.",lo:"ມີການຕັ້ງຄ່າຢ່າງໜ້ອຍໜຶ່ງແມ່ແບບ milestone ແລ້ວ."},milestoneUnit:{en:"Milestone Due Date",lo:"ກຳນົດສົ່ງ Milestone"},milestones:{en:"Milestones",lo:"Milestones"},milestonesToReview:{en:"Milestones to Review",lo:"Milestones ທີ່ຕ້ອງກວດ"},minScore:{en:"Min. Score",lo:"ຄະແນນຂັ້ນຕໍ່າ"},minute:{en:"minute",lo:"ນາທີ"},minutes:{en:"minutes",lo:"ນາທີ"},mixed:{en:"Mixed",lo:"ປະສົມ"},moderateSimilarity:{en:"Moderate Similarity",lo:"ຄວາມຄ້າຍຄືປານກາງ"},mon:{en:"Mon",lo:"ຈັນ"},monk:{en:"Monk",lo:"ພະສົງ"},month:{en:"month",lo:"ເດືອນ"},months:{en:"months",lo:"ເດືອນ"},monthlySubmissions:{en:"Monthly Project Submissions",lo:"ການສົ່ງໂຄງການປະຈຳເດືອນ"},more:{en:"more",lo:"ເພີ່ມເຕີມ"},mostLoadedAdvisors:{en:"Most Loaded Advisors",lo:"ທີ່ປຶກສາທີ່ມີພາລະວຽກຫຼາຍທີ່ສຸດ"},mostSimilarTo:{en:"Most similar to",lo:"ຄ້າຍຄືທີ່ສຸດກັບ"},myProfile:{en:"My Profile",lo:"ໂປຣໄຟລ໌ຂອງຂ້ອຍ"},myProject:{en:"My Project",lo:"ໂຄງການຂອງຂ້ອຍ"},na:{en:"N/A",lo:"ບໍ່ມີ"},name:{en:"Name",lo:"ຊື່"},nameRequired:{en:"Name is required.",lo:"ຕ້ອງປ້ອນຊື່."},nameUpdatedSuccess:{en:"Name updated successfully!",lo:"ອັບເດດຊື່ສຳເລັດແລ້ວ!"},needsAttention:{en:"Needs Attention",lo:"ຕ້ອງເອົາໃຈໃສ່"},needsReview:{en:"Needs Review",lo:"ຕ້ອງກວດສອບ"},neutral:{en:"Neutral",lo:"ເປັນກາງ"},newAdvisor:{en:"New Advisor",lo:"ທີ່ປຶກສາໃໝ່"},newAnnouncement:{en:"New Announcement",lo:"ປະກາດໃໝ່"},newPassword:{en:"New Password",lo:"ລະຫັດຜ່ານໃໝ່"},newProjectSubmissionMessage:{en:'A new project "${topic}" has been submitted for your approval.',lo:'ໂຄງການໃໝ່ "${topic}" ໄດ້ຖືກສົ່ງເພື່ອໃຫ້ທ່ານອະນຸມັດ.'},newProjectSubmissionTitle:{en:"New Project Submission",lo:"ການສົ່ງໂຄງການໃໝ່"},newStudent:{en:"New student?",lo:"ນັກສຶກສາໃໝ່?"},newYearConfirmation:{en:"Are you sure you want to start the new academic year ${year}? This will archive the current year's projects and create a clean slate.",lo:"ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການເລີ່ມສົກຮຽນໃໝ່ ${year}? ການກະທຳນີ້ຈະເກັບໂຄງການຂອງປີປັດຈຸບັນ ແລະ ສ້າງພື້ນທີ່ຫວ່າງໃໝ່."},newYearStarted:{en:"New academic year ${year} has been started!",lo:"ສົກຮຽນໃໝ່ ${year} ໄດ້ເລີ່ມຕົ້ນແລ້ວ!"},next:{en:"Next",lo:"ຕໍ່ໄປ"},nextMilestoneDue:{en:"Next Milestone Due",lo:"Milestone ທີ່ຈະມາເຖິງ"},no:{en:"No.",lo:"ລ.ດ"},noActionItems:{en:"No specific action items were identified.",lo:"ບໍ່ພົບລາຍການທີ່ຕ້ອງເຮັດສະເພາະ."},noAdvisor:{en:"No Advisor",lo:"ບໍ່ມີທີ່ປຶກສາ"},noAdvisorsData:{en:'No advisors found. Click "Add Advisor" to begin.',lo:'ບໍ່ພົບຂໍ້ມູນທີ່ປຶກສາ. ກົດ "ເພີ່ມທີ່ປຶກສາ" ເພື່ອເລີ່ມຕົ້ນ.'},noAnnouncements:{en:"No announcements at this time.",lo:"ບໍ່ມີປະກາດໃນເວລານີ້."},noAnnouncementsFound:{en:'No announcements found. Click "${newAnnouncement}" to create one.',lo:'ບໍ່ພົບປະກາດ. ກົດ "${newAnnouncement}" ເພື່ອສ້າງ.'},noApprovedProjects:{en:"No approved projects to analyze.",lo:"ບໍ່ມີໂຄງການທີ່ອະນຸມັດແລ້ວເພື່ອວິເຄາະ."},noAvailableAdvisors:{en:"No available advisors for this major.",lo:"ບໍ່ມີທີ່ປຶກສາຫວ່າງສຳລັບສາຂານີ້."},noChangesForBulkEdit:{en:"No changes were selected for bulk edit.",lo:"ບໍ່ມີການເລືອກການປ່ຽນແປງສຳລັບການແກ້ໄຂຈຳນວນຫຼາຍ."},noChangesSuggested:{en:"AI did not suggest any changes. The document looks good!",lo:"AI ບໍ່ໄດ້ແນະນຳການປ່ຽນແປງໃດໆ. ເອກະສານເບິ່ງຄືວ່າດີແລ້ວ!"},noClassroomsForMajor:{en:"No classrooms for this major",lo:"ບໍ່ມີຫ້ອງຮຽນສຳລັບສາຂານີ້"},noCommitteeAssignments:{en:"You aren't assigned to any defense committees yet.",lo:"ທ່ານຍັງບໍ່ໄດ້ຖືກມອບໝາຍໃຫ້ເປັນຄະນະກຳມະການປ້ອງກັນ."},noDataForFilters:{en:"No data matches the current filters.",lo:"ບໍ່ມີຂໍ້ມູນທີ່ກົງກັບຕົວກອງປັດຈຸບັນ."},noDataForMajorComparison:{en:"Not enough data in your major to make a comparison.",lo:"ຂໍ້ມູນໃນສາຂາວິຊາຂອງທ່ານບໍ່ພຽງພໍທີ່ຈະປຽບທຽບ."},noDataToExport:{en:"There is no data to export.",lo:"ບໍ່ມີຂໍ້ມູນທີ່ຈະສົ່ງອອກ."},noFileToCheck:{en:"No file has been submitted for this milestone to check.",lo:"ບໍ່ມີໄຟລ໌ທີ່ສົ່ງສຳລັບ milestone ນີ້ເພື່ອການກວດສອບ."},noFilesToDownload:{en:"There are no files to download.",lo:"ບໍ່ມີໄຟລ໌ໃຫ້ດາວໂຫຼດ."},noFinalGradesYet:{en:"No final grades have been assigned yet.",lo:"ຍັງບໍ່ມີການມອບໝາຍຄະແນນສຸດທ້າຍ."},noIssuesDetected:{en:"No potential issues detected.",lo:"ບໍ່ພົບບັນຫາທີ່ອາດເກີດຂຶ້ນ."},noMilestonesToReview:{en:"No milestones are currently awaiting your review.",lo:"ບໍ່ມີ milestones ທີ່ກຳລັງລໍຖ້າການກວດສອບຂອງທ່ານ."},noMilestonesYet:{en:"No milestones have been set for this project yet.",lo:"ຍັງບໍ່ມີການກຳນົດ milestones ສຳລັບໂຄງການນີ້."},noNotifications:{en:"You have no notifications.",lo:"ທ່ານບໍ່ມີການແຈ້ງເຕືອນ."},noNotificationsYet:{en:"You don't have any notifications yet.",lo:"ທ່ານຍັງບໍ່ມີການແຈ້ງເຕືອນ."},noPendingProjects:{en:"No pending projects available",lo:"ບໍ່ມີໂຄງການທີ່ລໍຖ້າການອະນຸມັດ"},noPendingProjectsToReview:{en:"No projects are awaiting your review.",lo:"ບໍ່ມີໂຄງການທີ່ກຳລັງລໍຖ້າການກວດສອບຈາກທ່ານ."},noPendingStudents:{en:"No students are awaiting approval.",lo:"ບໍ່ມີນັກສຶກສາທີ່ກຳລັງລໍຖ້າການອະນຸມັດ."},noPostDefenseFiles:{en:"No post-defense files have been submitted yet.",lo:"ຍັງບໍ່ມີການສົ່ງໄຟລ໌ຫຼັງການປ້ອງກັນ."},noPreDefenseFiles:{en:"No pre-defense files have been submitted yet.",lo:"ຍັງບໍ່ມີການສົ່ງໄຟລ໌ກ່ອນການປ້ອງກັນ."},noProjectsAwaitingApproval:{en:"No projects are awaiting approval.",lo:"ບໍ່ມີໂຄງການທີ່ກຳລັງລໍຖ້າການອະນຸມັດ."},noProjectsAvailable:{en:"No projects are available.",lo:"ບໍ່ມີໂຄງການ."},noProjectsForQuery:{en:'No projects found for query "${query}".',lo:'ບໍ່ພົບໂຄງການສຳລັບການຄົ້ນຫາ "${query}".'},noProjectsFound:{en:"No projects found.",lo:"ບໍ່ພົບໂຄງການ."},noProjectsToDisplay:{en:"No projects to display at the moment.",lo:"ບໍ່ມີໂຄງການທີ່ຈະສະແດງໃນເວລານີ້."},noRecentActivity:{en:"No recent activity.",lo:"ບໍ່ມີກິດຈະກຳຫຼ້າສຸດ."},noScoreViewPermission:{en:"You do not have permission to view scores for this project.",lo:"ທ່ານບໍ່ມີສິດເບິ່ງຄະແນນສຳລັບໂຄງການນີ້."},noScoreableProjects:{en:"No projects are ready for scoring yet.",lo:"ຍັງບໍ່ມີໂຄງການທີ່ພ້ອມໃຫ້ຄະແນນ."},noSecurityIssues:{en:"No potential security issues found.",lo:"ບໍ່ພົບຄວາມສ່ຽງດ້ານຄວາມປອດໄພ."},noSignificantMatches:{en:"No significant potential matches found.",lo:"ບໍ່ພົບການຈັບຄູ່ທີ່ສຳຄັນ."},noStudentsClickToAdd:{en:'No students found. Click "Add New Student" to begin.',lo:'ບໍ່ພົບນັກສຶກສາ. ກົດ "ເພີ່ມນັກສຶກສາໃໝ່" ເພື່ອເລີ່ມຕົ້ນ.'},noStudentsForQuery:{en:'No students found for query "${query}".',lo:'ບໍ່ພົບນັກສຶກສາສຳລັບການຄົ້ນຫາ "${query}".'},noSystemHealthIssues:{en:"No system health issues detected.",lo:"ບໍ່ພົບปัญหาสุขภาพระบบ."},noTimelineData:{en:"No approved projects with milestones to display.",lo:"ບໍ່ມີໂຄງການທີ່ອະນຸມັດພ້ອມ milestones ທີ່ຈະສະແດງ"},noTimelineTitle:{en:"No Project Timelines",lo:"ບໍ່ມີເສັ້ນເວລາໂຄງການ"},noUpcomingEvents:{en:"No upcoming events in the next 7 days.",lo:"ບໍ່ມີກິດຈະກຳທີ່ຈະມາເຖິງໃນ 7 ມື້ຂ້າງໜ້າ."},notAssigned:{en:"Not Assigned",lo:"ຍັງບໍ່ໄດ້ກຳນົດ"},notAssignedToProject:{en:"You haven't been assigned to a project yet.",lo:"ທ່ານຍັງບໍ່ໄດ້ຖືກມອບໝາຍໃຫ້ຢູ່ໃນໂຄງການ."},notEnoughData:{en:"Not enough communication data to perform analysis.",lo:"ຂໍ້ມູນການສື່ສານບໍ່ພຽງພໍທີ່ຈະວິເຄາະ."},notEnoughDataToAnalyze:{en:"Not enough data to analyze mentoring style.",lo:"ຂໍ້ມູນບໍ່ພຽງພໍທີ່ຈະວິເຄາະຮູບແບບການໃຫ້ຄຳປຶກສາ."},notScheduled:{en:"Not scheduled",lo:"ຍັງບໍ່ໄດ້ກຳນົດຕາຕະລາງ"},notSpecialized:{en:"Not specialized",lo:"ບໍ່ຊ່ຽວຊານ"},notYetSubmitted:{en:"Not yet submitted.",lo:"ຍັງບໍ່ໄດ້ສົ່ງ."},noteScheduleFormat:{en:"NOTE: Dates must be in YYYY-MM-DD format.",lo:"ໝາຍເຫດ: ວັນທີຕ້ອງເປັນຮູບແບບ ປປປປ-ດດ-ວວ."},notifications:{en:"Notifications",lo:"ການແຈ້ງເຕືອນ"},of:{en:"of",lo:"ຂອງ"},ok:{en:"OK",lo:"ຕົກລົງ"},originalText:{en:"Original Text",lo:"ຂໍ້ຄວາມຕົ້ນສະບັບ"},overallProgress:{en:"Overall Progress",lo:"ຄວາມຄືບໜ້າໂດຍລວມ"},overallSentiment:{en:"Overall Sentiment",lo:"ຄວາມຮູ້ສຶກโดยรวม"},overallSimilarityScore:{en:"Overall Similarity Score",lo:"ຄະແນນຄວາມຄ້າຍຄືກັນໂດຍລວມ"},overdue:{en:"Overdue",lo:"ກາຍກຳນົດ"},overdueMilestone:{en:"Overdue Milestone",lo:"Milestone ກາຍກຳນົດ"},overdueNotice:{en:"Overdue Notice",lo:"ແຈ້ງເຕືອນການກາຍກຳນົດ"},overview:{en:"Overview",lo:"ພາບລວມ"},overloadedAdvisors:{en:"Overloaded Advisors",lo:"ທີ່ປຶກສາທີ່ມີພາລະວຽກເກີນ"},page:{en:"Page",lo:"ໜ້າ"},pageNotFound:{en:"Page Not Found",lo:"ບໍ່ພົບໜ້າ"},partiallyAssigned:{en:"Partially Assigned",lo:"ກຳນົດບາງສ່ວນ"},password:{en:"Password",lo:"ລະຫັດຜ່ານ"},passwordLengthError:{en:"Password must be at least 6 characters long.",lo:"ລະຫັດຜ່ານຕ້ອງມີຢ່າງໜ້ອຍ 6 ຕົວອັກສອນ."},passwordMismatch:{en:"Passwords do not match.",lo:"ລະຫັດຜ່ານບໍ່ກົງກັນ."},passwordUpdatedSuccess:{en:"Password updated successfully!",lo:"ອັບເດດລະຫັດຜ່ານສຳເລັດແລ້ວ!"},pending:{en:"Pending",lo:"ລໍຖ້າ"},pendingProjects:{en:"Pending Projects",lo:"ໂຄງການທີ່ລໍຖ້າ"},pendingProjectsToReview:{en:"Pending Projects to Review",lo:"ໂຄງການທີ່ລໍຖ້າການກວດສອບ"},pendingStudentApprovals:{en:"Pending Student Approvals",lo:"ການອະນຸມັດນັກສຶກສາທີ່ລໍຖ້າ"},pendingStudents:{en:"Pending Students",lo:"ນັກສຶກສາທີ່ລໍຖ້າ"},personalInformation:{en:"Personal Information",lo:"ຂໍ້ມູນສ່ວນຕົວ"},plagiarismCheckFailedToast:{en:"Plagiarism check failed.",lo:"ການກວດສອບການລັກລອບຜົນງານຜິດພາດ."},pleaseAddMajorFirst:{en:"Please add a major first.",lo:"ກະລຸນາເພີ່ມສາຂາວິຊາກ່ອນ."},positive:{en:"Positive",lo:"ບວກ"},postAnnouncement:{en:"Post Announcement",lo:"ປະກາດ"},postDefenseFiles:{en:"Post-Defense Files",lo:"ໄຟລ໌ຫຼັງການປ້ອງກັນ"},postDefenseFilesLabel:{en:"Post-Defense File",lo:"ໄຟລ໌ຫຼັງການປ້ອງກັນ"},postDefenseDescription:{en:"View and download all final reports submitted after defense.",lo:"ເບິ່ງ ແລະ ດາວໂຫຼດລາຍງານສຸດທ້າຍທັງໝົດທີ່ສົ່ງຫຼັງການປ້ອງກັນ."},postDefenseTitle:{en:"Post-Defense Submissions",lo:"ການສົ່ງຫຼັງການປ້ອງກັນ"},postedBy:{en:"Posted by {author}",lo:"ປະກາດໂດຍ {author}"},potentialIssues:{en:"Potential Issues",lo:"ບັນຫາທີ່ອາດເກີດຂຶ້ນ"},potentialMatches:{en:"Potential Matches",lo:"ການຈັບຄູ່ທີ່ອາດເປັນໄປໄດ້"},potentialOverlap:{en:"Potential Topic Overlap",lo:"ຫົວຂໍ້ອາດຊໍ້າຊ້ອນ"},preDefenseFiles:{en:"Pre-Defense Files",lo:"ໄຟລ໌ກ່ອນການປ້ອງກັນ"},preDefenseFilesLabel:{en:"Pre-Defense File",lo:"ໄຟລ໌ກ່ອນການປ້ອງກັນ"},preDefensePresentation:{en:"Pre-Defense Presentation",lo:"ການນຳສະເໜີກ່ອນການປ້ອງກັນ"},preDefenseDescription:{en:"View and download all presentation files submitted before defense.",lo:"ເບິ່ງ ແລະ ດາວໂຫຼດໄຟລ໌ນຳສະເໜີທັງໝົດທີ່ສົ່ງກ່ອນການປ້ອງກັນ."},preDefenseTitle:{en:"Pre-Defense Submissions",lo:"ການສົ່ງກ່ອນການປ້ອງກັນ"},preparingDownload:{en:"Preparing your download... This may take a moment.",lo:"ກຳລັງກະກຽມການດາວໂຫຼດ... ອາດຈະໃຊ້ເວລາຈັກໜ່ອຍ."},preview:{en:"Preview",lo:"ຕົວຢ່າງ"},previewPlaceholder:{en:"Preview will appear here...",lo:"ຕົວຢ່າງຈະປາກົດທີ່ນີ້..."},previous:{en:"Previous",lo:"ກ່ອນໜ້າ"},progress:{en:"Progress",lo:"ຄວາມຄືບໜ້າ"},progressComparison:{en:"Progress Comparison",lo:"ການປຽບທຽບຄວາມຄືບໜ້າ"},project:{en:"Project",lo:"ໂຄງການ"},project1p:{en:"Projects (1p)",lo:"ໂຄງການ (1ຄົນ)"},project2p:{en:"Projects (2p)",lo:"ໂຄງການ (2ຄົນ)"},projectApprovals:{en:"Project Approvals",lo:"ການอนุมัติโครงการ"},projectApproved:{en:"Project approved!",lo:"ໂຄງການອະນຸມັດແລ້ວ!"},projectDeleted:{en:"Project deleted successfully.",lo:"ລຶບໂຄງການສຳເລັດແລ້ວ."},projectDeletedSuccess:{en:"Project deleted successfully!",lo:"ລຶບໂຄງການສຳເລັດແລ້ວ!"},projectId:{en:"Project ID",lo:"ລະຫັດໂຄງການ"},projectLabel:{en:"Project",lo:"ໂຄງການ"},projectRegisteredSuccess:{en:"Project registered successfully! Awaiting advisor approval.",lo:"ລົງທະບຽນໂຄງການສຳເລັດແລ້ວ! ກະລຸນາລໍຖ້າການອະນຸມັດຈາກທີ່ປຶກສາ."},projectRejected:{en:"Project rejected.",lo:"ໂຄງການຖືກປະຕິເສດ."},projectReport:{en:"Project-based Report",lo:"ລາຍງານຕາມໂຄງການ"},projectStatus:{en:"Project Status",lo:"ສະຖານະໂຄງການ"},projectStatusBreakdown:{en:"Project Status Breakdown",lo:"ລາຍລະອຽດສະຖານະໂຄງການ"},projectStatusOverview:{en:"Project Status Overview",lo:"ພາບລວມສະຖານະໂຄງການ"},projectStatusUpdateMessage:{en:'Your project "${topic}" has been ${status}. Comment: ${comment}',lo:'ໂຄງການຂອງທ່ານ "${topic}" ໄດ້ຖືກ ${status}. ຄຳເຫັນ: ${comment}'},projectStatusUpdateTitle:{en:"Project Status: ${status}",lo:"ສະຖານະໂຄງການ: ${status}"},projectSupervision:{en:"Project Supervision",lo:"ການດູແລໂຄງການ"},projectsSupervising:{en:"Projects Supervising",lo:"โครงการที่กำลังดูแล"},projectTimelineTitle:{en:"Project Timeline",lo:"ເສັ້ນເວລາໂຄງການ"},projectTransferred:{en:"Project transferred to ${advisorName}.",lo:"ໂຄງການຖືກຍ້າຍໄປທີ່ ${advisorName}."},projectTransferredMessage:{en:"Project ${projectId} has been transferred to your supervision by ${newAdvisorName}.",lo:"ໂຄງການ ${projectId} ໄດ້ຖືກຍ້າຍມາຢູ່ໃນການດູແລຂອງທ່ານໂດຍ ${newAdvisorName}."},projectTransferredSuccessfully:{en:"Project successfully transferred to ${advisorName}.",lo:"ຍ້າຍໂຄງການໄປທີ່ ${advisorName} ສຳເລັດແລ້ວ."},projectTransferredTitle:{en:"Project Transferred",lo:"ໂຄງການຖືກຍ້າຍ"},projectUpdatedSuccess:{en:"Project updated successfully!",lo:"ອັບເດດໂຄງການສຳເລັດແລ້ວ!"},projects:{en:"Projects",lo:"ໂຄງການ"},projects1p:{en:"1p",lo:"1ຄົນ"},projects2p:{en:"2p",lo:"2ຄົນ"},projectsToReview:{en:"Projects to Review",lo:"ໂຄງການທີ່ຕ້ອງກວດ"},projectsWithoutMilestones:{en:"Projects without Milestones",lo:"ໂຄງການທີ່ບໍ່ມີ Milestones"},projectsWithoutMilestones_ok:{en:"All approved projects have milestone templates applied.",lo:"ໂຄງການທີ່ອະນຸມັດແລ້ວທັງໝົດມີແມ່ແບບ milestone."},projectsWithoutMilestones_warning:{en:"{count} approved projects are missing milestones. This may halt student progress.",lo:"ໂຄງການທີ່ອະນຸມັດແລ້ວ {count} ໂຄງການບໍ່ມີ milestones. ອາດຈະເຮັດໃຫ້ຄວາມຄືບໜ້າຂອງນັກສຶກສາຢຸດສະງັກ."},prompt:{en:"Prompt",lo:"ພ້ອມ"},quota:{en:"Quota",lo:"ໂຄຕ້າ"},quotaFull:{en:"Quota full",lo:"ໂຄຕ້າເຕັມ"},readinessCheckDescription:{en:"This tool checks for common configuration and data issues that might prevent the system from functioning correctly during the academic year. 'Error' items are critical and should be fixed.",lo:'ເຄື່ອງມືນີ້ກວດສອບການຕັ້ງຄ່າ ແລະ ບັນຫາຂໍ້ມູນທົ່ວไปທີ່ອາດຈະຂັດຂວາງການເຮັດວຽກຂອງລະບົບ. ລາຍການ "ຜິດພາດ" ແມ່ນສຳຄັນ ແລະ ຄວນຖືກແກ້ໄຂ.'},readinessConfiguration:{en:"Configuration",lo:"ການຕັ້ງຄ່າ"},readinessCoreData:{en:"Core Data",lo:"ຂໍ້ມູນຫຼັກ"},readinessDataIntegrity:{en:"Data Integrity",lo:"ຄວາມສົມບູນຂອງຂໍ້ມູນ"},reason:{en:"Reason",lo:"ເຫດຜົນ"},reasonForTransferRequired:{en:"A reason is required for the transfer.",lo:"ຕ້ອງມີເຫດຜົນສຳລັບການຍ້າຍ."},recentActivity:{en:"Recent Activity",lo:"ກິດຈະກຳຫຼ້າສຸດ"},recentAnnouncements:{en:"Recent Announcements",lo:"ປະກາດຫຼ້າສຸດ"},recentlyUpdatedProjects:{en:"Recently Updated Projects",lo:"ໂຄງການທີ່ອັບເດດຫຼ້າສຸດ"},register:{en:"Register",lo:"ລົງທະບຽນ"},registerHere:{en:"Register here",lo:"ລົງທະບຽນທີ່ນີ້"},registerNewProject:{en:"Register New Project",lo:"ລົງທະບຽນໂຄງການໃໝ່"},registerProject:{en:"Register Project",lo:"ລົງທະບຽນໂຄງການ"},registerYourProject:{en:"Register Your Project",lo:"ລົງທະບຽນໂຄງການຂອງທ່ານ"},registrationSuccess:{en:"Registration successful! Your account is pending approval.",lo:"ລົງທະບຽນສຳເລັດ! ບັນຊີຂອງທ່ານກຳລັງລໍຖ້າການອະນຸມັດ."},reject:{en:"Reject",lo:"ປະຕິເສດ"},rejectProject:{en:"Reject Project",lo:"ປະຕິເສດໂຄງການ"},rejectProjectPrompt:{en:'You are about to reject the project "{projectName}". A comment is required.',lo:'ທ່ານກຳລັງຈະປະຕິເສດໂຄງການ "{projectName}". ຕ້ອງມີຄຳເຫັນ.'},rejected:{en:"Rejected",lo:"ປະຕິເສດ"},removeTask:{en:"Remove task",lo:"ລົບໜ້າວຽກ"},reorder:{en:"Reorder",lo:"ຈັດລຽງໃໝ່"},replace:{en:"Replace",lo:"ແທນທີ່"},reporting:{en:"Reporting",lo:"ການລາຍງານ"},reportingDescription:{en:"Generate and export custom reports based on system data.",lo:"ສ້າງ ແລະ ສົ່ງອອກລາຍງານແບບກຳນົດເອງໂດຍອີງໃສ່ຂໍ້ມູນລະບົບ."},reportingInsights:{en:"Reporting & Insights",lo:"ການລາຍງານ ແລະ ຄວາມເຂົ້າໃຈ"},reportGeneratedSuccess:{en:"Report generated with ${count} entries.",lo:"ສ້າງລາຍງານສຳເລັດ ມີ ${count} ລາຍການ."},reportType:{en:"Report Type",lo:"ປະເພດລາຍງານ"},requestRevision:{en:"Request Revision",lo:"ຂໍແກ້ໄຂ"},requestRevisionButton:{en:"Request Revision",lo:"ຂໍແກ້ໄຂ"},requestRevisionPrompt:{en:'Provide constructive feedback for milestone "{milestoneName}" explaining what needs to be revised.',lo:'ໃຫ້ຄຳຕິຊົມທີ່ສ້າງສັນສຳລັບ milestone "{milestoneName}" ໂດຍອະທິບາຍສິ່ງທີ່ຕ້ອງແກ້ໄຂ.'},requestRevisionTitle:{en:"Request Revision",lo:"ຂໍແກ້ໄຂ"},requiresRevision:{en:"Requires Revision",lo:"ຕ້ອງແກ້ໄຂ"},rerunChecks:{en:"Re-run Checks",lo:"ກວດສອບໃໝ່"},resourceHub:{en:"Resource Hub",lo:"ສູນຊັບພະຍາກອນ"},result:{en:"Result",lo:"ຜົນລັບ"},results:{en:"results",lo:"ຜົນລັບ"},review:{en:"Review",lo:"ກວດສອບ"},reviewQueue:{en:"Review Queue",lo:"ລາຍການທີ່ຕ້ອງກວດ"},reviewSubmission:{en:"Review Submission",lo:"ກວດສອບການສົ່ງ"},role:{en:"Role",lo:"ບົດບາດ"},roomAssignments:{en:"Room Assignments",lo:"ການກຳນົດຫ້ອງ"},roomAssignmentsHelp:{en:"Define available defense rooms and restrict them to specific majors if needed.",lo:"ກຳນົດຫ້ອງປ້ອງກັນທີ່ມີຢູ່ ແລະ ຈຳກັດໃຫ້ສະເພາະສາຂາວິຊາທີ່ຕ້ອງການໄດ້."},rubricGeneratedSuccess:{en:"Rubric generated successfully!",lo:"ສ້າງຮູບແບບການໃຫ້ຄະແນນສຳເລັດແລ້ວ!"},rubricGenerationFailed:{en:"Failed to generate rubric.",lo:"ສ້າງຮູບແບບການໃຫ້ຄະແນນຜິດພາດ."},rubricGeneratorDescription:{en:'Describe the kind of rubric you want to create (e.g., "for a final presentation"). AI will generate criteria that sum to your total score of {targetScore}.',lo:'ອະທິບາຍປະເພດຂອງຮູບແບບການໃຫ້ຄະແນນທີ່ທ່ານຕ້ອງການ (ຕົວຢ່າງ: "ສຳລັບການນຳສະເໜີສຸດທ້າຍ"). AI ຈະສ້າງເກນທີ່ລວມກັນເທົ່າກັບຄະແນນລວມຂອງທ່ານ {targetScore}.'},runAnalysis:{en:"Run Analysis",lo:"ດຳເນີນການວິເຄາະ"},runAnalysisToSeeResults:{en:"Run analysis to see results.",lo:"ດຳເນີນການວິເຄາະເພື່ອເບິ່ງຜົນ."},runAutoScheduler:{en:"Run Auto-Scheduler",lo:"ດຳເນີນການຈັດຕາຕະລາງອັດຕະໂນມັດ"},runSecurityAudit:{en:"Run Security Audit",lo:"ດຳເນີນການກວດສອບຄວາມປອດໄພ"},runSkillsAnalysisFirst:{en:"Please run skills analysis first.",lo:"ກະລຸນາດຳເນີນການວິເຄາະທັກສະກ່ອນ."},sat:{en:"Sat",lo:"ເສົາ"},saveAdvisor:{en:"Save Advisor",lo:"ບັນທຶກທີ່ປຶກສາ"},saveChanges:{en:"Save Changes",lo:"ບັນທຶກການປ່ຽນແປງ"},saveClassroom:{en:"Save Classroom",lo:"ບັນທຶກຫ້ອງຮຽນ"},saveMajor:{en:"Save Major",lo:"ບັນທຶກສາຂາວິຊາ"},saveScore:{en:"Save Score",lo:"ບັນທຶກຄະແນນ"},saveSchedule:{en:"Save Schedule",lo:"ບັນທຶກຕາຕະລາງ"},saveSettings:{en:"Save Settings",lo:"ບັນທຶກການຕັ້ງຄ່າ"},saveStudent:{en:"Save Student",lo:"ບັນທຶກນັກສຶກສາ"},saveTemplate:{en:"Save Template",lo:"ບັນທຶກແມ່ແບບ"},schedules:{en:"Schedules",lo:"ຕາຕະລາງ"},scheduleClearedToast:{en:"Schedule for project ${scheduleToDelete} has been cleared.",lo:"ຕາຕະລາງສຳລັບໂຄງການ ${scheduleToDelete} ຖືກລ້າງແລ້ວ."},scheduleTemplateDownloaded:{en:"Schedule import template downloaded.",lo:"ດາວໂຫຼດແມ່ແບບການນຳເຂົ້າຕາຕະລາງສຳເລັດ."},scheduleUpdatedToast:{en:"Schedule for ${projectId} has been saved.",lo:"ບັນທຶກຕາຕະລາງສຳລັບ ${projectId} ແລ້ວ."},scheduled:{en:"Scheduled",lo:"ຈັດຕາຕະລາງແລ້ວ"},scheduledDefenses:{en:"Scheduled Defenses",lo:"ການປ້ອງກັນທີ່ຈັດຕາຕະລາງແລ້ວ"},score:{en:"Score",lo:"ຄະແນນ"},scoreBoundaryError:{en:"Score must be between 0 and {max}.",lo:"ຄະແນນຕ້ອງຢູ່ລະຫວ່າງ 0 ແລະ {max}."},scoreNow:{en:"Score Now",lo:"ໃຫ້ຄະແນນ"},scoreSavedSuccess:{en:"Score saved successfully!",lo:"ບັນທຶກຄະແນນສຳເລັດແລ້ວ!"},scoresConfidential:{en:"Scores are confidential and will be released at a later date.",lo:"ຄະແນນເປັນຄວາມລັບ ແລະ ຈະປະກາດໃນພາຍຫຼັງ."},scoringDetails:{en:"Scoring Details",lo:"ລາຍລະອຽດການໃຫ້ຄະແນນ"},scoringGrading:{en:"Scoring & Grading",lo:"ການໃຫ້ຄະແນນ ແລະ ເກຣດ"},scoringNav:{en:"Scoring",lo:"ການໃຫ້ຄະແນນ"},scoringReport:{en:"Scoring Report",lo:"ລາຍງານຄະແນນ"},scoringSettings:{en:"Scoring Settings",lo:"ການຕັ້ງຄ່າການໃຫ້ຄະແນນ"},scoringSettingsConfigured:{en:"Scoring Settings Configured",lo:"ຕັ້ງຄ່າການໃຫ້ຄະແນນແລ້ວ"},scoringSettingsConfigured_error:{en:"Scoring settings are incomplete. Grade boundaries and rubrics for both advisors and committees must be defined.",lo:"ການຕັ້ງຄ່າການໃຫ້ຄະແນນບໍ່ສົມບູນ. ຕ້ອງກຳນົດຂອບເຂດຄະແນນ ແລະ ຮູບແບບການໃຫ້ຄະແນນສຳລັບທີ່ປຶກສາ ແລະ ຄະນະກຳມະການ."},scoringSettingsConfigured_ok:{en:"Grade boundaries and scoring rubrics are fully configured.",lo:"ຕັ້ງຄ່າຂອບເຂດຄະແນນ ແລະ ຮູບແບບການໃຫ້ຄະແນນສຳເລັດແລ້ວ."},searchByAdvisor:{en:"Search by advisor name...",lo:"ຄົ້ນຫາຕາມຊື່ທີ່ປຶກສາ..."},searchByClassroom:{en:"Search by classroom name...",lo:"ຄົ້ນຫາຕາມຊື່ຫ້ອງຮຽນ..."},searchByDeptAdmin:{en:"Search by department admin name...",lo:"ຄົ້ນຫາຕາມຊື່ຜູ້ບໍລິຫານພະແນກ..."},searchByIdNameEmail:{en:"Search by ID, name, or email...",lo:"ຄົ້ນຫາຕາມ ID, ຊື່, ຫຼື ອີເມວ..."},searchByIdTopicAdvisor:{en:"Search by project ID, topic, or advisor...",lo:"ຄົ້ນຫາຕາມລະຫັດໂຄງການ, ຫົວຂໍ້, ຫຼື ທີ່ປຶກສາ..."},searchByIdTopicStudent:{en:"Search by ID, topic, or student...",lo:"ຄົ້ນຫາຕາມ ID, ຫົວຂໍ້, ຫຼື ນັກສຶກສາ..."},searchByMajor:{en:"Search by major name or abbreviation...",lo:"ຄົ້ນຫາຕາມຊື່ສາຂາ ຫຼື ຕົວຫຍໍ້..."},searchByTemplate:{en:"Search by template name or description...",lo:"ຄົ້ນຫາຕາມຊື່ແມ່ແບບ ຫຼື ລາຍລະອຽດ..."},searchSubmissionsPlaceholder:{en:"Search by project ID, student, advisor...",lo:"ຄົ້ນຫາຕາມລະຫັດໂຄງການ, ນັກສຶກສາ, ທີ່ປຶກສາ..."},secondCommittee:{en:"2nd Committee",lo:"ກຳມະການ 2"},secondCommitteeQuota:{en:"2nd Committee Quota",lo:"ໂຄຕ້າກຳມະການ 2"},security:{en:"Security",lo:"ຄວາມປອດໄພ"},securityAudit:{en:"Security Audit",lo:"ກວດສອບຄວາມປອດໄພ"},securityAuditDescription:{en:"Run an AI-powered scan to detect weak passwords, inappropriate content, or suspicious activity.",lo:"ດຳເນີນການສະແກນທີ່ຂັບເຄື່ອນດ້ວຍ AI ເພື່ອກວດຈັບລະຫັດຜ່ານທີ່ອ່ອນແອ, ເນື້ອຫາທີ່ບໍ່ເໝາະສົມ, ຫຼື ກິດຈະກຳທີ່ໜ້າສົງໄສ."},securityAuditFailed:{en:"Security audit failed.",lo:"การตรวจสอบความปลอดภัยล้มเหลว."},securityAuditTitle:{en:"AI Security Audit",lo:"ການກວດສອບຄວາມປອດໄພ AI"},selectAProject:{en:"-- Select a Project --",lo:"-- ເລືອກໂຄງການ --"},selectAnAdvisor:{en:"-- Select an Advisor --",lo:"-- ເລືອກທີ່ປຶກສາ --"},selectAdvisor:{en:"Select Advisor",lo:"ເລືອກທີ່ປຶກສາ"},selectAdvisorToTransfer:{en:"Please select an advisor to transfer to.",lo:"ກະລຸນາເລືອກທີ່ປຶກສາທີ່ຈະຍ້າຍໄປ."},selectMilestoneTemplate:{en:"Please select a milestone template.",lo:"ກະລຸນາເລືອກແມ່ແບບ milestone."},selectPendingProject:{en:"Select a pending project",lo:"ເລືອກໂຄງການທີ່ລໍຖ້າການອະນຸມັດ"},selectProjectFirst:{en:"Please select a project first.",lo:"กรุณาเลือกโครงการก่อน"},selectRoom:{en:"-- Select Room --",lo:"-- ເລືອກຫ້ອງ --"},selectStudent1:{en:"-- Select Student 1 --",lo:"-- ເລືອກນັກສຶກສາ 1 --"},selectStudent2:{en:"-- Select Student 2 --",lo:"-- ເລືອກນັກສຶກສາ 2 --"},selectTime:{en:"-- Select Time --",lo:"-- ເລືອກເວລາ --"},sendBulkMessage:{en:"Send Bulk Message",lo:"ส่งข้อความจำนวนมาก"},sendMessage:{en:"Send Message",lo:"ສົ່ງຂໍ້ຄວາມ"},sentimentTrend:{en:"Sentiment Trend",lo:"แนวโน้มความรู้สึก"},setStartDateFirst:{en:"Please set a Start Defense Date first.",lo:"ກະລຸນາຕັ້ງວັນທີເລີ່ມປ້ອງກັນກ່ອນ."},settings:{en:"Settings",lo:"ການຕັ້ງຄ່າ"},settingsDescription:{en:"Configure system-wide settings for the academic year.",lo:"ຕັ້ງຄ່າລະບົບທົ່ວໄປສຳລັບສົກຮຽນ."},showing:{en:"Showing",lo:"ສະແດງ"},showOnlySimilar:{en:"Show only projects with potential similarity issues",lo:"ສະແດງສະເພາະໂຄງການທີ່ມີບັນຫາຄວາມຄ້າຍຄື"},signIn:{en:"Sign In",lo:"ເຂົ້າສູ່ລະບົບ"},signInToContinue:{en:"Sign in to continue",lo:"ເຂົ້າສູ່ລະບົບເພື່ອສືບຕໍ່"},signedInAs:{en:"Signed in as",lo:"ເຂົ້າສູ່ລະບົບໃນນາມ"},similar:{en:"similar",lo:"คล้ายกัน"},similarTo:{en:"similar to",lo:"ຄ້າຍຄືກັບ"},similarity:{en:"Similarity",lo:"ຄວາມຄ້າຍຄື"},similarityCheckError:{en:"Similarity check failed.",lo:"ການກວດສອບຄວາມຄ້າຍຄືລົ້ມເຫຼວ."},similarityCheckFailed:{en:"AI similarity check failed.",lo:"ການກວດສອບຄວາມຄ້າຍຄື AI ລົ້ມເຫຼວ."},similarityCheckerDescription:{en:"Manually check a new project topic against all existing projects in the system to gauge potential overlap before registration.",lo:"ກວດສອບຫົວຂໍ້ໂຄງການໃໝ່ດ້ວຍຕົນເອງກັບໂຄງການທີ່ມີຢູ່ທັງໝົດໃນລະບົບເພື່ອປະເມີນຄວາມຊໍ້າຊ້ອນກ່ອນການລົງທະບຽນ."},similarityCheckerTitle:{en:"Topic Similarity Checker",lo:"ເຄື່ອງກວດສອບຄວາມຄ້າຍຄືຂອງຫົວຂໍ້"},smartProfile:{en:"Smart Profile",lo:"ໂປຣໄຟລ໌ອັດສະລິຍະ"},stable:{en:"Stable",lo:"ຄົງທີ່"},staff:{en:"Staff",lo:"ພະນັກງານ"},staffNamePlaceholder:{en:"Staff Name or ID",lo:"ຊື່ ຫຼື ລະຫັດພະນັກງານ"},startDefenseDate:{en:"Start Defense Date",lo:"ວັນທີເລີ່ມປ້ອງກັນ"},startNewYear:{en:"Start New Year",lo:"ເລີ່ມສົກຮຽນໃໝ່"},stationaryAssignments:{en:"Stationary Advisor Assignments",lo:"ການກຳນົດທີ່ປຶກສາປະຈຳຫ້ອງ"},stationaryAssignmentsHelp:{en:"Assign specific advisors to always be in certain rooms during defenses (e.g., department head).",lo:"ກຳນົດທີ່ປຶກສາສະເພາະໃຫ້ຢູ່ປະຈຳຫ້ອງສະເໝີລະຫວ່າງການປ້ອງກັນ (ເຊັ່ນ: ຫົວໜ້າພາກວິຊາ)."},status:{en:"Status",lo:"ສະຖານະ"},statusHistory:{en:"Status History",lo:"ປະຫວັດສະຖານະ"},statusLabel:{en:"Status",lo:"ສະຖານະ"},storageLimitReached:{en:"Storage limit reached. Could not save file.",lo:"ພື້ນທີ່ເກັບຂໍ້ມູນເຕັມ. ບໍ່ສາມາດບັນທຶກໄຟລ໌ໄດ້."},strengths:{en:"Strengths",lo:"ຈຸດແຂງ"},student:{en:"Student",lo:"ນັກສຶກສາ"},studentAddedSuccess:{en:"Student added successfully!",lo:"ເພີ່ມນັກສຶກສາສຳເລັດແລ້ວ!"},studentDashboardDescription:{en:"Here's an overview of your project's progress and important updates.",lo:"ນີ້ແມ່ນພາບລວມຂອງຄວາມຄືບໜ້າຂອງໂຄງການ ແລະ ການອັບເດດທີ່ສຳຄັນ."},studentDashboardTitle:{en:"Your Project Dashboard",lo:"ກະດານຂ່າວໂຄງການຂອງທ່ານ"},studentDeletedSuccess:{en:"Student deleted successfully!",lo:"ລຶບນັກສຶກສາສຳເລັດແລ້ວ!"},studentEngagement:{en:"Student Engagement",lo:"ການມີສ່ວນຮ່ວມຂອງນັກສຶກສາ"},studentExportSuccess:{en:"Students report exported successfully!",lo:"ສົ່ງອອກລາຍງານນັກສຶກສາສຳເລັດແລ້ວ!"},studentId:{en:"Student ID",lo:"ລະຫັດນັກສຶກສາ"},studentIdExample:{en:"e.g., 155N1234/21",lo:"ຕົວຢ່າງ: 155N1234/21"},studentIdExists:{en:"A student with this ID already exists.",lo:"ມີນັກສຶກສາທີ່ມີ ID ນີ້ຢູ່ແລ້ວ."},studentIdPlaceholder:{en:"Student ID",lo:"ລະຫັດນັກສຶກສາ"},studentIdRequired:{en:"Student ID is required.",lo:"ຕ້ອງປ້ອນລະຫັດນັກສຶກສາ."},studentName:{en:"Student Name",lo:"ຊື່ນັກສຶກສາ"},studentRegistration:{en:"Student Registration",lo:"ການລົງທະບຽນນັກສຶກສາ"},studentReport:{en:"Student-based Report",lo:"ລາຍງານຕາມນັກສຶກສາ"},studentUpdatedSuccess:{en:"Student updated successfully!",lo:"ອັບເດດນັກສຶກສາສຳເລັດແລ້ວ!"},student1:{en:"Student 1",lo:"ນັກສຶກສາ 1"},student1Required:{en:"Student 1 must be selected.",lo:"ຕ້ອງເລືອກນັກສຶກສາ 1."},student2:{en:"Student 2",lo:"ນັກສຶກສາ 2"},student2Required:{en:"Student 2 must be selected.",lo:"ຕ້ອງເລືອກນັກສຶກສາ 2."},students:{en:"Students",lo:"ນັກສຶກສາ"},studentsCannotBeSame:{en:"Student 1 and Student 2 cannot be the same.",lo:"ນັກສຶກສາ 1 ແລະ 2 ຕ້ອງບໍ່ແມ່ນຄົນດຽວກັນ."},studentsDescription:{en:"View, register, and manage all students in the system.",lo:"ເບິ່ງ, ລົງທະບຽນ, ແລະ ຈັດການນັກສຶກສາທັງໝົດໃນລະບົບ."},studentsOnly:{en:"Students Only",lo:"ສະເພາະນັກສຶກສາ"},studentsWithoutProjects:{en:"Students without Projects",lo:"ນັກສຶກສາທີ່ບໍ່ມີໂຄງການ"},studentsWithoutProjects_ok:{en:"All approved students are assigned to projects.",lo:"ນັກສຶກສາທີ່ອະນຸມັດແລ້ວທັງໝົດຖືກກຳນົດໃຫ້ຢູ່ໃນໂຄງການ."},studentsWithoutProjects_warning:{en:"{count} approved students are not yet assigned to any project.",lo:"ນັກສຶກສາທີ່ອະນຸມັດແລ້ວ {count} ຄົນຍັງບໍ່ໄດ້ຖືກກຳນົດໃຫ້ຢູ່ໃນໂຄງການ."},studentsUpdatedSuccess:{en:"${count} students updated successfully.",lo:"ອັບເດດນັກສຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},studentsDeletedSuccess:{en:"${count} students deleted successfully.",lo:"ລຶບນັກສຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},studentsImportedSuccess:{en:"${count} students imported successfully.",lo:"ນຳເຂົ້າທີ່ປຶກສາ ${count} ຄົນສຳເລັດແລ້ວ."},submit:{en:"Submit",lo:"ສົ່ງ"},submitted:{en:"Submitted",lo:"ສົ່ງແລ້ວ"},submittedLabel:{en:"Submitted",lo:"ສົ່ງແລ້ວ"},submitting:{en:"Submitting...",lo:"ກຳລັງສົ່ງ..."},submissionStatusUpdateMessage:{en:"Your ${type} submission status has been updated to ${status}.",lo:"ສະຖານະການສົ່ງ ${type} ຂອງທ່ານຖືກອັບເດດເປັນ ${status}."},submissionStatusUpdateTitle:{en:"Submission Status: ${status}",lo:"ສະຖານະການສົ່ງ: ${status}"},submissions:{en:"Submissions",lo:"ການສົ່ງ"},success:{en:"Success",lo:"ສຳເລັດ"},suggestWithAI:{en:"Suggest with AI",lo:"ແນະນຳດ້ວຍ AI"},suggestAdvisors:{en:"Suggest Advisors",lo:"แนะนำที่ปรึกษา"},suggestedText:{en:"Suggested Text",lo:"ຂໍ້ຄວາມທີ່ແນະນຳ"},suggestions:{en:"Suggestions",lo:"ຄຳແນະນຳ"},summary:{en:"Summary",lo:"ສະຫຼຸບ"},summaryOfImprovements:{en:"Summary of Improvements",lo:"ສະຫຼຸບການປັບປຸງ"},sun:{en:"Sun",lo:"ອາທິດ"},supervisingProjects:{en:"Supervising Projects",lo:"ໂຄງການທີ່ດູແລ"},supervisingQuota:{en:"Supervising Quota",lo:"ໂຄຕ້າການດູແລ"},surname:{en:"Surname",lo:"ນາມສະກຸນ"},surnameRequired:{en:"Surname is required.",lo:"ຕ້ອງປ້ອນນາມສະກຸນ."},switchView:{en:"Switch View",lo:"ປ່ຽນມຸມມອງ"},switchToDarkMode:{en:"Switch to dark mode",lo:"ປ່ຽນເປັນໂໝດກາງຄືນ"},switchToEnglish:{en:"Switch to English",lo:"ປ່ຽນເປັນພາສາອັງກິດ"},switchToLightMode:{en:"Switch to light mode",lo:"ປ່ຽນເປັນໂໝດກາງເວັນ"},switchToLao:{en:"Switch to Lao",lo:"ປ່ຽນເປັນພາສາລາວ"},switchedToView:{en:"Switched to ${role} view.",lo:"ປ່ຽນເປັນມຸມມອງ ${role}."},systemHealthCheck:{en:"System Health Check",lo:"ກວດສອບສຸຂະພາບລະບົບ"},systemHealthCheckDescription:{en:"Run an AI-powered diagnostic to find potential issues like overloaded advisors, stale projects, or unassigned students.",lo:"ດຳເນີນການກວດສອບທີ່ຂັບເຄື່ອນດ້ວຍ AI ເພື່ອຊອກຫາບັນຫາທີ່ອາດເກີດຂຶ້ນເຊັ່ນ: ທີ່ປຶກສາພາລະວຽກເກີນ, ໂຄງການທີ່ບໍ່ເຄື່ອນໄຫວ, ຫຼື ນັກສຶກສາທີ່ບໍ່ມີໂຄງການ."},systemHealthCheckTitle:{en:"AI System Health Check",lo:"ການກວດສອບສຸຂະພາບລະບົບ AI"},systemHealthAnalysisFailed:{en:"System health analysis failed.",lo:"ການວິເຄາະສຸຂະພາບລະບົບລົ້ມເຫຼວ."},systemTools:{en:"System Tools",lo:"ເຄື່ອງມືລະບົບ"},taskName:{en:"Task Name",lo:"ຊື່ໜ້າວຽກ"},taskNameRequired:{en:"Task name is required.",lo:"ຕ້ອງປ້ອນຊື່ໜ້າວຽກ."},tasks:{en:"Tasks",lo:"ໜ້າວຽກ"},telExample:{en:"e.g., 020 5555 1234",lo:"ຕົວຢ່າງ: 020 5555 1234"},telRequired:{en:"Telephone is required.",lo:"ຕ້ອງປ້ອນເບີໂທ."},telephone:{en:"Telephone",lo:"ເບີໂທ"},telUpdatedSuccess:{en:"Telephone updated successfully!",lo:"ອັບເດດເບີໂທສຳເລັດແລ້ວ!"},template:{en:"Template",lo:"ແມ່ແບບ"},templateAddedSuccess:{en:"Template added successfully!",lo:"ເພີ່ມແມ່ແບບສຳເລັດແລ້ວ!"},templateDeletedSuccess:{en:"Template deleted successfully!",lo:"ລຶບແມ່ແບບສຳເລັດແລ້ວ!"},templateName:{en:"Template Name",lo:"ຊື່ແມ່ແບບ"},templateNameExists:{en:"A template with this name already exists.",lo:"ມີແມ່ແບບທີ່ມີຊື່ນີ້ຢູ່ແລ້ວ."},templateNameRequired:{en:"Template name is required.",lo:"ຕ້ອງປ້ອນຊື່ແມ່ແບບ."},templateUpdatedSuccess:{en:"Template updated successfully!",lo:"ອັບເດດແມ່ແບບສຳເລັດແລ້ວ!"},templates:{en:"Templates",lo:"ແມ່ແບບ"},thirdCommittee:{en:"3rd Committee",lo:"ກຳມະການ 3"},thirdCommitteeQuota:{en:"3rd Committee Quota",lo:"ໂຄຕ້າກຳມະການ 3"},thu:{en:"Thu",lo:"ພະຫັດ"},timeline:{en:"Timeline",lo:"ເສັ້ນເວລາ"},timeSlotsHelp:{en:"Comma-separated time slots, e.g., 09:00-10:00, 10:15-11:15",lo:"ຊ່ວງເວລາທີ່ຂັ້ນດ້ວຍຈຸດ, ຕົວຢ່າງ: 09:00-10:00, 10:15-11:15"},timezone:{en:"Timezone",lo:"ເຂດເວລາ"},timezoneHelp:{en:"Select the timezone for all scheduled events.",lo:"ເລືອກເຂດເວລາສຳລັບກິດຈະກຳທີ່ຈັດຕາຕະລາງທັງໝົດ."},title:{en:"Title",lo:"ຫົວຂໍ້"},titleRequired:{en:"Title is required.",lo:"ຕ້ອງປ້ອນຫົວຂໍ້."},to:{en:"to",lo:"ຫາ"},today:{en:"Today",lo:"ມື້ນີ້"},tomorrow:{en:"Tomorrow",lo:"ມື້ອື່ນ"},topic:{en:"Topic",lo:"ຫົວຂໍ້"},topicEng:{en:"Topic (ENG)",lo:"ຫົວຂໍ້ (ອັງກິດ)"},topicGenerationError:{en:"Failed to generate topic ideas.",lo:"ສ້າງແນວຄິດຫົວຂໍ້ຜິດພາດ."},topicIdeasSuccess:{en:"Topic ideas generated successfully!",lo:"ສ້າງແນວຄິດຫົວຂໍ້ສຳເລັດແລ້ວ!"},topicLao:{en:"Topic (LAO)",lo:"ຫົວຂໍ້ (ລາວ)"},topicSuggesterDescription:{en:"Tell our AI about your interests, and it will suggest relevant project topics for your major, {majorName}.",lo:"ບອກ AI ກ່ຽວກັບຄວາມສົນໃຈຂອງທ່ານ, ແລະ ມັນຈະແນະນຳຫົວຂໍ້ໂຄງການທີ່ກ່ຽວຂ້ອງສຳລັບສາຂາຂອງທ່ານ, {majorName}."},topicSuggesterPlaceholder:{en:'e.g., "digital marketing for local businesses"',lo:'ຕົວຢ່າງ: "ການຕະຫຼາດດິຈິຕອນສຳລັບທຸລະກິດທ້ອງຖິ່ນ"'},topicToCheck:{en:"Topic to Check",lo:"ຫົວຂໍ້ທີ່ຈະກວດສອບ"},topicTooSimilar:{en:"Topic is {similarity}% similar to project {projectId}. Please revise.",lo:"ຫົວຂໍ້ຄ້າຍຄືກັບໂຄງການ {projectId} {similarity}%. ກະລຸນາແກ້ໄຂ."},total:{en:"Total",lo:"ລວມ"},totalPoints:{en:"Total Points",lo:"ຄະແນນລວມ"},totalPointsMustBe:{en:"Total points for rubrics must be {total}. Currently: {current}.",lo:"ຄະແນນລວມສຳລັບຮູບແບບການໃຫ້ຄະແນນຕ້ອງແມ່ນ {total}. ປັດຈຸບັນ: {current}."},totalAdvisors:{en:"Total Advisors",lo:"ທີ່ປຶກສາທັງໝົດ"},totalProjects:{en:"Total Projects",lo:"ໂຄງການທັງໝົດ"},totalStudents:{en:"Total Students",lo:"ນັກສຶກສາທັງໝົດ"},tourAdvisorContent:{en:"Quickly see which advisors have capacity and their areas of expertise.",lo:"ເບິ່ງໄດ້ໄວວ່າທີ່ປຶກສາຄົນໃດມີຄວາມສາມາດ ແລະ ຄວາມຊ່ຽວຊານດ້ານໃດ."},tourAdvisorTitle:{en:"Check Advisor Workload",lo:"ກວດສອບພາລະວຽກທີ່ປຶກສາ"},tourAdvisorWelcomeContent:{en:"This is your command center. Get a quick overview of pending tasks, supervising projects, and total students.",lo:"ນີ້ແມ່ນສູນບັນຊາການຂອງທ່ານ. ຂໍພາບລວມໄວຂອງວຽກທີ່ຄ້າງ, ໂຄງການທີ່ກຳລັງດູແລ, ແລະ ຈຳນວນນັກສຶກສາທັງໝົດ."},tourAdvisorWelcomeTitle:{en:"Welcome to Your Dashboard!",lo:"ຍິນດີຕ້ອນຮັບສູ່ກະດານຂ່າວຂອງທ່ານ!"},tourActionItemsContent:{en:"Click here to filter for all projects and submissions that need your attention right now.",lo:"ກົດທີ່ນີ້ເພື່ອ lọc ໂຄງການ ແລະ ການສົ່ງທັງໝົດທີ່ຕ້ອງການຄວາມສົນໃຈຂອງທ່ານດຽວນີ້."},tourActionItemsTitle:{en:"Focus on Action Items",lo:"ສຸມໃສ່ລາຍການທີ່ຕ້ອງເຮັດ"},tourProjectDetailsContent:{en:"From the details page, you can approve milestones, provide feedback, and communicate with your students.",lo:"ຈາກໜ້າລາຍລະອຽດ, ທ່ານສາມາດອະນຸມັດ milestones, ໃຫ້ຄຳຕິຊົມ, ແລະ ສື່ສານກັບນັກສຶກສາຂອງທ່ານ."},tourProjectDetailsTitle:{en:"Manage Project Details",lo:"ຈັດການລາຍລະອຽດໂຄງການ"},tourProjectListContent:{en:"You can see all projects you are supervising here. Click any project to view its details.",lo:"ທ່ານສາມາດເບິ່ງໂຄງການທັງໝົດທີ່ທ່ານກຳລັງດູແລໄດ້ທີ່ນີ້. ກົດທີ່ໂຄງການໃດໜຶ່ງເພື່ອເບິ່ງລາຍລະອຽດ."},tourProjectListTitle:{en:"Your Project List",lo:"ລາຍການໂຄງການຂອງທ່ານ"},tourRegisterContent:{en:"When you have a topic and an advisor, click here to fill out the registration form.",lo:"ເມື່ອທ່ານມີຫົວຂໍ້ ແລະ ທີ່ປຶກສາ, ກົດທີ່ນີ້ເພື່ອຕື່ມແບບຟອມລົງທະບຽນ."},tourRegisterTitle:{en:"Register Your Project",lo:"ລົງທະບຽນໂຄງການຂອງທ່ານ"},tourWelcomeContent:{en:"This is your dashboard. Once you register a project, its details will appear here.",lo:"ນີ້ແມ່ນກະດານຂ່າວຂອງທ່ານ. ເມື່ອທ່ານລົງທະບຽນໂຄງການ, ລາຍລະອຽດຂອງມັນຈະປາກົດທີ່ນີ້."},tourWelcomeTitle:{en:"Welcome!",lo:"ຍິນດີຕ້ອນຮັບ!"},transfer:{en:"Transfer",lo:"ຍ້າຍ"},transferProject:{en:"Transfer Project",lo:"ຍ້າຍໂຄງການ"},transferProjectPrompt:{en:'Transfer project "{topic}" from {advisor} to another advisor.',lo:'ຍ້າຍໂຄງການ "{topic}" ຈາກ {advisor} ໄປຫາທີ່ປຶກສາຄົນອື່ນ.'},transferReasonPlaceholder:{en:"e.g., Change of topic, workload adjustment...",lo:"ຕົວຢ່າງ: ປ່ຽນຫົວຂໍ້, ປັບພາລະວຽກ..."},transferToAnotherAdvisor:{en:"Transfer to another advisor",lo:"ຍ້າຍໄປຫາທີ່ປຶກສາຄົນອື່ນ"},tue:{en:"Tue",lo:"ອັງຄານ"},typeYourMessage:{en:"Type your message...",lo:"ພິມຂໍ້ຄວາມຂອງທ່ານ..."},unknown:{en:"Unknown",lo:"ບໍ່ຮູ້"},unknownAdvisor:{en:"Unknown Advisor",lo:"ທີ່ປຶກສາບໍ່ຮູ້ຈັກ"},unassigned:{en:"Unassigned",lo:"ຍັງບໍ່ໄດ້ກຳນົດ"},unscheduled:{en:"Unscheduled",lo:"ຍັງບໍ່ໄດ້ຈັດຕາຕະລາງ"},updatePasswordBtn:{en:"Update Password",lo:"ອັບເດດລະຫັດຜ່ານ"},updatePasswordPrompt:{en:"For security, please update your password.",lo:"ເພື່ອຄວາມປອດໄພ, ກະລຸນາອັບເດດລະຫັດຜ່ານຂອງທ່ານ."},updatePasswordSectionPrompt:{en:"For your security, you must update your password before proceeding.",lo:"ເພື່ອຄວາມປອດໄພຂອງທ່ານ, ທ່ານຕ້ອງອັບເດດລະຫັດຜ່ານຂອງທ່ານກ່ອນດຳເນີນການຕໍ່."},updated:{en:"Updated",lo:"ອັບເດດ"},uploadFile:{en:"Upload File",lo:"ອັບໂຫຼດໄຟລ໌"},uploadNewVersion:{en:"Upload New Version",lo:"ອັບໂຫຼດເວີຊັນໃໝ່"},uploadSubmissionFile:{en:"Upload Submission File",lo:"ອັບໂຫຼດໄຟລ໌ส่ง"},useThisTopic:{en:"Use This Topic",lo:"ໃຊ້ຫົວຂໍ້ນີ້"},userDataNotFound:{en:"User data could not be found.",lo:"ບໍ່ພົບຂໍ້ມູນຜູ້ໃຊ້."},userId:{en:"User ID",lo:"ລະຫັດຜູ້ໃຊ້"},view:{en:"View",lo:"ເບິ່ງ"},viewAllMyProjects:{en:"View All My Projects",lo:"ເບິ່ງໂຄງການທັງໝົດຂອງຂ້ອຍ"},viewAllNotifications:{en:"View All Notifications",lo:"ເບິ່ງການແຈ້ງເຕືອນທັງໝົດ"},viewDetailsForProject:{en:"View details for project ${projectId}",lo:"ເບິ່ງລາຍລະອຽດຂອງໂຄງການ ${projectId}"},viewFullDetails:{en:"View Full Details",lo:"ເບິ່ງລາຍລະອຽດທັງໝົດ"},viewNotifications:{en:"View notifications (${unreadCount} unread)",lo:"ເບິ່ງການແຈ້ງເຕືອນ (${unreadCount} ຍັງບໍ່ໄດ້ອ່ານ)"},viewPendingProjects:{en:"View Pending Projects",lo:"ເບິ່ງໂຄງການທີ່ລໍຖ້າການອະນຸມັດ"},wed:{en:"Wed",lo:"ພຸດ"},week:{en:"week",lo:"ອາທິດ"},weeks:{en:"weeks",lo:"ອາທິດ"},welcomeToPortal:{en:"Welcome to the Final Project Portal!",lo:"ຍິນດີຕ້ອນຮັບສູ່ປະຕູໂຄງການຈົບຊັ້ນ!"},workload:{en:"Workload",lo:"ພາລະວຽກ"},year:{en:"year",lo:"ປີ"},years:{en:"years",lo:"ປີ"},yes:{en:"Yes",lo:"ແມ່ນ"},youWereMentioned:{en:"You were mentioned in project ${projectId}",lo:"ທ່ານຖືກກ່າວເຖິງໃນໂຄງການ ${projectId}"},yourNotifications:{en:"Your Notifications",lo:"ການແຈ້ງເຕືອນຂອງທ່ານ"},yourProgress:{en:"Your Progress",lo:"ຄວາມຄືບໜ້າຂອງທ່ານ"},yourScore:{en:"Your Score",lo:"ຄະແນນຂອງທ່ານ"},yourStudents:{en:"Your Students",lo:"ນັກສຶກສາຂອງທ່ານ"},yourWeekAhead:{en:"Your Week Ahead",lo:"ອາທິດຂ້າງໜ້າຂອງທ່ານ"},yourWorkload:{en:"Your Workload",lo:"ພາລະວຽກຂອງທ່ານ"},zipFailed:{en:"Failed to create zip file.",lo:"ສ້າງໄຟລ໌ zip ລົ້ມເຫຼວ."},zipSuccess:{en:"Zip file created successfully!",lo:"ສ້າງໄຟລ໌ zip ສຳເລັດແລ້ວ!"},zipping:{en:"Zipping...",lo:"ກຳລັງບີບອັດ..."}},Ue=()=>{const{language:m}=Wa();return e=>{const h=Xc[e];return h&&typeof h=="object"&&"en"in h&&"lo"in h&&h[m]||String(e)}},Pi={Submission:{icon:Lr,color:"text-blue-500"},Approval:{icon:Kt,color:"text-green-500"},Feedback:{icon:er,color:"text-purple-500"},Mention:{icon:Or,color:"text-indigo-500"},Message:{icon:Or,color:"text-slate-500"},System:{icon:Cs,color:"text-orange-500"}},Yc=({notifications:m,onMarkAllRead:a,onSelectNotification:e,onViewAll:h})=>{const f=Ue(),l=m.filter(o=>!o.read).length,s=m.slice(0,7);return i.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-80 sm:w-96 bg-white dark:bg-slate-800 rounded-lg shadow-2xl border border-slate-200 dark:border-slate-700 z-50 animate-fade-in-down",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white",children:f("notifications")}),l>0&&i.jsx("button",{onClick:o=>{o.stopPropagation(),a()},className:"text-xs font-medium text-blue-600 hover:underline dark:text-blue-400",children:f("markAllAsRead")})]}),i.jsx("ul",{className:"max-h-80 overflow-y-auto divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(o=>{const r=Pi[o.type]||Pi.System,t=r.icon;return i.jsx("li",{children:i.jsx("button",{onClick:n=>{n.stopPropagation(),e(o)},className:`w-full text-left p-3 transition-colors ${o.read?"":"bg-blue-50 dark:bg-blue-900/20"} hover:bg-slate-100 dark:hover:bg-slate-700`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${r.color}`}),i.jsxs("div",{className:"flex-grow",children:[o.title&&i.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-100",children:o.title}),i.jsx("p",{className:`text-sm ${o.title?"text-slate-600 dark:text-slate-400":"text-slate-700 dark:text-slate-300"}`,children:o.message}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:ls(o.timestamp,f)})]}),!o.read&&i.jsx("span",{className:"mt-1.5 block h-2 w-2 flex-shrink-0 rounded-full bg-blue-500"})]})})},o.id)}):i.jsxs("li",{className:"p-6 text-center text-sm text-slate-500 dark:text-slate-400",children:[i.jsx(js,{className:"w-8 h-8 mx-auto mb-2 text-slate-400"}),f("noNotifications")]})}),i.jsx("div",{className:"p-2 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("button",{onClick:o=>{o.stopPropagation(),h()},className:"w-full flex items-center justify-center gap-2 text-center text-sm font-semibold text-blue-600 dark:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md py-2 transition-colors",children:[i.jsx("span",{children:f("viewAllNotifications")}),i.jsx(qs,{className:"w-4 h-4"})]})})]})},Ht=({currentView:m,activeView:a,onClick:e,children:h,icon:f})=>{const l=a===m;return i.jsxs("button",{onClick:e,className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${l?"bg-blue-600 text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[f,i.jsx("span",{children:h})]})},Di=({role:m,label:a,icon:e,activeRole:h,onSwitch:f})=>{const l=m===h;return i.jsxs("button",{onClick:f,className:`w-full text-left flex items-center justify-between gap-2 px-4 py-2 text-sm ${l?"font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700"}`,role:"menuitem",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e,a]}),l&&i.jsx(es,{className:"w-4 h-4"})]})},Kc=m=>{const{onRegisterClick:a,onLogout:e,onExportCsv:h,onExportExcel:f,user:l,effectiveRole:s,onSwitchRole:o,activeView:r,onNavigate:t,currentAcademicYear:n,availableYears:u,onYearChange:c,onStartNewYear:d,notifications:b,projectsToReviewCount:g,isReviewFilterActive:p,onToggleReviewFilter:x,onOpenProfile:y,onSelectNotification:v,onMarkNotificationsAsRead:S}=m,{theme:N,toggleTheme:R}=Wc(),{language:B,setLanguage:M}=Wa(),F=Ue(),[q,V]=Z.useState(!1),[O,T]=Z.useState(!1),A=Z.useRef(null),C=Z.useRef(null),w=Z.useMemo(()=>b.filter(k=>!k.read).length,[b]);Z.useEffect(()=>{const k=E=>{A.current&&!A.current.contains(E.target)&&V(!1),C.current&&!C.current.contains(E.target)&&T(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const _=s==="Admin"||s==="DepartmentAdmin",j=_&&r==="projects";return i.jsxs("header",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center pb-6 border-b border-slate-300 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(dn,{className:"w-10 h-10 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:F("finalProjectDashboard")}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:[F("academicYear")," ",i.jsx("span",{className:"font-semibold",children:n})]})]})]}),i.jsxs("div",{className:"flex items-center mt-4 sm:mt-0 space-x-2 flex-wrap gap-2",children:[l.role==="Admin"&&i.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-md p-1.5 space-x-2",children:[i.jsx("label",{htmlFor:"academic-year",className:"text-sm font-medium text-slate-600 dark:text-slate-300 pl-2",children:F("ay")}),i.jsx("select",{id:"academic-year",value:n,onChange:k=>c(k.target.value),className:"rounded-md border-0 bg-transparent py-1 pl-2 pr-7 text-slate-800 dark:text-slate-100 font-semibold focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm",children:u.map(k=>i.jsx("option",{value:k,children:k},k))}),i.jsx("button",{onClick:d,className:"flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-100 font-bold p-2 rounded-md transition-colors",title:F("startNewYear"),children:i.jsx(li,{className:"w-5 h-5"})})]}),s==="Advisor"&&x&&i.jsxs("button",{id:"needs-review-btn",onClick:x,className:`relative flex items-center justify-center font-bold py-2 px-4 rounded-lg shadow-md transition-colors ${p?"bg-blue-600 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white"}`,children:[i.jsx(Lr,{className:"w-5 h-5 mr-2"}),F("needsReview"),g&&g>0&&i.jsx("span",{className:`absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full text-xs font-medium text-white ring-2 ring-slate-100 dark:ring-slate-900 ${p?"bg-blue-800":"bg-red-500"}`,children:g})]}),j&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:a,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),F("registerProject")]}),i.jsxs("button",{onClick:h,className:"flex items-center justify-center bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Hr,{className:"w-5 h-5 mr-2"}),F("exportCsv")]}),i.jsxs("button",{onClick:f,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),F("exportExcel")]})]}),i.jsxs("div",{className:"relative",ref:C,children:[i.jsxs("button",{onClick:()=>T(k=>!k),className:"relative flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white font-bold p-2.5 rounded-lg shadow-md transition-transform transform hover:scale-105","aria-label":F("viewNotifications").replace("${unreadCount}",String(w)),children:[i.jsx(js,{className:"w-5 h-5"}),w>0&&i.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-medium text-white ring-2 ring-slate-100 dark:ring-slate-900",children:w})]}),O&&i.jsx(Yc,{notifications:b,onMarkAllRead:()=>{S()},onSelectNotification:k=>{v(k),T(!1)},onViewAll:()=>{t("notifications"),T(!1)}})]}),i.jsx("button",{onClick:R,className:"flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white font-bold p-2.5 rounded-lg shadow-md transition-transform transform hover:scale-105","aria-label":F(N==="light"?"switchToDarkMode":"switchToLightMode"),children:N==="light"?i.jsx(Fc,{className:"w-5 h-5"}):i.jsx(Dc,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>M(B==="en"?"lo":"en"),className:"flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white font-bold w-10 h-10 rounded-lg shadow-md transition-transform transform hover:scale-105","aria-label":F(B==="en"?"switchToLao":"switchToEnglish"),children:i.jsx("span",{className:"font-semibold text-sm",children:B==="en"?"ພາສາລາວ":"EN"})}),i.jsxs("div",{className:"relative",ref:A,children:[i.jsxs("button",{onClick:()=>V(k=>!k),className:"flex items-center justify-center bg-white dark:bg-slate-800 rounded-lg shadow-md p-2 transition-transform transform hover:scale-105","aria-haspopup":"true","aria-expanded":q,children:[i.jsx(un,{className:"w-6 h-6 text-slate-500 dark:text-slate-400"}),i.jsx("span",{className:"hidden sm:inline font-semibold text-slate-700 dark:text-slate-200 mx-2",children:l.name})]}),q&&i.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-slate-800 ring-1 ring-black ring-opacity-5 dark:ring-slate-700 z-50",children:i.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:F("signedInAs")}),i.jsxs("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:[l.name," (",l.role,")"]})]}),l.role==="DepartmentAdmin"&&i.jsxs("div",{className:"py-1 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"px-4 pt-1 pb-2 text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase",children:F("switchView")}),i.jsx(Di,{role:"DepartmentAdmin",label:F("deptAdmin"),icon:i.jsx(Us,{className:"w-4 h-4"}),activeRole:s,onSwitch:()=>{o("DepartmentAdmin"),V(!1)}}),i.jsx(Di,{role:"Advisor",label:F("advisor"),icon:i.jsx(_r,{className:"w-4 h-4"}),activeRole:s,onSwitch:()=>{o("Advisor"),V(!1)}})]}),i.jsxs("button",{onClick:()=>{y(),V(!1)},className:"w-full text-left flex items-center gap-2 px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700",role:"menuitem",children:[i.jsx(Lc,{className:"w-4 h-4"}),F("myProfile")]}),i.jsxs("button",{onClick:e,className:"w-full text-left flex items-center gap-2 px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700",role:"menuitem",children:[i.jsx(Pc,{className:"w-4 h-4"}),F("logout")]})]})})]})]})]}),i.jsxs("nav",{className:"flex items-center bg-slate-200/60 dark:bg-slate-800/60 p-1.5 rounded-lg space-x-1 flex-wrap",children:[s!=="Student"&&i.jsx(Ht,{currentView:"dashboard",activeView:r,onClick:()=>t("dashboard"),icon:i.jsx(dn,{className:"w-5 h-5"}),children:F("dashboard")}),s==="Student"&&i.jsx(Ht,{currentView:"projects",activeView:r,onClick:()=>t("projects"),icon:i.jsx(dn,{className:"w-5 h-5"}),children:F("myProject")}),_&&i.jsx(Ht,{currentView:"projects",activeView:r,onClick:()=>t("projects"),icon:i.jsx(kr,{className:"w-5 h-5"}),children:F("projects")}),i.jsx(Ht,{currentView:"calendar",activeView:r,onClick:()=>t("calendar"),icon:i.jsx(_n,{className:"w-5 h-5"}),children:F("calendar")}),_&&i.jsxs(i.Fragment,{children:[i.jsx(Ht,{currentView:"students",activeView:r,onClick:()=>t("students"),icon:i.jsx(Fr,{className:"w-5 h-5"}),children:F("students")}),i.jsx(Ht,{currentView:"advisors",activeView:r,onClick:()=>t("advisors"),icon:i.jsx(_r,{className:"w-5 h-5"}),children:F("advisors")}),l.role==="Admin"&&i.jsx(Ht,{currentView:"deptAdmins",activeView:r,onClick:()=>t("deptAdmins"),icon:i.jsx(Us,{className:"w-5 h-5"}),children:F("deptAdmins")}),i.jsx(Ht,{currentView:"majors",activeView:r,onClick:()=>t("majors"),icon:i.jsx(oi,{className:"w-5 h-5"}),children:F("majors")}),i.jsx(Ht,{currentView:"classrooms",activeView:r,onClick:()=>t("classrooms"),icon:i.jsx(ai,{className:"w-5 h-5"}),children:F("classrooms")}),i.jsx(Ht,{currentView:"committees",activeView:r,onClick:()=>t("committees"),icon:i.jsx(lr,{className:"w-5 h-5"}),children:F("committees")}),i.jsx(Ht,{currentView:"scoring",activeView:r,onClick:()=>t("scoring"),icon:i.jsx(Bs,{className:"w-5 h-5"}),children:F("scoringNav")}),i.jsx(Ht,{currentView:"finalGrades",activeView:r,onClick:()=>t("finalGrades"),icon:i.jsx(La,{className:"w-5 h-5"}),children:F("finalGrades")}),i.jsx(Ht,{currentView:"milestoneTemplates",activeView:r,onClick:()=>t("milestoneTemplates"),icon:i.jsx(Fa,{className:"w-5 h-5"}),children:F("templates")}),i.jsx(Ht,{currentView:"submissions",activeView:r,onClick:()=>t("submissions"),icon:i.jsx(Lr,{className:"w-5 h-5"}),children:F("submissions")}),i.jsx(Ht,{currentView:"timeline",activeView:r,onClick:()=>t("timeline"),icon:i.jsx(wn,{className:"w-5 h-5"}),children:F("timeline")}),i.jsx(Ht,{currentView:"analytics",activeView:r,onClick:()=>t("analytics"),icon:i.jsx(mn,{className:"w-5 h-5"}),children:F("analytics")}),i.jsx(Ht,{currentView:"announcements",activeView:r,onClick:()=>t("announcements"),icon:i.jsx(ci,{className:"w-5 h-5"}),children:F("announcements")}),i.jsx(Ht,{currentView:"reporting",activeView:r,onClick:()=>t("reporting"),icon:i.jsx(Oa,{className:"w-5 h-5"}),children:F("reporting")}),i.jsx(Ht,{currentView:"aiTools",activeView:r,onClick:()=>t("aiTools"),icon:i.jsx(Ft,{className:"w-5 h-5"}),children:F("aiTools")})]}),l.role==="Admin"&&i.jsx(i.Fragment,{children:i.jsx(Ht,{currentView:"settings",activeView:r,onClick:()=>t("settings"),icon:i.jsx(Cs,{className:"w-5 h-5"}),children:F("settings")})})]})]})},Jc=({onRegisterClick:m,user:a})=>{const e=Ue();return i.jsxs("div",{className:"text-center py-12 px-6",children:[i.jsx(wn,{className:"mx-auto h-12 w-12 text-slate-400"}),i.jsx("h3",{className:"mt-2 text-lg font-semibold text-slate-800 dark:text-slate-200",children:e("noProjectsFound")}),i.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:a.role==="Admin"?e("getStartedRegister"):e("noProjectsToDisplay")}),a.role==="Admin"&&i.jsx("div",{className:"mt-6",children:i.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:[i.jsx(or,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),e("registerNewProject")]})})]})};var qt=(m=>(m.Male="Male",m.Female="Female",m.Monk="Monk",m))(qt||{}),it=(m=>(m.Pending="Pending",m.Approved="Approved",m.Rejected="Rejected",m))(it||{}),bt=(m=>(m.Pending="Pending",m.Submitted="Submitted",m.Approved="Approved",m.RequiresRevision="Requires Revision",m))(bt||{}),ir=(m=>(m.Submitted="Submitted",m.Approved="Approved",m.RequiresRevision="Requires Revision",m))(ir||{});const Zc=m=>{switch(m){case it.Approved:return"success";case it.Pending:return"warning";case it.Rejected:return"error";default:return"default"}},kn=({project:m,user:a,onUpdateStatus:e})=>{const[h,f]=Z.useState(null),{status:l,projectId:s,advisorName:o}=m,r=Ue(),t=l===it.Pending&&(a.role==="Advisor"&&a.name===o||a.role==="Admin"||a.role==="DepartmentAdmin"),n=d=>{t&&(d.stopPropagation(),f(d.currentTarget))},u=()=>{f(null)},c=d=>{e(s,d),u()};return i.jsxs(at,{sx:{display:"inline-block"},children:[i.jsx(Ls,{label:l,color:Zc(l),size:"small",onClick:t?n:void 0,sx:{cursor:t?"pointer":"default","&:hover":t?{boxShadow:2}:{}}}),i.jsxs(ec,{anchorEl:h,open:!!h,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[i.jsxs(Vr,{onClick:()=>c(it.Approved),children:[i.jsx(xn,{sx:{mr:1,color:"success.main",fontSize:20}}),r("approve")]}),i.jsxs(Vr,{onClick:()=>c(it.Rejected),children:[i.jsx(ja,{sx:{mr:1,color:"error.main",fontSize:20}}),r("reject")]})]})]})},Fi=["#3b82f6","#22c55e","#f97316","#8b5cf6","#ec4899","#14b8a6","#f59e0b","#6366f1"],Vs=m=>{if(!m)return"#64748b";let a=0;for(let h=0;h<m.length;h++){const f=m.charCodeAt(h);a=(a<<5)-a+f,a=a&a}const e=Math.abs(a)%Fi.length;return Fi[e]},jn=({isOpen:m,onClose:a,onSave:e,rubric:h,initialScores:f,evaluatorName:l,maxTotalScore:s})=>{const[o,r]=Z.useState(f),[t,n]=Z.useState({}),u=Ue();Z.useEffect(()=>{r(f)},[f,m]);const c=Z.useMemo(()=>h.reduce((g,p)=>g+(o[p.id]||0),0),[o,h]),d=(g,p,x)=>{const y=Number(p);r(v=>({...v,[g]:y})),y<0||y>x?n(v=>({...v,[g]:u("scoreBoundaryError").replace("{max}",String(x))})):n(v=>{const S={...v};return delete S[g],S})},b=()=>{if(Object.keys(t).length>0)return;const g={};h.forEach(p=>{g[p.id]=o[p.id]||0}),e(g)};return m?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700 flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:u("enterScore")}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:u("forEvaluator").replace("{name}",l)})]}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"mt-4 flex-grow overflow-y-auto pr-2 space-y-4",children:h.map(g=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-baseline",children:[i.jsx("label",{htmlFor:`score-${g.id}`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:g.name}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[u("maxScoreLabel"),": ",g.maxScore]})]}),i.jsx("input",{type:"number",id:`score-${g.id}`,value:o[g.id]??"",onChange:p=>d(g.id,p.target.value,g.maxScore),min:"0",max:g.maxScore,className:`block w-full mt-1 text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white ${t[g.id]?"border-red-500":""}`}),t[g.id]&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g.id]})]},g.id))}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t dark:border-slate-700 mt-4 flex-shrink-0",children:[i.jsxs("div",{className:"text-lg",children:[i.jsxs("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:[u("total"),": "]}),i.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[c.toFixed(2)," / ",s]})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:u("cancel")}),i.jsx("button",{type:"button",onClick:b,disabled:Object.keys(t).length>0,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:u("saveScore")})]})]})]})}):null},Zs=({label:m,value:a,children:e,className:h=""})=>i.jsxs("div",{className:`flex justify-between text-sm ${h}`,children:[i.jsx("dt",{className:"text-slate-500 dark:text-slate-400",children:m}),i.jsx("dd",{className:"text-slate-700 dark:text-slate-300 font-medium text-right truncate",children:a||e})]}),Qc=({group:m,user:a,onSelectProject:e,onUpdateStatus:h,updateDetailedScore:f,addToast:l,scoringSettings:s,projectHealthStatus:o,onOpenAiAssistant:r,isSelected:t,onSelect:n})=>{var v,S;const{project:u,students:c}=m,[d,b]=Z.useState(!1),g=Ue(),p=a.role==="Advisor"&&n&&t!==void 0,x=Z.useMemo(()=>s?s.advisorRubrics.reduce((N,R)=>N+R.maxScore,0):100,[s]),y=N=>{!f||!l||(f(u.projectId,a.id,N),l({type:"success",message:g("advisorScoreSubmitted")}),b(!1))};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{onClick:()=>e(m),className:`relative bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 flex flex-col justify-between cursor-pointer transition-all ${t?"ring-2 ring-blue-500":"hover:shadow-xl hover:ring-2 hover:ring-blue-500"}`,children:[p&&i.jsx("div",{className:"absolute top-3 right-3 z-10",children:i.jsx("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded",checked:t,onChange:n,onClick:N=>N.stopPropagation()})}),i.jsxs("div",{children:[i.jsx("div",{className:"pb-3 mb-3 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"pr-10",children:[i.jsx("h3",{className:"font-bold text-lg text-blue-600 dark:text-blue-400",children:u.projectId}),i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100 truncate",title:u.topicLao,children:u.topicLao}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 truncate",title:u.topicEng,children:u.topicEng}),u.similarityInfo&&i.jsxs("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-xs font-semibold flex items-center",children:[i.jsx(cr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),i.jsxs("span",{children:[u.similarityInfo.similarityPercentage,"% ",g("similarTo")," ",u.similarityInfo.similarProjectId]})]}),o&&i.jsx("div",{className:"mt-2",children:(()=>{let N="bg-slate-400";return o.health==="On Track"&&(N="bg-green-500"),o.health==="Needs Attention"&&(N="bg-yellow-500"),o.health==="At Risk"&&(N="bg-red-500"),o.health==="N/A"&&(N="bg-slate-400"),i.jsxs("span",{className:`inline-flex items-center gap-2 text-xs font-semibold text-white px-2 py-1 rounded-full ${N}`,title:`${g("aiAnalysis")}: ${o.summary}`,children:[i.jsx(Ft,{className:"w-3 h-3"}),g("health"),": ",o.health]})})()})]}),i.jsx(kn,{project:u,user:a,onUpdateStatus:h})]})}),i.jsxs("dl",{className:"space-y-2 mb-4",children:[i.jsx(Zs,{label:g("advisor"),children:i.jsxs("div",{className:"flex items-center justify-end",children:[i.jsx("span",{className:"h-2 w-2 rounded-full mr-2 shrink-0",style:{backgroundColor:Vs(u.advisorName)}}),i.jsx("span",{className:"truncate",children:u.advisorName})]})}),i.jsx(Zs,{label:g("defenseSchedule"),value:u.defenseDate?`${u.defenseDate}, ${u.defenseTime} (${u.defenseRoom})`:g("notScheduled")})]}),c.map((N,R)=>i.jsxs("div",{className:`pt-3 ${R>0?"mt-3 border-t border-slate-200 dark:border-slate-700":""}`,children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-200 mb-2",children:[N.name," ",N.surname]}),i.jsxs("dl",{className:"space-y-1.5",children:[i.jsx(Zs,{label:g("studentId"),value:N.studentId}),i.jsx(Zs,{label:g("gender"),value:N.gender})]})]},N.studentId)),f&&s&&i.jsx("div",{className:"pt-3 mt-3 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("p",{className:"text-sm font-medium",children:[g("yourScore"),": ",i.jsx("span",{className:"font-bold",children:((v=u.mainAdvisorScore)==null?void 0:v.toFixed(2))??g("na")})," / ",x]}),i.jsx("button",{onClick:N=>{N.stopPropagation(),b(!0)},className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",children:u.mainAdvisorScore!==null?g("editScore"):g("enterScore")})]})})]})]}),d&&s&&i.jsx(jn,{isOpen:d,onClose:()=>b(!1),onSave:y,rubric:s.advisorRubrics,initialScores:((S=u.detailedScores)==null?void 0:S[a.id])||{},evaluatorName:a.name,maxTotalScore:x})]})},We=({sortKey:m,title:a,sortConfig:e,requestSort:h,className:f})=>{const l=(e==null?void 0:e.key)===m,s=l?e.direction:void 0;return i.jsx(tc,{className:f,children:i.jsx(rc,{active:l,direction:s==="ascending"?"asc":"desc",onClick:()=>h(m),IconComponent:l?s==="ascending"?sc:nc:ic,children:a})})},ed=({projectGroup:m,user:a,scoringSettings:e,updateDetailedScore:h,addToast:f})=>{var u,c;const[l,s]=Z.useState(!1),{project:o}=m,r=Ue(),t=Z.useMemo(()=>e.advisorRubrics.reduce((d,b)=>d+b.maxScore,0),[e.advisorRubrics]),n=d=>{h(o.projectId,a.id,d),f({type:"success",message:r("advisorScoreSubmitted")}),s(!1)};return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:((u=o.mainAdvisorScore)==null?void 0:u.toFixed(2))??r("na")}),i.jsx("button",{onClick:d=>{d.stopPropagation(),s(!0)},className:"font-medium text-blue-600 dark:text-blue-400 hover:underline text-xs",children:o.mainAdvisorScore!==null?r("editAction"):r("enterAction")}),l&&i.jsx(jn,{isOpen:l,onClose:()=>s(!1),onSave:n,rubric:e.advisorRubrics,initialScores:((c=o.detailedScores)==null?void 0:c[a.id])||{},evaluatorName:a.name,maxTotalScore:t})]})},Ga=({user:m,effectiveRole:a,projectGroups:e,onSelectProject:h,onRegisterClick:f,sortConfig:l,requestSort:s,onUpdateStatus:o,updateDetailedScore:r,addToast:t,scoringSettings:n,projectHealth:u,onOpenAiAssistant:c,selectedIds:d,onSelect:b,onSelectAll:g})=>{const p=e&&e.length>0,x=Ue(),y=a&&["Admin","DepartmentAdmin","Advisor"].includes(a)&&b&&g&&d,v=Z.useMemo(()=>n?n.advisorRubrics.reduce((S,N)=>S+N.maxScore,0):100,[n]);return p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map(S=>i.jsx(Qc,{group:S,user:m,onSelectProject:h,onUpdateStatus:o,updateDetailedScore:r,addToast:t,scoringSettings:n,projectHealthStatus:u==null?void 0:u[S.project.projectId],onOpenAiAssistant:c,isSelected:y?d.has(S.project.projectId):void 0,onSelect:y?()=>b(S.project.projectId):void 0},S.project.projectId))}),i.jsx("div",{className:"hidden lg:block overflow-x-auto bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[y&&i.jsx("th",{scope:"col",className:"p-4",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500",checked:e.length>0&&d.size===e.length,onChange:g})}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("no")}),i.jsx(We,{sortKey:"studentId",title:x("studentId"),sortConfig:l,requestSort:s}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("gender")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("name")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("major")}),i.jsx(We,{sortKey:"projectId",title:x("projectId"),sortConfig:l,requestSort:s}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("topicLao")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("topicEng")}),u&&c&&i.jsx("th",{scope:"col",className:"px-4 py-3",children:x("health")}),i.jsx("th",{scope:"col",className:"px-4 py-3",children:x("similarity")}),i.jsx(We,{sortKey:"advisorName",title:x("advisor"),sortConfig:l,requestSort:s}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("defenseSchedule")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("status")}),r&&n&&i.jsxs("th",{scope:"col",className:"px-6 py-3",children:[x("advisorScore")," (/",v,")"]}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:x("details")})]})}),i.jsx("tbody",{children:e.map((S,N)=>{const{project:R,students:B}=S,M=B[0],F=B[1],q=2,V=y&&d.has(R.projectId);return i.jsxs(Dr.Fragment,{children:[i.jsxs("tr",{className:`project-table-row align-top ${V?"bg-blue-50 dark:bg-blue-900/20":"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:[y&&i.jsx("td",{className:"p-4 align-middle",rowSpan:q,children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded",checked:V,onChange:()=>b(R.projectId),onClick:O=>O.stopPropagation()})}),i.jsx("td",{className:"px-6 py-4 align-middle",rowSpan:q,children:N+1}),i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:M.studentId}),i.jsx("td",{className:"px-6 py-4",children:M.gender}),i.jsxs("td",{className:"px-6 py-4",children:[M.name," ",M.surname]}),i.jsx("td",{className:"px-6 py-4",children:M.major}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:R.projectId}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:R.topicLao}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:R.topicEng}),u&&c&&i.jsx("td",{className:"px-4 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:(()=>{const O=u[R.projectId];if(O){let T="bg-slate-400";return O.health==="On Track"&&(T="bg-green-500"),O.health==="Needs Attention"&&(T="bg-yellow-500"),O.health==="At Risk"&&(T="bg-red-500"),O.health==="N/A"&&(T="bg-slate-400"),i.jsxs("span",{className:`flex items-center gap-2 text-xs font-semibold text-white px-2.5 py-1 rounded-full ${T}`,title:`${x("aiAnalysis")}: ${O.summary}`,children:[i.jsx(Ft,{className:"w-3 h-3"}),O.health]})}return i.jsx("span",{className:"text-xs text-slate-400",children:x("na")})})()}),i.jsx("td",{className:"px-4 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:R.similarityInfo&&i.jsxs("div",{className:"group relative flex justify-center",children:[i.jsxs("span",{className:"flex items-center text-amber-600 dark:text-amber-400 text-xs font-semibold",children:[i.jsx(cr,{className:"w-4 h-4 mr-1"}),R.similarityInfo.similarityPercentage,"%"]}),i.jsxs("div",{className:"absolute bottom-full mb-2 hidden w-64 group-hover:block bg-slate-800 text-white text-xs rounded p-2 z-10 shadow-lg text-left transform -translate-x-1/2 left-1/2",children:[i.jsx("p",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:x("potentialOverlap")}),i.jsxs("p",{children:[x("similarTo")," ",i.jsx("strong",{className:"text-amber-300",children:R.similarityInfo.similarProjectId})]}),i.jsxs("p",{className:"mt-1 whitespace-normal",children:[x("reason"),": ",R.similarityInfo.reason]})]})]})}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"h-2 w-2 rounded-full mr-2 shrink-0",style:{backgroundColor:Vs(R.advisorName)}}),i.jsx("span",{children:R.advisorName})]})}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50 whitespace-nowrap",rowSpan:q,children:R.defenseDate?i.jsxs("div",{className:"text-xs",children:[i.jsx("p",{className:"font-semibold",children:R.defenseDate}),i.jsxs("p",{className:"text-slate-500",children:[R.defenseTime," ",x("inRoom")," ",R.defenseRoom]})]}):i.jsx("span",{className:"text-xs text-slate-400",children:x("notScheduled")})}),i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:i.jsx(kn,{project:R,user:m,onUpdateStatus:o})}),r&&t&&n&&i.jsx("td",{className:"px-6 py-4 align-middle bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:i.jsx(ed,{projectGroup:S,user:m,scoringSettings:n,updateDetailedScore:r,addToast:t})}),i.jsx("td",{className:"px-6 py-4 align-middle text-center bg-slate-50 dark:bg-slate-900/50",rowSpan:q,children:i.jsx("button",{onClick:()=>h(S),className:"px-2.5 py-1 text-xs font-semibold text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors","aria-label":x("viewDetailsForProject").replace("${projectId}",R.projectId),children:x("view")})})]}),i.jsx("tr",{className:`border-b dark:border-slate-700 align-top ${V?"bg-blue-50 dark:bg-blue-900/20":"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:F?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:F.studentId}),i.jsx("td",{className:"px-6 py-4",children:F.gender}),i.jsxs("td",{className:"px-6 py-4",children:[F.name," ",F.surname]}),i.jsx("td",{className:"px-6 py-4",children:F.major})]}):i.jsx("td",{className:"px-6 py-4",colSpan:4,children:" "})})]},R.projectId)})})]})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg text-center py-10 text-slate-500 dark:text-slate-400",children:i.jsx(Jc,{user:m,onRegisterClick:f})})};let Qs;const td=new Uint8Array(16);function rd(){if(!Qs&&(Qs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qs(td)}const Yt=[];for(let m=0;m<256;++m)Yt.push((m+256).toString(16).slice(1));function sd(m,a=0){return Yt[m[a+0]]+Yt[m[a+1]]+Yt[m[a+2]]+Yt[m[a+3]]+"-"+Yt[m[a+4]]+Yt[m[a+5]]+"-"+Yt[m[a+6]]+Yt[m[a+7]]+"-"+Yt[m[a+8]]+Yt[m[a+9]]+"-"+Yt[m[a+10]]+Yt[m[a+11]]+Yt[m[a+12]]+Yt[m[a+13]]+Yt[m[a+14]]+Yt[m[a+15]]}const nd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Li={randomUUID:nd};function Ar(m,a,e){if(Li.randomUUID&&!m)return Li.randomUUID();m=m||{};const h=m.random||(m.rng||rd)();return h[6]=h[6]&15|64,h[8]=h[8]&63|128,sd(h)}const hi=Z.createContext(void 0),id=({children:m})=>{const[a,e]=Z.useState([]),h=Z.useCallback(l=>{const s=Ar();e(o=>[...o,{id:s,...l}])},[]),f=Z.useCallback(l=>{e(s=>s.filter(o=>o.id!==l))},[]);return i.jsx(hi.Provider,{value:{toasts:a,addToast:h,removeToast:f},children:m})},At=()=>{const m=Z.useContext(hi);if(!m)throw new Error("useToast must be used within a ToastProvider");return m.addToast};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let od,ad;function ld(){return{geminiUrl:od,vertexUrl:ad}}function cd(m,a,e,h){var f,l;if(!(m!=null&&m.baseUrl)){const s=ld();return a?(f=s.vertexUrl)!==null&&f!==void 0?f:e:(l=s.geminiUrl)!==null&&l!==void 0?l:h}return m.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cs{}function Xe(m,a){const e=/\{([^}]+)\}/g;return m.replace(e,(h,f)=>{if(Object.prototype.hasOwnProperty.call(a,f)){const l=a[f];return l!=null?String(l):""}else throw new Error(`Key '${f}' not found in valueMap.`)})}function z(m,a,e){for(let l=0;l<a.length-1;l++){const s=a[l];if(s.endsWith("[]")){const o=s.slice(0,-2);if(!(o in m))if(Array.isArray(e))m[o]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(m[o])){const r=m[o];if(Array.isArray(e))for(let t=0;t<r.length;t++){const n=r[t];z(n,a.slice(l+1),e[t])}else for(const t of r)z(t,a.slice(l+1),e)}return}else if(s.endsWith("[0]")){const o=s.slice(0,-3);o in m||(m[o]=[{}]);const r=m[o];z(r[0],a.slice(l+1),e);return}(!m[s]||typeof m[s]!="object")&&(m[s]={}),m=m[s]}const h=a[a.length-1],f=m[h];if(f!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===f)return;if(typeof f=="object"&&typeof e=="object"&&f!==null&&e!==null)Object.assign(f,e);else throw new Error(`Cannot set value for an existing key. Key: ${h}`)}else h==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(m,e):m[h]=e}function P(m,a,e=void 0){try{if(a.length===1&&a[0]==="_self")return m;for(let h=0;h<a.length;h++){if(typeof m!="object"||m===null)return e;const f=a[h];if(f.endsWith("[]")){const l=f.slice(0,-2);if(l in m){const s=m[l];return Array.isArray(s)?s.map(o=>P(o,a.slice(h+1),e)):e}else return e}else m=m[f]}return m}catch(h){if(h instanceof TypeError)return e;throw h}}function dd(m,a){for(const[e,h]of Object.entries(a)){const f=e.split("."),l=h.split("."),s=new Set;let o=-1;for(let r=0;r<f.length;r++)if(f[r]==="*"){o=r;break}if(o!==-1&&l.length>o)for(let r=o;r<l.length;r++){const t=l[r];t!=="*"&&!t.endsWith("[]")&&!t.endsWith("[0]")&&s.add(t)}Yn(m,f,l,0,s)}}function Yn(m,a,e,h,f){if(h>=a.length||typeof m!="object"||m===null)return;const l=a[h];if(l.endsWith("[]")){const s=l.slice(0,-2),o=m;if(s in o&&Array.isArray(o[s]))for(const r of o[s])Yn(r,a,e,h+1,f)}else if(l==="*"){if(typeof m=="object"&&m!==null&&!Array.isArray(m)){const s=m,o=Object.keys(s).filter(t=>!t.startsWith("_")&&!f.has(t)),r={};for(const t of o)r[t]=s[t];for(const[t,n]of Object.entries(r)){const u=[];for(const c of e.slice(h))c==="*"?u.push(t):u.push(c);z(s,u,n)}for(const t of o)delete s[t]}}else{const s=m;l in s&&Yn(s[l],a,e,h+1,f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mi(m){if(typeof m!="string")throw new Error("fromImageBytes must be a string");return m}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ud(m){const a={},e=P(m,["operationName"]);e!=null&&z(a,["operationName"],e);const h=P(m,["resourceName"]);return h!=null&&z(a,["_url","resourceName"],h),a}function fd(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["metadata"]);h!=null&&z(a,["metadata"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);l!=null&&z(a,["error"],l);const s=P(m,["response","generateVideoResponse"]);return s!=null&&z(a,["response"],md(s)),a}function hd(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["metadata"]);h!=null&&z(a,["metadata"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);l!=null&&z(a,["error"],l);const s=P(m,["response"]);return s!=null&&z(a,["response"],pd(s)),a}function md(m){const a={},e=P(m,["generatedSamples"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(s=>gd(s))),z(a,["generatedVideos"],l)}const h=P(m,["raiMediaFilteredCount"]);h!=null&&z(a,["raiMediaFilteredCount"],h);const f=P(m,["raiMediaFilteredReasons"]);return f!=null&&z(a,["raiMediaFilteredReasons"],f),a}function pd(m){const a={},e=P(m,["videos"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(s=>bd(s))),z(a,["generatedVideos"],l)}const h=P(m,["raiMediaFilteredCount"]);h!=null&&z(a,["raiMediaFilteredCount"],h);const f=P(m,["raiMediaFilteredReasons"]);return f!=null&&z(a,["raiMediaFilteredReasons"],f),a}function gd(m){const a={},e=P(m,["video"]);return e!=null&&z(a,["video"],vd(e)),a}function bd(m){const a={},e=P(m,["_self"]);return e!=null&&z(a,["video"],wd(e)),a}function xd(m){const a={},e=P(m,["operationName"]);return e!=null&&z(a,["_url","operationName"],e),a}function yd(m){const a={},e=P(m,["operationName"]);return e!=null&&z(a,["_url","operationName"],e),a}function vd(m){const a={},e=P(m,["uri"]);e!=null&&z(a,["uri"],e);const h=P(m,["encodedVideo"]);h!=null&&z(a,["videoBytes"],mi(h));const f=P(m,["encoding"]);return f!=null&&z(a,["mimeType"],f),a}function wd(m){const a={},e=P(m,["gcsUri"]);e!=null&&z(a,["uri"],e);const h=P(m,["bytesBase64Encoded"]);h!=null&&z(a,["videoBytes"],mi(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["mimeType"],f),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oi;(function(m){m.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",m.OUTCOME_OK="OUTCOME_OK",m.OUTCOME_FAILED="OUTCOME_FAILED",m.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Oi||(Oi={}));var Bi;(function(m){m.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",m.PYTHON="PYTHON"})(Bi||(Bi={}));var Wr;(function(m){m.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",m.STRING="STRING",m.NUMBER="NUMBER",m.INTEGER="INTEGER",m.BOOLEAN="BOOLEAN",m.ARRAY="ARRAY",m.OBJECT="OBJECT",m.NULL="NULL"})(Wr||(Wr={}));var Ui;(function(m){m.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",m.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",m.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",m.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",m.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",m.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",m.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",m.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",m.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",m.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ui||(Ui={}));var $i;(function(m){m.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",m.SEVERITY="SEVERITY",m.PROBABILITY="PROBABILITY"})($i||($i={}));var zi;(function(m){m.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",m.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",m.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",m.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",m.BLOCK_NONE="BLOCK_NONE",m.OFF="OFF"})(zi||(zi={}));var qi;(function(m){m.MODE_UNSPECIFIED="MODE_UNSPECIFIED",m.MODE_DYNAMIC="MODE_DYNAMIC"})(qi||(qi={}));var Vi;(function(m){m.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",m.NO_AUTH="NO_AUTH",m.API_KEY_AUTH="API_KEY_AUTH",m.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",m.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",m.OAUTH="OAUTH",m.OIDC_AUTH="OIDC_AUTH"})(Vi||(Vi={}));var Hi;(function(m){m.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",m.SIMPLE_SEARCH="SIMPLE_SEARCH",m.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Hi||(Hi={}));var Wi;(function(m){m.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",m.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",m.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",m.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",m.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wi||(Wi={}));var Gi;(function(m){m.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",m.STOP="STOP",m.MAX_TOKENS="MAX_TOKENS",m.SAFETY="SAFETY",m.RECITATION="RECITATION",m.LANGUAGE="LANGUAGE",m.OTHER="OTHER",m.BLOCKLIST="BLOCKLIST",m.PROHIBITED_CONTENT="PROHIBITED_CONTENT",m.SPII="SPII",m.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",m.IMAGE_SAFETY="IMAGE_SAFETY",m.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",m.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",m.NO_IMAGE="NO_IMAGE"})(Gi||(Gi={}));var Xi;(function(m){m.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",m.NEGLIGIBLE="NEGLIGIBLE",m.LOW="LOW",m.MEDIUM="MEDIUM",m.HIGH="HIGH"})(Xi||(Xi={}));var Yi;(function(m){m.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",m.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",m.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",m.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",m.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Yi||(Yi={}));var Ki;(function(m){m.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",m.SAFETY="SAFETY",m.OTHER="OTHER",m.BLOCKLIST="BLOCKLIST",m.PROHIBITED_CONTENT="PROHIBITED_CONTENT",m.IMAGE_SAFETY="IMAGE_SAFETY"})(Ki||(Ki={}));var Ji;(function(m){m.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",m.ON_DEMAND="ON_DEMAND",m.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ji||(Ji={}));var pn;(function(m){m.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",m.TEXT="TEXT",m.IMAGE="IMAGE",m.AUDIO="AUDIO"})(pn||(pn={}));var Zi;(function(m){m.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",m.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",m.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",m.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zi||(Zi={}));var Kn;(function(m){m.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",m.JOB_STATE_QUEUED="JOB_STATE_QUEUED",m.JOB_STATE_PENDING="JOB_STATE_PENDING",m.JOB_STATE_RUNNING="JOB_STATE_RUNNING",m.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",m.JOB_STATE_FAILED="JOB_STATE_FAILED",m.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",m.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",m.JOB_STATE_PAUSED="JOB_STATE_PAUSED",m.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",m.JOB_STATE_UPDATING="JOB_STATE_UPDATING",m.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kn||(Kn={}));var Qi;(function(m){m.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",m.TUNING_MODE_FULL="TUNING_MODE_FULL",m.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qi||(Qi={}));var eo;(function(m){m.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",m.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",m.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",m.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",m.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",m.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",m.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(eo||(eo={}));var to;(function(m){m.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",m.TUNING_TASK_I2V="TUNING_TASK_I2V",m.TUNING_TASK_T2V="TUNING_TASK_T2V"})(to||(to={}));var ro;(function(m){m.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",m.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",m.BALANCED="BALANCED",m.PRIORITIZE_COST="PRIORITIZE_COST"})(ro||(ro={}));var so;(function(m){m.UNSPECIFIED="UNSPECIFIED",m.BLOCKING="BLOCKING",m.NON_BLOCKING="NON_BLOCKING"})(so||(so={}));var no;(function(m){m.MODE_UNSPECIFIED="MODE_UNSPECIFIED",m.MODE_DYNAMIC="MODE_DYNAMIC"})(no||(no={}));var io;(function(m){m.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",m.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(io||(io={}));var oo;(function(m){m.MODE_UNSPECIFIED="MODE_UNSPECIFIED",m.AUTO="AUTO",m.ANY="ANY",m.NONE="NONE",m.VALIDATED="VALIDATED"})(oo||(oo={}));var ao;(function(m){m.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",m.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",m.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",m.BLOCK_NONE="BLOCK_NONE"})(ao||(ao={}));var lo;(function(m){m.DONT_ALLOW="DONT_ALLOW",m.ALLOW_ADULT="ALLOW_ADULT",m.ALLOW_ALL="ALLOW_ALL"})(lo||(lo={}));var co;(function(m){m.auto="auto",m.en="en",m.ja="ja",m.ko="ko",m.hi="hi",m.zh="zh",m.pt="pt",m.es="es"})(co||(co={}));var uo;(function(m){m.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",m.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",m.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",m.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",m.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uo||(uo={}));var fo;(function(m){m.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",m.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",m.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",m.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fo||(fo={}));var ho;(function(m){m.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",m.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",m.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",m.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ho||(ho={}));var mo;(function(m){m.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",m.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",m.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",m.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",m.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",m.EDIT_MODE_STYLE="EDIT_MODE_STYLE",m.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",m.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(mo||(mo={}));var po;(function(m){m.FOREGROUND="FOREGROUND",m.BACKGROUND="BACKGROUND",m.PROMPT="PROMPT",m.SEMANTIC="SEMANTIC",m.INTERACTIVE="INTERACTIVE"})(po||(po={}));var go;(function(m){m.ASSET="ASSET",m.STYLE="STYLE"})(go||(go={}));var bo;(function(m){m.INSERT="INSERT",m.REMOVE="REMOVE",m.REMOVE_STATIC="REMOVE_STATIC",m.OUTPAINT="OUTPAINT"})(bo||(bo={}));var xo;(function(m){m.OPTIMIZED="OPTIMIZED",m.LOSSLESS="LOSSLESS"})(xo||(xo={}));var yo;(function(m){m.STATE_UNSPECIFIED="STATE_UNSPECIFIED",m.PROCESSING="PROCESSING",m.ACTIVE="ACTIVE",m.FAILED="FAILED"})(yo||(yo={}));var vo;(function(m){m.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",m.UPLOADED="UPLOADED",m.GENERATED="GENERATED"})(vo||(vo={}));var wo;(function(m){m.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",m.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",m.RESPONSE_REJECTED="RESPONSE_REJECTED",m.NEED_MORE_INPUT="NEED_MORE_INPUT"})(wo||(wo={}));var _o;(function(m){m.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",m.TEXT="TEXT",m.IMAGE="IMAGE",m.VIDEO="VIDEO",m.AUDIO="AUDIO",m.DOCUMENT="DOCUMENT"})(_o||(_o={}));var ko;(function(m){m.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",m.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",m.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ko||(ko={}));var jo;(function(m){m.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",m.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",m.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jo||(jo={}));var So;(function(m){m.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",m.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",m.NO_INTERRUPTION="NO_INTERRUPTION"})(So||(So={}));var Co;(function(m){m.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",m.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",m.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Co||(Co={}));var No;(function(m){m.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",m.SILENT="SILENT",m.WHEN_IDLE="WHEN_IDLE",m.INTERRUPT="INTERRUPT"})(No||(No={}));var Ao;(function(m){m.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",m.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",m.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",m.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",m.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",m.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",m.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",m.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",m.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",m.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",m.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",m.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",m.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ao||(Ao={}));var To;(function(m){m.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",m.QUALITY="QUALITY",m.DIVERSITY="DIVERSITY",m.VOCALIZATION="VOCALIZATION"})(To||(To={}));var vs;(function(m){m.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",m.PLAY="PLAY",m.PAUSE="PAUSE",m.STOP="STOP",m.RESET_CONTEXT="RESET_CONTEXT"})(vs||(vs={}));class Jn{constructor(a){const e={};for(const h of a.headers.entries())e[h[0]]=h[1];this.headers=e,this.responseInternal=a}json(){return this.responseInternal.json()}}class Ps{get text(){var a,e,h,f,l,s,o,r;if(((f=(h=(e=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||e===void 0?void 0:e.content)===null||h===void 0?void 0:h.parts)===null||f===void 0?void 0:f.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let t="",n=!1;const u=[];for(const c of(r=(o=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[d,b]of Object.entries(c))d!=="text"&&d!=="thought"&&(b!==null||b!==void 0)&&u.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;n=!0,t+=c.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),n?t:void 0}get data(){var a,e,h,f,l,s,o,r;if(((f=(h=(e=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||e===void 0?void 0:e.content)===null||h===void 0?void 0:h.parts)===null||f===void 0?void 0:f.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let t="";const n=[];for(const u of(r=(o=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="inlineData"&&(d!==null||d!==void 0)&&n.push(c);u.inlineData&&typeof u.inlineData.data=="string"&&(t+=atob(u.inlineData.data))}return n.length>0&&console.warn(`there are non-data parts ${n} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),t.length>0?btoa(t):void 0}get functionCalls(){var a,e,h,f,l,s,o,r;if(((f=(h=(e=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||e===void 0?void 0:e.content)===null||h===void 0?void 0:h.parts)===null||f===void 0?void 0:f.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const t=(r=(o=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.filter(n=>n.functionCall).map(n=>n.functionCall).filter(n=>n!==void 0);if((t==null?void 0:t.length)!==0)return t}get executableCode(){var a,e,h,f,l,s,o,r,t;if(((f=(h=(e=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||e===void 0?void 0:e.content)===null||h===void 0?void 0:h.parts)===null||f===void 0?void 0:f.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const n=(r=(o=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.filter(u=>u.executableCode).map(u=>u.executableCode).filter(u=>u!==void 0);if((n==null?void 0:n.length)!==0)return(t=n==null?void 0:n[0])===null||t===void 0?void 0:t.code}get codeExecutionResult(){var a,e,h,f,l,s,o,r,t;if(((f=(h=(e=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||e===void 0?void 0:e.content)===null||h===void 0?void 0:h.parts)===null||f===void 0?void 0:f.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const n=(r=(o=(s=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.filter(u=>u.codeExecutionResult).map(u=>u.codeExecutionResult).filter(u=>u!==void 0);if((n==null?void 0:n.length)!==0)return(t=n==null?void 0:n[0])===null||t===void 0?void 0:t.output}}class Eo{}class Io{}class _d{}class kd{}class jd{}class Sd{}class Mo{}class Ro{}class Po{}class Cd{}class gn{_fromAPIResponse({apiResponse:a,isVertexAI:e}){const h=new gn;let f;const l=a;return e?f=hd(l):f=fd(l),Object.assign(h,f),h}}class Do{}class Fo{}class Lo{}class Nd{}class Ad{}class Td{}class Oo{}class Ed{get text(){var a,e,h;let f="",l=!1;const s=[];for(const o of(h=(e=(a=this.serverContent)===null||a===void 0?void 0:a.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&h!==void 0?h:[]){for(const[r,t]of Object.entries(o))r!=="text"&&r!=="thought"&&t!==null&&s.push(r);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;l=!0,f+=o.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?f:void 0}get data(){var a,e,h;let f="";const l=[];for(const s of(h=(e=(a=this.serverContent)===null||a===void 0?void 0:a.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&h!==void 0?h:[]){for(const[o,r]of Object.entries(s))o!=="inlineData"&&r!==null&&l.push(o);s.inlineData&&typeof s.inlineData.data=="string"&&(f+=atob(s.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}}class Id{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ct(m,a){if(!a||typeof a!="string")throw new Error("model is required and must be a string");if(m.isVertexAI()){if(a.startsWith("publishers/")||a.startsWith("projects/")||a.startsWith("models/"))return a;if(a.indexOf("/")>=0){const e=a.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${a}`}else return a.startsWith("models/")||a.startsWith("tunedModels/")?a:`models/${a}`}function Xa(m,a){const e=Ct(m,a);return e?e.startsWith("publishers/")&&m.isVertexAI()?`projects/${m.getProject()}/locations/${m.getLocation()}/${e}`:e.startsWith("models/")&&m.isVertexAI()?`projects/${m.getProject()}/locations/${m.getLocation()}/publishers/google/${e}`:e:""}function Ya(m){return Array.isArray(m)?m.map(a=>bn(a)):[bn(m)]}function bn(m){if(typeof m=="object"&&m!==null)return m;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof m}`)}function Ka(m){const a=bn(m);if(a.mimeType&&a.mimeType.startsWith("image/"))return a;throw new Error(`Unsupported mime type: ${a.mimeType}`)}function Ja(m){const a=bn(m);if(a.mimeType&&a.mimeType.startsWith("audio/"))return a;throw new Error(`Unsupported mime type: ${a.mimeType}`)}function Bo(m){if(m==null)throw new Error("PartUnion is required");if(typeof m=="object")return m;if(typeof m=="string")return{text:m};throw new Error(`Unsupported part type: ${typeof m}`)}function Za(m){if(m==null||Array.isArray(m)&&m.length===0)throw new Error("PartListUnion is required");return Array.isArray(m)?m.map(a=>Bo(a)):[Bo(m)]}function Zn(m){return m!=null&&typeof m=="object"&&"parts"in m&&Array.isArray(m.parts)}function Uo(m){return m!=null&&typeof m=="object"&&"functionCall"in m}function $o(m){return m!=null&&typeof m=="object"&&"functionResponse"in m}function Qt(m){if(m==null)throw new Error("ContentUnion is required");return Zn(m)?m:{role:"user",parts:Za(m)}}function pi(m,a){if(!a)return[];if(m.isVertexAI()&&Array.isArray(a))return a.flatMap(e=>{const h=Qt(e);return h.parts&&h.parts.length>0&&h.parts[0].text!==void 0?[h.parts[0].text]:[]});if(m.isVertexAI()){const e=Qt(a);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(a)?a.map(e=>Qt(e)):[Qt(a)]}function gr(m){if(m==null||Array.isArray(m)&&m.length===0)throw new Error("contents are required");if(!Array.isArray(m)){if(Uo(m)||$o(m))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Qt(m)]}const a=[],e=[],h=Zn(m[0]);for(const f of m){const l=Zn(f);if(l!=h)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)a.push(f);else{if(Uo(f)||$o(f))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(f)}}return h||a.push({role:"user",parts:Za(e)}),a}function Md(m,a){m.includes("null")&&(a.nullable=!0);const e=m.filter(h=>h!=="null");if(e.length===1)a.type=Object.values(Wr).includes(e[0].toUpperCase())?e[0].toUpperCase():Wr.TYPE_UNSPECIFIED;else{a.anyOf=[];for(const h of e)a.anyOf.push({type:Object.values(Wr).includes(h.toUpperCase())?h.toUpperCase():Wr.TYPE_UNSPECIFIED})}}function ws(m){const a={},e=["items"],h=["anyOf"],f=["properties"];if(m.type&&m.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=m.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(a.nullable=!0,m=l[1]):l[1].type==="null"&&(a.nullable=!0,m=l[0])),m.type instanceof Array&&Md(m.type,a);for(const[s,o]of Object.entries(m))if(o!=null)if(s=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;a.type=Object.values(Wr).includes(o.toUpperCase())?o.toUpperCase():Wr.TYPE_UNSPECIFIED}else if(e.includes(s))a[s]=ws(o);else if(h.includes(s)){const r=[];for(const t of o){if(t.type=="null"){a.nullable=!0;continue}r.push(ws(t))}a[s]=r}else if(f.includes(s)){const r={};for(const[t,n]of Object.entries(o))r[t]=ws(n);a[s]=r}else{if(s==="additionalProperties")continue;a[s]=o}return a}function gi(m){return ws(m)}function bi(m){if(typeof m=="object")return m;if(typeof m=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:m}}};throw new Error(`Unsupported speechConfig type: ${typeof m}`)}function xi(m){if("multiSpeakerVoiceConfig"in m)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return m}function Ns(m){if(m.functionDeclarations)for(const a of m.functionDeclarations)a.parameters&&(Object.keys(a.parameters).includes("$schema")?a.parametersJsonSchema||(a.parametersJsonSchema=a.parameters,delete a.parameters):a.parameters=ws(a.parameters)),a.response&&(Object.keys(a.response).includes("$schema")?a.responseJsonSchema||(a.responseJsonSchema=a.response,delete a.response):a.response=ws(a.response));return m}function As(m){if(m==null)throw new Error("tools is required");if(!Array.isArray(m))throw new Error("tools is required and must be an array of Tools");const a=[];for(const e of m)a.push(e);return a}function Rd(m,a,e,h=1){const f=!a.startsWith(`${e}/`)&&a.split("/").length===h;return m.isVertexAI()?a.startsWith("projects/")?a:a.startsWith("locations/")?`projects/${m.getProject()}/${a}`:a.startsWith(`${e}/`)?`projects/${m.getProject()}/locations/${m.getLocation()}/${a}`:f?`projects/${m.getProject()}/locations/${m.getLocation()}/${e}/${a}`:a:f?`${e}/${a}`:a}function Br(m,a){if(typeof a!="string")throw new Error("name must be a string");return Rd(m,a,"cachedContents")}function Qa(m){switch(m){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return m}}function Kr(m){return mi(m)}function Pd(m){return m!=null&&typeof m=="object"&&"name"in m}function Dd(m){return m!=null&&typeof m=="object"&&"video"in m}function Fd(m){return m!=null&&typeof m=="object"&&"uri"in m}function el(m){var a;let e;if(Pd(m)&&(e=m.name),!(Fd(m)&&(e=m.uri,e===void 0))&&!(Dd(m)&&(e=(a=m.video)===null||a===void 0?void 0:a.uri,e===void 0))){if(typeof m=="string"&&(e=m),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const f=e.split("files/")[1].match(/[a-z0-9]+/);if(f===null)throw new Error(`Could not extract file name from URI ${e}`);e=f[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function tl(m,a){let e;return m.isVertexAI()?e=a?"publishers/google/models":"models":e=a?"models":"tunedModels",e}function rl(m){for(const a of["models","tunedModels","publisherModels"])if(Ld(m,a))return m[a];return[]}function Ld(m,a){return m!==null&&typeof m=="object"&&a in m}function Od(m,a={}){const e=m,h={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(h.responseJsonSchema=e.outputSchema),a.behavior&&(h.behavior=a.behavior),{functionDeclarations:[h]}}function Bd(m,a={}){const e=[],h=new Set;for(const f of m){const l=f.name;if(h.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);h.add(l);const s=Od(f,a);s.functionDeclarations&&e.push(...s.functionDeclarations)}return{functionDeclarations:e}}function sl(m,a){let e;if(typeof a=="string")if(m.isVertexAI())if(a.startsWith("gs://"))e={format:"jsonl",gcsUri:[a]};else if(a.startsWith("bq://"))e={format:"bigquery",bigqueryUri:a};else throw new Error(`Unsupported string source for Vertex AI: ${a}`);else if(a.startsWith("files/"))e={fileName:a};else throw new Error(`Unsupported string source for Gemini API: ${a}`);else if(Array.isArray(a)){if(m.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:a}}else e=a;const h=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,f=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(m.isVertexAI()){if(f>0||h!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(h>0||f!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function Ud(m){if(typeof m!="string")return m;const a=m;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw new Error(`Unsupported destination: ${a}`)}function nl(m){if(typeof m!="object"||m===null)return{};const a=m,e=a.inlinedResponses;if(typeof e!="object"||e===null)return m;const f=e.inlinedResponses;if(!Array.isArray(f)||f.length===0)return m;let l=!1;for(const s of f){if(typeof s!="object"||s===null)continue;const r=s.response;if(typeof r!="object"||r===null)continue;if(r.embedding!==void 0){l=!0;break}}return l&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),m}function Ts(m,a){const e=a;if(!m.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function il(m){const a=m;return a==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":a==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":a==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":a==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":a==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":a==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":a==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $d(m){const a={},e=P(m,["responsesFile"]);e!=null&&z(a,["fileName"],e);const h=P(m,["inlinedResponses","inlinedResponses"]);if(h!=null){let l=h;Array.isArray(l)&&(l=l.map(s=>xu(s))),z(a,["inlinedResponses"],l)}const f=P(m,["inlinedEmbedContentResponses","inlinedResponses"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>s)),z(a,["inlinedEmbedContentResponses"],l)}return a}function zd(m){const a={},e=P(m,["predictionsFormat"]);e!=null&&z(a,["format"],e);const h=P(m,["gcsDestination","outputUriPrefix"]);h!=null&&z(a,["gcsUri"],h);const f=P(m,["bigqueryDestination","outputUri"]);return f!=null&&z(a,["bigqueryUri"],f),a}function qd(m){const a={},e=P(m,["format"]);e!=null&&z(a,["predictionsFormat"],e);const h=P(m,["gcsUri"]);h!=null&&z(a,["gcsDestination","outputUriPrefix"],h);const f=P(m,["bigqueryUri"]);if(f!=null&&z(a,["bigqueryDestination","outputUri"],f),P(m,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(P(m,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(P(m,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return a}function fn(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["metadata","displayName"]);h!=null&&z(a,["displayName"],h);const f=P(m,["metadata","state"]);f!=null&&z(a,["state"],il(f));const l=P(m,["metadata","createTime"]);l!=null&&z(a,["createTime"],l);const s=P(m,["metadata","endTime"]);s!=null&&z(a,["endTime"],s);const o=P(m,["metadata","updateTime"]);o!=null&&z(a,["updateTime"],o);const r=P(m,["metadata","model"]);r!=null&&z(a,["model"],r);const t=P(m,["metadata","output"]);return t!=null&&z(a,["dest"],$d(nl(t))),a}function Qn(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["displayName"]);h!=null&&z(a,["displayName"],h);const f=P(m,["state"]);f!=null&&z(a,["state"],il(f));const l=P(m,["error"]);l!=null&&z(a,["error"],l);const s=P(m,["createTime"]);s!=null&&z(a,["createTime"],s);const o=P(m,["startTime"]);o!=null&&z(a,["startTime"],o);const r=P(m,["endTime"]);r!=null&&z(a,["endTime"],r);const t=P(m,["updateTime"]);t!=null&&z(a,["updateTime"],t);const n=P(m,["model"]);n!=null&&z(a,["model"],n);const u=P(m,["inputConfig"]);u!=null&&z(a,["src"],Vd(u));const c=P(m,["outputConfig"]);return c!=null&&z(a,["dest"],zd(nl(c))),a}function Vd(m){const a={},e=P(m,["instancesFormat"]);e!=null&&z(a,["format"],e);const h=P(m,["gcsSource","uris"]);h!=null&&z(a,["gcsUri"],h);const f=P(m,["bigquerySource","inputUri"]);return f!=null&&z(a,["bigqueryUri"],f),a}function Hd(m,a){const e={};if(P(a,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(P(a,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(P(a,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const h=P(a,["fileName"]);h!=null&&z(e,["fileName"],h);const f=P(a,["inlinedRequests"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>bu(m,s))),z(e,["requests","requests"],l)}return e}function Wd(m){const a={},e=P(m,["format"]);e!=null&&z(a,["instancesFormat"],e);const h=P(m,["gcsUri"]);h!=null&&z(a,["gcsSource","uris"],h);const f=P(m,["bigqueryUri"]);if(f!=null&&z(a,["bigquerySource","inputUri"],f),P(m,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(P(m,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return a}function Gd(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["data"]);e!=null&&z(a,["data"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function Xd(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function Yd(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function Kd(m){const a={},e=P(m,["content"]);e!=null&&z(a,["content"],e);const h=P(m,["citationMetadata"]);h!=null&&z(a,["citationMetadata"],Jd(h));const f=P(m,["tokenCount"]);f!=null&&z(a,["tokenCount"],f);const l=P(m,["finishReason"]);l!=null&&z(a,["finishReason"],l);const s=P(m,["urlContextMetadata"]);s!=null&&z(a,["urlContextMetadata"],s);const o=P(m,["avgLogprobs"]);o!=null&&z(a,["avgLogprobs"],o);const r=P(m,["groundingMetadata"]);r!=null&&z(a,["groundingMetadata"],r);const t=P(m,["index"]);t!=null&&z(a,["index"],t);const n=P(m,["logprobsResult"]);n!=null&&z(a,["logprobsResult"],n);const u=P(m,["safetyRatings"]);if(u!=null){let c=u;Array.isArray(c)&&(c=c.map(d=>d)),z(a,["safetyRatings"],c)}return a}function Jd(m){const a={},e=P(m,["citationSources"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>f)),z(a,["citations"],h)}return a}function ol(m){const a={},e=P(m,["parts"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(l=>Su(l))),z(a,["parts"],f)}const h=P(m,["role"]);return h!=null&&z(a,["role"],h),a}function Zd(m,a){const e={},h=P(m,["displayName"]);if(a!==void 0&&h!=null&&z(a,["batch","displayName"],h),P(m,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function Qd(m,a){const e={},h=P(m,["displayName"]);a!==void 0&&h!=null&&z(a,["displayName"],h);const f=P(m,["dest"]);return a!==void 0&&f!=null&&z(a,["outputConfig"],qd(Ud(f))),e}function zo(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["src"]);f!=null&&z(e,["batch","inputConfig"],Hd(m,sl(m,f)));const l=P(a,["config"]);return l!=null&&Zd(l,e),e}function eu(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["model"],Ct(m,h));const f=P(a,["src"]);f!=null&&z(e,["inputConfig"],Wd(sl(m,f)));const l=P(a,["config"]);return l!=null&&Qd(l,e),e}function tu(m,a){const e={},h=P(m,["displayName"]);return a!==void 0&&h!=null&&z(a,["batch","displayName"],h),e}function ru(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["src"]);f!=null&&z(e,["batch","inputConfig"],cu(m,f));const l=P(a,["config"]);return l!=null&&tu(l,e),e}function su(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function nu(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function iu(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);return l!=null&&z(a,["error"],l),a}function ou(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);return l!=null&&z(a,["error"],l),a}function au(m,a){const e={},h=P(a,["contents"]);if(h!=null){let l=pi(m,h);Array.isArray(l)&&(l=l.map(s=>s)),z(e,["requests[]","request","content"],l)}const f=P(a,["config"]);return f!=null&&(z(e,["_self"],lu(f,e)),dd(e,{"requests[].*":"requests[].request.*"})),e}function lu(m,a){const e={},h=P(m,["taskType"]);a!==void 0&&h!=null&&z(a,["requests[]","taskType"],h);const f=P(m,["title"]);a!==void 0&&f!=null&&z(a,["requests[]","title"],f);const l=P(m,["outputDimensionality"]);if(a!==void 0&&l!=null&&z(a,["requests[]","outputDimensionality"],l),P(m,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(P(m,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function cu(m,a){const e={},h=P(a,["fileName"]);h!=null&&z(e,["file_name"],h);const f=P(a,["inlinedRequests"]);return f!=null&&z(e,["requests"],au(m,f)),e}function du(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["fileUri"]);e!=null&&z(a,["fileUri"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function uu(m,a,e){const h={},f=P(a,["systemInstruction"]);e!==void 0&&f!=null&&z(e,["systemInstruction"],ol(Qt(f)));const l=P(a,["temperature"]);l!=null&&z(h,["temperature"],l);const s=P(a,["topP"]);s!=null&&z(h,["topP"],s);const o=P(a,["topK"]);o!=null&&z(h,["topK"],o);const r=P(a,["candidateCount"]);r!=null&&z(h,["candidateCount"],r);const t=P(a,["maxOutputTokens"]);t!=null&&z(h,["maxOutputTokens"],t);const n=P(a,["stopSequences"]);n!=null&&z(h,["stopSequences"],n);const u=P(a,["responseLogprobs"]);u!=null&&z(h,["responseLogprobs"],u);const c=P(a,["logprobs"]);c!=null&&z(h,["logprobs"],c);const d=P(a,["presencePenalty"]);d!=null&&z(h,["presencePenalty"],d);const b=P(a,["frequencyPenalty"]);b!=null&&z(h,["frequencyPenalty"],b);const g=P(a,["seed"]);g!=null&&z(h,["seed"],g);const p=P(a,["responseMimeType"]);p!=null&&z(h,["responseMimeType"],p);const x=P(a,["responseSchema"]);x!=null&&z(h,["responseSchema"],gi(x));const y=P(a,["responseJsonSchema"]);if(y!=null&&z(h,["responseJsonSchema"],y),P(a,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(P(a,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=P(a,["safetySettings"]);if(e!==void 0&&v!=null){let O=v;Array.isArray(O)&&(O=O.map(T=>Cu(T))),z(e,["safetySettings"],O)}const S=P(a,["tools"]);if(e!==void 0&&S!=null){let O=As(S);Array.isArray(O)&&(O=O.map(T=>Nu(Ns(T)))),z(e,["tools"],O)}const N=P(a,["toolConfig"]);if(e!==void 0&&N!=null&&z(e,["toolConfig"],N),P(a,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=P(a,["cachedContent"]);e!==void 0&&R!=null&&z(e,["cachedContent"],Br(m,R));const B=P(a,["responseModalities"]);B!=null&&z(h,["responseModalities"],B);const M=P(a,["mediaResolution"]);M!=null&&z(h,["mediaResolution"],M);const F=P(a,["speechConfig"]);if(F!=null&&z(h,["speechConfig"],bi(F)),P(a,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=P(a,["thinkingConfig"]);q!=null&&z(h,["thinkingConfig"],q);const V=P(a,["imageConfig"]);return V!=null&&z(h,["imageConfig"],V),h}function fu(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["candidates"]);if(h!=null){let r=h;Array.isArray(r)&&(r=r.map(t=>Kd(t))),z(a,["candidates"],r)}const f=P(m,["modelVersion"]);f!=null&&z(a,["modelVersion"],f);const l=P(m,["promptFeedback"]);l!=null&&z(a,["promptFeedback"],l);const s=P(m,["responseId"]);s!=null&&z(a,["responseId"],s);const o=P(m,["usageMetadata"]);return o!=null&&z(a,["usageMetadata"],o),a}function hu(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function mu(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Ts(m,h)),e}function pu(m){const a={};if(P(m,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=P(m,["enableWidget"]);return e!=null&&z(a,["enableWidget"],e),a}function gu(m){const a={},e=P(m,["timeRangeFilter"]);if(e!=null&&z(a,["timeRangeFilter"],e),P(m,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return a}function bu(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["request","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let o=gr(f);Array.isArray(o)&&(o=o.map(r=>ol(r))),z(e,["request","contents"],o)}const l=P(a,["metadata"]);l!=null&&z(e,["metadata"],l);const s=P(a,["config"]);return s!=null&&z(e,["request","generationConfig"],uu(m,s,P(e,["request"],{}))),e}function xu(m){const a={},e=P(m,["response"]);e!=null&&z(a,["response"],fu(e));const h=P(m,["error"]);return h!=null&&z(a,["error"],h),a}function yu(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);if(a!==void 0&&f!=null&&z(a,["_query","pageToken"],f),P(m,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function vu(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);a!==void 0&&f!=null&&z(a,["_query","pageToken"],f);const l=P(m,["filter"]);return a!==void 0&&l!=null&&z(a,["_query","filter"],l),e}function wu(m){const a={},e=P(m,["config"]);return e!=null&&yu(e,a),a}function _u(m){const a={},e=P(m,["config"]);return e!=null&&vu(e,a),a}function ku(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["operations"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>fn(s))),z(a,["batchJobs"],l)}return a}function ju(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["batchPredictionJobs"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>Qn(s))),z(a,["batchJobs"],l)}return a}function Su(m){const a={},e=P(m,["videoMetadata"]);e!=null&&z(a,["videoMetadata"],e);const h=P(m,["thought"]);h!=null&&z(a,["thought"],h);const f=P(m,["inlineData"]);f!=null&&z(a,["inlineData"],Gd(f));const l=P(m,["fileData"]);l!=null&&z(a,["fileData"],du(l));const s=P(m,["thoughtSignature"]);s!=null&&z(a,["thoughtSignature"],s);const o=P(m,["functionCall"]);o!=null&&z(a,["functionCall"],o);const r=P(m,["codeExecutionResult"]);r!=null&&z(a,["codeExecutionResult"],r);const t=P(m,["executableCode"]);t!=null&&z(a,["executableCode"],t);const n=P(m,["functionResponse"]);n!=null&&z(a,["functionResponse"],n);const u=P(m,["text"]);return u!=null&&z(a,["text"],u),a}function Cu(m){const a={};if(P(m,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=P(m,["category"]);e!=null&&z(a,["category"],e);const h=P(m,["threshold"]);return h!=null&&z(a,["threshold"],h),a}function Nu(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let t=e;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["functionDeclarations"],t)}if(P(m,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const h=P(m,["googleSearch"]);h!=null&&z(a,["googleSearch"],gu(h));const f=P(m,["googleSearchRetrieval"]);if(f!=null&&z(a,["googleSearchRetrieval"],f),P(m,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=P(m,["googleMaps"]);l!=null&&z(a,["googleMaps"],pu(l));const s=P(m,["urlContext"]);s!=null&&z(a,["urlContext"],s);const o=P(m,["computerUse"]);o!=null&&z(a,["computerUse"],o);const r=P(m,["codeExecution"]);return r!=null&&z(a,["codeExecution"],r),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ts;(function(m){m.PAGED_ITEM_BATCH_JOBS="batchJobs",m.PAGED_ITEM_MODELS="models",m.PAGED_ITEM_TUNING_JOBS="tuningJobs",m.PAGED_ITEM_FILES="files",m.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ts||(ts={}));class Hs{constructor(a,e,h,f){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(a,h,f)}init(a,e,h){var f,l;this.nameInternal=a,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!h||Object.keys(h).length===0?s={config:{}}:typeof h=="object"?s=Object.assign({},h):s=h,s.config&&(s.config.pageToken=e.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(l=(f=s.config)===null||f===void 0?void 0:f.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return((a=this.params.config)===null||a===void 0?void 0:a.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Au extends cs{constructor(a){super(),this.apiClient=a,this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)},this.list=async(e={})=>new Hs(ts.PAGED_ITEM_BATCH_JOBS,h=>this.listInternal(h),await this.listInternal(e),e)}createInlinedGenerateContentRequest(a){const e=zo(this.apiClient,a),h=e._url,f=Xe("{model}:batchGenerateContent",h),o=e.batch.inputConfig.requests,r=o.requests,t=[];for(const n of r){const u=Object.assign({},n);if(u.systemInstruction){const c=u.systemInstruction;delete u.systemInstruction;const d=u.request;d.systemInstruction=c,u.request=d}t.push(u)}return o.requests=t,delete e.config,delete e._url,delete e._query,{path:f,body:e}}getGcsUri(a){if(typeof a=="string")return a.startsWith("gs://")?a:void 0;if(!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0)return a.gcsUri[0]}getBigqueryUri(a){if(typeof a=="string")return a.startsWith("bq://")?a:void 0;if(!Array.isArray(a))return a.bigqueryUri}formatDestination(a,e){const h=e?Object.assign({},e):{},f=Date.now().toString();if(h.displayName||(h.displayName=`genaiBatchJob_${f}`),h.dest===void 0){const l=this.getGcsUri(a),s=this.getBigqueryUri(a);if(l)l.endsWith(".jsonl")?h.dest=`${l.slice(0,-6)}/dest`:h.dest=`${l}_dest_${f}`;else if(s)h.dest=`${s}_dest_${f}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return h}async createInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=eu(this.apiClient,a);return o=Xe("batchPredictionJobs",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>Qn(n))}else{const t=zo(this.apiClient,a);return o=Xe("{model}:batchGenerateContent",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>fn(n))}}async createEmbeddingsInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ru(this.apiClient,a);return l=Xe("{model}:asyncBatchEmbedContent",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f.then(r=>fn(r))}}async get(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=mu(this.apiClient,a);return o=Xe("batchPredictionJobs/{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>Qn(n))}else{const t=hu(this.apiClient,a);return o=Xe("batches/{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>fn(n))}}async cancel(a){var e,h,f,l;let s="",o={};if(this.apiClient.isVertexAI()){const r=Yd(this.apiClient,a);s=Xe("batchPredictionJobs/{name}:cancel",r._url),o=r._query,delete r._url,delete r._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal})}else{const r=Xd(this.apiClient,a);s=Xe("batches/{name}:cancel",r._url),o=r._query,delete r._url,delete r._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=_u(a);return o=Xe("batchPredictionJobs",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=ju(n),c=new Oo;return Object.assign(c,u),c})}else{const t=wu(a);return o=Xe("batches",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=ku(n),c=new Oo;return Object.assign(c,u),c})}}async delete(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=nu(this.apiClient,a);return o=Xe("batchPredictionJobs/{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>ou(n))}else{const t=su(this.apiClient,a);return o=Xe("batches/{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>iu(n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tu(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["data"]);e!=null&&z(a,["data"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function qo(m){const a={},e=P(m,["parts"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(l=>Ku(l))),z(a,["parts"],f)}const h=P(m,["role"]);return h!=null&&z(a,["role"],h),a}function Eu(m,a){const e={},h=P(m,["ttl"]);a!==void 0&&h!=null&&z(a,["ttl"],h);const f=P(m,["expireTime"]);a!==void 0&&f!=null&&z(a,["expireTime"],f);const l=P(m,["displayName"]);a!==void 0&&l!=null&&z(a,["displayName"],l);const s=P(m,["contents"]);if(a!==void 0&&s!=null){let n=gr(s);Array.isArray(n)&&(n=n.map(u=>qo(u))),z(a,["contents"],n)}const o=P(m,["systemInstruction"]);a!==void 0&&o!=null&&z(a,["systemInstruction"],qo(Qt(o)));const r=P(m,["tools"]);if(a!==void 0&&r!=null){let n=r;Array.isArray(n)&&(n=n.map(u=>Ju(u))),z(a,["tools"],n)}const t=P(m,["toolConfig"]);if(a!==void 0&&t!=null&&z(a,["toolConfig"],t),P(m,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function Iu(m,a){const e={},h=P(m,["ttl"]);a!==void 0&&h!=null&&z(a,["ttl"],h);const f=P(m,["expireTime"]);a!==void 0&&f!=null&&z(a,["expireTime"],f);const l=P(m,["displayName"]);a!==void 0&&l!=null&&z(a,["displayName"],l);const s=P(m,["contents"]);if(a!==void 0&&s!=null){let u=gr(s);Array.isArray(u)&&(u=u.map(c=>c)),z(a,["contents"],u)}const o=P(m,["systemInstruction"]);a!==void 0&&o!=null&&z(a,["systemInstruction"],Qt(o));const r=P(m,["tools"]);if(a!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>Zu(c))),z(a,["tools"],u)}const t=P(m,["toolConfig"]);a!==void 0&&t!=null&&z(a,["toolConfig"],t);const n=P(m,["kmsKeyName"]);return a!==void 0&&n!=null&&z(a,["encryption_spec","kmsKeyName"],n),e}function Mu(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["model"],Xa(m,h));const f=P(a,["config"]);return f!=null&&Eu(f,e),e}function Ru(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["model"],Xa(m,h));const f=P(a,["config"]);return f!=null&&Iu(f,e),e}function Pu(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Br(m,h)),e}function Du(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Br(m,h)),e}function Fu(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function Lu(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function Ou(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["fileUri"]);e!=null&&z(a,["fileUri"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function Bu(m){const a={};if(P(m,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=P(m,["description"]);e!=null&&z(a,["description"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["parameters"]);f!=null&&z(a,["parameters"],f);const l=P(m,["parametersJsonSchema"]);l!=null&&z(a,["parametersJsonSchema"],l);const s=P(m,["response"]);s!=null&&z(a,["response"],s);const o=P(m,["responseJsonSchema"]);return o!=null&&z(a,["responseJsonSchema"],o),a}function Uu(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Br(m,h)),e}function $u(m,a){const e={},h=P(a,["name"]);return h!=null&&z(e,["_url","name"],Br(m,h)),e}function zu(m){const a={};if(P(m,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=P(m,["enableWidget"]);return e!=null&&z(a,["enableWidget"],e),a}function qu(m){const a={},e=P(m,["timeRangeFilter"]);if(e!=null&&z(a,["timeRangeFilter"],e),P(m,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return a}function Vu(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);return a!==void 0&&f!=null&&z(a,["_query","pageToken"],f),e}function Hu(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);return a!==void 0&&f!=null&&z(a,["_query","pageToken"],f),e}function Wu(m){const a={},e=P(m,["config"]);return e!=null&&Vu(e,a),a}function Gu(m){const a={},e=P(m,["config"]);return e!=null&&Hu(e,a),a}function Xu(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["cachedContents"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>s)),z(a,["cachedContents"],l)}return a}function Yu(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["cachedContents"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>s)),z(a,["cachedContents"],l)}return a}function Ku(m){const a={},e=P(m,["videoMetadata"]);e!=null&&z(a,["videoMetadata"],e);const h=P(m,["thought"]);h!=null&&z(a,["thought"],h);const f=P(m,["inlineData"]);f!=null&&z(a,["inlineData"],Tu(f));const l=P(m,["fileData"]);l!=null&&z(a,["fileData"],Ou(l));const s=P(m,["thoughtSignature"]);s!=null&&z(a,["thoughtSignature"],s);const o=P(m,["functionCall"]);o!=null&&z(a,["functionCall"],o);const r=P(m,["codeExecutionResult"]);r!=null&&z(a,["codeExecutionResult"],r);const t=P(m,["executableCode"]);t!=null&&z(a,["executableCode"],t);const n=P(m,["functionResponse"]);n!=null&&z(a,["functionResponse"],n);const u=P(m,["text"]);return u!=null&&z(a,["text"],u),a}function Ju(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let t=e;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["functionDeclarations"],t)}if(P(m,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const h=P(m,["googleSearch"]);h!=null&&z(a,["googleSearch"],qu(h));const f=P(m,["googleSearchRetrieval"]);if(f!=null&&z(a,["googleSearchRetrieval"],f),P(m,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=P(m,["googleMaps"]);l!=null&&z(a,["googleMaps"],zu(l));const s=P(m,["urlContext"]);s!=null&&z(a,["urlContext"],s);const o=P(m,["computerUse"]);o!=null&&z(a,["computerUse"],o);const r=P(m,["codeExecution"]);return r!=null&&z(a,["codeExecution"],r),a}function Zu(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let u=e;Array.isArray(u)&&(u=u.map(c=>Bu(c))),z(a,["functionDeclarations"],u)}const h=P(m,["retrieval"]);h!=null&&z(a,["retrieval"],h);const f=P(m,["googleSearch"]);f!=null&&z(a,["googleSearch"],f);const l=P(m,["googleSearchRetrieval"]);l!=null&&z(a,["googleSearchRetrieval"],l);const s=P(m,["enterpriseWebSearch"]);s!=null&&z(a,["enterpriseWebSearch"],s);const o=P(m,["googleMaps"]);o!=null&&z(a,["googleMaps"],o);const r=P(m,["urlContext"]);r!=null&&z(a,["urlContext"],r);const t=P(m,["computerUse"]);t!=null&&z(a,["computerUse"],t);const n=P(m,["codeExecution"]);return n!=null&&z(a,["codeExecution"],n),a}function Qu(m,a){const e={},h=P(m,["ttl"]);a!==void 0&&h!=null&&z(a,["ttl"],h);const f=P(m,["expireTime"]);return a!==void 0&&f!=null&&z(a,["expireTime"],f),e}function ef(m,a){const e={},h=P(m,["ttl"]);a!==void 0&&h!=null&&z(a,["ttl"],h);const f=P(m,["expireTime"]);return a!==void 0&&f!=null&&z(a,["expireTime"],f),e}function tf(m,a){const e={},h=P(a,["name"]);h!=null&&z(e,["_url","name"],Br(m,h));const f=P(a,["config"]);return f!=null&&Qu(f,e),e}function rf(m,a){const e={},h=P(a,["name"]);h!=null&&z(e,["_url","name"],Br(m,h));const f=P(a,["config"]);return f!=null&&ef(f,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sf extends cs{constructor(a){super(),this.apiClient=a,this.list=async(e={})=>new Hs(ts.PAGED_ITEM_CACHED_CONTENTS,h=>this.listInternal(h),await this.listInternal(e),e)}async create(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Ru(this.apiClient,a);return o=Xe("cachedContents",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>n)}else{const t=Mu(this.apiClient,a);return o=Xe("cachedContents",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>n)}}async get(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=$u(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>n)}else{const t=Uu(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>n)}}async delete(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Du(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Lu(n),c=new Fo;return Object.assign(c,u),c})}else{const t=Pu(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Fu(n),c=new Fo;return Object.assign(c,u),c})}}async update(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=rf(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>n)}else{const t=tf(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>n)}}async listInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Gu(a);return o=Xe("cachedContents",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Yu(n),c=new Lo;return Object.assign(c,u),c})}else{const t=Wu(a);return o=Xe("cachedContents",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Xu(n),c=new Lo;return Object.assign(c,u),c})}}}function Vo(m){var a=typeof Symbol=="function"&&Symbol.iterator,e=a&&m[a],h=0;if(e)return e.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&h>=m.length&&(m=void 0),{value:m&&m[h++],done:!m}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pt(m){return this instanceof Pt?(this.v=m,this):new Pt(m)}function _s(m,a,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=e.apply(m,a||[]),f,l=[];return f=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),f[Symbol.asyncIterator]=function(){return this},f;function s(d){return function(b){return Promise.resolve(b).then(d,u)}}function o(d,b){h[d]&&(f[d]=function(g){return new Promise(function(p,x){l.push([d,g,p,x])>1||r(d,g)})},b&&(f[d]=b(f[d])))}function r(d,b){try{t(h[d](b))}catch(g){c(l[0][3],g)}}function t(d){d.value instanceof Pt?Promise.resolve(d.value.v).then(n,u):c(l[0][2],d)}function n(d){r("next",d)}function u(d){r("throw",d)}function c(d,b){d(b),l.shift(),l.length&&r(l[0][0],l[0][1])}}function Os(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=m[Symbol.asyncIterator],e;return a?a.call(m):(m=typeof Vo=="function"?Vo(m):m[Symbol.iterator](),e={},h("next"),h("throw"),h("return"),e[Symbol.asyncIterator]=function(){return this},e);function h(l){e[l]=m[l]&&function(s){return new Promise(function(o,r){s=m[l](s),f(o,r,s.done,s.value)})}}function f(l,s,o,r){Promise.resolve(r).then(function(t){l({value:t,done:o})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nf(m){var a;if(m.candidates==null||m.candidates.length===0)return!1;const e=(a=m.candidates[0])===null||a===void 0?void 0:a.content;return e===void 0?!1:al(e)}function al(m){if(m.parts===void 0||m.parts.length===0)return!1;for(const a of m.parts)if(a===void 0||Object.keys(a).length===0)return!1;return!0}function of(m){if(m.length!==0){for(const a of m)if(a.role!=="user"&&a.role!=="model")throw new Error(`Role must be user or model, but got ${a.role}.`)}}function Ho(m){if(m===void 0||m.length===0)return[];const a=[],e=m.length;let h=0;for(;h<e;)if(m[h].role==="user")a.push(m[h]),h++;else{const f=[];let l=!0;for(;h<e&&m[h].role==="model";)f.push(m[h]),l&&!al(m[h])&&(l=!1),h++;l?a.push(...f):a.pop()}return a}class af{constructor(a,e){this.modelsModule=a,this.apiClient=e}create(a){return new lf(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class lf{constructor(a,e,h,f={},l=[]){this.apiClient=a,this.modelsModule=e,this.model=h,this.config=f,this.history=l,this.sendPromise=Promise.resolve(),of(l)}async sendMessage(a){var e;await this.sendPromise;const h=Qt(a.message),f=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(h),config:(e=a.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,s,o;const r=await f,t=(s=(l=r.candidates)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.content,n=r.automaticFunctionCallingHistory,u=this.getHistory(!0).length;let c=[];n!=null&&(c=(o=n.slice(u))!==null&&o!==void 0?o:[]);const d=t?[t]:[];this.recordHistory(h,d,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),f}async sendMessageStream(a){var e;await this.sendPromise;const h=Qt(a.message),f=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(h),config:(e=a.config)!==null&&e!==void 0?e:this.config});this.sendPromise=f.then(()=>{}).catch(()=>{});const l=await f;return this.processStreamResponse(l,h)}getHistory(a=!1){const e=a?Ho(this.history):this.history;return structuredClone(e)}processStreamResponse(a,e){var h,f;return _s(this,arguments,function*(){var s,o,r,t;const n=[];try{for(var u=!0,c=Os(a),d;d=yield Pt(c.next()),s=d.done,!s;u=!0){t=d.value,u=!1;const b=t;if(nf(b)){const g=(f=(h=b.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;g!==void 0&&n.push(g)}yield yield Pt(b)}}catch(b){o={error:b}}finally{try{!u&&!s&&(r=c.return)&&(yield Pt(r.call(c)))}finally{if(o)throw o.error}}this.recordHistory(e,n)})}recordHistory(a,e,h){let f=[];e.length>0&&e.every(l=>l.role!==void 0)?f=e:f.push({role:"model",parts:[]}),h&&h.length>0?this.history.push(...Ho(h)):this.history.push(a),this.history.push(...f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sn extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,Sn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(m){const a={},e=P(m,["file"]);return e!=null&&z(a,["file"],e),a}function df(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function uf(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","file"],el(e)),a}function ff(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function hf(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","file"],el(e)),a}function mf(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);return a!==void 0&&f!=null&&z(a,["_query","pageToken"],f),e}function pf(m){const a={},e=P(m,["config"]);return e!=null&&mf(e,a),a}function gf(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["files"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>s)),z(a,["files"],l)}return a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bf extends cs{constructor(a){super(),this.apiClient=a,this.list=async(e={})=>new Hs(ts.PAGED_ITEM_FILES,h=>this.listInternal(h),await this.listInternal(e),e)}async upload(a){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(e=>e)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=pf(a);return l=Xe("files",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>{const t=gf(r),n=new Nd;return Object.assign(n,t),n})}}async createInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=cf(a);return l=Xe("upload/v1beta/files",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f.then(r=>{const t=df(r),n=new Ad;return Object.assign(n,t),n})}}async get(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=hf(a);return l=Xe("files/{file}",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f.then(r=>r)}}async delete(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=uf(a);return l=Xe("files/{file}",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>{const t=ff(r),n=new Td;return Object.assign(n,t),n})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hn(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["data"]);e!=null&&z(a,["data"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function xf(m){const a={},e=P(m,["parts"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(l=>Rf(l))),z(a,["parts"],f)}const h=P(m,["role"]);return h!=null&&z(a,["role"],h),a}function yf(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["fileUri"]);e!=null&&z(a,["fileUri"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function vf(m){const a={};if(P(m,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=P(m,["description"]);e!=null&&z(a,["description"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["parameters"]);f!=null&&z(a,["parameters"],f);const l=P(m,["parametersJsonSchema"]);l!=null&&z(a,["parametersJsonSchema"],l);const s=P(m,["response"]);s!=null&&z(a,["response"],s);const o=P(m,["responseJsonSchema"]);return o!=null&&z(a,["responseJsonSchema"],o),a}function wf(m){const a={},e=P(m,["modelSelectionConfig"]);e!=null&&z(a,["modelConfig"],e);const h=P(m,["audioTimestamp"]);h!=null&&z(a,["audioTimestamp"],h);const f=P(m,["candidateCount"]);f!=null&&z(a,["candidateCount"],f);const l=P(m,["enableAffectiveDialog"]);l!=null&&z(a,["enableAffectiveDialog"],l);const s=P(m,["frequencyPenalty"]);s!=null&&z(a,["frequencyPenalty"],s);const o=P(m,["logprobs"]);o!=null&&z(a,["logprobs"],o);const r=P(m,["maxOutputTokens"]);r!=null&&z(a,["maxOutputTokens"],r);const t=P(m,["mediaResolution"]);t!=null&&z(a,["mediaResolution"],t);const n=P(m,["presencePenalty"]);n!=null&&z(a,["presencePenalty"],n);const u=P(m,["responseJsonSchema"]);u!=null&&z(a,["responseJsonSchema"],u);const c=P(m,["responseLogprobs"]);c!=null&&z(a,["responseLogprobs"],c);const d=P(m,["responseMimeType"]);d!=null&&z(a,["responseMimeType"],d);const b=P(m,["responseModalities"]);b!=null&&z(a,["responseModalities"],b);const g=P(m,["responseSchema"]);g!=null&&z(a,["responseSchema"],g);const p=P(m,["routingConfig"]);p!=null&&z(a,["routingConfig"],p);const x=P(m,["seed"]);x!=null&&z(a,["seed"],x);const y=P(m,["speechConfig"]);y!=null&&z(a,["speechConfig"],ll(y));const v=P(m,["stopSequences"]);v!=null&&z(a,["stopSequences"],v);const S=P(m,["temperature"]);S!=null&&z(a,["temperature"],S);const N=P(m,["thinkingConfig"]);N!=null&&z(a,["thinkingConfig"],N);const R=P(m,["topK"]);R!=null&&z(a,["topK"],R);const B=P(m,["topP"]);return B!=null&&z(a,["topP"],B),a}function _f(m){const a={};if(P(m,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=P(m,["enableWidget"]);return e!=null&&z(a,["enableWidget"],e),a}function kf(m){const a={},e=P(m,["timeRangeFilter"]);if(e!=null&&z(a,["timeRangeFilter"],e),P(m,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return a}function jf(m,a){const e={},h=P(m,["generationConfig"]);a!==void 0&&h!=null&&z(a,["setup","generationConfig"],h);const f=P(m,["responseModalities"]);a!==void 0&&f!=null&&z(a,["setup","generationConfig","responseModalities"],f);const l=P(m,["temperature"]);a!==void 0&&l!=null&&z(a,["setup","generationConfig","temperature"],l);const s=P(m,["topP"]);a!==void 0&&s!=null&&z(a,["setup","generationConfig","topP"],s);const o=P(m,["topK"]);a!==void 0&&o!=null&&z(a,["setup","generationConfig","topK"],o);const r=P(m,["maxOutputTokens"]);a!==void 0&&r!=null&&z(a,["setup","generationConfig","maxOutputTokens"],r);const t=P(m,["mediaResolution"]);a!==void 0&&t!=null&&z(a,["setup","generationConfig","mediaResolution"],t);const n=P(m,["seed"]);a!==void 0&&n!=null&&z(a,["setup","generationConfig","seed"],n);const u=P(m,["speechConfig"]);a!==void 0&&u!=null&&z(a,["setup","generationConfig","speechConfig"],xi(u));const c=P(m,["thinkingConfig"]);a!==void 0&&c!=null&&z(a,["setup","generationConfig","thinkingConfig"],c);const d=P(m,["enableAffectiveDialog"]);a!==void 0&&d!=null&&z(a,["setup","generationConfig","enableAffectiveDialog"],d);const b=P(m,["systemInstruction"]);a!==void 0&&b!=null&&z(a,["setup","systemInstruction"],xf(Qt(b)));const g=P(m,["tools"]);if(a!==void 0&&g!=null){let R=As(g);Array.isArray(R)&&(R=R.map(B=>Df(Ns(B)))),z(a,["setup","tools"],R)}const p=P(m,["sessionResumption"]);a!==void 0&&p!=null&&z(a,["setup","sessionResumption"],Pf(p));const x=P(m,["inputAudioTranscription"]);a!==void 0&&x!=null&&z(a,["setup","inputAudioTranscription"],x);const y=P(m,["outputAudioTranscription"]);a!==void 0&&y!=null&&z(a,["setup","outputAudioTranscription"],y);const v=P(m,["realtimeInputConfig"]);a!==void 0&&v!=null&&z(a,["setup","realtimeInputConfig"],v);const S=P(m,["contextWindowCompression"]);a!==void 0&&S!=null&&z(a,["setup","contextWindowCompression"],S);const N=P(m,["proactivity"]);return a!==void 0&&N!=null&&z(a,["setup","proactivity"],N),e}function Sf(m,a){const e={},h=P(m,["generationConfig"]);a!==void 0&&h!=null&&z(a,["setup","generationConfig"],wf(h));const f=P(m,["responseModalities"]);a!==void 0&&f!=null&&z(a,["setup","generationConfig","responseModalities"],f);const l=P(m,["temperature"]);a!==void 0&&l!=null&&z(a,["setup","generationConfig","temperature"],l);const s=P(m,["topP"]);a!==void 0&&s!=null&&z(a,["setup","generationConfig","topP"],s);const o=P(m,["topK"]);a!==void 0&&o!=null&&z(a,["setup","generationConfig","topK"],o);const r=P(m,["maxOutputTokens"]);a!==void 0&&r!=null&&z(a,["setup","generationConfig","maxOutputTokens"],r);const t=P(m,["mediaResolution"]);a!==void 0&&t!=null&&z(a,["setup","generationConfig","mediaResolution"],t);const n=P(m,["seed"]);a!==void 0&&n!=null&&z(a,["setup","generationConfig","seed"],n);const u=P(m,["speechConfig"]);a!==void 0&&u!=null&&z(a,["setup","generationConfig","speechConfig"],ll(xi(u)));const c=P(m,["thinkingConfig"]);a!==void 0&&c!=null&&z(a,["setup","generationConfig","thinkingConfig"],c);const d=P(m,["enableAffectiveDialog"]);a!==void 0&&d!=null&&z(a,["setup","generationConfig","enableAffectiveDialog"],d);const b=P(m,["systemInstruction"]);a!==void 0&&b!=null&&z(a,["setup","systemInstruction"],Qt(b));const g=P(m,["tools"]);if(a!==void 0&&g!=null){let R=As(g);Array.isArray(R)&&(R=R.map(B=>Ff(Ns(B)))),z(a,["setup","tools"],R)}const p=P(m,["sessionResumption"]);a!==void 0&&p!=null&&z(a,["setup","sessionResumption"],p);const x=P(m,["inputAudioTranscription"]);a!==void 0&&x!=null&&z(a,["setup","inputAudioTranscription"],x);const y=P(m,["outputAudioTranscription"]);a!==void 0&&y!=null&&z(a,["setup","outputAudioTranscription"],y);const v=P(m,["realtimeInputConfig"]);a!==void 0&&v!=null&&z(a,["setup","realtimeInputConfig"],v);const S=P(m,["contextWindowCompression"]);a!==void 0&&S!=null&&z(a,["setup","contextWindowCompression"],S);const N=P(m,["proactivity"]);return a!==void 0&&N!=null&&z(a,["setup","proactivity"],N),e}function Cf(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["setup","model"],Ct(m,h));const f=P(a,["config"]);return f!=null&&z(e,["config"],jf(f,e)),e}function Nf(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["setup","model"],Ct(m,h));const f=P(a,["config"]);return f!=null&&z(e,["config"],Sf(f,e)),e}function Af(m){const a={},e=P(m,["musicGenerationConfig"]);return e!=null&&z(a,["musicGenerationConfig"],e),a}function Tf(m){const a={},e=P(m,["weightedPrompts"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>f)),z(a,["weightedPrompts"],h)}return a}function Ef(m){const a={},e=P(m,["media"]);if(e!=null){let t=Ya(e);Array.isArray(t)&&(t=t.map(n=>hn(n))),z(a,["mediaChunks"],t)}const h=P(m,["audio"]);h!=null&&z(a,["audio"],hn(Ja(h)));const f=P(m,["audioStreamEnd"]);f!=null&&z(a,["audioStreamEnd"],f);const l=P(m,["video"]);l!=null&&z(a,["video"],hn(Ka(l)));const s=P(m,["text"]);s!=null&&z(a,["text"],s);const o=P(m,["activityStart"]);o!=null&&z(a,["activityStart"],o);const r=P(m,["activityEnd"]);return r!=null&&z(a,["activityEnd"],r),a}function If(m){const a={},e=P(m,["media"]);if(e!=null){let t=Ya(e);Array.isArray(t)&&(t=t.map(n=>n)),z(a,["mediaChunks"],t)}const h=P(m,["audio"]);h!=null&&z(a,["audio"],Ja(h));const f=P(m,["audioStreamEnd"]);f!=null&&z(a,["audioStreamEnd"],f);const l=P(m,["video"]);l!=null&&z(a,["video"],Ka(l));const s=P(m,["text"]);s!=null&&z(a,["text"],s);const o=P(m,["activityStart"]);o!=null&&z(a,["activityStart"],o);const r=P(m,["activityEnd"]);return r!=null&&z(a,["activityEnd"],r),a}function Mf(m){const a={},e=P(m,["setupComplete"]);e!=null&&z(a,["setupComplete"],e);const h=P(m,["serverContent"]);h!=null&&z(a,["serverContent"],h);const f=P(m,["toolCall"]);f!=null&&z(a,["toolCall"],f);const l=P(m,["toolCallCancellation"]);l!=null&&z(a,["toolCallCancellation"],l);const s=P(m,["usageMetadata"]);s!=null&&z(a,["usageMetadata"],Lf(s));const o=P(m,["goAway"]);o!=null&&z(a,["goAway"],o);const r=P(m,["sessionResumptionUpdate"]);return r!=null&&z(a,["sessionResumptionUpdate"],r),a}function Rf(m){const a={},e=P(m,["videoMetadata"]);e!=null&&z(a,["videoMetadata"],e);const h=P(m,["thought"]);h!=null&&z(a,["thought"],h);const f=P(m,["inlineData"]);f!=null&&z(a,["inlineData"],hn(f));const l=P(m,["fileData"]);l!=null&&z(a,["fileData"],yf(l));const s=P(m,["thoughtSignature"]);s!=null&&z(a,["thoughtSignature"],s);const o=P(m,["functionCall"]);o!=null&&z(a,["functionCall"],o);const r=P(m,["codeExecutionResult"]);r!=null&&z(a,["codeExecutionResult"],r);const t=P(m,["executableCode"]);t!=null&&z(a,["executableCode"],t);const n=P(m,["functionResponse"]);n!=null&&z(a,["functionResponse"],n);const u=P(m,["text"]);return u!=null&&z(a,["text"],u),a}function Pf(m){const a={},e=P(m,["handle"]);if(e!=null&&z(a,["handle"],e),P(m,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return a}function ll(m){const a={},e=P(m,["voiceConfig"]);if(e!=null&&z(a,["voiceConfig"],e),P(m,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const h=P(m,["languageCode"]);return h!=null&&z(a,["languageCode"],h),a}function Df(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let t=e;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["functionDeclarations"],t)}if(P(m,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const h=P(m,["googleSearch"]);h!=null&&z(a,["googleSearch"],kf(h));const f=P(m,["googleSearchRetrieval"]);if(f!=null&&z(a,["googleSearchRetrieval"],f),P(m,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=P(m,["googleMaps"]);l!=null&&z(a,["googleMaps"],_f(l));const s=P(m,["urlContext"]);s!=null&&z(a,["urlContext"],s);const o=P(m,["computerUse"]);o!=null&&z(a,["computerUse"],o);const r=P(m,["codeExecution"]);return r!=null&&z(a,["codeExecution"],r),a}function Ff(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let u=e;Array.isArray(u)&&(u=u.map(c=>vf(c))),z(a,["functionDeclarations"],u)}const h=P(m,["retrieval"]);h!=null&&z(a,["retrieval"],h);const f=P(m,["googleSearch"]);f!=null&&z(a,["googleSearch"],f);const l=P(m,["googleSearchRetrieval"]);l!=null&&z(a,["googleSearchRetrieval"],l);const s=P(m,["enterpriseWebSearch"]);s!=null&&z(a,["enterpriseWebSearch"],s);const o=P(m,["googleMaps"]);o!=null&&z(a,["googleMaps"],o);const r=P(m,["urlContext"]);r!=null&&z(a,["urlContext"],r);const t=P(m,["computerUse"]);t!=null&&z(a,["computerUse"],t);const n=P(m,["codeExecution"]);return n!=null&&z(a,["codeExecution"],n),a}function Lf(m){const a={},e=P(m,["promptTokenCount"]);e!=null&&z(a,["promptTokenCount"],e);const h=P(m,["cachedContentTokenCount"]);h!=null&&z(a,["cachedContentTokenCount"],h);const f=P(m,["candidatesTokenCount"]);f!=null&&z(a,["responseTokenCount"],f);const l=P(m,["toolUsePromptTokenCount"]);l!=null&&z(a,["toolUsePromptTokenCount"],l);const s=P(m,["thoughtsTokenCount"]);s!=null&&z(a,["thoughtsTokenCount"],s);const o=P(m,["totalTokenCount"]);o!=null&&z(a,["totalTokenCount"],o);const r=P(m,["promptTokensDetails"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(b=>b)),z(a,["promptTokensDetails"],d)}const t=P(m,["cacheTokensDetails"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(b=>b)),z(a,["cacheTokensDetails"],d)}const n=P(m,["candidatesTokensDetails"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(b=>b)),z(a,["responseTokensDetails"],d)}const u=P(m,["toolUsePromptTokensDetails"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(b=>b)),z(a,["toolUsePromptTokensDetails"],d)}const c=P(m,["trafficType"]);return c!=null&&z(a,["trafficType"],c),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Of(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["data"]);e!=null&&z(a,["data"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function Bf(m){const a={},e=P(m,["content"]);e!=null&&z(a,["content"],e);const h=P(m,["citationMetadata"]);h!=null&&z(a,["citationMetadata"],Uf(h));const f=P(m,["tokenCount"]);f!=null&&z(a,["tokenCount"],f);const l=P(m,["finishReason"]);l!=null&&z(a,["finishReason"],l);const s=P(m,["urlContextMetadata"]);s!=null&&z(a,["urlContextMetadata"],s);const o=P(m,["avgLogprobs"]);o!=null&&z(a,["avgLogprobs"],o);const r=P(m,["groundingMetadata"]);r!=null&&z(a,["groundingMetadata"],r);const t=P(m,["index"]);t!=null&&z(a,["index"],t);const n=P(m,["logprobsResult"]);n!=null&&z(a,["logprobsResult"],n);const u=P(m,["safetyRatings"]);if(u!=null){let c=u;Array.isArray(c)&&(c=c.map(d=>d)),z(a,["safetyRatings"],c)}return a}function Uf(m){const a={},e=P(m,["citationSources"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>f)),z(a,["citations"],h)}return a}function $f(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let l=gr(f);Array.isArray(l)&&(l=l.map(s=>s)),z(e,["contents"],l)}return e}function zf(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["tokensInfo"]);if(h!=null){let f=h;Array.isArray(f)&&(f=f.map(l=>l)),z(a,["tokensInfo"],f)}return a}function qf(m){const a={},e=P(m,["values"]);e!=null&&z(a,["values"],e);const h=P(m,["statistics"]);return h!=null&&z(a,["statistics"],Vf(h)),a}function Vf(m){const a={},e=P(m,["truncated"]);e!=null&&z(a,["truncated"],e);const h=P(m,["token_count"]);return h!=null&&z(a,["tokenCount"],h),a}function Cn(m){const a={},e=P(m,["parts"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(l=>Yh(l))),z(a,["parts"],f)}const h=P(m,["role"]);return h!=null&&z(a,["role"],h),a}function Hf(m){const a={},e=P(m,["controlType"]);e!=null&&z(a,["controlType"],e);const h=P(m,["enableControlImageComputation"]);return h!=null&&z(a,["computeControl"],h),a}function Wf(m){const a={};if(P(m,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(P(m,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(P(m,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return a}function Gf(m,a){const e={},h=P(m,["systemInstruction"]);a!==void 0&&h!=null&&z(a,["systemInstruction"],Qt(h));const f=P(m,["tools"]);if(a!==void 0&&f!=null){let s=f;Array.isArray(s)&&(s=s.map(o=>hl(o))),z(a,["tools"],s)}const l=P(m,["generationConfig"]);return a!==void 0&&l!=null&&z(a,["generationConfig"],Fh(l)),e}function Xf(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let s=gr(f);Array.isArray(s)&&(s=s.map(o=>Cn(o))),z(e,["contents"],s)}const l=P(a,["config"]);return l!=null&&Wf(l),e}function Yf(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let s=gr(f);Array.isArray(s)&&(s=s.map(o=>o)),z(e,["contents"],s)}const l=P(a,["config"]);return l!=null&&Gf(l,e),e}function Kf(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["totalTokens"]);h!=null&&z(a,["totalTokens"],h);const f=P(m,["cachedContentTokenCount"]);return f!=null&&z(a,["cachedContentTokenCount"],f),a}function Jf(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["totalTokens"]);return h!=null&&z(a,["totalTokens"],h),a}function Zf(m,a){const e={},h=P(a,["model"]);return h!=null&&z(e,["_url","name"],Ct(m,h)),e}function Qf(m,a){const e={},h=P(a,["model"]);return h!=null&&z(e,["_url","name"],Ct(m,h)),e}function eh(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function th(m){const a={},e=P(m,["sdkHttpResponse"]);return e!=null&&z(a,["sdkHttpResponse"],e),a}function rh(m,a){const e={},h=P(m,["outputGcsUri"]);a!==void 0&&h!=null&&z(a,["parameters","storageUri"],h);const f=P(m,["negativePrompt"]);a!==void 0&&f!=null&&z(a,["parameters","negativePrompt"],f);const l=P(m,["numberOfImages"]);a!==void 0&&l!=null&&z(a,["parameters","sampleCount"],l);const s=P(m,["aspectRatio"]);a!==void 0&&s!=null&&z(a,["parameters","aspectRatio"],s);const o=P(m,["guidanceScale"]);a!==void 0&&o!=null&&z(a,["parameters","guidanceScale"],o);const r=P(m,["seed"]);a!==void 0&&r!=null&&z(a,["parameters","seed"],r);const t=P(m,["safetyFilterLevel"]);a!==void 0&&t!=null&&z(a,["parameters","safetySetting"],t);const n=P(m,["personGeneration"]);a!==void 0&&n!=null&&z(a,["parameters","personGeneration"],n);const u=P(m,["includeSafetyAttributes"]);a!==void 0&&u!=null&&z(a,["parameters","includeSafetyAttributes"],u);const c=P(m,["includeRaiReason"]);a!==void 0&&c!=null&&z(a,["parameters","includeRaiReason"],c);const d=P(m,["language"]);a!==void 0&&d!=null&&z(a,["parameters","language"],d);const b=P(m,["outputMimeType"]);a!==void 0&&b!=null&&z(a,["parameters","outputOptions","mimeType"],b);const g=P(m,["outputCompressionQuality"]);a!==void 0&&g!=null&&z(a,["parameters","outputOptions","compressionQuality"],g);const p=P(m,["addWatermark"]);a!==void 0&&p!=null&&z(a,["parameters","addWatermark"],p);const x=P(m,["labels"]);a!==void 0&&x!=null&&z(a,["labels"],x);const y=P(m,["editMode"]);a!==void 0&&y!=null&&z(a,["parameters","editMode"],y);const v=P(m,["baseSteps"]);return a!==void 0&&v!=null&&z(a,["parameters","editConfig","baseSteps"],v),e}function sh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["prompt"]);f!=null&&z(e,["instances[0]","prompt"],f);const l=P(a,["referenceImages"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>tm(r))),z(e,["instances[0]","referenceImages"],o)}const s=P(a,["config"]);return s!=null&&rh(s,e),e}function nh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["predictions"]);if(h!=null){let f=h;Array.isArray(f)&&(f=f.map(l=>Nn(l))),z(a,["generatedImages"],f)}return a}function ih(m,a){const e={},h=P(m,["taskType"]);a!==void 0&&h!=null&&z(a,["requests[]","taskType"],h);const f=P(m,["title"]);a!==void 0&&f!=null&&z(a,["requests[]","title"],f);const l=P(m,["outputDimensionality"]);if(a!==void 0&&l!=null&&z(a,["requests[]","outputDimensionality"],l),P(m,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(P(m,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function oh(m,a){const e={},h=P(m,["taskType"]);a!==void 0&&h!=null&&z(a,["instances[]","task_type"],h);const f=P(m,["title"]);a!==void 0&&f!=null&&z(a,["instances[]","title"],f);const l=P(m,["outputDimensionality"]);a!==void 0&&l!=null&&z(a,["parameters","outputDimensionality"],l);const s=P(m,["mimeType"]);a!==void 0&&s!=null&&z(a,["instances[]","mimeType"],s);const o=P(m,["autoTruncate"]);return a!==void 0&&o!=null&&z(a,["parameters","autoTruncate"],o),e}function ah(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let o=pi(m,f);Array.isArray(o)&&(o=o.map(r=>r)),z(e,["requests[]","content"],o)}const l=P(a,["config"]);l!=null&&ih(l,e);const s=P(a,["model"]);return s!==void 0&&z(e,["requests[]","model"],Ct(m,s)),e}function lh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let s=pi(m,f);Array.isArray(s)&&(s=s.map(o=>o)),z(e,["instances[]","content"],s)}const l=P(a,["config"]);return l!=null&&oh(l,e),e}function ch(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["embeddings"]);if(h!=null){let l=h;Array.isArray(l)&&(l=l.map(s=>s)),z(a,["embeddings"],l)}const f=P(m,["metadata"]);return f!=null&&z(a,["metadata"],f),a}function dh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["predictions[]","embeddings"]);if(h!=null){let l=h;Array.isArray(l)&&(l=l.map(s=>qf(s))),z(a,["embeddings"],l)}const f=P(m,["metadata"]);return f!=null&&z(a,["metadata"],f),a}function uh(m){const a={},e=P(m,["endpoint"]);e!=null&&z(a,["name"],e);const h=P(m,["deployedModelId"]);return h!=null&&z(a,["deployedModelId"],h),a}function fh(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["fileUri"]);e!=null&&z(a,["fileUri"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function hh(m){const a={};if(P(m,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=P(m,["description"]);e!=null&&z(a,["description"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["parameters"]);f!=null&&z(a,["parameters"],f);const l=P(m,["parametersJsonSchema"]);l!=null&&z(a,["parametersJsonSchema"],l);const s=P(m,["response"]);s!=null&&z(a,["response"],s);const o=P(m,["responseJsonSchema"]);return o!=null&&z(a,["responseJsonSchema"],o),a}function mh(m,a,e){const h={},f=P(a,["systemInstruction"]);e!==void 0&&f!=null&&z(e,["systemInstruction"],Cn(Qt(f)));const l=P(a,["temperature"]);l!=null&&z(h,["temperature"],l);const s=P(a,["topP"]);s!=null&&z(h,["topP"],s);const o=P(a,["topK"]);o!=null&&z(h,["topK"],o);const r=P(a,["candidateCount"]);r!=null&&z(h,["candidateCount"],r);const t=P(a,["maxOutputTokens"]);t!=null&&z(h,["maxOutputTokens"],t);const n=P(a,["stopSequences"]);n!=null&&z(h,["stopSequences"],n);const u=P(a,["responseLogprobs"]);u!=null&&z(h,["responseLogprobs"],u);const c=P(a,["logprobs"]);c!=null&&z(h,["logprobs"],c);const d=P(a,["presencePenalty"]);d!=null&&z(h,["presencePenalty"],d);const b=P(a,["frequencyPenalty"]);b!=null&&z(h,["frequencyPenalty"],b);const g=P(a,["seed"]);g!=null&&z(h,["seed"],g);const p=P(a,["responseMimeType"]);p!=null&&z(h,["responseMimeType"],p);const x=P(a,["responseSchema"]);x!=null&&z(h,["responseSchema"],gi(x));const y=P(a,["responseJsonSchema"]);if(y!=null&&z(h,["responseJsonSchema"],y),P(a,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(P(a,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=P(a,["safetySettings"]);if(e!==void 0&&v!=null){let O=v;Array.isArray(O)&&(O=O.map(T=>rm(T))),z(e,["safetySettings"],O)}const S=P(a,["tools"]);if(e!==void 0&&S!=null){let O=As(S);Array.isArray(O)&&(O=O.map(T=>lm(Ns(T)))),z(e,["tools"],O)}const N=P(a,["toolConfig"]);if(e!==void 0&&N!=null&&z(e,["toolConfig"],N),P(a,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=P(a,["cachedContent"]);e!==void 0&&R!=null&&z(e,["cachedContent"],Br(m,R));const B=P(a,["responseModalities"]);B!=null&&z(h,["responseModalities"],B);const M=P(a,["mediaResolution"]);M!=null&&z(h,["mediaResolution"],M);const F=P(a,["speechConfig"]);if(F!=null&&z(h,["speechConfig"],bi(F)),P(a,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=P(a,["thinkingConfig"]);q!=null&&z(h,["thinkingConfig"],q);const V=P(a,["imageConfig"]);return V!=null&&z(h,["imageConfig"],V),h}function ph(m,a,e){const h={},f=P(a,["systemInstruction"]);e!==void 0&&f!=null&&z(e,["systemInstruction"],Qt(f));const l=P(a,["temperature"]);l!=null&&z(h,["temperature"],l);const s=P(a,["topP"]);s!=null&&z(h,["topP"],s);const o=P(a,["topK"]);o!=null&&z(h,["topK"],o);const r=P(a,["candidateCount"]);r!=null&&z(h,["candidateCount"],r);const t=P(a,["maxOutputTokens"]);t!=null&&z(h,["maxOutputTokens"],t);const n=P(a,["stopSequences"]);n!=null&&z(h,["stopSequences"],n);const u=P(a,["responseLogprobs"]);u!=null&&z(h,["responseLogprobs"],u);const c=P(a,["logprobs"]);c!=null&&z(h,["logprobs"],c);const d=P(a,["presencePenalty"]);d!=null&&z(h,["presencePenalty"],d);const b=P(a,["frequencyPenalty"]);b!=null&&z(h,["frequencyPenalty"],b);const g=P(a,["seed"]);g!=null&&z(h,["seed"],g);const p=P(a,["responseMimeType"]);p!=null&&z(h,["responseMimeType"],p);const x=P(a,["responseSchema"]);x!=null&&z(h,["responseSchema"],gi(x));const y=P(a,["responseJsonSchema"]);y!=null&&z(h,["responseJsonSchema"],y);const v=P(a,["routingConfig"]);v!=null&&z(h,["routingConfig"],v);const S=P(a,["modelSelectionConfig"]);S!=null&&z(h,["modelConfig"],S);const N=P(a,["safetySettings"]);if(e!==void 0&&N!=null){let w=N;Array.isArray(w)&&(w=w.map(_=>_)),z(e,["safetySettings"],w)}const R=P(a,["tools"]);if(e!==void 0&&R!=null){let w=As(R);Array.isArray(w)&&(w=w.map(_=>hl(Ns(_)))),z(e,["tools"],w)}const B=P(a,["toolConfig"]);e!==void 0&&B!=null&&z(e,["toolConfig"],B);const M=P(a,["labels"]);e!==void 0&&M!=null&&z(e,["labels"],M);const F=P(a,["cachedContent"]);e!==void 0&&F!=null&&z(e,["cachedContent"],Br(m,F));const q=P(a,["responseModalities"]);q!=null&&z(h,["responseModalities"],q);const V=P(a,["mediaResolution"]);V!=null&&z(h,["mediaResolution"],V);const O=P(a,["speechConfig"]);O!=null&&z(h,["speechConfig"],fl(bi(O)));const T=P(a,["audioTimestamp"]);T!=null&&z(h,["audioTimestamp"],T);const A=P(a,["thinkingConfig"]);A!=null&&z(h,["thinkingConfig"],A);const C=P(a,["imageConfig"]);return C!=null&&z(h,["imageConfig"],C),h}function Wo(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let s=gr(f);Array.isArray(s)&&(s=s.map(o=>Cn(o))),z(e,["contents"],s)}const l=P(a,["config"]);return l!=null&&z(e,["generationConfig"],mh(m,l,e)),e}function Go(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["contents"]);if(f!=null){let s=gr(f);Array.isArray(s)&&(s=s.map(o=>o)),z(e,["contents"],s)}const l=P(a,["config"]);return l!=null&&z(e,["generationConfig"],ph(m,l,e)),e}function Xo(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["candidates"]);if(h!=null){let r=h;Array.isArray(r)&&(r=r.map(t=>Bf(t))),z(a,["candidates"],r)}const f=P(m,["modelVersion"]);f!=null&&z(a,["modelVersion"],f);const l=P(m,["promptFeedback"]);l!=null&&z(a,["promptFeedback"],l);const s=P(m,["responseId"]);s!=null&&z(a,["responseId"],s);const o=P(m,["usageMetadata"]);return o!=null&&z(a,["usageMetadata"],o),a}function Yo(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["candidates"]);if(h!=null){let t=h;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["candidates"],t)}const f=P(m,["createTime"]);f!=null&&z(a,["createTime"],f);const l=P(m,["modelVersion"]);l!=null&&z(a,["modelVersion"],l);const s=P(m,["promptFeedback"]);s!=null&&z(a,["promptFeedback"],s);const o=P(m,["responseId"]);o!=null&&z(a,["responseId"],o);const r=P(m,["usageMetadata"]);return r!=null&&z(a,["usageMetadata"],r),a}function gh(m,a){const e={};if(P(m,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(P(m,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const h=P(m,["numberOfImages"]);a!==void 0&&h!=null&&z(a,["parameters","sampleCount"],h);const f=P(m,["aspectRatio"]);a!==void 0&&f!=null&&z(a,["parameters","aspectRatio"],f);const l=P(m,["guidanceScale"]);if(a!==void 0&&l!=null&&z(a,["parameters","guidanceScale"],l),P(m,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=P(m,["safetyFilterLevel"]);a!==void 0&&s!=null&&z(a,["parameters","safetySetting"],s);const o=P(m,["personGeneration"]);a!==void 0&&o!=null&&z(a,["parameters","personGeneration"],o);const r=P(m,["includeSafetyAttributes"]);a!==void 0&&r!=null&&z(a,["parameters","includeSafetyAttributes"],r);const t=P(m,["includeRaiReason"]);a!==void 0&&t!=null&&z(a,["parameters","includeRaiReason"],t);const n=P(m,["language"]);a!==void 0&&n!=null&&z(a,["parameters","language"],n);const u=P(m,["outputMimeType"]);a!==void 0&&u!=null&&z(a,["parameters","outputOptions","mimeType"],u);const c=P(m,["outputCompressionQuality"]);if(a!==void 0&&c!=null&&z(a,["parameters","outputOptions","compressionQuality"],c),P(m,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(P(m,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const d=P(m,["imageSize"]);if(a!==void 0&&d!=null&&z(a,["parameters","sampleImageSize"],d),P(m,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function bh(m,a){const e={},h=P(m,["outputGcsUri"]);a!==void 0&&h!=null&&z(a,["parameters","storageUri"],h);const f=P(m,["negativePrompt"]);a!==void 0&&f!=null&&z(a,["parameters","negativePrompt"],f);const l=P(m,["numberOfImages"]);a!==void 0&&l!=null&&z(a,["parameters","sampleCount"],l);const s=P(m,["aspectRatio"]);a!==void 0&&s!=null&&z(a,["parameters","aspectRatio"],s);const o=P(m,["guidanceScale"]);a!==void 0&&o!=null&&z(a,["parameters","guidanceScale"],o);const r=P(m,["seed"]);a!==void 0&&r!=null&&z(a,["parameters","seed"],r);const t=P(m,["safetyFilterLevel"]);a!==void 0&&t!=null&&z(a,["parameters","safetySetting"],t);const n=P(m,["personGeneration"]);a!==void 0&&n!=null&&z(a,["parameters","personGeneration"],n);const u=P(m,["includeSafetyAttributes"]);a!==void 0&&u!=null&&z(a,["parameters","includeSafetyAttributes"],u);const c=P(m,["includeRaiReason"]);a!==void 0&&c!=null&&z(a,["parameters","includeRaiReason"],c);const d=P(m,["language"]);a!==void 0&&d!=null&&z(a,["parameters","language"],d);const b=P(m,["outputMimeType"]);a!==void 0&&b!=null&&z(a,["parameters","outputOptions","mimeType"],b);const g=P(m,["outputCompressionQuality"]);a!==void 0&&g!=null&&z(a,["parameters","outputOptions","compressionQuality"],g);const p=P(m,["addWatermark"]);a!==void 0&&p!=null&&z(a,["parameters","addWatermark"],p);const x=P(m,["labels"]);a!==void 0&&x!=null&&z(a,["labels"],x);const y=P(m,["imageSize"]);a!==void 0&&y!=null&&z(a,["parameters","sampleImageSize"],y);const v=P(m,["enhancePrompt"]);return a!==void 0&&v!=null&&z(a,["parameters","enhancePrompt"],v),e}function xh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["prompt"]);f!=null&&z(e,["instances[0]","prompt"],f);const l=P(a,["config"]);return l!=null&&gh(l,e),e}function yh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["prompt"]);f!=null&&z(e,["instances[0]","prompt"],f);const l=P(a,["config"]);return l!=null&&bh(l,e),e}function vh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["predictions"]);if(h!=null){let l=h;Array.isArray(l)&&(l=l.map(s=>Mh(s))),z(a,["generatedImages"],l)}const f=P(m,["positivePromptSafetyAttributes"]);return f!=null&&z(a,["positivePromptSafetyAttributes"],dl(f)),a}function wh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["predictions"]);if(h!=null){let l=h;Array.isArray(l)&&(l=l.map(s=>Nn(s))),z(a,["generatedImages"],l)}const f=P(m,["positivePromptSafetyAttributes"]);return f!=null&&z(a,["positivePromptSafetyAttributes"],ul(f)),a}function _h(m,a){const e={},h=P(m,["numberOfVideos"]);if(a!==void 0&&h!=null&&z(a,["parameters","sampleCount"],h),P(m,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(P(m,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const f=P(m,["durationSeconds"]);if(a!==void 0&&f!=null&&z(a,["parameters","durationSeconds"],f),P(m,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=P(m,["aspectRatio"]);a!==void 0&&l!=null&&z(a,["parameters","aspectRatio"],l);const s=P(m,["resolution"]);a!==void 0&&s!=null&&z(a,["parameters","resolution"],s);const o=P(m,["personGeneration"]);if(a!==void 0&&o!=null&&z(a,["parameters","personGeneration"],o),P(m,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const r=P(m,["negativePrompt"]);a!==void 0&&r!=null&&z(a,["parameters","negativePrompt"],r);const t=P(m,["enhancePrompt"]);if(a!==void 0&&t!=null&&z(a,["parameters","enhancePrompt"],t),P(m,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const n=P(m,["lastFrame"]);a!==void 0&&n!=null&&z(a,["instances[0]","lastFrame"],An(n));const u=P(m,["referenceImages"]);if(a!==void 0&&u!=null){let c=u;Array.isArray(c)&&(c=c.map(d=>wm(d))),z(a,["instances[0]","referenceImages"],c)}if(P(m,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(P(m,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function kh(m,a){const e={},h=P(m,["numberOfVideos"]);a!==void 0&&h!=null&&z(a,["parameters","sampleCount"],h);const f=P(m,["outputGcsUri"]);a!==void 0&&f!=null&&z(a,["parameters","storageUri"],f);const l=P(m,["fps"]);a!==void 0&&l!=null&&z(a,["parameters","fps"],l);const s=P(m,["durationSeconds"]);a!==void 0&&s!=null&&z(a,["parameters","durationSeconds"],s);const o=P(m,["seed"]);a!==void 0&&o!=null&&z(a,["parameters","seed"],o);const r=P(m,["aspectRatio"]);a!==void 0&&r!=null&&z(a,["parameters","aspectRatio"],r);const t=P(m,["resolution"]);a!==void 0&&t!=null&&z(a,["parameters","resolution"],t);const n=P(m,["personGeneration"]);a!==void 0&&n!=null&&z(a,["parameters","personGeneration"],n);const u=P(m,["pubsubTopic"]);a!==void 0&&u!=null&&z(a,["parameters","pubsubTopic"],u);const c=P(m,["negativePrompt"]);a!==void 0&&c!=null&&z(a,["parameters","negativePrompt"],c);const d=P(m,["enhancePrompt"]);a!==void 0&&d!=null&&z(a,["parameters","enhancePrompt"],d);const b=P(m,["generateAudio"]);a!==void 0&&b!=null&&z(a,["parameters","generateAudio"],b);const g=P(m,["lastFrame"]);a!==void 0&&g!=null&&z(a,["instances[0]","lastFrame"],jr(g));const p=P(m,["referenceImages"]);if(a!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>_m(S))),z(a,["instances[0]","referenceImages"],v)}const x=P(m,["mask"]);a!==void 0&&x!=null&&z(a,["instances[0]","mask"],vm(x));const y=P(m,["compressionQuality"]);return a!==void 0&&y!=null&&z(a,["parameters","compressionQuality"],y),e}function jh(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["metadata"]);h!=null&&z(a,["metadata"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);l!=null&&z(a,["error"],l);const s=P(m,["response","generateVideoResponse"]);return s!=null&&z(a,["response"],Ah(s)),a}function Sh(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["metadata"]);h!=null&&z(a,["metadata"],h);const f=P(m,["done"]);f!=null&&z(a,["done"],f);const l=P(m,["error"]);l!=null&&z(a,["error"],l);const s=P(m,["response"]);return s!=null&&z(a,["response"],Th(s)),a}function Ch(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["prompt"]);f!=null&&z(e,["instances[0]","prompt"],f);const l=P(a,["image"]);l!=null&&z(e,["instances[0]","image"],An(l));const s=P(a,["video"]);s!=null&&z(e,["instances[0]","video"],ml(s));const o=P(a,["source"]);o!=null&&Eh(o,e);const r=P(a,["config"]);return r!=null&&_h(r,e),e}function Nh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["prompt"]);f!=null&&z(e,["instances[0]","prompt"],f);const l=P(a,["image"]);l!=null&&z(e,["instances[0]","image"],jr(l));const s=P(a,["video"]);s!=null&&z(e,["instances[0]","video"],pl(s));const o=P(a,["source"]);o!=null&&Ih(o,e);const r=P(a,["config"]);return r!=null&&kh(r,e),e}function Ah(m){const a={},e=P(m,["generatedSamples"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(s=>Ph(s))),z(a,["generatedVideos"],l)}const h=P(m,["raiMediaFilteredCount"]);h!=null&&z(a,["raiMediaFilteredCount"],h);const f=P(m,["raiMediaFilteredReasons"]);return f!=null&&z(a,["raiMediaFilteredReasons"],f),a}function Th(m){const a={},e=P(m,["videos"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(s=>Dh(s))),z(a,["generatedVideos"],l)}const h=P(m,["raiMediaFilteredCount"]);h!=null&&z(a,["raiMediaFilteredCount"],h);const f=P(m,["raiMediaFilteredReasons"]);return f!=null&&z(a,["raiMediaFilteredReasons"],f),a}function Eh(m,a){const e={},h=P(m,["prompt"]);a!==void 0&&h!=null&&z(a,["instances[0]","prompt"],h);const f=P(m,["image"]);a!==void 0&&f!=null&&z(a,["instances[0]","image"],An(f));const l=P(m,["video"]);return a!==void 0&&l!=null&&z(a,["instances[0]","video"],ml(l)),e}function Ih(m,a){const e={},h=P(m,["prompt"]);a!==void 0&&h!=null&&z(a,["instances[0]","prompt"],h);const f=P(m,["image"]);a!==void 0&&f!=null&&z(a,["instances[0]","image"],jr(f));const l=P(m,["video"]);return a!==void 0&&l!=null&&z(a,["instances[0]","video"],pl(l)),e}function Mh(m){const a={},e=P(m,["_self"]);e!=null&&z(a,["image"],$h(e));const h=P(m,["raiFilteredReason"]);h!=null&&z(a,["raiFilteredReason"],h);const f=P(m,["_self"]);return f!=null&&z(a,["safetyAttributes"],dl(f)),a}function Nn(m){const a={},e=P(m,["_self"]);e!=null&&z(a,["image"],cl(e));const h=P(m,["raiFilteredReason"]);h!=null&&z(a,["raiFilteredReason"],h);const f=P(m,["_self"]);f!=null&&z(a,["safetyAttributes"],ul(f));const l=P(m,["prompt"]);return l!=null&&z(a,["enhancedPrompt"],l),a}function Rh(m){const a={},e=P(m,["_self"]);e!=null&&z(a,["mask"],cl(e));const h=P(m,["labels"]);if(h!=null){let f=h;Array.isArray(f)&&(f=f.map(l=>l)),z(a,["labels"],f)}return a}function Ph(m){const a={},e=P(m,["video"]);return e!=null&&z(a,["video"],xm(e)),a}function Dh(m){const a={},e=P(m,["_self"]);return e!=null&&z(a,["video"],ym(e)),a}function Fh(m){const a={},e=P(m,["modelSelectionConfig"]);e!=null&&z(a,["modelConfig"],e);const h=P(m,["audioTimestamp"]);h!=null&&z(a,["audioTimestamp"],h);const f=P(m,["candidateCount"]);f!=null&&z(a,["candidateCount"],f);const l=P(m,["enableAffectiveDialog"]);l!=null&&z(a,["enableAffectiveDialog"],l);const s=P(m,["frequencyPenalty"]);s!=null&&z(a,["frequencyPenalty"],s);const o=P(m,["logprobs"]);o!=null&&z(a,["logprobs"],o);const r=P(m,["maxOutputTokens"]);r!=null&&z(a,["maxOutputTokens"],r);const t=P(m,["mediaResolution"]);t!=null&&z(a,["mediaResolution"],t);const n=P(m,["presencePenalty"]);n!=null&&z(a,["presencePenalty"],n);const u=P(m,["responseJsonSchema"]);u!=null&&z(a,["responseJsonSchema"],u);const c=P(m,["responseLogprobs"]);c!=null&&z(a,["responseLogprobs"],c);const d=P(m,["responseMimeType"]);d!=null&&z(a,["responseMimeType"],d);const b=P(m,["responseModalities"]);b!=null&&z(a,["responseModalities"],b);const g=P(m,["responseSchema"]);g!=null&&z(a,["responseSchema"],g);const p=P(m,["routingConfig"]);p!=null&&z(a,["routingConfig"],p);const x=P(m,["seed"]);x!=null&&z(a,["seed"],x);const y=P(m,["speechConfig"]);y!=null&&z(a,["speechConfig"],fl(y));const v=P(m,["stopSequences"]);v!=null&&z(a,["stopSequences"],v);const S=P(m,["temperature"]);S!=null&&z(a,["temperature"],S);const N=P(m,["thinkingConfig"]);N!=null&&z(a,["thinkingConfig"],N);const R=P(m,["topK"]);R!=null&&z(a,["topK"],R);const B=P(m,["topP"]);return B!=null&&z(a,["topP"],B),a}function Lh(m,a){const e={},h=P(a,["model"]);return h!=null&&z(e,["_url","name"],Ct(m,h)),e}function Oh(m,a){const e={},h=P(a,["model"]);return h!=null&&z(e,["_url","name"],Ct(m,h)),e}function Bh(m){const a={};if(P(m,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=P(m,["enableWidget"]);return e!=null&&z(a,["enableWidget"],e),a}function Uh(m){const a={},e=P(m,["timeRangeFilter"]);if(e!=null&&z(a,["timeRangeFilter"],e),P(m,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return a}function $h(m){const a={},e=P(m,["bytesBase64Encoded"]);e!=null&&z(a,["imageBytes"],Kr(e));const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function cl(m){const a={},e=P(m,["gcsUri"]);e!=null&&z(a,["gcsUri"],e);const h=P(m,["bytesBase64Encoded"]);h!=null&&z(a,["imageBytes"],Kr(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["mimeType"],f),a}function An(m){const a={};if(P(m,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=P(m,["imageBytes"]);e!=null&&z(a,["bytesBase64Encoded"],Kr(e));const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function jr(m){const a={},e=P(m,["gcsUri"]);e!=null&&z(a,["gcsUri"],e);const h=P(m,["imageBytes"]);h!=null&&z(a,["bytesBase64Encoded"],Kr(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["mimeType"],f),a}function zh(m,a,e){const h={},f=P(a,["pageSize"]);e!==void 0&&f!=null&&z(e,["_query","pageSize"],f);const l=P(a,["pageToken"]);e!==void 0&&l!=null&&z(e,["_query","pageToken"],l);const s=P(a,["filter"]);e!==void 0&&s!=null&&z(e,["_query","filter"],s);const o=P(a,["queryBase"]);return e!==void 0&&o!=null&&z(e,["_url","models_url"],tl(m,o)),h}function qh(m,a,e){const h={},f=P(a,["pageSize"]);e!==void 0&&f!=null&&z(e,["_query","pageSize"],f);const l=P(a,["pageToken"]);e!==void 0&&l!=null&&z(e,["_query","pageToken"],l);const s=P(a,["filter"]);e!==void 0&&s!=null&&z(e,["_query","filter"],s);const o=P(a,["queryBase"]);return e!==void 0&&o!=null&&z(e,["_url","models_url"],tl(m,o)),h}function Vh(m,a){const e={},h=P(a,["config"]);return h!=null&&zh(m,h,e),e}function Hh(m,a){const e={},h=P(a,["config"]);return h!=null&&qh(m,h,e),e}function Wh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["_self"]);if(f!=null){let l=rl(f);Array.isArray(l)&&(l=l.map(s=>ei(s))),z(a,["models"],l)}return a}function Gh(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["_self"]);if(f!=null){let l=rl(f);Array.isArray(l)&&(l=l.map(s=>ti(s))),z(a,["models"],l)}return a}function Xh(m){const a={},e=P(m,["maskMode"]);e!=null&&z(a,["maskMode"],e);const h=P(m,["segmentationClasses"]);h!=null&&z(a,["maskClasses"],h);const f=P(m,["maskDilation"]);return f!=null&&z(a,["dilation"],f),a}function ei(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["displayName"]);h!=null&&z(a,["displayName"],h);const f=P(m,["description"]);f!=null&&z(a,["description"],f);const l=P(m,["version"]);l!=null&&z(a,["version"],l);const s=P(m,["_self"]);s!=null&&z(a,["tunedModelInfo"],cm(s));const o=P(m,["inputTokenLimit"]);o!=null&&z(a,["inputTokenLimit"],o);const r=P(m,["outputTokenLimit"]);r!=null&&z(a,["outputTokenLimit"],r);const t=P(m,["supportedGenerationMethods"]);return t!=null&&z(a,["supportedActions"],t),a}function ti(m){const a={},e=P(m,["name"]);e!=null&&z(a,["name"],e);const h=P(m,["displayName"]);h!=null&&z(a,["displayName"],h);const f=P(m,["description"]);f!=null&&z(a,["description"],f);const l=P(m,["versionId"]);l!=null&&z(a,["version"],l);const s=P(m,["deployedModels"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>uh(c))),z(a,["endpoints"],u)}const o=P(m,["labels"]);o!=null&&z(a,["labels"],o);const r=P(m,["_self"]);r!=null&&z(a,["tunedModelInfo"],dm(r));const t=P(m,["defaultCheckpointId"]);t!=null&&z(a,["defaultCheckpointId"],t);const n=P(m,["checkpoints"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>c)),z(a,["checkpoints"],u)}return a}function Yh(m){const a={},e=P(m,["videoMetadata"]);e!=null&&z(a,["videoMetadata"],e);const h=P(m,["thought"]);h!=null&&z(a,["thought"],h);const f=P(m,["inlineData"]);f!=null&&z(a,["inlineData"],Of(f));const l=P(m,["fileData"]);l!=null&&z(a,["fileData"],fh(l));const s=P(m,["thoughtSignature"]);s!=null&&z(a,["thoughtSignature"],s);const o=P(m,["functionCall"]);o!=null&&z(a,["functionCall"],o);const r=P(m,["codeExecutionResult"]);r!=null&&z(a,["codeExecutionResult"],r);const t=P(m,["executableCode"]);t!=null&&z(a,["executableCode"],t);const n=P(m,["functionResponse"]);n!=null&&z(a,["functionResponse"],n);const u=P(m,["text"]);return u!=null&&z(a,["text"],u),a}function Kh(m){const a={},e=P(m,["productImage"]);return e!=null&&z(a,["image"],jr(e)),a}function Jh(m,a){const e={},h=P(m,["numberOfImages"]);a!==void 0&&h!=null&&z(a,["parameters","sampleCount"],h);const f=P(m,["baseSteps"]);a!==void 0&&f!=null&&z(a,["parameters","editConfig","baseSteps"],f);const l=P(m,["outputGcsUri"]);a!==void 0&&l!=null&&z(a,["parameters","storageUri"],l);const s=P(m,["seed"]);a!==void 0&&s!=null&&z(a,["parameters","seed"],s);const o=P(m,["safetyFilterLevel"]);a!==void 0&&o!=null&&z(a,["parameters","safetySetting"],o);const r=P(m,["personGeneration"]);a!==void 0&&r!=null&&z(a,["parameters","personGeneration"],r);const t=P(m,["addWatermark"]);a!==void 0&&t!=null&&z(a,["parameters","addWatermark"],t);const n=P(m,["outputMimeType"]);a!==void 0&&n!=null&&z(a,["parameters","outputOptions","mimeType"],n);const u=P(m,["outputCompressionQuality"]);a!==void 0&&u!=null&&z(a,["parameters","outputOptions","compressionQuality"],u);const c=P(m,["enhancePrompt"]);a!==void 0&&c!=null&&z(a,["parameters","enhancePrompt"],c);const d=P(m,["labels"]);return a!==void 0&&d!=null&&z(a,["labels"],d),e}function Zh(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["source"]);f!=null&&em(f,e);const l=P(a,["config"]);return l!=null&&Jh(l,e),e}function Qh(m){const a={},e=P(m,["predictions"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>Nn(f))),z(a,["generatedImages"],h)}return a}function em(m,a){const e={},h=P(m,["prompt"]);a!==void 0&&h!=null&&z(a,["instances[0]","prompt"],h);const f=P(m,["personImage"]);a!==void 0&&f!=null&&z(a,["instances[0]","personImage","image"],jr(f));const l=P(m,["productImages"]);if(a!==void 0&&l!=null){let s=l;Array.isArray(s)&&(s=s.map(o=>Kh(o))),z(a,["instances[0]","productImages"],s)}return e}function tm(m){const a={},e=P(m,["referenceImage"]);e!=null&&z(a,["referenceImage"],jr(e));const h=P(m,["referenceId"]);h!=null&&z(a,["referenceId"],h);const f=P(m,["referenceType"]);f!=null&&z(a,["referenceType"],f);const l=P(m,["maskImageConfig"]);l!=null&&z(a,["maskImageConfig"],Xh(l));const s=P(m,["controlImageConfig"]);s!=null&&z(a,["controlImageConfig"],Hf(s));const o=P(m,["styleImageConfig"]);o!=null&&z(a,["styleImageConfig"],o);const r=P(m,["subjectImageConfig"]);return r!=null&&z(a,["subjectImageConfig"],r),a}function dl(m){const a={},e=P(m,["safetyAttributes","categories"]);e!=null&&z(a,["categories"],e);const h=P(m,["safetyAttributes","scores"]);h!=null&&z(a,["scores"],h);const f=P(m,["contentType"]);return f!=null&&z(a,["contentType"],f),a}function ul(m){const a={},e=P(m,["safetyAttributes","categories"]);e!=null&&z(a,["categories"],e);const h=P(m,["safetyAttributes","scores"]);h!=null&&z(a,["scores"],h);const f=P(m,["contentType"]);return f!=null&&z(a,["contentType"],f),a}function rm(m){const a={};if(P(m,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=P(m,["category"]);e!=null&&z(a,["category"],e);const h=P(m,["threshold"]);return h!=null&&z(a,["threshold"],h),a}function sm(m){const a={},e=P(m,["image"]);return e!=null&&z(a,["image"],jr(e)),a}function nm(m,a){const e={},h=P(m,["mode"]);a!==void 0&&h!=null&&z(a,["parameters","mode"],h);const f=P(m,["maxPredictions"]);a!==void 0&&f!=null&&z(a,["parameters","maxPredictions"],f);const l=P(m,["confidenceThreshold"]);a!==void 0&&l!=null&&z(a,["parameters","confidenceThreshold"],l);const s=P(m,["maskDilation"]);a!==void 0&&s!=null&&z(a,["parameters","maskDilation"],s);const o=P(m,["binaryColorThreshold"]);a!==void 0&&o!=null&&z(a,["parameters","binaryColorThreshold"],o);const r=P(m,["labels"]);return a!==void 0&&r!=null&&z(a,["labels"],r),e}function im(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["source"]);f!=null&&am(f,e);const l=P(a,["config"]);return l!=null&&nm(l,e),e}function om(m){const a={},e=P(m,["predictions"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>Rh(f))),z(a,["generatedMasks"],h)}return a}function am(m,a){const e={},h=P(m,["prompt"]);a!==void 0&&h!=null&&z(a,["instances[0]","prompt"],h);const f=P(m,["image"]);a!==void 0&&f!=null&&z(a,["instances[0]","image"],jr(f));const l=P(m,["scribbleImage"]);return a!==void 0&&l!=null&&z(a,["instances[0]","scribble"],sm(l)),e}function fl(m){const a={},e=P(m,["voiceConfig"]);if(e!=null&&z(a,["voiceConfig"],e),P(m,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const h=P(m,["languageCode"]);return h!=null&&z(a,["languageCode"],h),a}function lm(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let t=e;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["functionDeclarations"],t)}if(P(m,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const h=P(m,["googleSearch"]);h!=null&&z(a,["googleSearch"],Uh(h));const f=P(m,["googleSearchRetrieval"]);if(f!=null&&z(a,["googleSearchRetrieval"],f),P(m,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=P(m,["googleMaps"]);l!=null&&z(a,["googleMaps"],Bh(l));const s=P(m,["urlContext"]);s!=null&&z(a,["urlContext"],s);const o=P(m,["computerUse"]);o!=null&&z(a,["computerUse"],o);const r=P(m,["codeExecution"]);return r!=null&&z(a,["codeExecution"],r),a}function hl(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let u=e;Array.isArray(u)&&(u=u.map(c=>hh(c))),z(a,["functionDeclarations"],u)}const h=P(m,["retrieval"]);h!=null&&z(a,["retrieval"],h);const f=P(m,["googleSearch"]);f!=null&&z(a,["googleSearch"],f);const l=P(m,["googleSearchRetrieval"]);l!=null&&z(a,["googleSearchRetrieval"],l);const s=P(m,["enterpriseWebSearch"]);s!=null&&z(a,["enterpriseWebSearch"],s);const o=P(m,["googleMaps"]);o!=null&&z(a,["googleMaps"],o);const r=P(m,["urlContext"]);r!=null&&z(a,["urlContext"],r);const t=P(m,["computerUse"]);t!=null&&z(a,["computerUse"],t);const n=P(m,["codeExecution"]);return n!=null&&z(a,["codeExecution"],n),a}function cm(m){const a={},e=P(m,["baseModel"]);e!=null&&z(a,["baseModel"],e);const h=P(m,["createTime"]);h!=null&&z(a,["createTime"],h);const f=P(m,["updateTime"]);return f!=null&&z(a,["updateTime"],f),a}function dm(m){const a={},e=P(m,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&z(a,["baseModel"],e);const h=P(m,["createTime"]);h!=null&&z(a,["createTime"],h);const f=P(m,["updateTime"]);return f!=null&&z(a,["updateTime"],f),a}function um(m,a){const e={},h=P(m,["displayName"]);a!==void 0&&h!=null&&z(a,["displayName"],h);const f=P(m,["description"]);a!==void 0&&f!=null&&z(a,["description"],f);const l=P(m,["defaultCheckpointId"]);return a!==void 0&&l!=null&&z(a,["defaultCheckpointId"],l),e}function fm(m,a){const e={},h=P(m,["displayName"]);a!==void 0&&h!=null&&z(a,["displayName"],h);const f=P(m,["description"]);a!==void 0&&f!=null&&z(a,["description"],f);const l=P(m,["defaultCheckpointId"]);return a!==void 0&&l!=null&&z(a,["defaultCheckpointId"],l),e}function hm(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","name"],Ct(m,h));const f=P(a,["config"]);return f!=null&&um(f,e),e}function mm(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["config"]);return f!=null&&fm(f,e),e}function pm(m,a){const e={},h=P(m,["outputGcsUri"]);a!==void 0&&h!=null&&z(a,["parameters","storageUri"],h);const f=P(m,["includeRaiReason"]);a!==void 0&&f!=null&&z(a,["parameters","includeRaiReason"],f);const l=P(m,["outputMimeType"]);a!==void 0&&l!=null&&z(a,["parameters","outputOptions","mimeType"],l);const s=P(m,["outputCompressionQuality"]);a!==void 0&&s!=null&&z(a,["parameters","outputOptions","compressionQuality"],s);const o=P(m,["enhanceInputImage"]);a!==void 0&&o!=null&&z(a,["parameters","upscaleConfig","enhanceInputImage"],o);const r=P(m,["imagePreservationFactor"]);a!==void 0&&r!=null&&z(a,["parameters","upscaleConfig","imagePreservationFactor"],r);const t=P(m,["labels"]);a!==void 0&&t!=null&&z(a,["labels"],t);const n=P(m,["numberOfImages"]);a!==void 0&&n!=null&&z(a,["parameters","sampleCount"],n);const u=P(m,["mode"]);return a!==void 0&&u!=null&&z(a,["parameters","mode"],u),e}function gm(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["_url","model"],Ct(m,h));const f=P(a,["image"]);f!=null&&z(e,["instances[0]","image"],jr(f));const l=P(a,["upscaleFactor"]);l!=null&&z(e,["parameters","upscaleConfig","upscaleFactor"],l);const s=P(a,["config"]);return s!=null&&pm(s,e),e}function bm(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["predictions"]);if(h!=null){let f=h;Array.isArray(f)&&(f=f.map(l=>Nn(l))),z(a,["generatedImages"],f)}return a}function xm(m){const a={},e=P(m,["uri"]);e!=null&&z(a,["uri"],e);const h=P(m,["encodedVideo"]);h!=null&&z(a,["videoBytes"],Kr(h));const f=P(m,["encoding"]);return f!=null&&z(a,["mimeType"],f),a}function ym(m){const a={},e=P(m,["gcsUri"]);e!=null&&z(a,["uri"],e);const h=P(m,["bytesBase64Encoded"]);h!=null&&z(a,["videoBytes"],Kr(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["mimeType"],f),a}function vm(m){const a={},e=P(m,["image"]);e!=null&&z(a,["_self"],jr(e));const h=P(m,["maskMode"]);return h!=null&&z(a,["maskMode"],h),a}function wm(m){const a={},e=P(m,["image"]);e!=null&&z(a,["image"],An(e));const h=P(m,["referenceType"]);return h!=null&&z(a,["referenceType"],h),a}function _m(m){const a={},e=P(m,["image"]);e!=null&&z(a,["image"],jr(e));const h=P(m,["referenceType"]);return h!=null&&z(a,["referenceType"],h),a}function ml(m){const a={},e=P(m,["uri"]);e!=null&&z(a,["uri"],e);const h=P(m,["videoBytes"]);h!=null&&z(a,["encodedVideo"],Kr(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["encoding"],f),a}function pl(m){const a={},e=P(m,["uri"]);e!=null&&z(a,["gcsUri"],e);const h=P(m,["videoBytes"]);h!=null&&z(a,["bytesBase64Encoded"],Kr(h));const f=P(m,["mimeType"]);return f!=null&&z(a,["mimeType"],f),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const km="Content-Type",jm="X-Server-Timeout",Sm="User-Agent",ri="x-goog-api-client",Cm="1.25.0",Nm=`google-genai-sdk/${Cm}`,Am="v1beta1",Tm="v1beta",Ko=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;let Em=class{constructor(a){var e,h;this.clientOptions=Object.assign(Object.assign({},a),{project:a.project,location:a.location,apiKey:a.apiKey,vertexai:a.vertexai});const f={};this.clientOptions.vertexai?(f.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Am,f.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(f.apiVersion=(h=this.clientOptions.apiVersion)!==null&&h!==void 0?h:Tm,f.baseUrl="https://generativelanguage.googleapis.com/"),f.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=f,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(f,a.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var a;return(a=this.clientOptions.vertexai)!==null&&a!==void 0?a:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||a.baseUrl===void 0||a.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const h=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&a.apiVersion!==""&&h.push(a.apiVersion),h.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const a=this.getBaseUrl(),e=new URL(a);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw new Error("HTTP options are not correctly set.")}constructUrl(a,e,h){const f=[this.getRequestUrlInternal(e)];return h&&f.push(this.getBaseResourcePath()),a!==""&&f.push(a),new URL(`${f.join("/")}`)}shouldPrependVertexProjectPath(a){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||a.httpMethod==="GET"&&a.path.startsWith("publishers/google/models"))}async request(a){let e=this.clientOptions.httpOptions;a.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));const h=this.shouldPrependVertexProjectPath(a),f=this.constructUrl(a.path,e,h);if(a.queryParams)for(const[s,o]of Object.entries(a.queryParams))f.searchParams.append(s,String(o));let l={};if(a.httpMethod==="GET"){if(a.body&&a.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=a.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,a.abortSignal),this.unaryApiCall(f,l,a.httpMethod)}patchHttpOptions(a,e){const h=JSON.parse(JSON.stringify(a));for(const[f,l]of Object.entries(e))typeof l=="object"?h[f]=Object.assign(Object.assign({},h[f]),l):l!==void 0&&(h[f]=l);return h}async requestStream(a){let e=this.clientOptions.httpOptions;a.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));const h=this.shouldPrependVertexProjectPath(a),f=this.constructUrl(a.path,e,h);(!f.searchParams.has("alt")||f.searchParams.get("alt")!=="sse")&&f.searchParams.set("alt","sse");let l={};return l.body=a.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,a.abortSignal),this.streamApiCall(f,l,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,e,h){if(e&&e.timeout||h){const f=new AbortController,l=f.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const s=setTimeout(()=>f.abort(),e.timeout);s&&typeof s.unref=="function"&&s.unref()}h&&h.addEventListener("abort",()=>{f.abort()}),a.signal=l}return e&&e.extraBody!==null&&Im(a,e.extraBody),a.headers=await this.getHeadersInternal(e),a}async unaryApiCall(a,e,h){return this.apiCall(a.toString(),Object.assign(Object.assign({},e),{method:h})).then(async f=>(await Jo(f),new Jn(f))).catch(f=>{throw f instanceof Error?f:new Error(JSON.stringify(f))})}async streamApiCall(a,e,h){return this.apiCall(a.toString(),Object.assign(Object.assign({},e),{method:h})).then(async f=>(await Jo(f),this.processStreamResponse(f))).catch(f=>{throw f instanceof Error?f:new Error(JSON.stringify(f))})}processStreamResponse(a){var e;return _s(this,arguments,function*(){const f=(e=a==null?void 0:a.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!f)throw new Error("Response body is empty");try{let s="";for(;;){const{done:o,value:r}=yield Pt(f.read());if(o){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const t=l.decode(r,{stream:!0});try{const u=JSON.parse(t);if("error"in u){const c=JSON.parse(JSON.stringify(u.error)),d=c.status,b=c.code,g=`got status: ${d}. ${JSON.stringify(u)}`;if(b>=400&&b<600)throw new Sn({message:g,status:b})}}catch(u){if(u.name==="ApiError")throw u}s+=t;let n=s.match(Ko);for(;n;){const u=n[1];try{const c=new Response(u,{headers:a==null?void 0:a.headers,status:a==null?void 0:a.status,statusText:a==null?void 0:a.statusText});yield yield Pt(new Jn(c)),s=s.slice(n[0].length),n=s.match(Ko)}catch(c){throw new Error(`exception parsing stream chunk ${u}. ${c}`)}}}}finally{f.releaseLock()}})}async apiCall(a,e){return fetch(a,e).catch(h=>{throw new Error(`exception ${h} sending request`)})}getDefaultHeaders(){const a={},e=Nm+" "+this.clientOptions.userAgentExtra;return a[Sm]=e,a[ri]=e,a[km]="application/json",a}async getHeadersInternal(a){const e=new Headers;if(a&&a.headers){for(const[h,f]of Object.entries(a.headers))e.append(h,f);a.timeout&&a.timeout>0&&e.append(jm,String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(a,e){var h;const f={};e!=null&&(f.mimeType=e.mimeType,f.name=e.name,f.displayName=e.displayName),f.name&&!f.name.startsWith("files/")&&(f.name=`files/${f.name}`);const l=this.clientOptions.uploader,s=await l.stat(a);f.sizeBytes=String(s.size);const o=(h=e==null?void 0:e.mimeType)!==null&&h!==void 0?h:s.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");f.mimeType=o;const r=await this.fetchUploadUrl(f,e);return l.upload(a,r,this)}async downloadFile(a){await this.clientOptions.downloader.download(a,this)}async fetchUploadUrl(a,e){var h;let f={};e!=null&&e.httpOptions?f=e.httpOptions:f={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${a.mimeType}`}};const l={file:a},s=await this.request({path:Xe("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:f});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(h=s==null?void 0:s.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}};async function Jo(m){var a;if(m===void 0)throw new Error("response is undefined");if(!m.ok){const e=m.status;let h;!((a=m.headers.get("content-type"))===null||a===void 0)&&a.includes("application/json")?h=await m.json():h={error:{message:await m.text(),code:m.status,status:m.statusText}};const f=JSON.stringify(h);throw e>=400&&e<600?new Sn({message:f,status:e}):new Error(f)}}function Im(m,a){if(!a||Object.keys(a).length===0)return;if(m.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof m.body=="string"&&m.body.length>0)try{const l=JSON.parse(m.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))e=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function h(l,s){const o=Object.assign({},l);for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)){const t=s[r],n=o[r];t&&typeof t=="object"&&!Array.isArray(t)&&n&&typeof n=="object"&&!Array.isArray(n)?o[r]=h(n,t):(n&&t&&typeof n!=typeof t&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${r}". Original type: ${typeof n}, New type: ${typeof t}. Overwriting.`),o[r]=t)}return o}const f=h(e,a);m.body=JSON.stringify(f)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mm="mcp_used/unknown";let Rm=!1;function gl(m){for(const a of m)if(Pm(a)||typeof a=="object"&&"inputSchema"in a)return!0;return Rm}function bl(m){var a;const e=(a=m[ri])!==null&&a!==void 0?a:"";m[ri]=(e+` ${Mm}`).trimStart()}function Pm(m){return m!==null&&typeof m=="object"&&m instanceof yi}function Dm(m,a=100){return _s(this,arguments,function*(){let h,f=0;for(;f<a;){const l=yield Pt(m.listTools({cursor:h}));for(const s of l.tools)yield yield Pt(s),f++;if(!l.nextCursor)break;h=l.nextCursor}})}class yi{constructor(a=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=e}static create(a,e){return new yi(a,e)}async initialize(){var a,e,h,f;if(this.mcpTools.length>0)return;const l={},s=[];for(const n of this.mcpClients)try{for(var o=!0,r=(e=void 0,Os(Dm(n))),t;t=await r.next(),a=t.done,!a;o=!0){f=t.value,o=!1;const u=f;s.push(u);const c=u.name;if(l[c])throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);l[c]=n}}catch(u){e={error:u}}finally{try{!o&&!a&&(h=r.return)&&await h.call(r)}finally{if(e)throw e.error}}this.mcpTools=s,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Bd(this.mcpTools,this.config)}async callTool(a){await this.initialize();const e=[];for(const h of a)if(h.name in this.functionNameToMcpClient){const f=this.functionNameToMcpClient[h.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const s=await f.callTool({name:h.name,arguments:h.args},void 0,l);e.push({functionResponse:{name:h.name,response:s.isError?{error:s}:s}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Fm(m,a,e){const h=new Id;let f;e.data instanceof Blob?f=JSON.parse(await e.data.text()):f=JSON.parse(e.data),Object.assign(h,f),a(h)}class Lm{constructor(a,e,h){this.apiClient=a,this.auth=e,this.webSocketFactory=h}async connect(a){var e,h;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const f=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),s=Um(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),r=`${f}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${o}`;let t=()=>{};const n=new Promise(v=>{t=v}),u=a.callbacks,c=function(){t({})},d=this.apiClient,b={onopen:c,onmessage:v=>{Fm(d,u.onmessage,v)},onerror:(e=u==null?void 0:u.onerror)!==null&&e!==void 0?e:function(v){},onclose:(h=u==null?void 0:u.onclose)!==null&&h!==void 0?h:function(v){}},g=this.webSocketFactory.create(r,Bm(s),b);g.connect(),await n;const y={setup:{model:Ct(this.apiClient,a.model)}};return g.send(JSON.stringify(y)),new Om(g,this.apiClient)}}class Om{constructor(a,e){this.conn=a,this.apiClient=e}async setWeightedPrompts(a){if(!a.weightedPrompts||Object.keys(a.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=Tf(a);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(a){a.musicGenerationConfig||(a.musicGenerationConfig={});const e=Af(a);this.conn.send(JSON.stringify(e))}sendPlaybackControl(a){const e={playbackControl:a};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(vs.PLAY)}pause(){this.sendPlaybackControl(vs.PAUSE)}stop(){this.sendPlaybackControl(vs.STOP)}resetContext(){this.sendPlaybackControl(vs.RESET_CONTEXT)}close(){this.conn.close()}}function Bm(m){const a={};return m.forEach((e,h)=>{a[h]=e}),a}function Um(m){const a=new Headers;for(const[e,h]of Object.entries(m))a.append(e,h);return a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $m="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zm(m,a,e){const h=new Ed;let f;e.data instanceof Blob?f=await e.data.text():e.data instanceof ArrayBuffer?f=new TextDecoder().decode(e.data):f=e.data;const l=JSON.parse(f);if(m.isVertexAI()){const s=Mf(l);Object.assign(h,s)}else Object.assign(h,l);a(h)}class qm{constructor(a,e,h){this.apiClient=a,this.auth=e,this.webSocketFactory=h,this.music=new Lm(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var e,h,f,l,s,o;if(a.config&&a.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const r=this.apiClient.getWebsocketBaseUrl(),t=this.apiClient.getApiVersion();let n;const u=this.apiClient.getHeaders();a.config&&a.config.tools&&gl(a.config.tools)&&bl(u);const c=Gm(u);if(this.apiClient.isVertexAI())n=`${r}/ws/google.cloud.aiplatform.${t}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(c);else{const F=this.apiClient.getApiKey();let q="BidiGenerateContent",V="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),t!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",V="access_token"),n=`${r}/ws/google.ai.generativelanguage.${t}.GenerativeService.${q}?${V}=${F}`}let d=()=>{};const b=new Promise(F=>{d=F}),g=a.callbacks,p=function(){var F;(F=g==null?void 0:g.onopen)===null||F===void 0||F.call(g),d({})},x=this.apiClient,y={onopen:p,onmessage:F=>{zm(x,g.onmessage,F)},onerror:(e=g==null?void 0:g.onerror)!==null&&e!==void 0?e:function(F){},onclose:(h=g==null?void 0:g.onclose)!==null&&h!==void 0?h:function(F){}},v=this.webSocketFactory.create(n,Wm(c),y);v.connect(),await b;let S=Ct(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const F=this.apiClient.getProject(),q=this.apiClient.getLocation();S=`projects/${F}/locations/${q}/`+S}let N={};this.apiClient.isVertexAI()&&((f=a.config)===null||f===void 0?void 0:f.responseModalities)===void 0&&(a.config===void 0?a.config={responseModalities:[pn.AUDIO]}:a.config.responseModalities=[pn.AUDIO]),!((l=a.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(o=(s=a.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[],B=[];for(const F of R)if(this.isCallableTool(F)){const q=F;B.push(await q.tool())}else B.push(F);B.length>0&&(a.config.tools=B);const M={model:S,config:a.config,callbacks:a.callbacks};return this.apiClient.isVertexAI()?N=Nf(this.apiClient,M):N=Cf(this.apiClient,M),delete N.config,v.send(JSON.stringify(N)),new Hm(v,this.apiClient)}isCallableTool(a){return"callTool"in a&&typeof a.callTool=="function"}}const Vm={turnComplete:!0};class Hm{constructor(a,e){this.conn=a,this.apiClient=e}tLiveClientContent(a,e){if(e.turns!==null&&e.turns!==void 0){let h=[];try{h=gr(e.turns),a.isVertexAI()||(h=h.map(f=>Cn(f)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:h,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(a,e){let h=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?h=e.functionResponses:h=[e.functionResponses],h.length===0)throw new Error("functionResponses is required.");for(const l of h){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!a.isVertexAI()&&!("id"in l))throw new Error($m)}return{toolResponse:{functionResponses:h}}}sendClientContent(a){a=Object.assign(Object.assign({},Vm),a);const e=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(e))}sendRealtimeInput(a){let e={};this.apiClient.isVertexAI()?e={realtimeInput:If(a)}:e={realtimeInput:Ef(a)},this.conn.send(JSON.stringify(e))}sendToolResponse(a){if(a.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function Wm(m){const a={};return m.forEach((e,h)=>{a[h]=e}),a}function Gm(m){const a=new Headers;for(const[e,h]of Object.entries(m))a.append(e,h);return a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zo=10;function Qo(m){var a,e,h;if(!((a=m==null?void 0:m.automaticFunctionCalling)===null||a===void 0)&&a.disable)return!0;let f=!1;for(const s of(e=m==null?void 0:m.tools)!==null&&e!==void 0?e:[])if(ks(s)){f=!0;break}if(!f)return!0;const l=(h=m==null?void 0:m.automaticFunctionCalling)===null||h===void 0?void 0:h.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ks(m){return"callTool"in m&&typeof m.callTool=="function"}function Xm(m){var a,e,h;return(h=(e=(a=m.config)===null||a===void 0?void 0:a.tools)===null||e===void 0?void 0:e.some(f=>ks(f)))!==null&&h!==void 0?h:!1}function Ym(m){var a,e,h;return(h=(e=(a=m.config)===null||a===void 0?void 0:a.tools)===null||e===void 0?void 0:e.some(f=>!ks(f)))!==null&&h!==void 0?h:!1}function ea(m){var a;return!(!((a=m==null?void 0:m.automaticFunctionCalling)===null||a===void 0)&&a.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Km extends cs{constructor(a){super(),this.apiClient=a,this.generateContent=async e=>{var h,f,l,s,o;const r=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!Xm(e)||Qo(e.config))return await this.generateContentInternal(r);if(Ym(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let t,n;const u=gr(r.contents),c=(l=(f=(h=r.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||f===void 0?void 0:f.maximumRemoteCalls)!==null&&l!==void 0?l:Zo;let d=0;for(;d<c&&(t=await this.generateContentInternal(r),!(!t.functionCalls||t.functionCalls.length===0));){const b=t.candidates[0].content,g=[];for(const p of(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(ks(p)){const y=await p.callTool(t.functionCalls);g.push(...y)}d++,n={role:"user",parts:g},r.contents=gr(r.contents),r.contents.push(b),r.contents.push(n),ea(r.config)&&(u.push(b),u.push(n))}return ea(r.config)&&(t.automaticFunctionCallingHistory=u),t},this.generateContentStream=async e=>{if(this.maybeMoveToResponseJsonSchem(e),Qo(e.config)){const h=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(h)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(h=>{var f;let l;const s=[];if(h!=null&&h.generatedImages)for(const r of h.generatedImages)r&&(r!=null&&r.safetyAttributes)&&((f=r==null?void 0:r.safetyAttributes)===null||f===void 0?void 0:f.contentType)==="Positive Prompt"?l=r==null?void 0:r.safetyAttributes:s.push(r);let o;return l?o={generatedImages:s,positivePromptSafetyAttributes:l,sdkHttpResponse:h.sdkHttpResponse}:o={generatedImages:s,sdkHttpResponse:h.sdkHttpResponse},o}),this.list=async e=>{var h;const s={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((h=s.config)===null||h===void 0)&&h.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Hs(ts.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(s),s)},this.editImage=async e=>{const h={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(h.referenceImages=e.referenceImages.map(f=>f.toReferenceImageAPI())),await this.editImageInternal(h)},this.upscaleImage=async e=>{let h={numberOfImages:1,mode:"upscale"};e.config&&(h=Object.assign(Object.assign({},h),e.config));const f={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:h};return await this.upscaleImageInternal(f)},this.generateVideos=async e=>{var h,f,l,s,o,r;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((h=e.video)===null||h===void 0)&&h.uri&&(!((f=e.video)===null||f===void 0)&&f.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((s=(l=e.source)===null||l===void 0?void 0:l.video)===null||s===void 0)&&s.uri&&(!((r=(o=e.source)===null||o===void 0?void 0:o.video)===null||r===void 0)&&r.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&(a.config.responseJsonSchema||Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema))}async processParamsMaybeAddMcpUsage(a){var e,h,f;const l=(e=a.config)===null||e===void 0?void 0:e.tools;if(!l)return a;const s=await Promise.all(l.map(async r=>ks(r)?await r.tool():r)),o={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:s})};if(o.config.tools=s,a.config&&a.config.tools&&gl(a.config.tools)){const r=(f=(h=a.config.httpOptions)===null||h===void 0?void 0:h.headers)!==null&&f!==void 0?f:{};let t=Object.assign({},r);Object.keys(t).length===0&&(t=this.apiClient.getDefaultHeaders()),bl(t),o.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:t})}return o}async initAfcToolsMap(a){var e,h,f;const l=new Map;for(const s of(h=(e=a.config)===null||e===void 0?void 0:e.tools)!==null&&h!==void 0?h:[])if(ks(s)){const o=s,r=await o.tool();for(const t of(f=r.functionDeclarations)!==null&&f!==void 0?f:[]){if(!t.name)throw new Error("Function declaration name is required.");if(l.has(t.name))throw new Error(`Duplicate tool declaration name: ${t.name}`);l.set(t.name,o)}}return l}async processAfcStream(a){var e,h,f;const l=(f=(h=(e=a.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||h===void 0?void 0:h.maximumRemoteCalls)!==null&&f!==void 0?f:Zo;let s=!1,o=0;const r=await this.initAfcToolsMap(a);return(function(t,n,u){var c,d;return _s(this,arguments,function*(){for(var b,g,p,x;o<l;){s&&(o++,s=!1);const N=yield Pt(t.processParamsMaybeAddMcpUsage(u)),R=yield Pt(t.generateContentStreamInternal(N)),B=[],M=[];try{for(var y=!0,v=(g=void 0,Os(R)),S;S=yield Pt(v.next()),b=S.done,!b;y=!0){x=S.value,y=!1;const F=x;if(yield yield Pt(F),F.candidates&&(!((c=F.candidates[0])===null||c===void 0)&&c.content)){M.push(F.candidates[0].content);for(const q of(d=F.candidates[0].content.parts)!==null&&d!==void 0?d:[])if(o<l&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(n.has(q.functionCall.name)){const V=yield Pt(n.get(q.functionCall.name).callTool([q.functionCall]));B.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${n.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(F){g={error:F}}finally{try{!y&&!b&&(p=v.return)&&(yield Pt(p.call(v)))}finally{if(g)throw g.error}}if(B.length>0){s=!0;const F=new Ps;F.candidates=[{content:{role:"user",parts:B}}],yield yield Pt(F);const q=[];q.push(...M),q.push({role:"user",parts:B});const V=gr(u.contents).concat(q);u.contents=V}else break}})})(this,r,a)}async generateContentInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Go(this.apiClient,a);return o=Xe("{model}:generateContent",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Yo(n),c=new Ps;return Object.assign(c,u),c})}else{const t=Wo(this.apiClient,a);return o=Xe("{model}:generateContent",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Xo(n),c=new Ps;return Object.assign(c,u),c})}}async generateContentStreamInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Go(this.apiClient,a);return o=Xe("{model}:streamGenerateContent?alt=sse",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.requestStream({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}),s.then(function(u){return _s(this,arguments,function*(){var c,d,b,g;try{for(var p=!0,x=Os(u),y;y=yield Pt(x.next()),c=y.done,!c;p=!0){g=y.value,p=!1;const v=g,S=Yo(yield Pt(v.json()));S.sdkHttpResponse={headers:v.headers};const N=new Ps;Object.assign(N,S),yield yield Pt(N)}}catch(v){d={error:v}}finally{try{!p&&!c&&(b=x.return)&&(yield Pt(b.call(x)))}finally{if(d)throw d.error}}})})}else{const t=Wo(this.apiClient,a);return o=Xe("{model}:streamGenerateContent?alt=sse",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.requestStream({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}),s.then(function(u){return _s(this,arguments,function*(){var c,d,b,g;try{for(var p=!0,x=Os(u),y;y=yield Pt(x.next()),c=y.done,!c;p=!0){g=y.value,p=!1;const v=g,S=Xo(yield Pt(v.json()));S.sdkHttpResponse={headers:v.headers};const N=new Ps;Object.assign(N,S),yield yield Pt(N)}}catch(v){d={error:v}}finally{try{!p&&!c&&(b=x.return)&&(yield Pt(b.call(x)))}finally{if(d)throw d.error}}})})}}async embedContent(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=lh(this.apiClient,a);return o=Xe("{model}:predict",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=dh(n),c=new Eo;return Object.assign(c,u),c})}else{const t=ah(this.apiClient,a);return o=Xe("{model}:batchEmbedContents",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=ch(n),c=new Eo;return Object.assign(c,u),c})}}async generateImagesInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=yh(this.apiClient,a);return o=Xe("{model}:predict",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=wh(n),c=new Io;return Object.assign(c,u),c})}else{const t=xh(this.apiClient,a);return o=Xe("{model}:predict",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=vh(n),c=new Io;return Object.assign(c,u),c})}}async editImageInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=sh(this.apiClient,a);return l=Xe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>{const t=nh(r),n=new _d;return Object.assign(n,t),n})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=gm(this.apiClient,a);return l=Xe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>{const t=bm(r),n=new kd;return Object.assign(n,t),n})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=Zh(this.apiClient,a);return l=Xe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f.then(r=>{const t=Qh(r),n=new jd;return Object.assign(n,t),n})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=im(this.apiClient,a);return l=Xe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f.then(r=>{const t=om(r),n=new Sd;return Object.assign(n,t),n})}else throw new Error("This method is only supported by the Vertex AI.")}async get(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Oh(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>ti(n))}else{const t=Lh(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>ei(n))}}async listInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Hh(this.apiClient,a);return o=Xe("{models_url}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Gh(n),c=new Mo;return Object.assign(c,u),c})}else{const t=Vh(this.apiClient,a);return o=Xe("{models_url}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Wh(n),c=new Mo;return Object.assign(c,u),c})}}async update(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=mm(this.apiClient,a);return o=Xe("{model}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>ti(n))}else{const t=hm(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>ei(n))}}async delete(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Qf(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=th(n),c=new Ro;return Object.assign(c,u),c})}else{const t=Zf(this.apiClient,a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=eh(n),c=new Ro;return Object.assign(c,u),c})}}async countTokens(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Yf(this.apiClient,a);return o=Xe("{model}:countTokens",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Jf(n),c=new Po;return Object.assign(c,u),c})}else{const t=Xf(this.apiClient,a);return o=Xe("{model}:countTokens",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Kf(n),c=new Po;return Object.assign(c,u),c})}}async computeTokens(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=$f(this.apiClient,a);return l=Xe("{model}:computeTokens",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>{const t=zf(r),n=new Cd;return Object.assign(n,t),n})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=Nh(this.apiClient,a);return o=Xe("{model}:predictLongRunning",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s.then(n=>{const u=Sh(n),c=new gn;return Object.assign(c,u),c})}else{const t=Ch(this.apiClient,a);return o=Xe("{model}:predictLongRunning",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s.then(n=>{const u=jh(n),c=new gn;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jm extends cs{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){const e=a.operation,h=a.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const f=e.name.split("/operations/")[0];let l;h&&"httpOptions"in h&&(l=h.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:f,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const f=await this.getVideosOperationInternal({operationName:e.name,config:h});return e._fromAPIResponse({apiResponse:f,isVertexAI:!1})}}async get(a){const e=a.operation,h=a.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const f=e.name.split("/operations/")[0];let l;h&&"httpOptions"in h&&(l=h.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:f,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const f=await this.getVideosOperationInternal({operationName:e.name,config:h});return e._fromAPIResponse({apiResponse:f,isVertexAI:!1})}}async getVideosOperationInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=yd(a);return o=Xe("{operationName}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json()),s}else{const t=xd(a);return o=Xe("{operationName}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json()),s}}async fetchPredictVideosOperationInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=ud(a);return l=Xe("{resourceName}:fetchPredictOperation",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json()),f}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zm(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["data"]);e!=null&&z(a,["data"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function Qm(m){const a={},e=P(m,["parts"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(l=>ap(l))),z(a,["parts"],f)}const h=P(m,["role"]);return h!=null&&z(a,["role"],h),a}function ep(m,a,e){const h={},f=P(a,["expireTime"]);e!==void 0&&f!=null&&z(e,["expireTime"],f);const l=P(a,["newSessionExpireTime"]);e!==void 0&&l!=null&&z(e,["newSessionExpireTime"],l);const s=P(a,["uses"]);e!==void 0&&s!=null&&z(e,["uses"],s);const o=P(a,["liveConnectConstraints"]);e!==void 0&&o!=null&&z(e,["bidiGenerateContentSetup"],op(m,o));const r=P(a,["lockAdditionalFields"]);return e!==void 0&&r!=null&&z(e,["fieldMask"],r),h}function tp(m,a){const e={},h=P(a,["config"]);return h!=null&&z(e,["config"],ep(m,h,e)),e}function rp(m){const a={};if(P(m,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=P(m,["fileUri"]);e!=null&&z(a,["fileUri"],e);const h=P(m,["mimeType"]);return h!=null&&z(a,["mimeType"],h),a}function sp(m){const a={};if(P(m,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=P(m,["enableWidget"]);return e!=null&&z(a,["enableWidget"],e),a}function np(m){const a={},e=P(m,["timeRangeFilter"]);if(e!=null&&z(a,["timeRangeFilter"],e),P(m,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return a}function ip(m,a){const e={},h=P(m,["generationConfig"]);a!==void 0&&h!=null&&z(a,["setup","generationConfig"],h);const f=P(m,["responseModalities"]);a!==void 0&&f!=null&&z(a,["setup","generationConfig","responseModalities"],f);const l=P(m,["temperature"]);a!==void 0&&l!=null&&z(a,["setup","generationConfig","temperature"],l);const s=P(m,["topP"]);a!==void 0&&s!=null&&z(a,["setup","generationConfig","topP"],s);const o=P(m,["topK"]);a!==void 0&&o!=null&&z(a,["setup","generationConfig","topK"],o);const r=P(m,["maxOutputTokens"]);a!==void 0&&r!=null&&z(a,["setup","generationConfig","maxOutputTokens"],r);const t=P(m,["mediaResolution"]);a!==void 0&&t!=null&&z(a,["setup","generationConfig","mediaResolution"],t);const n=P(m,["seed"]);a!==void 0&&n!=null&&z(a,["setup","generationConfig","seed"],n);const u=P(m,["speechConfig"]);a!==void 0&&u!=null&&z(a,["setup","generationConfig","speechConfig"],xi(u));const c=P(m,["thinkingConfig"]);a!==void 0&&c!=null&&z(a,["setup","generationConfig","thinkingConfig"],c);const d=P(m,["enableAffectiveDialog"]);a!==void 0&&d!=null&&z(a,["setup","generationConfig","enableAffectiveDialog"],d);const b=P(m,["systemInstruction"]);a!==void 0&&b!=null&&z(a,["setup","systemInstruction"],Qm(Qt(b)));const g=P(m,["tools"]);if(a!==void 0&&g!=null){let R=As(g);Array.isArray(R)&&(R=R.map(B=>cp(Ns(B)))),z(a,["setup","tools"],R)}const p=P(m,["sessionResumption"]);a!==void 0&&p!=null&&z(a,["setup","sessionResumption"],lp(p));const x=P(m,["inputAudioTranscription"]);a!==void 0&&x!=null&&z(a,["setup","inputAudioTranscription"],x);const y=P(m,["outputAudioTranscription"]);a!==void 0&&y!=null&&z(a,["setup","outputAudioTranscription"],y);const v=P(m,["realtimeInputConfig"]);a!==void 0&&v!=null&&z(a,["setup","realtimeInputConfig"],v);const S=P(m,["contextWindowCompression"]);a!==void 0&&S!=null&&z(a,["setup","contextWindowCompression"],S);const N=P(m,["proactivity"]);return a!==void 0&&N!=null&&z(a,["setup","proactivity"],N),e}function op(m,a){const e={},h=P(a,["model"]);h!=null&&z(e,["setup","model"],Ct(m,h));const f=P(a,["config"]);return f!=null&&z(e,["config"],ip(f,e)),e}function ap(m){const a={},e=P(m,["videoMetadata"]);e!=null&&z(a,["videoMetadata"],e);const h=P(m,["thought"]);h!=null&&z(a,["thought"],h);const f=P(m,["inlineData"]);f!=null&&z(a,["inlineData"],Zm(f));const l=P(m,["fileData"]);l!=null&&z(a,["fileData"],rp(l));const s=P(m,["thoughtSignature"]);s!=null&&z(a,["thoughtSignature"],s);const o=P(m,["functionCall"]);o!=null&&z(a,["functionCall"],o);const r=P(m,["codeExecutionResult"]);r!=null&&z(a,["codeExecutionResult"],r);const t=P(m,["executableCode"]);t!=null&&z(a,["executableCode"],t);const n=P(m,["functionResponse"]);n!=null&&z(a,["functionResponse"],n);const u=P(m,["text"]);return u!=null&&z(a,["text"],u),a}function lp(m){const a={},e=P(m,["handle"]);if(e!=null&&z(a,["handle"],e),P(m,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return a}function cp(m){const a={},e=P(m,["functionDeclarations"]);if(e!=null){let t=e;Array.isArray(t)&&(t=t.map(n=>n)),z(a,["functionDeclarations"],t)}if(P(m,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const h=P(m,["googleSearch"]);h!=null&&z(a,["googleSearch"],np(h));const f=P(m,["googleSearchRetrieval"]);if(f!=null&&z(a,["googleSearchRetrieval"],f),P(m,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=P(m,["googleMaps"]);l!=null&&z(a,["googleMaps"],sp(l));const s=P(m,["urlContext"]);s!=null&&z(a,["urlContext"],s);const o=P(m,["computerUse"]);o!=null&&z(a,["computerUse"],o);const r=P(m,["codeExecution"]);return r!=null&&z(a,["codeExecution"],r),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dp(m){const a=[];for(const e in m)if(Object.prototype.hasOwnProperty.call(m,e)){const h=m[e];if(typeof h=="object"&&h!=null&&Object.keys(h).length>0){const f=Object.keys(h).map(l=>`${e}.${l}`);a.push(...f)}else a.push(e)}return a.join(",")}function up(m,a){let e=null;const h=m.bidiGenerateContentSetup;if(typeof h=="object"&&h!==null&&"setup"in h){const l=h.setup;typeof l=="object"&&l!==null?(m.bidiGenerateContentSetup=l,e=l):delete m.bidiGenerateContentSetup}else h!==void 0&&delete m.bidiGenerateContentSetup;const f=m.fieldMask;if(e){const l=dp(e);if(Array.isArray(a==null?void 0:a.lockAdditionalFields)&&(a==null?void 0:a.lockAdditionalFields.length)===0)l?m.fieldMask=l:delete m.fieldMask;else if(a!=null&&a.lockAdditionalFields&&a.lockAdditionalFields.length>0&&f!==null&&Array.isArray(f)&&f.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];f.length>0&&(o=f.map(t=>s.includes(t)?`generationConfig.${t}`:t));const r=[];l&&r.push(l),o.length>0&&r.push(...o),r.length>0?m.fieldMask=r.join(","):delete m.fieldMask}else delete m.fieldMask}else f!==null&&Array.isArray(f)&&f.length>0?m.fieldMask=f.join(","):delete m.fieldMask;return m}class fp extends cs{constructor(a){super(),this.apiClient=a}async create(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=tp(this.apiClient,a);l=Xe("auth_tokens",o._url),s=o._query,delete o.config,delete o._url,delete o._query;const r=up(o,a.config);return f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(t=>t.json()),f.then(t=>t)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hp(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","name"],e),a}function mp(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","name"],e),a}function pp(m,a){const e={};if(P(m,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const h=P(m,["tunedModelDisplayName"]);if(a!==void 0&&h!=null&&z(a,["displayName"],h),P(m,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const f=P(m,["epochCount"]);a!==void 0&&f!=null&&z(a,["tuningTask","hyperparameters","epochCount"],f);const l=P(m,["learningRateMultiplier"]);if(l!=null&&z(e,["tuningTask","hyperparameters","learningRateMultiplier"],l),P(m,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(P(m,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(P(m,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=P(m,["batchSize"]);a!==void 0&&s!=null&&z(a,["tuningTask","hyperparameters","batchSize"],s);const o=P(m,["learningRate"]);if(a!==void 0&&o!=null&&z(a,["tuningTask","hyperparameters","learningRate"],o),P(m,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return e}function gp(m,a){const e={},h=P(m,["validationDataset"]);a!==void 0&&h!=null&&z(a,["supervisedTuningSpec"],Ip(h,e));const f=P(m,["tunedModelDisplayName"]);a!==void 0&&f!=null&&z(a,["tunedModelDisplayName"],f);const l=P(m,["description"]);a!==void 0&&l!=null&&z(a,["description"],l);const s=P(m,["epochCount"]);a!==void 0&&s!=null&&z(a,["supervisedTuningSpec","hyperParameters","epochCount"],s);const o=P(m,["learningRateMultiplier"]);a!==void 0&&o!=null&&z(a,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const r=P(m,["exportLastCheckpointOnly"]);a!==void 0&&r!=null&&z(a,["supervisedTuningSpec","exportLastCheckpointOnly"],r);const t=P(m,["adapterSize"]);if(a!==void 0&&t!=null&&z(a,["supervisedTuningSpec","hyperParameters","adapterSize"],t),P(m,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(P(m,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const n=P(m,["labels"]);return a!==void 0&&n!=null&&z(a,["labels"],n),e}function bp(m){const a={},e=P(m,["baseModel"]);e!=null&&z(a,["baseModel"],e);const h=P(m,["preTunedModel"]);h!=null&&z(a,["preTunedModel"],h);const f=P(m,["trainingDataset"]);f!=null&&z(a,["tuningTask","trainingData"],Ap(f));const l=P(m,["config"]);return l!=null&&pp(l,a),a}function xp(m){const a={},e=P(m,["baseModel"]);e!=null&&z(a,["baseModel"],e);const h=P(m,["preTunedModel"]);h!=null&&z(a,["preTunedModel"],h);const f=P(m,["trainingDataset"]);f!=null&&z(a,["supervisedTuningSpec","trainingDatasetUri"],Tp(f,a));const l=P(m,["config"]);return l!=null&&gp(l,a),a}function yp(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","name"],e),a}function vp(m){const a={},e=P(m,["name"]);return e!=null&&z(a,["_url","name"],e),a}function wp(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);a!==void 0&&f!=null&&z(a,["_query","pageToken"],f);const l=P(m,["filter"]);return a!==void 0&&l!=null&&z(a,["_query","filter"],l),e}function _p(m,a){const e={},h=P(m,["pageSize"]);a!==void 0&&h!=null&&z(a,["_query","pageSize"],h);const f=P(m,["pageToken"]);a!==void 0&&f!=null&&z(a,["_query","pageToken"],f);const l=P(m,["filter"]);return a!==void 0&&l!=null&&z(a,["_query","filter"],l),e}function kp(m){const a={},e=P(m,["config"]);return e!=null&&wp(e,a),a}function jp(m){const a={},e=P(m,["config"]);return e!=null&&_p(e,a),a}function Sp(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["tunedModels"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>xl(s))),z(a,["tuningJobs"],l)}return a}function Cp(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["nextPageToken"]);h!=null&&z(a,["nextPageToken"],h);const f=P(m,["tuningJobs"]);if(f!=null){let l=f;Array.isArray(l)&&(l=l.map(s=>si(s))),z(a,["tuningJobs"],l)}return a}function Np(m){const a={},e=P(m,["name"]);e!=null&&z(a,["model"],e);const h=P(m,["name"]);return h!=null&&z(a,["endpoint"],h),a}function Ap(m){const a={};if(P(m,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(P(m,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const e=P(m,["examples"]);if(e!=null){let h=e;Array.isArray(h)&&(h=h.map(f=>f)),z(a,["examples","examples"],h)}return a}function Tp(m,a){const e={},h=P(m,["gcsUri"]);a!==void 0&&h!=null&&z(a,["supervisedTuningSpec","trainingDatasetUri"],h);const f=P(m,["vertexDatasetResource"]);if(a!==void 0&&f!=null&&z(a,["supervisedTuningSpec","trainingDatasetUri"],f),P(m,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return e}function xl(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["state"]);f!=null&&z(a,["state"],Qa(f));const l=P(m,["createTime"]);l!=null&&z(a,["createTime"],l);const s=P(m,["tuningTask","startTime"]);s!=null&&z(a,["startTime"],s);const o=P(m,["tuningTask","completeTime"]);o!=null&&z(a,["endTime"],o);const r=P(m,["updateTime"]);r!=null&&z(a,["updateTime"],r);const t=P(m,["description"]);t!=null&&z(a,["description"],t);const n=P(m,["baseModel"]);n!=null&&z(a,["baseModel"],n);const u=P(m,["_self"]);u!=null&&z(a,["tunedModel"],Np(u));const c=P(m,["customBaseModel"]);c!=null&&z(a,["customBaseModel"],c);const d=P(m,["experiment"]);d!=null&&z(a,["experiment"],d);const b=P(m,["labels"]);b!=null&&z(a,["labels"],b);const g=P(m,["outputUri"]);g!=null&&z(a,["outputUri"],g);const p=P(m,["pipelineJob"]);p!=null&&z(a,["pipelineJob"],p);const x=P(m,["serviceAccount"]);x!=null&&z(a,["serviceAccount"],x);const y=P(m,["tunedModelDisplayName"]);y!=null&&z(a,["tunedModelDisplayName"],y);const v=P(m,["veoTuningSpec"]);return v!=null&&z(a,["veoTuningSpec"],v),a}function si(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["state"]);f!=null&&z(a,["state"],Qa(f));const l=P(m,["createTime"]);l!=null&&z(a,["createTime"],l);const s=P(m,["startTime"]);s!=null&&z(a,["startTime"],s);const o=P(m,["endTime"]);o!=null&&z(a,["endTime"],o);const r=P(m,["updateTime"]);r!=null&&z(a,["updateTime"],r);const t=P(m,["error"]);t!=null&&z(a,["error"],t);const n=P(m,["description"]);n!=null&&z(a,["description"],n);const u=P(m,["baseModel"]);u!=null&&z(a,["baseModel"],u);const c=P(m,["tunedModel"]);c!=null&&z(a,["tunedModel"],c);const d=P(m,["preTunedModel"]);d!=null&&z(a,["preTunedModel"],d);const b=P(m,["supervisedTuningSpec"]);b!=null&&z(a,["supervisedTuningSpec"],b);const g=P(m,["tuningDataStats"]);g!=null&&z(a,["tuningDataStats"],g);const p=P(m,["encryptionSpec"]);p!=null&&z(a,["encryptionSpec"],p);const x=P(m,["partnerModelTuningSpec"]);x!=null&&z(a,["partnerModelTuningSpec"],x);const y=P(m,["customBaseModel"]);y!=null&&z(a,["customBaseModel"],y);const v=P(m,["experiment"]);v!=null&&z(a,["experiment"],v);const S=P(m,["labels"]);S!=null&&z(a,["labels"],S);const N=P(m,["outputUri"]);N!=null&&z(a,["outputUri"],N);const R=P(m,["pipelineJob"]);R!=null&&z(a,["pipelineJob"],R);const B=P(m,["serviceAccount"]);B!=null&&z(a,["serviceAccount"],B);const M=P(m,["tunedModelDisplayName"]);M!=null&&z(a,["tunedModelDisplayName"],M);const F=P(m,["veoTuningSpec"]);return F!=null&&z(a,["veoTuningSpec"],F),a}function Ep(m){const a={},e=P(m,["sdkHttpResponse"]);e!=null&&z(a,["sdkHttpResponse"],e);const h=P(m,["name"]);h!=null&&z(a,["name"],h);const f=P(m,["metadata"]);f!=null&&z(a,["metadata"],f);const l=P(m,["done"]);l!=null&&z(a,["done"],l);const s=P(m,["error"]);return s!=null&&z(a,["error"],s),a}function Ip(m,a){const e={},h=P(m,["gcsUri"]);h!=null&&z(e,["validationDatasetUri"],h);const f=P(m,["vertexDatasetResource"]);return a!==void 0&&f!=null&&z(a,["supervisedTuningSpec","trainingDatasetUri"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mp extends cs{constructor(a){super(),this.apiClient=a,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Hs(ts.PAGED_ITEM_TUNING_JOBS,h=>this.listInternal(h),await this.listInternal(e),e),this.tune=async e=>{var h;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const f={tunedModelName:e.baseModel};!((h=e.config)===null||h===void 0)&&h.preTunedModelCheckpointId&&(f.checkpointId=e.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},e),{preTunedModel:f});return l.baseModel=void 0,await this.tuneInternal(l)}else{const f=Object.assign({},e);return await this.tuneInternal(f)}else{const f=Object.assign({},e),l=await this.tuneMldevInternal(f);let s="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?s=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(s=l.name.split("/operations/")[0]),{name:s,state:Kn.JOB_STATE_QUEUED}}}}async getInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=vp(a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>si(n))}else{const t=yp(a);return o=Xe("{name}",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>xl(n))}}async listInternal(a){var e,h,f,l;let s,o="",r={};if(this.apiClient.isVertexAI()){const t=jp(a);return o=Xe("tuningJobs",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Cp(n),c=new Do;return Object.assign(c,u),c})}else{const t=kp(a);return o=Xe("tunedModels",t._url),r=t._query,delete t._url,delete t._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(t),httpMethod:"GET",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal}).then(n=>n.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:n.headers},c})),s.then(n=>{const u=Sp(n),c=new Do;return Object.assign(c,u),c})}}async cancel(a){var e,h,f,l;let s="",o={};if(this.apiClient.isVertexAI()){const r=mp(a);s=Xe("{name}:cancel",r._url),o=r._query,delete r._url,delete r._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal})}else{const r=hp(a);s=Xe("{name}:cancel",r._url),o=r._query,delete r._url,delete r._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(f=a.config)===null||f===void 0?void 0:f.httpOptions,abortSignal:(l=a.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI()){const o=xp(a);return l=Xe("tuningJobs",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>si(r))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var e,h;let f,l="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=bp(a);return l=Xe("tunedModels",o._url),s=o._query,delete o._url,delete o._query,f=this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(e=a.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(h=a.config)===null||h===void 0?void 0:h.abortSignal}).then(r=>r.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:r.headers},n})),f.then(r=>Ep(r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rp{async download(a,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Pp=1024*1024*8,Dp=3,Fp=1e3,Lp=2,On="x-goog-upload-status";async function Op(m,a,e){var h,f,l;let s=0,o=0,r=new Jn(new Response),t="upload";for(s=m.size;o<s;){const u=Math.min(Pp,s-o),c=m.slice(o,o+u);o+u>=s&&(t+=", finalize");let d=0,b=Fp;for(;d<Dp&&(r=await e.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:a,headers:{"X-Goog-Upload-Command":t,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((h=r==null?void 0:r.headers)===null||h===void 0)&&h[On]));)d++,await Up(b),b=b*Lp;if(o+=u,((f=r==null?void 0:r.headers)===null||f===void 0?void 0:f[On])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const n=await(r==null?void 0:r.json());if(((l=r==null?void 0:r.headers)===null||l===void 0?void 0:l[On])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return n.file}async function Bp(m){return{size:m.size,type:m.type}}function Up(m){return new Promise(a=>setTimeout(a,m))}class $p{async upload(a,e,h){if(typeof a=="string")throw new Error("File path is not supported in browser uploader.");return await Op(a,e,h)}async stat(a){if(typeof a=="string")throw new Error("File path is not supported in browser uploader.");return await Bp(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zp{create(a,e,h){return new qp(a,e,h)}}class qp{constructor(a,e,h){this.url=a,this.headers=e,this.callbacks=h}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(a)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ta="x-goog-api-key";class Vp{constructor(a){this.apiKey=a}async addAuthHeaders(a){if(a.get(ta)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");a.append(ta,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hp="gl-node/";class yl{constructor(a){var e;if(a.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(a.project||a.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=a.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=a.apiKey;const h=cd(a.httpOptions,a.vertexai,void 0,void 0);h&&(a.httpOptions?a.httpOptions.baseUrl=h:a.httpOptions={baseUrl:h}),this.apiVersion=a.apiVersion;const f=new Vp(this.apiKey);this.apiClient=new Em({auth:f,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:a.httpOptions,userAgentExtra:Hp+"web",uploader:new $p,downloader:new Rp}),this.models=new Km(this.apiClient),this.live=new qm(this.apiClient,f,new zp),this.batches=new Au(this.apiClient),this.chats=new af(this.models,this.apiClient),this.caches=new sf(this.apiClient),this.files=new bf(this.apiClient),this.operations=new Jm(this.apiClient),this.authTokens=new fp(this.apiClient),this.tunings=new Mp(this.apiClient)}}const Wp=m=>{const{onClose:a,onAddProject:e,onUpdateProject:h,advisors:f,advisorProjectCounts:l,allProjects:s,allStudents:o,majors:r,user:t,projectToEdit:n,currentAcademicYear:u,suggestedTopic:c,onSuggestionUsed:d}=m,b=!!n,g=t.role==="Student",p=At(),x=Ue(),[y,v]=Z.useState(""),[S,N]=Z.useState(""),[R,B]=Z.useState(""),[M,F]=Z.useState(""),[q,V]=Z.useState(""),[O,T]=Z.useState(null),[A,C]=Z.useState(null),[w,_]=Z.useState(!1),[j,k]=Z.useState({}),[E,I]=Z.useState(!1),[D,X]=Z.useState(!1),[G,K]=Z.useState(!1),U=Z.useMemo(()=>{const ne=new Set(s.filter(se=>se.project.projectId!==(n==null?void 0:n.project.projectId)).flatMap(se=>se.students.map(H=>H.studentId)));return o.filter(se=>!ne.has(se.studentId))},[o,s,n]),J=Z.useMemo(()=>O?o.find(ne=>ne.studentId===O):null,[O,o]),$=Z.useMemo(()=>{var se;if(!J)return[];const ne=(se=r.find(H=>H.name===J.major))==null?void 0:se.id;return ne?f.filter(H=>Array.isArray(H.specializedMajorIds)&&H.specializedMajorIds.includes(ne)):f},[J,f,r]);Z.useEffect(()=>{var ne,se;g&&T(t.id),b&&n?(v(n.project.topicLao),N(n.project.topicEng),B(n.project.topicLao),F(n.project.topicEng),V(n.project.advisorName),T(((ne=n.students[0])==null?void 0:ne.studentId)||null),n.students.length>1&&(_(!0),C(((se=n.students[1])==null?void 0:se.studentId)||null))):c&&(v(c.lao),N(c.eng),p({type:"info",message:x("aiTopicFilled")}),d())},[b,n,g,t.id,c,p,d,x]);const L=async()=>{const ne={};let se=null;return y.trim()||(ne.topicLao=x("laoTopicRequired")),S.trim()||(ne.topicEng=x("engTopicRequired")),q||(ne.advisorName=x("advisorRequired")),O||(ne.student1=x("student1Required")),w&&!A&&(ne.student2=x("student2Required")),O&&A&&O===A&&(ne.student2=x("studentsCannotBeSame")),Object.keys(ne).length>0?(k(ne),{isValid:!1,similarityInfo:null}):(k(ne),{isValid:Object.keys(ne).length===0,similarityInfo:se})},W=async ne=>{ne.preventDefault();const{isValid:se,similarityInfo:H}=await L();if(!se)return;I(!0);const ce=[],ae=o.find(Y=>Y.studentId===O);if(ae&&ce.push(ae),w&&A){const Y=o.find(Q=>Q.studentId===A);Y&&ce.push(Y)}if(b&&n){const Y={...n,project:{...n.project,topicLao:y,topicEng:S,advisorName:q,similarityInfo:H},students:ce};h(Y,t),p({type:"success",message:x("projectUpdatedSuccess")})}else{const Y=u.slice(-2),Q=s.length+1,te={projectId:`P${Y}${String(Q).padStart(3,"0")}`,topicLao:y,topicEng:S,advisorName:q,comment:"Initial submission",status:it.Pending,history:[],milestones:[],similarityInfo:H,finalSubmissions:{preDefenseFile:null,postDefenseFile:null},mainCommitteeId:null,secondCommitteeId:null,thirdCommitteeId:null,defenseDate:null,defenseTime:null,defenseRoom:null,finalGrade:null,mainAdvisorScore:null,mainCommitteeScore:null,secondCommitteeScore:null,thirdCommitteeScore:null,log:[],detailedScores:null};e(te,ce,t),p({type:"success",message:x("projectRegisteredSuccess")})}I(!1),a()},re=async ne=>{};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; } .input-style:disabled { background-color: #e2e8f0; cursor: not-allowed; } .dark .input-style:disabled { background-color: #475569; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold",children:x(b?"editProject":"registerProject")}),i.jsx("button",{onClick:a,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:W,noValidate:!0,className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("label",{htmlFor:"topicLao",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:x("topicLao")}),i.jsx("input",{type:"text",id:"topicLao",value:y,onChange:ne=>v(ne.target.value),className:`input-style mt-1 ${j.topicLao?"border-red-500":""}`,placeholder:x("laoTopicPlaceholder")}),j.topicLao&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:j.topicLao}),i.jsx("button",{type:"button",onClick:()=>re(),disabled:G||!S,className:"absolute top-7 right-2 p-1.5 text-purple-600 hover:bg-purple-100 rounded-full disabled:opacity-50",children:G?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}):i.jsx(Ft,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{htmlFor:"topicEng",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:x("topicEng")}),i.jsx("input",{type:"text",id:"topicEng",value:S,onChange:ne=>N(ne.target.value),className:`input-style mt-1 ${j.topicEng?"border-red-500":""}`,placeholder:x("engTopicPlaceholder")}),j.topicEng&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:j.topicEng}),i.jsx("button",{type:"button",onClick:()=>re(),disabled:D||!y,className:"absolute top-7 right-2 p-1.5 text-purple-600 hover:bg-purple-100 rounded-full disabled:opacity-50",children:D?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}):i.jsx(Ft,{className:"w-4 h-4"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"student1",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:x("student1")}),i.jsxs("select",{id:"student1",value:O||"",onChange:ne=>T(ne.target.value),disabled:g,className:`input-style mt-1 ${j.student1?"border-red-500":""}`,children:[i.jsx("option",{value:"",disabled:!0,children:x("selectStudent1")}),U.map(ne=>i.jsxs("option",{value:ne.studentId,children:[ne.name," ",ne.surname," (",ne.studentId,")"]},ne.studentId))]}),j.student1&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:j.student1})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"hasSecondStudent",checked:w,onChange:ne=>_(ne.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"hasSecondStudent",className:"ml-2 text-sm text-slate-700 dark:text-slate-200",children:x("addSecondStudent")})]}),w&&i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{htmlFor:"student2",className:"sr-only",children:x("student2")}),i.jsxs("select",{id:"student2",value:A||"",onChange:ne=>C(ne.target.value),className:`input-style ${j.student2?"border-red-500":""}`,children:[i.jsx("option",{value:"",disabled:!0,children:x("selectStudent2")}),U.filter(ne=>ne.studentId!==O).map(ne=>i.jsxs("option",{value:ne.studentId,children:[ne.name," ",ne.surname," (",ne.studentId,")"]},ne.studentId))]}),j.student2&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:j.student2})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"advisor",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:x("selectAdvisor")}),i.jsxs("select",{id:"advisor",value:q,onChange:ne=>V(ne.target.value),className:`input-style mt-1 ${j.advisorName?"border-red-500":""}`,disabled:!J,children:[i.jsx("option",{value:"",disabled:!0,children:$.length>0?x("selectAnAdvisor"):x("noAvailableAdvisors")}),$.map(ne=>{const se=l[ne.name]||0,H=se>=ne.quota;return i.jsxs("option",{value:ne.name,disabled:H,children:[ne.name," (",se,"/",ne.quota,") ",H&&`- ${x("full")}`]},ne.id)})]}),j.advisorName&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:j.advisorName})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500 font-bold py-2 px-4 rounded-lg",children:x("cancel")}),i.jsx("button",{type:"submit",disabled:E,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:x(E?"submitting":"submit")})]})]})]})]})},vl=({user:m,searchQuery:a,setSearchQuery:e,advisorFilter:h,setAdvisorFilter:f,advisors:l,healthFilter:s,onClearHealthFilter:o,majors:r,genderFilter:t,setGenderFilter:n,majorFilter:u,setMajorFilter:c,statusFilter:d,setStatusFilter:b,scheduleFilter:g,setScheduleFilter:p,similarityFilter:x,setSimilarityFilter:y})=>{const v=Ue(),S="block w-full rounded-md border-0 py-2 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600";return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"relative sm:col-span-2 lg:col-span-4",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",name:"search",id:"search",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:v("searchByIdTopicStudent"),value:a,onChange:N=>e(N.target.value)})]}),m.role!=="Student"&&i.jsx("div",{className:"w-full",children:i.jsxs("select",{id:"advisor",name:"advisor",className:S,value:h,onChange:N=>f(N.target.value),children:[i.jsx("option",{value:"all",children:v("allAdvisors")}),l.map(N=>i.jsx("option",{value:N.name,children:N.name},N.id))]})}),i.jsx("div",{children:i.jsxs("select",{id:"major",name:"major",className:S,value:u,onChange:N=>c(N.target.value),children:[i.jsx("option",{value:"all",children:v("allMajors")}),r.map(N=>i.jsx("option",{value:N.name,children:N.name},N.id))]})}),i.jsx("div",{children:i.jsxs("select",{id:"status",name:"status",className:S,value:d,onChange:N=>b(N.target.value),children:[i.jsx("option",{value:"all",children:v("allStatuses")}),Object.values(it).map(N=>i.jsx("option",{value:N,children:N},N))]})}),i.jsx("div",{children:i.jsxs("select",{id:"gender",name:"gender",className:S,value:t,onChange:N=>n(N.target.value),children:[i.jsx("option",{value:"all",children:v("allGenders")}),Object.values(qt).map(N=>i.jsx("option",{value:N,children:N},N))]})}),i.jsx("div",{children:i.jsxs("select",{id:"schedule",name:"schedule",className:S,value:g,onChange:N=>p(N.target.value),children:[i.jsx("option",{value:"all",children:v("allSchedules")}),i.jsx("option",{value:"scheduled",children:v("scheduled")}),i.jsx("option",{value:"unscheduled",children:v("unscheduled")})]})}),s&&o&&i.jsxs("div",{className:"flex items-center gap-2 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 text-sm font-semibold px-3 py-1.5 rounded-full",children:[i.jsxs("span",{children:[v("health"),": ",s]}),i.jsx("button",{onClick:o,className:"text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:i.jsx(Ba,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-4 flex items-center pt-2",children:[i.jsx("input",{type:"checkbox",id:"similarity-filter",checked:x,onChange:N=>y(N.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:focus:ring-offset-slate-800"}),i.jsxs("label",{htmlFor:"similarity-filter",className:"ml-3 block text-sm font-medium text-gray-900 dark:text-gray-300 flex items-center",children:[i.jsx(cr,{className:"w-4 h-4 mr-1.5 text-amber-500"}),v("showOnlySimilar")]})]})]})})},dr=({isOpen:m,onClose:a,onConfirm:e,title:h,message:f,confirmText:l,confirmButtonClass:s="bg-red-600 hover:bg-red-700 focus:ring-red-500"})=>{const o=Ue();return m?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-md",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(cr,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:h}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:f})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse sm:space-x-2 space-y-2 sm:space-y-0",children:[i.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto sm:text-sm ${s}`,onClick:e,children:l||o("confirm")}),i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm dark:bg-slate-600 dark:text-white dark:border-slate-500 dark:hover:bg-slate-500",onClick:a,children:o("cancel")})]})]})}):null},zs=Z.createContext({});function Gp(m){return rs("MuiTimeline",m)}ss("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function Jr(m){return m==="alternate-reverse"?"positionAlternateReverse":`position${ni(m)}`}const Xp=m=>{const{position:a,classes:e}=m,h={root:["root",a&&Jr(a)]};return as(h,Gp,e)},Yp=is("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(m,a)=>{const{ownerState:e}=m;return[a.root,e.position&&a[Jr(e.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),Kp=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimeline"}),{position:f="right",className:l,...s}=h,o={...h,position:f},r=Xp(o),t=Z.useMemo(()=>({position:f}),[f]);return i.jsx(zs.Provider,{value:t,children:i.jsx(Yp,{className:os(r.root,l),ownerState:o,ref:e,...s})})});function Jp(m){return rs("MuiTimelineConnector",m)}ss("MuiTimelineConnector",["root"]);const Zp=m=>{const{classes:a}=m;return as({root:["root"]},Jp,a)},Qp=is("span",{name:"MuiTimelineConnector",slot:"Root"})(({theme:m})=>({width:2,backgroundColor:(m.vars||m).palette.grey[400],flexGrow:1})),e0=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineConnector"}),{className:f,...l}=h,s=h,o=Zp(s);return i.jsx(Qp,{className:os(o.root,f),ownerState:s,ref:e,...l})});function t0(m){return rs("MuiTimelineContent",m)}const r0=ss("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),s0=m=>{const{position:a,classes:e}=m,h={root:["root",Jr(a)]};return as(h,t0,e)},n0=is(Qe,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(m,a)=>{const{ownerState:e}=m;return[a.root,a[Jr(e.position)]]}})(({ownerState:m})=>({flex:1,padding:"6px 16px",textAlign:"left",...m.position==="left"&&{textAlign:"right"}})),i0=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineContent"}),{className:f,...l}=h,{position:s}=Z.useContext(zs),o={...h,position:s||"right"},r=s0(o);return i.jsx(n0,{component:"div",className:os(r.root,f),ownerState:o,ref:e,...l})});function o0(m){return rs("MuiTimelineDot",m)}ss("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const a0=m=>{const{color:a,variant:e,classes:h}=m,f={root:["root",e,a!=="inherit"&&`${e}${ni(a)}`]};return as(f,o0,h)},l0=is("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(m,a)=>{const{ownerState:e}=m;return[a.root,a[e.color!=="inherit"&&`${e.variant}${ni(e.color)}`],a[e.variant]]}})(({ownerState:m,theme:a})=>({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(a.vars||a).shadows[1],margin:"11.5px 0",...m.variant==="filled"&&{borderColor:"transparent",...m.color!=="inherit"&&{...m.color==="grey"?{color:(a.vars||a).palette.grey[50],backgroundColor:(a.vars||a).palette.grey[400]}:{color:(a.vars||a).palette[m.color].contrastText,backgroundColor:(a.vars||a).palette[m.color].main}}},...m.variant==="outlined"&&{boxShadow:"none",backgroundColor:"transparent",...m.color!=="inherit"&&{...m.color==="grey"?{borderColor:(a.vars||a).palette.grey[400]}:{borderColor:(a.vars||a).palette[m.color].main}}}})),c0=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineDot"}),{className:f,color:l="grey",variant:s="filled",...o}=h,r={...h,color:l,variant:s},t=a0(r);return i.jsx(l0,{className:os(t.root,f),ownerState:r,ref:e,...o})});function d0(m){return rs("MuiTimelineOppositeContent",m)}const wl=ss("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),u0=m=>{const{position:a,classes:e}=m,h={root:["root",Jr(a)]};return as(h,d0,e)},f0=is(Qe,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:(m,a)=>{const{ownerState:e}=m;return[a.root,a[Jr(e.position)]]}})(({ownerState:m})=>({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1,...m.position==="left"&&{textAlign:"left"}})),_l=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineOppositeContent"}),{className:f,...l}=h,{position:s}=Z.useContext(zs),o={...h,position:s||"left"},r=u0(o);return i.jsx(f0,{component:"div",className:os(r.root,f),ownerState:o,ref:e,...l})});_l.muiName="TimelineOppositeContent";function h0(m){return rs("MuiTimelineItem",m)}ss("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const m0=m=>{const{position:a,classes:e,hasOppositeContent:h}=m,f={root:["root",Jr(a),!h&&"missingOppositeContent"]};return as(f,h0,e)},p0=is("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(m,a)=>{const{ownerState:e}=m;return[a.root,a[Jr(e.position)]]}})(({ownerState:m})=>({listStyle:"none",display:"flex",position:"relative",minHeight:70,...m.position==="left"&&{flexDirection:"row-reverse"},...(m.position==="alternate"||m.position==="alternate-reverse")&&{[`&:nth-of-type(${m.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${r0.root}`]:{textAlign:"right"},[`& .${wl.root}`]:{textAlign:"left"}}},...!m.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}}})),g0=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineItem"}),{position:f,className:l,...s}=h,{position:o}=Z.useContext(zs);let r=!1;Z.Children.forEach(h.children,c=>{oc(c,["TimelineOppositeContent"])&&(r=!0)});const t={...h,position:f||o||"right",hasOppositeContent:r},n=m0(t),u=Z.useMemo(()=>({position:t.position}),[t.position]);return i.jsx(zs.Provider,{value:u,children:i.jsx(p0,{className:os(n.root,l),ownerState:t,ref:e,...s})})});function b0(m){return rs("MuiTimelineSeparator",m)}ss("MuiTimelineSeparator",["root"]);const x0=m=>{const{classes:a}=m;return as({root:["root"]},b0,a)},y0=is("div",{name:"MuiTimelineSeparator",slot:"Root"})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),v0=Z.forwardRef(function(a,e){const h=ns({props:a,name:"MuiTimelineSeparator"}),{className:f,...l}=h,s=h,o=x0(s);return i.jsx(y0,{className:os(o.root,f),ownerState:s,ref:e,...l})}),ra={[it.Approved]:{Icon:xn,color:"success",title:"Project Approved"},[it.Rejected]:{Icon:ja,color:"error",title:"Project Rejected"},[it.Pending]:{Icon:Sa,color:"warning",title:"Project Submitted"}},w0=({history:m})=>{if(!m||m.length===0)return i.jsx(Qe,{variant:"body2",color:"text.secondary",children:"No history available."});const a=[...m].sort((e,h)=>new Date(h.timestamp).getTime()-new Date(e.timestamp).getTime());return i.jsx(Kp,{sx:{[`& .${wl.root}`]:{flex:.2},p:0,m:0},children:a.map((e,h)=>{const f=ra[e.status]||ra[it.Pending],l=f.Icon,s=new Date(e.timestamp).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"});let o=f.title;return e.status===it.Pending&&e.comment.includes("resubmitted")?o="Project Resubmitted":e.status===it.Pending&&e.comment.includes("Transferred")&&(o="Project Transferred"),i.jsxs(g0,{children:[i.jsx(_l,{color:"text.secondary",variant:"caption",children:s}),i.jsxs(v0,{children:[i.jsx(c0,{color:f.color,children:i.jsx(l,{sx:{fontSize:20}})}),h<a.length-1&&i.jsx(e0,{})]}),i.jsx(i0,{children:i.jsxs(yn,{elevation:1,sx:{p:2},children:[i.jsx(Qe,{variant:"subtitle2",fontWeight:"bold",children:o}),i.jsxs(Qe,{variant:"caption",color:"text.secondary",children:["by ",i.jsx(at,{component:"span",fontWeight:"medium",children:e.actorName})]}),i.jsx(Qe,{variant:"body2",color:"text.secondary",sx:{mt:1,pl:1.5,borderLeft:2,borderColor:"divider"},children:e.comment})]})})]},`${e.status}-${e.timestamp}`)})})},sa=({isOpen:m,onClose:a,onConfirm:e,action:h,milestoneName:f,projectGroup:l})=>{const[s,o]=Z.useState(""),[r,t]=Z.useState(!1),n=At(),u=Ue(),d={approve:{title:u("approveMilestone"),icon:i.jsx(Kt,{className:"h-6 w-6 text-green-600","aria-hidden":"true"}),iconBg:"bg-green-100",buttonText:u("approveButton"),buttonBg:"bg-green-600 hover:bg-green-700 focus:ring-green-500",prompt:p=>u("approveFeedbackPrompt").replace("{milestoneName}",p)},revise:{title:u("requestRevisionTitle"),icon:i.jsx($s,{className:"h-6 w-6 text-orange-600","aria-hidden":"true"}),iconBg:"bg-orange-100",buttonText:u("requestRevisionButton"),buttonBg:"bg-orange-500 hover:bg-orange-600 focus:ring-orange-500",prompt:p=>u("requestRevisionPrompt").replace("{milestoneName}",p)}}[h];if(!m)return null;const b=()=>{e(s),o("")},g=async()=>{if(l){t(!0);try{throw new Error("API key is not configured.")}catch(p){console.error("AI feedback generation failed:",p),n({type:"error",message:u("feedbackGenerationFailed")})}finally{t(!1)}}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-md",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${d.iconBg} sm:mx-0 sm:h-10 sm:w-10`,children:d.icon}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[i.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:d.title}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:d.prompt(f)})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{htmlFor:"feedback-textarea",className:"block text-sm font-medium text-gray-700 dark:text-slate-300",children:u("feedbackLabel")}),l&&i.jsx("button",{type:"button",onClick:g,disabled:r,className:"flex items-center text-xs font-semibold text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 disabled:opacity-50 disabled:cursor-wait",children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 dark:border-purple-400 mr-1.5"}),u("generating")]}):i.jsxs(i.Fragment,{children:[i.jsx(Ft,{className:"w-4 h-4 mr-1"}),u("suggestWithAI")]})})]}),i.jsx("textarea",{id:"feedback-textarea",rows:4,value:s,onChange:p=>o(p.target.value),className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600",placeholder:u("feedbackPlaceholder"),"aria-label":"Feedback for milestone"})]})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-6 sm:flex sm:flex-row-reverse sm:space-x-2 space-y-2 sm:space-y-0",children:[i.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto sm:text-sm ${d.buttonBg}`,onClick:b,children:d.buttonText}),i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm dark:bg-slate-600 dark:text-white dark:border-slate-500 dark:hover:bg-slate-500",onClick:a,children:u("cancel")})]})]})})},_0=({isOpen:m,onClose:a,onConfirm:e,projectGroup:h,advisors:f,advisorProjectCounts:l,majors:s})=>{const[o,r]=Z.useState(""),[t,n]=Z.useState(""),[u,c]=Z.useState(""),d=Ue(),b=Z.useMemo(()=>{var x;const p=(x=s.find(y=>{var v;return y.name===((v=h.students[0])==null?void 0:v.major)}))==null?void 0:x.id;return p?f.filter(y=>{var v;return y.name===h.project.advisorName?!1:(v=y.specializedMajorIds)==null?void 0:v.includes(p)}):[]},[f,h,s]);if(Z.useEffect(()=>{if(m){const p=b.find(x=>(l[x.name]||0)<x.quota);r((p==null?void 0:p.name)||""),n(""),c("")}},[m,b,l]),!m)return null;const g=()=>{if(!o){c(d("selectAdvisorToTransfer"));return}if(!t.trim()){c(d("reasonForTransferRequired"));return}e(o,t)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-md",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Ss,{className:"h-6 w-6 text-orange-600","aria-hidden":"true"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[i.jsxs("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:[d("transfer")," ",d("project")]}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:d("transferProjectPrompt").replace("{topic}",h.project.topicEng).replace("{advisor}",h.project.advisorName)})}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newAdvisor",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:d("newAdvisor")}),i.jsxs("select",{id:"newAdvisor",value:o,onChange:p=>r(p.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsxs("option",{value:"",disabled:!0,children:["-- ",d("selectAnAdvisor")," --"]}),b.map(p=>{const x=l[p.name]||0,y=x>=p.quota;return i.jsxs("option",{value:p.name,disabled:y,children:[p.name," (",x,"/",p.quota,") ",y?`- ${d("full")}`:""]},p.id)})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:d("reason")}),i.jsx("textarea",{id:"reason",rows:3,value:t,onChange:p=>n(p.target.value),className:`mt-1 block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 ${u&&!t.trim()?"ring-red-500 focus:ring-red-500":"focus:ring-blue-600"}`,placeholder:d("transferReasonPlaceholder")})]})]}),u&&i.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:u})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-6 sm:flex sm:flex-row-reverse sm:space-x-2 space-y-2 sm:space-y-0",children:[i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto sm:text-sm focus:ring-blue-500",onClick:g,children:d("confirmTransfer")}),i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm dark:bg-slate-600 dark:text-white dark:border-slate-500 dark:hover:bg-slate-500",onClick:a,children:d("cancel")})]})]})})},k0=(m="")=>m.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/(\r\n|\n|\r)/g,"<br />"),Tn=({announcements:m,user:a})=>{const e=Ue(),h=Z.useMemo(()=>m.filter(f=>f.audience==="All"||f.audience==="Students"&&a.role==="Student"||f.audience==="Advisors"&&(a.role==="Advisor"||a.role==="Admin")).slice(0,5),[m,a.role]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-full mr-3",children:i.jsx(ci,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:e("recentAnnouncements")})]}),h.length>0?i.jsx("ul",{className:"space-y-4",children:h.map((f,l)=>i.jsxs("li",{className:`pt-4 ${l>0?"border-t border-slate-200 dark:border-slate-700":""}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:f.title}),i.jsx("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300 prose",dangerouslySetInnerHTML:{__html:k0(f.content)}}),i.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:[e("postedBy").replace("{author}",f.authorName)," • ",ls(f.createdAt,e)]})]},f.id))}):i.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400 py-4",children:e("noAnnouncements")})]})},j0=({label:m,evaluatorName:a,score:e,total:h,canEdit:f,onEdit:l,t:s})=>i.jsxs("div",{className:"py-3 sm:grid sm:grid-cols-3 sm:gap-4 items-center",children:[i.jsxs("dt",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:[m,i.jsx("span",{className:"block text-xs font-normal text-slate-400 dark:text-slate-500",children:a})]}),i.jsxs("dd",{className:"mt-1 text-sm text-slate-900 dark:text-white sm:col-span-2 sm:mt-0 flex justify-between items-center",children:[i.jsx("span",{children:e!==null?`${e.toFixed(2)} / ${h}`:s("pending")}),f&&i.jsx("button",{onClick:l,className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",children:s(e!==null?"editScore":"enterScore")})]})]}),S0=({projectGroup:m,user:a,scoringSettings:e,advisors:h,updateDetailedScore:f})=>{var q;const{project:l}=m,[s,o]=Z.useState(!1),[r,t]=Z.useState(null),n=At(),u=Ue(),c=Z.useCallback(V=>{var O;return V?((O=h.find(T=>T.id===V))==null?void 0:O.name)||u("unknownAdvisor"):u("notAssigned")},[h,u]),d=Z.useMemo(()=>h.find(V=>V.name===l.advisorName),[h,l.advisorName]),b=Z.useMemo(()=>e.advisorRubrics.reduce((V,O)=>V+O.maxScore,0),[e.advisorRubrics]),g=Z.useMemo(()=>e.committeeRubrics.reduce((V,O)=>V+O.maxScore,0),[e.committeeRubrics]),p=Z.useCallback(V=>V?a.role==="Admin"||a.role==="DepartmentAdmin"?!0:a.role==="Advisor"?a.id===V:!1:!1,[a]),x=(V,O,T,A)=>{t({evaluatorId:V,evaluatorName:O,rubric:T,maxTotalScore:A}),o(!0)},y=V=>{r&&(f(l.projectId,r.evaluatorId,V),n({type:"success",message:u("scoreSavedSuccess")}),o(!1),t(null))},v=Z.useMemo(()=>[{type:u("mainAdvisor"),id:d==null?void 0:d.id,name:d==null?void 0:d.name,score:l.mainAdvisorScore,rubric:e.advisorRubrics,maxScore:b},{type:u("mainCommittee"),id:l.mainCommitteeId,name:c(l.mainCommitteeId),score:l.mainCommitteeScore,rubric:e.committeeRubrics,maxScore:g},{type:u("secondCommittee"),id:l.secondCommitteeId,name:c(l.secondCommitteeId),score:l.secondCommitteeScore,rubric:e.committeeRubrics,maxScore:g},{type:u("thirdCommittee"),id:l.thirdCommitteeId,name:c(l.thirdCommitteeId),score:l.thirdCommitteeScore,rubric:e.committeeRubrics,maxScore:g}],[l,d,c,e,b,g,u]),{finalScore:S,finalGrade:N}=Z.useMemo(()=>{var j;const{mainAdvisorScore:V,mainCommitteeScore:O,secondCommitteeScore:T,thirdCommitteeScore:A}=l;if([V,O,T,A].some(k=>k===null))return{finalScore:null,finalGrade:u("incomplete")};const C=(O+T+A)/3,w=V+C,_=((j=e.gradeBoundaries.find(k=>w>=k.minScore))==null?void 0:j.grade)||"F";return{finalScore:w,finalGrade:_}},[l,e.gradeBoundaries,u]);if(a.role==="Student")return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:u("scoringDetails")}),i.jsxs("div",{className:"text-center py-4",children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u("scoresConfidential")}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:u("consultOffice")})]})]});const R=a.role==="Admin"||a.role==="DepartmentAdmin",B=(d==null?void 0:d.id)===a.id,M=v.find(V=>V.id===a.id&&V.type.includes("Committee")),F=B||M;return a.role==="Advisor"&&!F&&!R?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:u("scoringDetails")}),i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u("noScoreViewPermission")})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:u("scoringDetails")}),i.jsxs("dl",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[v.map(V=>(R||B&&V.type===u("mainAdvisor")||M&&V.type===M.type)&&V.id&&V.name?i.jsx(j0,{label:V.type,evaluatorName:V.name,score:V.score,total:V.maxScore,canEdit:p(V.id),onEdit:()=>x(V.id,V.name,V.rubric,V.maxScore),t:u},V.type):null),R&&i.jsxs("div",{className:"py-3 sm:grid sm:grid-cols-3 sm:gap-4 items-center font-bold",children:[i.jsx("dt",{className:"text-sm text-slate-600 dark:text-slate-300",children:u("finalScoreAndGrade")}),i.jsxs("dd",{className:"mt-1 text-lg text-slate-900 dark:text-white sm:col-span-2 sm:mt-0 flex justify-between items-center",children:[i.jsx("span",{children:S!==null?S.toFixed(2):u("na")}),i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:N})]})]})]})]}),s&&r&&i.jsx(jn,{isOpen:s,onClose:()=>o(!1),onSave:y,rubric:r.rubric,initialScores:((q=l.detailedScores)==null?void 0:q[r.evaluatorId])||{},evaluatorName:r.evaluatorName,maxTotalScore:r.maxTotalScore})]})},C0=({score:m})=>{const a=Ue();let e="text-green-500",h="bg-green-100 dark:bg-green-900/50",f=Kt,l=a("lowSimilarity");return m>=20&&m<50?(e="text-yellow-500",h="bg-yellow-100 dark:bg-yellow-900/50",f=cr,l=a("moderateSimilarity")):m>=50&&(e="text-red-500",h="bg-red-100 dark:bg-red-900/50",f=cr,l=a("highSimilarity")),i.jsxs("div",{className:`p-4 rounded-lg flex items-center justify-center gap-4 ${h}`,children:[i.jsx(f,{className:`w-12 h-12 ${e}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:a("overallSimilarityScore")}),i.jsxs("p",{className:`text-4xl font-bold ${e}`,children:[m.toFixed(1),"%"]}),i.jsx("p",{className:`text-sm font-semibold ${e}`,children:l})]})]})},N0=({isOpen:m,onClose:a,result:e})=>{const h=Ue();return m?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rr,{className:"w-7 h-7 text-blue-500"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:h("aiPlagiarismCheckResults")})]}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"mt-4 flex-grow overflow-y-auto pr-2",children:e?i.jsxs("div",{className:"space-y-4",children:[i.jsx(C0,{score:e.overallSimilarityScore}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:h("potentialMatches")}),e.potentialMatches.length>0?i.jsx("ul",{className:"mt-2 space-y-3",children:e.potentialMatches.map((f,l)=>i.jsxs("li",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{className:"flex justify-between items-baseline",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200 truncate",children:f.source}),i.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 flex-shrink-0 ml-4",children:h("matchPercentage").replace("{percentage}",f.similarity.toFixed(1))})]}),i.jsxs("blockquote",{className:"mt-2 pl-3 text-sm text-slate-600 dark:text-slate-400 border-l-2 border-slate-300 dark:border-slate-600",children:['"',f.matchedSnippet,'"']})]},l))}):i.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:h("noSignificantMatches")})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),i.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:h("checkingForPlagiarism")})]})}),i.jsx("div",{className:"flex justify-end pt-4 border-t dark:border-slate-700 mt-4 flex-shrink-0",children:i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:h("closeBtn")})})]})}):null},A0=m=>{try{return localStorage.getItem(`file_${m}`)||""}catch(a){return console.error("Error reading file from localStorage:",a),""}},T0=({projectGroup:m,user:a,advisors:e,onAddEntry:h,onAnalyze:f})=>{const[l,s]=Z.useState(""),[o,r]=Z.useState(null),[t,n]=Z.useState(""),[u,c]=Z.useState(!1),[d,b]=Z.useState(0),g=Z.useRef(null),p=Z.useRef(null),x=Z.useRef(null),y=At(),v=Ue(),[S,N]=Z.useState(!1),R=w=>{const _=w.toLowerCase();return _.includes("status changed")||_.includes("approved")||_.includes("rejected")||_.includes("transferred")?i.jsx(Ss,{className:"w-3 h-3 mr-1.5 inline-block"}):_.includes("submitted")?i.jsx(Xr,{className:"w-3 h-3 mr-1.5 inline-block"}):_.includes("due date")?i.jsx(Er,{className:"w-3 h-3 mr-1.5 inline-block"}):_.includes("updated")||_.includes("registered")?i.jsx(er,{className:"w-3 h-3 mr-1.5 inline-block"}):i.jsx(za,{className:"w-3 h-3 mr-1.5 inline-block"})},B=Z.useMemo(()=>{const w=e.find(j=>j.name===m.project.advisorName),_=m.students.map(j=>({id:j.studentId,name:`${j.name} ${j.surname}`}));return w&&_.push({id:w.id,name:w.name}),_.filter(j=>j.id!==a.id)},[m,e,a.id]),M=Z.useMemo(()=>B.filter(w=>w.name.toLowerCase().includes(t.toLowerCase())),[B,t]),F=()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})};Z.useEffect(()=>{F()},[m.project.log]);const q=w=>{var j;const _=(j=w.target.files)==null?void 0:j[0];if(_){if(_.size>5*1024*1024){y({type:"error",message:"File size cannot exceed 5MB."});return}r(_)}},V=w=>{if(!x.current)return;const _=x.current.value,j=_.lastIndexOf("@");if(j!==-1){const k=`${_.substring(0,j)}@${w} `;s(k)}c(!1),n(""),x.current.focus()},O=w=>{const _=w.target.value;s(_);const j=_.lastIndexOf("@");j!==-1&&_.substring(j+1).match(/^\S*$/)?(n(_.substring(j+1)),c(!0),b(0)):c(!1)},T=w=>{u&&M.length>0&&(w.key==="ArrowDown"?(w.preventDefault(),b(_=>(_+1)%M.length)):w.key==="ArrowUp"?(w.preventDefault(),b(_=>(_-1+M.length)%M.length)):w.key==="Enter"?(w.preventDefault(),V(M[d].name)):w.key==="Escape"&&(w.preventDefault(),c(!1)))},A=()=>{if(!l.trim()&&!o)return;const w={authorId:a.id,authorName:a.name,authorRole:a.role,message:l.trim(),type:"message"};if(o){const _=new FileReader;_.onload=j=>{var E;const k=(E=j.target)==null?void 0:E.result;if(k){const I={name:o.name,type:o.type,size:o.size,dataUrl:k};h(m.project.projectId,w,I)}},_.readAsDataURL(o)}else h(m.project.projectId,w,null);s(""),r(null),g.current&&(g.current.value="")},C=w=>{const _=/@([\w\s.]+)/g,j=w.split(_);return i.jsx(i.Fragment,{children:j.map((k,E)=>{if(E%2===1){const I=k===a.name;return i.jsxs("strong",{className:I?"text-blue-400 bg-blue-900/50 px-1 rounded":"text-blue-400",children:["@",k]},E)}return k})})};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 flex flex-col h-[70vh]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:v("communicationLog")}),i.jsxs("button",{onClick:f,disabled:S,className:"flex items-center text-sm font-semibold text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 disabled:opacity-50",children:[i.jsx(Ft,{className:"w-5 h-5 mr-1.5"}),v("aiSummary")]})]}),i.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[(m.project.log||[]).map(w=>{if(w.type==="event")return i.jsx("div",{className:"py-2",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),i.jsxs("div",{className:"flex-shrink-0 mx-4 text-xs text-slate-500 dark:text-slate-400 flex items-center",children:[R(w.message),i.jsxs("span",{children:[i.jsx("span",{className:"italic",children:w.message}),i.jsxs("span",{className:"font-semibold",children:[" by ",w.authorName]}),i.jsxs("span",{className:"ml-1 text-slate-400",children:["(",ls(w.timestamp,v),")"]})]})]}),i.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]})},w.id);const _=w.authorId===a.id,j=_?"items-end":"items-start",k=_?"bg-blue-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200";return i.jsxs("div",{className:`flex flex-col ${j}`,children:[i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsxs("span",{className:`text-xs font-semibold ${_?"order-2":""}`,children:[w.authorName," (",w.authorRole,")"]}),i.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(w.timestamp).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})})]}),i.jsxs("div",{className:`mt-1 p-3 rounded-lg max-w-lg ${k}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:C(w.message)}),w.file&&i.jsx("div",{className:"mt-2 pt-2 border-t border-white/20 dark:border-slate-600/50",children:i.jsxs("a",{href:A0(w.file.fileId),download:w.file.name,className:"flex items-center gap-2 text-sm font-medium hover:underline",children:[i.jsx(Ri,{className:"w-4 h-4"}),w.file.name]})})]})]},w.id)}),i.jsx("div",{ref:p})]}),i.jsxs("div",{className:"relative mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:[u&&M.length>0&&i.jsx("div",{className:"absolute bottom-full mb-2 w-full max-w-xs bg-white dark:bg-slate-800 border dark:border-slate-600 rounded-lg shadow-lg z-10 max-h-40 overflow-y-auto",children:i.jsx("ul",{children:M.map((w,_)=>i.jsx("li",{children:i.jsx("button",{onClick:()=>V(w.name),className:`w-full text-left px-3 py-2 text-sm ${_===d?"bg-blue-100 dark:bg-blue-900/50":""}`,children:w.name})},w.id))})}),o&&i.jsxs("div",{className:"mb-2 p-2 bg-slate-100 dark:bg-slate-700 rounded-md flex justify-between items-center text-sm",children:[i.jsx("span",{className:"truncate",children:o.name}),i.jsx("button",{onClick:()=>{r(null),g.current&&(g.current.value="")},className:"p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",children:i.jsx(Ot,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"file",ref:g,onChange:q,className:"hidden"}),i.jsx("button",{onClick:()=>{var w;return(w=g.current)==null?void 0:w.click()},className:"p-2.5 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx(Ri,{className:"w-5 h-5"})}),i.jsx("textarea",{ref:x,rows:1,value:l,onChange:O,onKeyDown:T,placeholder:"Type your message... Use @ to mention someone.",className:"block w-full rounded-md border-0 p-2.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 resize-none"}),i.jsx("button",{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold p-2.5 rounded-lg",children:i.jsx(di,{className:"w-5 h-5"})})]})]})]})},E0=(m,a,e)=>{const h=new Date;if(h.setHours(0,0,0,0),new Date(a)<h&&m!==bt.Approved&&m!==bt.Submitted)return{icon:i.jsx(cr,{className:"w-5 h-5 text-red-700 dark:text-red-300"}),bgColor:"bg-red-100 dark:bg-red-900/50",textColor:"text-red-800 dark:text-red-200",label:e("overdue")};switch(m){case bt.Approved:return{icon:i.jsx(Kt,{className:"w-5 h-5 text-green-700 dark:text-green-300"}),bgColor:"bg-green-100 dark:bg-green-900/50",textColor:"text-green-800 dark:text-green-200",label:e("approved")};case bt.Submitted:return{icon:i.jsx(Xr,{className:"w-5 h-5 text-blue-700 dark:text-blue-300"}),bgColor:"bg-blue-100 dark:bg-blue-900/50",textColor:"text-blue-800 dark:text-blue-200",label:e("submitted")};case bt.RequiresRevision:return{icon:i.jsx($s,{className:"w-5 h-5 text-orange-700 dark:text-orange-300"}),bgColor:"bg-orange-100 dark:bg-orange-900/50",textColor:"text-orange-800 dark:text-orange-200",label:e("requiresRevision")};default:return{icon:i.jsx(Er,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),bgColor:"bg-slate-100 dark:bg-slate-700/50",textColor:"text-slate-800 dark:text-slate-200",label:e("pending")}}},na=({title:m,children:a,defaultOpen:e=!0})=>{const[h,f]=Z.useState(e);return i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>f(!h),className:"w-full flex justify-between items-center p-3 bg-slate-100 dark:bg-slate-900/50 rounded-t-lg",children:[i.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:m}),h?i.jsx(Ua,{className:"w-5 h-5"}):i.jsx(ui,{className:"w-5 h-5"})]}),h&&i.jsx("div",{className:"p-4",children:a})]})},ia=m=>{var ae,Y,Q;const{projectGroup:a,user:e,effectiveRole:h,onBack:f,onEdit:l,onDelete:s,onUpdateStatus:o,onUpdateMilestone:r,onUpdateFinalSubmissions:t,onReviewFinalSubmission:n,onReorderMilestones:u,transferProject:c,addProjectLogEntry:d,onAnalyzeCommunication:b,onGrammarCheck:g,advisors:p,advisorProjectCounts:x,announcements:y,scoringSettings:v,updateDetailedScore:S,onOpenAssistant:N,majors:R,allProjectGroups:B}=m,{project:M,students:F}=a,[q,V]=Z.useState("overview"),[O,T]=Z.useState(!1),[A,C]=Z.useState(null),[w,_]=Z.useState(!1),[j,k]=Z.useState(!1),E=At(),I=Ue(),D=h==="Student",X=D&&F.some(te=>te.studentId===e.id);e.role==="Advisor"&&(e.name,M.advisorName);const G=h==="Admin"||h==="DepartmentAdmin",K=[{key:"overview",label:I("overview"),icon:lr},{key:"milestones",label:I("milestones"),icon:wn},{key:"submissions",label:I("finalSubmissions"),icon:Lr},{key:"scoring",label:I("scoringNav"),icon:Bs},{key:"log",label:I("communicationLog"),icon:Or},{key:"history",label:I("statusHistory"),icon:Er}],U=Z.useMemo(()=>K.filter(te=>!(te.key==="log"&&D&&!X)),[D,X,K,I]),J=(te,ie)=>r(M.projectId,te,e,ie),$=(te,ie)=>t(M.projectId,te,e,ie),L=(te,ie,le)=>n(M.projectId,te,e,ie,le),W=(te,ie)=>{c&&(c(M.projectId,te,e,ie),T(!1),E({type:"success",message:I("projectTransferredSuccessfully").replace("{advisorName}",te)}))},re=(te,ie)=>{u&&u(M.projectId,te,ie)},ne=({onFileUpload:te,currentFile:ie,label:le,fileId:ee,onGrammarCheck:oe})=>{const de=Z.useRef(null),fe=At(),be=Ue(),he=ke=>{var Ee;const Ce=(Ee=ke.target.files)==null?void 0:Ee[0];if(Ce){if(Ce.size>2*1024*1024){fe({type:"error",message:be("fileSizeLimitError")});return}const Oe=new FileReader;Oe.onload=Te=>{var Ae;const ye=(Ae=Te.target)==null?void 0:Ae.result;ye&&te({name:Ce.name,type:Ce.type,size:Ce.size,dataUrl:ye})},Oe.readAsDataURL(Ce)}},pe=ke=>{const Ce=localStorage.getItem(`file_${ke.fileId}`);if(Ce){const Ee=document.createElement("a");Ee.href=Ce,Ee.download=ke.name,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)}else fe({type:"error",message:be("fileNotFoundError")})};return i.jsxs("div",{children:[i.jsx("input",{type:"file",ref:de,onChange:he,className:"hidden",id:ee}),ie?i.jsxs("div",{className:"mt-2 p-2 bg-slate-100 dark:bg-slate-700 rounded-md flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:ie.name}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[(ie.size/1024).toFixed(2)," KB"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>pe(ie),className:"text-sm font-medium text-blue-600 hover:underline dark:text-blue-400",children:be("download")}),X&&oe&&ie.type.startsWith("text/")&&i.jsxs("button",{type:"button",onClick:()=>oe(ie),className:"text-sm font-medium text-purple-600 hover:underline dark:text-purple-400 flex items-center gap-1",children:[i.jsx(Ft,{className:"w-4 h-4"})," ",be("analyzeDocument")]}),i.jsx("button",{type:"button",onClick:()=>{var ke;return(ke=de.current)==null?void 0:ke.click()},className:"text-sm font-medium text-blue-600 hover:underline dark:text-blue-400",children:be("replace")})]})]}):i.jsx("button",{type:"button",onClick:()=>{var ke;return(ke=de.current)==null?void 0:ke.click()},className:"mt-2 w-full text-center px-4 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-500 hover:border-blue-500 hover:text-blue-600 dark:hover:text-blue-400",children:le})]})},se=({milestones:te,user:ie,onUpdateMilestone:le,onReorderMilestones:ee,onPlagiarismCheck:oe,onGrammarCheck:de})=>{const[fe,be]=Z.useState({isOpen:!1,milestoneId:"",milestoneName:"",action:"approve"}),[he,pe]=Z.useState(null),ke=Ue(),Ce=ie.role==="Student",Ee=(ye,Ae)=>{pe(Ae),ye.dataTransfer.effectAllowed="move"},Oe=ye=>{ye.preventDefault(),ye.dataTransfer.dropEffect="move"},Te=(ye,Ae)=>{ye.preventDefault(),he&&he!==Ae&&ee&&ee(he,Ae),pe(null)};return!te||te.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:ke("noMilestonesYet")}):i.jsxs("div",{className:"space-y-4",children:[te.map(ye=>{const{icon:Ae,bgColor:Fe,textColor:Re,label:ge}=E0(ye.status,ye.dueDate,ke),xe=ie.role==="Admin"||ie.role==="Advisor"||ie.role==="DepartmentAdmin",we=Se=>{const Ie=ye.status===bt.Pending||ye.status===bt.RequiresRevision;le(ye.id,{status:Ie?bt.Submitted:void 0,submittedFile:Se})},je=X&&(ye.status===bt.Pending||ye.status===bt.RequiresRevision||ye.status===bt.Submitted);return i.jsxs("div",{draggable:!Ce&&!!ee,onDragStart:Se=>ee&&Ee(Se,ye.id),onDragOver:ee?Oe:void 0,onDrop:Se=>ee&&Te(Se,ye.id),className:`p-4 rounded-lg ${Fe} ${he===ye.id?"opacity-50":""}`,children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${Re}`,children:ye.name}),xe?i.jsxs("div",{className:`flex items-center gap-2 mt-1 ${Re}`,children:[i.jsx("label",{htmlFor:`due-date-${ye.id}`,className:"text-sm font-medium",children:ke("due")}),i.jsx("input",{type:"date",id:`due-date-${ye.id}`,value:ye.dueDate.split("T")[0],onChange:Se=>{if(Se.target.value){const Ie=new Date(Se.target.value),He=new Date(Date.UTC(Ie.getFullYear(),Ie.getMonth(),Ie.getDate()));le(ye.id,{dueDate:He.toISOString()})}},onClick:Se=>Se.stopPropagation(),className:"bg-transparent border border-current/30 rounded-md p-1 text-sm text-slate-800 dark:text-white"})]}):i.jsxs("p",{className:`text-sm font-medium ${Re}`,children:[ke("due")," ",new Date(ye.dueDate).toLocaleDateString()]})]}),i.jsxs("div",{className:`mt-2 sm:mt-0 flex items-center gap-2 text-sm font-semibold ${Re} px-3 py-1 rounded-full ${Fe}`,children:[Ae,ge]})]}),ye.feedback&&i.jsxs("blockquote",{className:"mt-2 pl-3 text-sm border-l-2 border-current opacity-80",children:[i.jsxs("strong",{children:[ke("feedback"),":"]})," ",ye.feedback]}),je&&i.jsx(ne,{onFileUpload:we,currentFile:ye.submittedFile,label:ke("uploadSubmissionFile"),fileId:`file-upload-${ye.id}`,onGrammarCheck:de}),!Ce&&ye.status===bt.Submitted&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-current opacity-50 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsx(ne,{onFileUpload:Se=>le(ye.id,{submittedFile:Se,status:bt.Submitted}),currentFile:ye.submittedFile,label:ke("uploadNewVersion"),fileId:`file-upload-${ye.id}`}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>be({isOpen:!0,milestoneId:ye.id,milestoneName:ye.name,action:"approve"}),className:"px-3 py-1 text-sm font-semibold text-green-800 bg-green-200 rounded-md hover:bg-green-300",children:ke("approve")}),i.jsx("button",{onClick:()=>be({isOpen:!0,milestoneId:ye.id,milestoneName:ye.name,action:"revise"}),className:"px-3 py-1 text-sm font-semibold text-orange-800 bg-orange-200 rounded-md hover:bg-orange-300",children:ke("requestRevision")})]})]}),xe&&ye.submittedFile&&i.jsx("div",{className:"mt-2 pt-2 border-t border-current/20 flex justify-end",children:i.jsxs("button",{onClick:()=>oe(ye),className:"flex items-center text-xs font-semibold text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:[i.jsx(rr,{className:"w-4 h-4 mr-1"}),ke("checkPlagiarismWithAI")]})})]},ye.id)}),i.jsx("div",{onDragOver:Oe,onDrop:ye=>Te(ye,null),className:"h-2"}),fe.isOpen&&i.jsx(sa,{isOpen:fe.isOpen,onClose:()=>be({...fe,isOpen:!1}),onConfirm:ye=>{const Ae=fe.action==="approve"?bt.Approved:bt.RequiresRevision;le(fe.milestoneId,{status:Ae,feedback:ye}),be({...fe,isOpen:!1})},action:fe.action,milestoneName:fe.milestoneName,projectGroup:a})]})},H=({submissions:te,user:ie,onUpdate:le,onReview:ee,onGrammarCheck:oe})=>{const de=ie.role==="Student",fe=Ue(),[be,he]=Z.useState(null),pe=({title:ke,file:Ce,type:Ee})=>i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ke}),Ce?i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("p",{children:[fe("status"),": ",i.jsx("span",{className:"font-medium",children:Ce.status})]}),i.jsxs("p",{children:[fe("submitted"),": ",new Date(Ce.submittedAt).toLocaleString()]}),Ce.feedback&&i.jsxs("p",{children:[fe("feedback"),": ",Ce.feedback]})]}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:fe("notYetSubmitted")}),X&&(!Ce||Ce.status===ir.RequiresRevision)&&i.jsx(ne,{onFileUpload:Oe=>le(Ee,Oe),currentFile:Ce,label:fe(Ce?"uploadNewVersion":"uploadFile"),fileId:`final-upload-${Ee}`,onGrammarCheck:oe}),!de&&(Ce==null?void 0:Ce.status)===ir.Submitted&&i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{onClick:()=>he({isOpen:!0,type:Ee,file:Ce}),className:"px-3 py-1 text-sm font-semibold bg-blue-100 text-blue-800 rounded-md",children:fe("review")})})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx(pe,{title:fe("preDefenseFiles"),file:(te==null?void 0:te.preDefenseFile)||null,type:"preDefenseFile"}),i.jsx(pe,{title:fe("postDefenseFiles"),file:(te==null?void 0:te.postDefenseFile)||null,type:"postDefenseFile"}),(be==null?void 0:be.isOpen)&&i.jsx(sa,{isOpen:!0,onClose:()=>he(null),onConfirm:ke=>{const Ce=ke.toLowerCase().includes("approve")?ir.Approved:ir.RequiresRevision;ee(be.type,Ce,ke),he(null)},action:"approve",milestoneName:be.type==="preDefenseFile"?fe("preDefensePresentation"):fe("finalReport"),projectGroup:a})]})},ce=async te=>{if(!te.submittedFile){E({type:"info",message:I("noFileToCheck")});return}{E({type:"error",message:I("aiFeatureNotConfigured")});return}};return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[f&&i.jsxs("button",{onClick:f,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(Oc,{className:"w-5 h-5 mr-2"}),I("backToList")]}),i.jsxs("div",{className:"flex items-center gap-2",children:[G&&i.jsxs("button",{onClick:()=>T(!0),className:"flex items-center justify-center bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(Ss,{className:"w-5 h-5 mr-1.5"}),I("transfer")]}),(X||G)&&M.status===it.Rejected&&i.jsxs("button",{onClick:()=>l(a),className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(Bs,{className:"w-5 h-5 mr-1.5"}),I("editAndResubmit")]}),G&&M.status===it.Rejected&&i.jsxs("button",{onClick:()=>o(M.projectId,it.Approved),className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(es,{className:"w-5 h-5 mr-1.5"}),I("approve")]}),G&&i.jsxs("button",{onClick:()=>s(a),className:"flex items-center justify-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(Gt,{className:"w-5 h-5 mr-1.5"}),I("delete")]}),N&&i.jsxs("button",{onClick:N,className:"flex items-center justify-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-3 rounded-md",children:[i.jsx(Ft,{className:"w-5 h-5 mr-1.5"}),I("aiAssistant")]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:M.projectId}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-1",children:M.topicEng}),i.jsx("p",{className:"text-md text-slate-500 dark:text-slate-400",children:M.topicLao}),i.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[i.jsxs("span",{className:"font-semibold text-slate-700 dark:text-slate-300 mr-2",children:[I("advisor"),":"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"h-2 w-2 rounded-full mr-2",style:{backgroundColor:Vs(M.advisorName)}}),i.jsx("span",{children:M.advisorName})]})]})]}),i.jsx("div",{className:"flex-shrink-0",children:i.jsx(kn,{project:M,user:e,onUpdateStatus:o})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsx("nav",{className:"flex -mb-px space-x-4 px-4",children:U.map(te=>i.jsxs("button",{onClick:()=>V(te.key),className:`flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${q===te.key?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-white dark:hover:border-slate-600"}`,children:[i.jsx(te.icon,{className:"w-5 h-5"}),te.label]},te.key))})}),i.jsxs("div",{className:"p-6",children:[q==="overview"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx(na,{title:I("groupMembers"),children:i.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:F.map(te=>i.jsxs("li",{className:"py-2",children:[i.jsxs("p",{className:"font-semibold",children:[te.name," ",te.surname]}),i.jsxs("p",{className:"text-sm text-slate-500",children:[te.studentId," • ",te.major]})]},te.studentId))})}),i.jsx(na,{title:I("defenseScheduleCommittee"),children:i.jsxs("dl",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("defenseDate")}),i.jsx("dd",{className:"text-sm col-span-2",children:M.defenseDate||I("notScheduled")})]}),i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("defenseTime")}),i.jsx("dd",{className:"text-sm col-span-2",children:M.defenseTime||I("na")})]}),i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("defenseRoom")}),i.jsx("dd",{className:"text-sm col-span-2",children:M.defenseRoom||I("na")})]}),i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("mainCommittee")}),i.jsx("dd",{className:"text-sm col-span-2",children:((ae=p==null?void 0:p.find(te=>te.id===M.mainCommitteeId))==null?void 0:ae.name)||I("notAssigned")})]}),i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("secondCommittee")}),i.jsx("dd",{className:"text-sm col-span-2",children:((Y=p==null?void 0:p.find(te=>te.id===M.secondCommitteeId))==null?void 0:Y.name)||I("notAssigned")})]}),i.jsxs("div",{className:"py-2 grid grid-cols-3 gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500",children:I("thirdCommittee")}),i.jsx("dd",{className:"text-sm col-span-2",children:((Q=p==null?void 0:p.find(te=>te.id===M.thirdCommitteeId))==null?void 0:Q.name)||I("notAssigned")})]})]})})]}),q==="milestones"&&i.jsx(se,{milestones:M.milestones||[],user:e,onUpdateMilestone:J,onReorderMilestones:G?re:void 0,onPlagiarismCheck:ce,onGrammarCheck:g}),q==="submissions"&&i.jsx(H,{submissions:M.finalSubmissions,user:e,onUpdate:$,onReview:L,onGrammarCheck:g}),q==="scoring"&&v&&S&&p&&i.jsx(S0,{projectGroup:a,user:e,scoringSettings:v,advisors:p,updateDetailedScore:S}),q==="history"&&i.jsx(w0,{history:M.history}),q==="log"&&i.jsx(T0,{projectGroup:a,user:e,advisors:p||[],onAddEntry:d,onAnalyze:()=>b(a)})]})]})}),i.jsx("div",{className:"lg:col-span-1 space-y-6",children:y&&i.jsx(Tn,{announcements:y,user:e})})]}),O&&p&&x&&c&&R&&i.jsx(_0,{isOpen:O,onClose:()=>T(!1),onConfirm:W,projectGroup:a,advisors:p,advisorProjectCounts:x,majors:R}),w&&i.jsx(N0,{isOpen:w,onClose:()=>_(!1),result:A})]})},I0=({onClose:m,onSave:a,studentToEdit:e,allStudents:h,majors:f,classrooms:l})=>{const s=!!e,o=Ue(),[r,t]=Z.useState({}),[n,u]=Z.useState({});Z.useEffect(()=>{var p,x;if(e)t(e);else{const y=((p=f[0])==null?void 0:p.name)||"",v=f.find(N=>N.name===y),S=v?l.filter(N=>N.majorId===v.id):[];t({gender:qt.Male,status:"Approved",major:y,classroom:((x=S[0])==null?void 0:x.name)||""})}},[e,f,l]);const c=Z.useMemo(()=>{if(!r.major)return[];const p=f.find(x=>x.name===r.major);return p?l.filter(x=>x.majorId===p.id):[]},[r.major,f,l]),d=()=>{var y,v,S;const p={},x=(y=r.studentId)==null?void 0:y.trim();return x?h.some(N=>{var R;return((R=N.studentId)==null?void 0:R.toLowerCase())===x.toLowerCase()&&N.studentId!==(e==null?void 0:e.studentId)})&&(p.studentId=o("studentIdExists")):p.studentId=o("studentIdRequired"),(v=r.name)!=null&&v.trim()||(p.name=o("nameRequired")),(S=r.surname)!=null&&S.trim()||(p.surname=o("surnameRequired")),r.major||(p.major=o("majorRequired")),r.classroom||(p.classroom=o("classroomRequired")),u(p),Object.keys(p).length===0},b=p=>{if(p.preventDefault(),!d())return;const x={...r,studentId:r.studentId.trim().toUpperCase(),name:r.name.trim(),surname:r.surname.trim()},y=s?{...e,...x}:{...x,password:"password123",mustChangePassword:!0};a(y)},g=(p,x)=>{var v;let y={...r,[p]:x};if(p==="major"){const S=f.find(R=>R.name===x),N=S?l.filter(R=>R.majorId===S.id):[];y.classroom=((v=N[0])==null?void 0:v.name)||""}t(y)};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; } .input-style:disabled { background-color: #e2e8f0; } .dark .input-style:disabled { background-color: #475569; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold",children:o(s?"editStudent":"addStudent")}),i.jsx("button",{onClick:m,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:b,noValidate:!0,className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"studentId",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("studentId")}),i.jsx("input",{type:"text",id:"studentId",value:r.studentId||"",onChange:p=>g("studentId",p.target.value),disabled:s,className:`input-style mt-1 ${n.studentId?"border-red-500":""}`}),n.studentId&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.studentId})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("gender")}),i.jsxs("select",{id:"gender",value:r.gender,onChange:p=>g("gender",p.target.value),className:"input-style mt-1",children:[i.jsx("option",{value:qt.Male,children:o("male")}),i.jsx("option",{value:qt.Female,children:o("female")}),i.jsx("option",{value:qt.Monk,children:o("monk")})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("name")}),i.jsx("input",{type:"text",id:"name",value:r.name||"",onChange:p=>g("name",p.target.value),className:`input-style mt-1 ${n.name?"border-red-500":""}`}),n.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.name})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"surname",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("surname")}),i.jsx("input",{type:"text",id:"surname",value:r.surname||"",onChange:p=>g("surname",p.target.value),className:`input-style mt-1 ${n.surname?"border-red-500":""}`}),n.surname&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.surname})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"major",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("major")}),i.jsx("select",{id:"major",value:r.major||"",onChange:p=>g("major",p.target.value),className:`input-style mt-1 ${n.major?"border-red-500":""}`,children:f.map(p=>i.jsx("option",{value:p.name,children:p.name},p.id))}),n.major&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.major})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"classroom",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("classroom")}),i.jsx("select",{id:"classroom",value:r.classroom||"",onChange:p=>g("classroom",p.target.value),className:`input-style mt-1 ${n.classroom?"border-red-500":""}`,disabled:c.length===0,children:c.map(p=>i.jsx("option",{value:p.name,children:p.name},p.id))}),n.classroom&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.classroom})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("email")}),i.jsx("input",{type:"email",id:"email",value:r.email||"",onChange:p=>g("email",p.target.value),className:`input-style mt-1 ${n.email?"border-red-500":""}`}),n.email&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.email})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"tel",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("telephone")}),i.jsx("input",{type:"tel",id:"tel",value:r.tel||"",onChange:p=>g("tel",p.target.value),className:`input-style mt-1 ${n.tel?"border-red-500":""}`}),n.tel&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.tel})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("status")}),i.jsxs("select",{id:"status",value:r.status||"Approved",onChange:p=>g("status",p.target.value),className:"input-style mt-1",children:[i.jsx("option",{value:"Approved",children:o("approved")}),i.jsx("option",{value:"Pending",children:o("pending")})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500 font-bold py-2 px-4 rounded-lg",children:o("cancel")}),i.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:o("saveStudent")})]})]})]})]})},M0=({student:m,user:a,projectId:e,onEdit:h,onDelete:f,onApprove:l,onSelect:s,isSelected:o,onToggleAiAssistant:r})=>{const t=Ue(),n=u=>{u.stopPropagation(),r()};return i.jsxs(Ca,{sx:{height:"100%",display:"flex",flexDirection:"column",border:o?2:0,borderColor:"primary.main","&:hover":{boxShadow:4}},children:[i.jsxs(Na,{sx:{flexGrow:1},children:[i.jsxs(at,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(at,{sx:{pr:2},children:[i.jsxs(Qe,{variant:"subtitle1",fontWeight:"bold",children:[m.name," ",m.surname]}),i.jsx(Qe,{variant:"body2",color:"text.secondary",fontWeight:"medium",children:m.studentId})]}),i.jsx(ac,{checked:o,onChange:()=>s(m.studentId),color:"primary"})]}),i.jsxs(Tr,{spacing:1.5,children:[i.jsxs(at,{children:[i.jsxs(Qe,{variant:"caption",component:"span",fontWeight:"bold",children:[t("major"),":"," "]}),i.jsx(Qe,{variant:"caption",component:"span",children:m.major})]}),i.jsxs(at,{children:[i.jsxs(Qe,{variant:"caption",component:"span",fontWeight:"bold",children:[t("classroom"),":"," "]}),i.jsx(Qe,{variant:"caption",component:"span",children:m.classroom})]}),i.jsxs(at,{children:[i.jsxs(Qe,{variant:"caption",component:"span",fontWeight:"bold",children:[t("status"),":"," "]}),i.jsx(Ls,{label:m.status,size:"small",color:m.status==="Approved"?"success":"warning",sx:{height:20,fontSize:"0.7rem"}})]}),i.jsxs(at,{children:[i.jsxs(Qe,{variant:"caption",component:"span",fontWeight:"bold",children:[t("project"),":"," "]}),i.jsx(Qe,{variant:"caption",component:"span",children:e||t("na")})]}),a.role==="Admin"&&i.jsxs(at,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs(Qe,{variant:"caption",fontWeight:"bold",children:[t("aiAssistant"),":"]}),i.jsx(lc,{checked:m.isAiAssistantEnabled??!0,onChange:n,size:"small"})]})]})]}),i.jsx(Aa,{}),i.jsxs(cc,{sx:{justifyContent:"flex-end",px:2,py:1},children:[m.status==="Pending"&&i.jsx(Qr,{onClick:l,size:"small",color:"success",title:t("approve"),children:i.jsx(xn,{})}),i.jsx(Qr,{onClick:h,size:"small",color:"primary",children:i.jsx(dc,{})}),i.jsx(Qr,{onClick:f,size:"small",color:"error",children:i.jsx(uc,{})})]})]})},R0=({isOpen:m,onClose:a,onSave:e,majors:h,classrooms:f,selectedCount:l})=>{const[s,o]=Z.useState(""),[r,t]=Z.useState(""),n=Ue(),u=Z.useMemo(()=>{if(!s)return[];const d=h.find(b=>b.name===s);return d?f.filter(b=>b.majorId===d.id):[]},[s,h,f]),c=()=>{const d={};s&&(d.major=s),r&&(d.classroom=r),e(d)};return m?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-md",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:n("bulkEditTitle").replace("{count}",String(l))}),i.jsx("button",{onClick:a,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n("bulkEditDescription")}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bulk-major",className:"block text-sm font-medium",children:n("major")}),i.jsxs("select",{id:"bulk-major",value:s,onChange:d=>{o(d.target.value),t("")},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsxs("option",{value:"",children:["-- ",n("dontChange")," --"]}),h.map(d=>i.jsx("option",{value:d.name,children:d.name},d.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bulk-classroom",className:"block text-sm font-medium",children:n("classroom")}),i.jsxs("select",{id:"bulk-classroom",value:r,onChange:d=>t(d.target.value),disabled:!s,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm disabled:bg-slate-200 dark:bg-slate-700 dark:border-slate-600",children:[i.jsxs("option",{value:"",children:["-- ",n("dontChange")," --"]}),u.map(d=>i.jsx("option",{value:d.name,children:d.name},d.id))]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 mt-4 border-t dark:border-slate-700",children:[i.jsx("button",{onClick:a,className:"bg-slate-200 hover:bg-slate-300 py-2 px-4 rounded-lg",children:n("cancel")}),i.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg",children:n("saveChanges")})]})]})}):null},P0={new:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",update:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",error:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};function vi({isOpen:m,onClose:a,onConfirm:e,data:h,columns:f,dataTypeName:l}){const s=Ue(),{validData:o,errorData:r,newCount:t,updateCount:n}=Z.useMemo(()=>{const c=[],d=[];let b=0,g=0;return h.forEach(p=>{if(p._status==="error")d.push(p);else{const x={...p};delete x._status,delete x._error,c.push(x),p._status==="new"&&b++,p._status==="update"&&g++}}),{validData:c,errorData:d,newCount:b,updateCount:g}},[h]);if(!m)return null;const u=()=>{e(o)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:["Review Imported ",l]}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 flex-grow overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-900/50 rounded-lg mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Import Summary"}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-bold text-green-600 dark:text-green-400",children:t})," new ",l.toLowerCase()," to be added."]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:n})," existing ",l.toLowerCase()," to be updated."]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:r.length})," rows with errors (will be ignored)."]})]})]}),o.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Data to be Imported (",o.length," rows)"]}),i.jsx("div",{className:"overflow-x-auto max-h-64 border dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300 sticky top-0",children:i.jsx("tr",{children:f.filter(c=>c.key!=="_error").map(c=>i.jsx("th",{scope:"col",className:"px-4 py-3",children:c.header},String(c.key)))})}),i.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:h.filter(c=>c._status!=="error").map((c,d)=>i.jsx("tr",{className:"dark:bg-slate-800",children:f.filter(b=>b.key!=="_error").map(b=>i.jsx("td",{className:"px-4 py-3 dark:text-slate-300",children:b.key==="_status"?i.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full capitalize ${P0[c._status]}`,children:c._status}):String(c[b.key]??"")},String(b.key)))},d))})]})})]}),r.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-md font-semibold text-red-600 dark:text-red-400 mb-2",children:["Rows with Errors (",r.length," rows)"]}),i.jsx("div",{className:"overflow-x-auto max-h-64 border border-red-300 dark:border-red-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm text-left",children:[i.jsx("thead",{className:"text-xs text-red-700 uppercase bg-red-100 dark:bg-red-900/50 dark:text-red-300 sticky top-0",children:i.jsx("tr",{children:f.filter(c=>c.key!=="_status").map(c=>i.jsx("th",{scope:"col",className:"px-4 py-3",children:c.header},String(c.key)))})}),i.jsx("tbody",{className:"divide-y divide-red-200 dark:divide-red-800",children:r.map((c,d)=>i.jsx("tr",{className:"bg-red-50 dark:bg-red-900/20",children:f.filter(b=>b.key!=="_status").map(b=>i.jsx("td",{className:"px-4 py-3 text-red-800 dark:text-red-300",children:String(c[b.key]??"")},String(b.key)))},d))})]})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t dark:border-slate-700 mt-4",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:s("cancel")}),i.jsxs("button",{type:"button",onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed",disabled:o.length===0,children:[s("confirm")," Import (",o.length,")"]})]})]})})}function Gr(m){throw new Error('Could not dynamically require "'+m+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bn={exports:{}};/*! ExcelJS 19-10-2023 */var oa;function D0(){return oa||(oa=1,(function(m,a){(function(e){m.exports=e()})((function(){return(function e(h,f,l){function s(t,n){if(!f[t]){if(!h[t]){var u=typeof Gr=="function"&&Gr;if(!n&&u)return u(t,!0);if(o)return o(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var d=f[t]={exports:{}};h[t][0].call(d.exports,(function(b){return s(h[t][1][b]||b)}),d,d.exports,e,h,f,l)}return f[t].exports}for(var o=typeof Gr=="function"&&Gr,r=0;r<l.length;r++)s(l[r]);return s})({1:[function(e,h,f){const l=e("fs"),s=e("fast-csv"),o=e("dayjs/plugin/customParseFormat"),r=e("dayjs/plugin/utc"),t=e("dayjs").extend(o).extend(r),n=e("../utils/stream-buf"),{fs:{exists:u}}=e("../utils/utils"),c={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};h.exports=class{constructor(d){this.workbook=d,this.worksheet=null}async readFile(d,b){if(b=b||{},!await u(d))throw new Error("File not found: "+d);const g=l.createReadStream(d),p=await this.read(g,b);return g.close(),p}read(d,b){return b=b||{},new Promise((g,p)=>{const x=this.workbook.addWorksheet(b.sheetName),y=b.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],v=b.map||function(N){if(N==="")return null;const R=Number(N);if(!Number.isNaN(R)&&R!==1/0)return R;const B=y.reduce((F,q)=>{if(F)return F;const V=t(N,q,!0);return V.isValid()?V:null},null);if(B)return new Date(B.valueOf());const M=c[N];return M!==void 0?M:N},S=s.parse(b.parserOptions).on("data",N=>{x.addRow(N.map(v))}).on("end",()=>{S.emit("worksheet",x)});S.on("worksheet",g).on("error",p),d.pipe(S)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(d,b){return new Promise((g,p)=>{b=b||{};const x=this.workbook.getWorksheet(b.sheetName||b.sheetId),y=s.format(b.formatterOptions);d.on("finish",()=>{g()}),y.on("error",p),y.pipe(d);const{dateFormat:v,dateUTC:S}=b,N=b.map||(M=>{if(M){if(M.text||M.hyperlink)return M.hyperlink||M.text||"";if(M.formula||M.result)return M.result||"";if(M instanceof Date)return v?S?t.utc(M).format(v):t(M).format(v):S?t.utc(M).format():t(M).format();if(M.error)return M.error;if(typeof M=="object")return JSON.stringify(M)}return M}),R=b.includeEmptyRows===void 0||b.includeEmptyRows;let B=1;x&&x.eachRow((M,F)=>{if(R)for(;B++<F-1;)y.write([]);const{values:q}=M;q.shift(),y.write(q.map(N)),B=F}),y.end()})}writeFile(d,b){const g={encoding:(b=b||{}).encoding||"utf8"},p=l.createWriteStream(d,g);return this.write(p,b)}async writeBuffer(d){const b=new n;return await this.write(b,d),b.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,h,f){const l=e("../utils/col-cache");class s{constructor(r,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=r,t)if(typeof t=="string"){const u=l.decodeAddress(t);this.nativeCol=u.col+n,this.nativeColOff=0,this.nativeRow=u.row+n,this.nativeRowOff=0}else t.nativeCol!==void 0?(this.nativeCol=t.nativeCol||0,this.nativeColOff=t.nativeColOff||0,this.nativeRow=t.nativeRow||0,this.nativeRowOff=t.nativeRowOff||0):t.col!==void 0?(this.col=t.col+n,this.row=t.row+n):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(r){return r instanceof s||r==null?r:new s(r)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(r){this.nativeCol=Math.floor(r),this.nativeColOff=Math.floor((r-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(r){this.nativeRow=Math.floor(r),this.nativeRowOff=Math.floor((r-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(r){this.nativeCol=r.nativeCol,this.nativeColOff=r.nativeColOff,this.nativeRow=r.nativeRow,this.nativeRowOff=r.nativeRowOff}}h.exports=s},{"../utils/col-cache":19}],3:[function(e,h,f){const l=e("../utils/col-cache"),s=e("../utils/under-dash"),o=e("./enums"),{slideFormula:r}=e("../utils/shared-formula"),t=e("./note");class n{constructor(d,b,g){if(!d||!b)throw new Error("A Cell needs a Row");this._row=d,this._column=b,l.validateAddress(g),this._address=g,this._value=u.create(n.Types.Null,this),this.style=this._mergeStyle(d.style,b.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(d){this.style.numFmt=d}get font(){return this.style.font}set font(d){this.style.font=d}get alignment(){return this.style.alignment}set alignment(d){this.style.alignment=d}get border(){return this.style.border}set border(d){this.style.border=d}get fill(){return this.style.fill}set fill(d){this.style.fill=d}get protection(){return this.style.protection}set protection(d){this.style.protection=d}_mergeStyle(d,b,g){const p=d&&d.numFmt||b&&b.numFmt;p&&(g.numFmt=p);const x=d&&d.font||b&&b.font;x&&(g.font=x);const y=d&&d.alignment||b&&b.alignment;y&&(g.alignment=y);const v=d&&d.border||b&&b.border;v&&(g.border=v);const S=d&&d.fill||b&&b.fill;S&&(g.fill=S);const N=d&&d.protection||b&&b.protection;return N&&(g.protection=N),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===n.Types.Merge}merge(d,b){this._value.release(),this._value=u.create(n.Types.Merge,this,d),b||(this.style=d.style)}unmerge(){this.type===n.Types.Merge&&(this._value.release(),this._value=u.create(n.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(d){return this._value.type===n.Types.Merge&&this._value.isMergedTo(d)}get master(){return this.type===n.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===n.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(d){this.type!==n.Types.Merge?(this._value.release(),this._value=u.create(u.getType(d),this,d)):this._value.master.value=d}get note(){return this._comment&&this._comment.note}set note(d){this._comment=new t(d)}get text(){return this._value.toString()}get html(){return s.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(d){this.type===n.Types.String&&(this._value=u.create(n.Types.Hyperlink,this,{text:this._value.value,hyperlink:d}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:d}=this._row;return{sheetName:d.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(d){this.names=[d]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(d){const{definedNames:b}=this.workbook;b.removeAllNames(this.fullAddress),d.forEach(g=>{b.addEx(this.fullAddress,g)})}addName(d){this.workbook.definedNames.addEx(this.fullAddress,d)}removeName(d){this.workbook.definedNames.removeEx(this.fullAddress,d)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(d){this._dataValidations.add(this.address,d)}get model(){const{model:d}=this._value;return d.style=this.style,this._comment&&(d.comment=this._comment.model),d}set model(d){if(this._value.release(),this._value=u.create(d.type,this),this._value.model=d,d.comment)switch(d.comment.type){case"note":this._comment=t.fromModel(d.comment)}d.style?this.style=d.style:this.style={}}}n.Types=o.ValueType;const u={getType:c=>c==null?n.Types.Null:c instanceof String||typeof c=="string"?n.Types.String:typeof c=="number"?n.Types.Number:typeof c=="boolean"?n.Types.Boolean:c instanceof Date?n.Types.Date:c.text&&c.hyperlink?n.Types.Hyperlink:c.formula||c.sharedFormula?n.Types.Formula:c.richText?n.Types.RichText:c.sharedString?n.Types.SharedString:c.error?n.Types.Error:n.Types.JSON,types:[{t:n.Types.Null,f:class{constructor(c){this.model={address:c.address,type:n.Types.Null}}get value(){return null}set value(c){}get type(){return n.Types.Null}get effectiveType(){return n.Types.Null}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return""}release(){}toString(){return""}}},{t:n.Types.Number,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Number,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.Number}get effectiveType(){return n.Types.Number}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.String,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.String,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.String}get effectiveType(){return n.Types.String}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:n.Types.Date,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Date,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.Date}get effectiveType(){return n.Types.Date}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.Hyperlink,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Hyperlink,text:d?d.text:void 0,hyperlink:d?d.hyperlink:void 0},d&&d.tooltip&&(this.model.tooltip=d.tooltip)}get value(){const c={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(c.tooltip=this.model.tooltip),c}set value(c){this.model={text:c.text,hyperlink:c.hyperlink},c.tooltip&&(this.model.tooltip=c.tooltip)}get text(){return this.model.text}set text(c){this.model.text=c}get hyperlink(){return this.model.hyperlink}set hyperlink(c){this.model.hyperlink=c}get type(){return n.Types.Hyperlink}get effectiveType(){return n.Types.Hyperlink}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:n.Types.Formula,f:class{constructor(c,d){this.cell=c,this.model={address:c.address,type:n.Types.Formula,shareType:d?d.shareType:void 0,ref:d?d.ref:void 0,formula:d?d.formula:void 0,sharedFormula:d?d.sharedFormula:void 0,result:d?d.result:void 0}}_copyModel(c){const d={},b=g=>{const p=c[g];p&&(d[g]=p)};return b("formula"),b("result"),b("ref"),b("shareType"),b("sharedFormula"),d}get value(){return this._copyModel(this.model)}set value(c){this.model=this._copyModel(c)}validate(c){switch(u.getType(c)){case n.Types.Null:case n.Types.String:case n.Types.Number:case n.Types.Date:break;case n.Types.Hyperlink:case n.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(c){this.model.formula=c}get formulaType(){return this.model.formula?o.FormulaType.Master:this.model.sharedFormula?o.FormulaType.Shared:o.FormulaType.None}get result(){return this.model.result}set result(c){this.model.result=c}get type(){return n.Types.Formula}get effectiveType(){const c=this.model.result;return c==null?o.ValueType.Null:c instanceof String||typeof c=="string"?o.ValueType.String:typeof c=="number"?o.ValueType.Number:c instanceof Date?o.ValueType.Date:c.text&&c.hyperlink?o.ValueType.Hyperlink:c.formula?o.ValueType.Formula:o.ValueType.Null}get address(){return this.model.address}set address(c){this.model.address=c}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:c}=this.cell,d=c.findCell(this.model.sharedFormula);this._translatedFormula=d&&r(d.formula,d.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:n.Types.Merge,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Merge,master:d?d.address:void 0},this._master=d,d&&d.addMergeRef()}get value(){return this._master.value}set value(c){c instanceof n?(this._master&&this._master.releaseMergeRef(),c.addMergeRef(),this._master=c):this._master.value=c}isMergedTo(c){return c===this._master}get master(){return this._master}get type(){return n.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:n.Types.JSON,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.String,value:JSON.stringify(d),rawValue:d}}get value(){return this.model.rawValue}set value(c){this.model.rawValue=c,this.model.value=JSON.stringify(c)}get type(){return n.Types.String}get effectiveType(){return n.Types.String}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:n.Types.SharedString,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.SharedString,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.SharedString}get effectiveType(){return n.Types.SharedString}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.RichText,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.String,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}toString(){return this.model.value.richText.map(c=>c.text).join("")}get type(){return n.Types.RichText}get effectiveType(){return n.Types.RichText}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:n.Types.Boolean,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Boolean,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.Boolean}get effectiveType(){return n.Types.Boolean}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:n.Types.Error,f:class{constructor(c,d){this.model={address:c.address,type:n.Types.Error,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return n.Types.Error}get effectiveType(){return n.Types.Error}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((c,d)=>(c[d.t]=d.f,c),[]),create(c,d,b){const g=this.types[c];if(!g)throw new Error("Could not create Value of type "+c);return new g(d,b)}};h.exports=n},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,h,f){const l=e("../utils/under-dash"),s=e("./enums"),o=e("../utils/col-cache");class r{constructor(n,u,c){this._worksheet=n,this._number=u,c!==!1&&(this.defn=c)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return o.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(n){n?(this.key=n.key,this.width=n.width!==void 0?n.width:9,this.outlineLevel=n.outlineLevel,n.style?this.style=n.style:this.style={},this.header=n.header,this._hidden=!!n.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(n){n!==void 0?(this._header=n,this.headers.forEach((u,c)=>{this._worksheet.getCell(c+1,this.number).value=u})):this._header=void 0}get key(){return this._key}set key(n){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=n,n&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(n){this._hidden=n}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(n){this._outlineLevel=n}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(n){return this.width===n.width&&this.hidden===n.hidden&&this.outlineLevel===n.outlineLevel&&l.isEqual(this.style,n.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const n=this.style;return!n||!(n.font||n.numFmt||n.alignment||n.border||n.fill||n.protection)}get headerCount(){return this.headers.length}eachCell(n,u){const c=this.number;u||(u=n,n=null),this._worksheet.eachRow(n,(d,b)=>{u(d.getCell(c),b)})}get values(){const n=[];return this.eachCell((u,c)=>{u&&u.type!==s.ValueType.Null&&(n[c]=u.value)}),n}set values(n){if(!n)return;const u=this.number;let c=0;n.hasOwnProperty("0")&&(c=1),n.forEach((d,b)=>{this._worksheet.getCell(b+c,u).value=d})}_applyStyle(n,u){return this.style[n]=u,this.eachCell(c=>{c[n]=u}),u}get numFmt(){return this.style.numFmt}set numFmt(n){this._applyStyle("numFmt",n)}get font(){return this.style.font}set font(n){this._applyStyle("font",n)}get alignment(){return this.style.alignment}set alignment(n){this._applyStyle("alignment",n)}get protection(){return this.style.protection}set protection(n){this._applyStyle("protection",n)}get border(){return this.style.border}set border(n){this._applyStyle("border",n)}get fill(){return this.style.fill}set fill(n){this._applyStyle("fill",n)}static toModel(n){const u=[];let c=null;return n&&n.forEach((d,b)=>{d.isDefault?c&&(c=null):c&&d.equivalentTo(c)?c.max=b+1:(c={min:b+1,max:b+1,width:d.width!==void 0?d.width:9,style:d.style,isCustomWidth:d.isCustomWidth,hidden:d.hidden,outlineLevel:d.outlineLevel,collapsed:d.collapsed},u.push(c))}),u.length?u:void 0}static fromModel(n,u){const c=[];let d=1,b=0;for(u=(u=u||[]).sort((function(g,p){return g.min-p.min}));b<u.length;){const g=u[b++];for(;d<g.min;)c.push(new r(n,d++));for(;d<=g.max;)c.push(new r(n,d++,g))}return c.length?c:null}}h.exports=r},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,h,f){h.exports=class{constructor(l){this.model=l||{}}add(l,s){return this.model[l]=s}find(l){return this.model[l]}remove(l){this.model[l]=void 0}}},{}],6:[function(e,h,f){const l=e("../utils/under-dash"),s=e("../utils/col-cache"),o=e("../utils/cell-matrix"),r=e("./range"),t=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;h.exports=class{constructor(){this.matrixMap={}}getMatrix(n){return this.matrixMap[n]||(this.matrixMap[n]=new o)}add(n,u){const c=s.decodeEx(n);this.addEx(c,u)}addEx(n,u){const c=this.getMatrix(u);if(n.top)for(let d=n.left;d<=n.right;d++)for(let b=n.top;b<=n.bottom;b++){const g={sheetName:n.sheetName,address:s.n2l(d)+b,row:b,col:d};c.addCellEx(g)}else c.addCellEx(n)}remove(n,u){const c=s.decodeEx(n);this.removeEx(c,u)}removeEx(n,u){this.getMatrix(u).removeCellEx(n)}removeAllNames(n){l.each(this.matrixMap,u=>{u.removeCellEx(n)})}forEach(n){l.each(this.matrixMap,(u,c)=>{u.forEach(d=>{n(c,d)})})}getNames(n){return this.getNamesEx(s.decodeEx(n))}getNamesEx(n){return l.map(this.matrixMap,(u,c)=>u.findCellEx(n)&&c).filter(Boolean)}_explore(n,u){u.mark=!1;const{sheetName:c}=u,d=new r(u.row,u.col,u.row,u.col,c);let b,g;function p(y,v){const S=n.findCellAt(c,y,u.col);return!(!S||!S.mark)&&(d[v]=y,S.mark=!1,!0)}for(g=u.row-1;p(g,"top");g--);for(g=u.row+1;p(g,"bottom");g++);function x(y,v){const S=[];for(g=d.top;g<=d.bottom;g++){const N=n.findCellAt(c,g,y);if(!N||!N.mark)return!1;S.push(N)}d[v]=y;for(let N=0;N<S.length;N++)S[N].mark=!1;return!0}for(b=u.col-1;x(b,"left");b--);for(b=u.col+1;x(b,"right");b++);return d}getRanges(n,u){return(u=u||this.matrixMap[n])?(u.forEach(c=>{c.mark=!0}),{name:n,ranges:u.map(c=>c.mark&&this._explore(u,c)).filter(Boolean).map(c=>c.$shortRange)}):{name:n,ranges:[]}}normaliseMatrix(n,u){n.forEachInSheet(u,(c,d,b)=>{c&&(c.row===d&&c.col===b||(c.row=d,c.col=b,c.address=s.n2l(b)+d))})}spliceRows(n,u,c,d){l.each(this.matrixMap,b=>{b.spliceRows(n,u,c,d),this.normaliseMatrix(b,n)})}spliceColumns(n,u,c,d){l.each(this.matrixMap,b=>{b.spliceColumns(n,u,c,d),this.normaliseMatrix(b,n)})}get model(){return l.map(this.matrixMap,(n,u)=>this.getRanges(u,n)).filter(n=>n.ranges.length)}set model(n){const u=this.matrixMap={};n.forEach(c=>{const d=u[c.name]=new o;c.ranges.forEach(b=>{t.test(b.split("!").pop()||"")&&d.addCell(b)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,h,f){h.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,h,f){const l=e("../utils/col-cache"),s=e("./anchor");h.exports=class{constructor(o,r){this.worksheet=o,this.model=r}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(o){let{type:r,imageId:t,range:n,hyperlinks:u}=o;if(this.type=r,this.imageId=t,r==="image")if(typeof n=="string"){const c=l.decode(n);this.range={tl:new s(this.worksheet,{col:c.left,row:c.top},-1),br:new s(this.worksheet,{col:c.right,row:c.bottom},0),editAs:"oneCell"}}else this.range={tl:new s(this.worksheet,n.tl,0),br:n.br&&new s(this.worksheet,n.br,0),ext:n.ext,editAs:n.editAs,hyperlinks:u||n.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,h,f){const l=e("../utils/under-dash");class s{constructor(r){this.note=r}get model(){let r=null;switch(typeof this.note){case"string":r={type:"note",note:{texts:[{text:this.note}]}};break;default:r={type:"note",note:this.note}}return l.deepMerge({},s.DEFAULT_CONFIGS,r)}set model(r){const{note:t}=r,{texts:n}=t;n.length===1&&Object.keys(n[0]).length===1?this.note=n[0].text:this.note=t}static fromModel(r){const t=new s;return t.model=r,t}}s.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},h.exports=s},{"../utils/under-dash":26}],10:[function(e,h,f){const l=e("../utils/col-cache");class s{constructor(){this.decode(arguments)}setTLBR(r,t,n,u,c){if(arguments.length<4){const d=l.decodeAddress(r),b=l.decodeAddress(t);this.model={top:Math.min(d.row,b.row),left:Math.min(d.col,b.col),bottom:Math.max(d.row,b.row),right:Math.max(d.col,b.col),sheetName:n},this.setTLBR(d.row,d.col,b.row,b.col,c)}else this.model={top:Math.min(r,n),left:Math.min(t,u),bottom:Math.max(r,n),right:Math.max(t,u),sheetName:c}}decode(r){switch(r.length){case 5:this.setTLBR(r[0],r[1],r[2],r[3],r[4]);break;case 4:this.setTLBR(r[0],r[1],r[2],r[3]);break;case 3:this.setTLBR(r[0],r[1],r[2]);break;case 2:this.setTLBR(r[0],r[1]);break;case 1:{const t=r[0];if(t instanceof s)this.model={top:t.model.top,left:t.model.left,bottom:t.model.bottom,right:t.model.right,sheetName:t.sheetName};else if(t instanceof Array)this.decode(t);else if(t.top&&t.left&&t.bottom&&t.right)this.model={top:t.top,left:t.left,bottom:t.bottom,right:t.right,sheetName:t.sheetName};else{const n=l.decodeEx(t);n.top?this.model={top:n.top,left:n.left,bottom:n.bottom,right:n.right,sheetName:n.sheetName}:this.model={top:n.row,left:n.col,bottom:n.row,right:n.col,sheetName:n.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+r.length)}}get top(){return this.model.top||1}set top(r){this.model.top=r}get left(){return this.model.left||1}set left(r){this.model.left=r}get bottom(){return this.model.bottom||1}set bottom(r){this.model.bottom=r}get right(){return this.model.right||1}set right(r){this.model.right=r}get sheetName(){return this.model.sheetName}set sheetName(r){this.model.sheetName=r}get _serialisedSheetName(){const{sheetName:r}=this.model;return r?/^[a-zA-Z0-9]*$/.test(r)?r+"!":`'${r}'!`:""}expand(r,t,n,u){(!this.model.top||r<this.top)&&(this.top=r),(!this.model.left||t<this.left)&&(this.left=t),(!this.model.bottom||n>this.bottom)&&(this.bottom=n),(!this.model.right||u>this.right)&&(this.right=u)}expandRow(r){if(r){const{dimensions:t,number:n}=r;t&&this.expand(n,t.min,n,t.max)}}expandToAddress(r){const t=l.decodeEx(r);this.expand(t.row,t.col,t.row,t.col)}get tl(){return l.n2l(this.left)+this.top}get $t$l(){return`$${l.n2l(this.left)}$${this.top}`}get br(){return l.n2l(this.right)+this.bottom}get $b$r(){return`$${l.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(r){return(!r.sheetName||!this.sheetName||r.sheetName===this.sheetName)&&!(r.bottom<this.top)&&!(r.top>this.bottom)&&!(r.right<this.left)&&!(r.left>this.right)}contains(r){const t=l.decodeEx(r);return this.containsEx(t)}containsEx(r){return(!r.sheetName||!this.sheetName||r.sheetName===this.sheetName)&&r.row>=this.top&&r.row<=this.bottom&&r.col>=this.left&&r.col<=this.right}forEachAddress(r){for(let t=this.left;t<=this.right;t++)for(let n=this.top;n<=this.bottom;n++)r(l.encodeAddress(n,t),n,t)}}h.exports=s},{"../utils/col-cache":19}],11:[function(e,h,f){const l=e("../utils/under-dash"),s=e("./enums"),o=e("../utils/col-cache"),r=e("./cell");h.exports=class{constructor(t,n){this._worksheet=t,this._number=n,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(t){return this._cells[t-1]}getCellEx(t){let n=this._cells[t.col-1];if(!n){const u=this._worksheet.getColumn(t.col);n=new r(this,u,t.address),this._cells[t.col-1]=n}return n}getCell(t){if(typeof t=="string"){const n=this._worksheet.getColumnKey(t);t=n?n.number:o.l2n(t)}return this._cells[t-1]||this.getCellEx({address:o.encodeAddress(this._number,t),row:this._number,col:t})}splice(t,n){const u=t+n;for(var c=arguments.length,d=new Array(c>2?c-2:0),b=2;b<c;b++)d[b-2]=arguments[b];const g=d.length-n,p=this._cells.length;let x,y,v;if(g<0)for(x=t+d.length;x<=p;x++)v=this._cells[x-1],y=this._cells[x-g-1],y?(v=this.getCell(x),v.value=y.value,v.style=y.style,v._comment=y._comment):v&&(v.value=null,v.style={},v._comment=void 0);else if(g>0)for(x=p;x>=u;x--)y=this._cells[x-1],y?(v=this.getCell(x+g),v.value=y.value,v.style=y.style,v._comment=y._comment):this._cells[x+g-1]=void 0;for(x=0;x<d.length;x++)v=this.getCell(t+x),v.value=d[x],v.style={},v._comment=void 0}eachCell(t,n){if(n||(n=t,t=null),t&&t.includeEmpty){const u=this._cells.length;for(let c=1;c<=u;c++)n(this.getCell(c),c)}else this._cells.forEach((u,c)=>{u&&u.type!==s.ValueType.Null&&n(u,c+1)})}addPageBreak(t,n){const u=this._worksheet,c=Math.max(0,t-1)||0,d=Math.max(0,n-1)||16838,b={id:this._number,max:d,man:1};c&&(b.min=c),u.rowBreaks.push(b)}get values(){const t=[];return this._cells.forEach(n=>{n&&n.type!==s.ValueType.Null&&(t[n.col]=n.value)}),t}set values(t){if(this._cells=[],t)if(t instanceof Array){let n=0;t.hasOwnProperty("0")&&(n=1),t.forEach((u,c)=>{u!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,c+n),row:this._number,col:c+n}).value=u)})}else this._worksheet.eachColumnKey((n,u)=>{t[u]!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,n.number),row:this._number,col:n.number}).value=t[u])})}get hasValues(){return l.some(this._cells,t=>t&&t.type!==s.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let t=0;return this.eachCell(()=>{t++}),t}get dimensions(){let t=0,n=0;return this._cells.forEach(u=>{u&&u.type!==s.ValueType.Null&&((!t||t>u.col)&&(t=u.col),n<u.col&&(n=u.col))}),t>0?{min:t,max:n}:null}_applyStyle(t,n){return this.style[t]=n,this._cells.forEach(u=>{u&&(u[t]=n)}),n}get numFmt(){return this.style.numFmt}set numFmt(t){this._applyStyle("numFmt",t)}get font(){return this.style.font}set font(t){this._applyStyle("font",t)}get alignment(){return this.style.alignment}set alignment(t){this._applyStyle("alignment",t)}get protection(){return this.style.protection}set protection(t){this._applyStyle("protection",t)}get border(){return this.style.border}set border(t){this._applyStyle("border",t)}get fill(){return this.style.fill}set fill(t){this._applyStyle("fill",t)}get hidden(){return!!this._hidden}set hidden(t){this._hidden=t}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(t){this._outlineLevel=t}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const t=[];let n=0,u=0;return this._cells.forEach(c=>{if(c){const d=c.model;d&&((!n||n>c.col)&&(n=c.col),u<c.col&&(u=c.col),t.push(d))}}),this.height||t.length?{cells:t,number:this.number,min:n,max:u,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(t){if(t.number!==this._number)throw new Error("Invalid row number in model");let n;this._cells=[],t.cells.forEach(u=>{switch(u.type){case r.Types.Merge:break;default:{let c;if(u.address)c=o.decodeAddress(u.address);else if(n){const{row:d}=n,b=n.col+1;c={row:d,col:b,address:o.encodeAddress(d,b),$col$row:`$${o.n2l(b)}$${d}`}}n=c,this.getCellEx(c).model=u;break}}}),t.height?this.height=t.height:delete this.height,this.hidden=t.hidden,this.outlineLevel=t.outlineLevel||0,this.style=t.style&&JSON.parse(JSON.stringify(t.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,h,f){const l=e("../utils/col-cache");class s{constructor(r,t,n){this.table=r,this.column=t,this.index=n}_set(r,t){this.table.cacheState(),this.column[r]=t}get name(){return this.column.name}set name(r){this._set("name",r)}get filterButton(){return this.column.filterButton}set filterButton(r){this.column.filterButton=r}get style(){return this.column.style}set style(r){this.column.style=r}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(r){this._set("totalsRowLabel",r)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(r){this._set("totalsRowFunction",r)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(r){this._set("totalsRowResult",r)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(r){this._set("totalsRowFormula",r)}}h.exports=class{constructor(o,r){this.worksheet=o,r&&(this.table=r,this.validate(),this.store())}getFormula(o){switch(o.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${o.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${o.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${o.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${o.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${o.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${o.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${o.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${o.name}])`;case"custom":return o.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+o.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:o}=this,r=(g,p,x)=>{g[p]===void 0&&(g[p]=x)};r(o,"headerRow",!0),r(o,"totalsRow",!1),r(o,"style",{}),r(o.style,"theme","TableStyleMedium2"),r(o.style,"showFirstColumn",!1),r(o.style,"showLastColumn",!1),r(o.style,"showRowStripes",!1),r(o.style,"showColumnStripes",!1);const t=(g,p)=>{if(!g)throw new Error(p)};t(o.ref,"Table must have ref"),t(o.columns,"Table must have column definitions"),t(o.rows,"Table must have row definitions"),o.tl=l.decodeAddress(o.ref);const{row:n,col:u}=o.tl;t(n>0,"Table must be on valid row"),t(u>0,"Table must be on valid col");const{width:c,filterHeight:d,tableHeight:b}=this;o.autoFilterRef=l.encode(n,u,n+d-1,u+c-1),o.tableRef=l.encode(n,u,n+b-1,u+c-1),o.columns.forEach((g,p)=>{t(g.name,`Column ${p} must have a name`),p===0?r(g,"totalsRowLabel","Total"):(r(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){const o=(d,b)=>{b&&Object.keys(b).forEach(g=>{d[g]=b[g]})},{worksheet:r,table:t}=this,{row:n,col:u}=t.tl;let c=0;if(t.headerRow){const d=r.getRow(n+c++);t.columns.forEach((b,g)=>{const{style:p,name:x}=b,y=d.getCell(u+g);y.value=x,o(y,p)})}if(t.rows.forEach(d=>{const b=r.getRow(n+c++);d.forEach((g,p)=>{const x=b.getCell(u+p);x.value=g,o(x,t.columns[p].style)})}),t.totalsRow){const d=r.getRow(n+c++);t.columns.forEach((b,g)=>{const p=d.getCell(u+g);if(g===0)p.value=b.totalsRowLabel;else{const x=this.getFormula(b);p.value=x?{formula:b.totalsRowFormula,result:b.totalsRowResult}:null}o(p,b.style)})}}load(o){const{table:r}=this,{row:t,col:n}=r.tl;let u=0;if(r.headerRow){const c=o.getRow(t+u++);r.columns.forEach((d,b)=>{c.getCell(n+b).value=d.name})}if(r.rows.forEach(c=>{const d=o.getRow(t+u++);c.forEach((b,g)=>{d.getCell(n+g).value=b})}),r.totalsRow){const c=o.getRow(t+u++);r.columns.forEach((d,b)=>{const g=c.getCell(n+b);b===0?g.value=d.totalsRowLabel:this.getFormula(d)&&(g.value={formula:d.totalsRowFormula,result:d.totalsRowResult})})}}get model(){return this.table}set model(o){this.table=o}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const o=l.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let r=0;r<this._cache.tableHeight;r++){const t=this.worksheet.getRow(o.row+r);for(let n=0;n<this._cache.width;n++)t.getCell(o.col+n).value=null}else{for(let r=this.tableHeight;r<this._cache.tableHeight;r++){const t=this.worksheet.getRow(o.row+r);for(let n=0;n<this._cache.width;n++)t.getCell(o.col+n).value=null}for(let r=0;r<this.tableHeight;r++){const t=this.worksheet.getRow(o.row+r);for(let n=this.width;n<this._cache.width;n++)t.getCell(o.col+n).value=null}}this.store()}addRow(o,r){this.cacheState(),r===void 0?this.table.rows.push(o):this.table.rows.splice(r,0,o)}removeRows(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(o,r)}getColumn(o){const r=this.table.columns[o];return new s(this,r,o)}addColumn(o,r,t){this.cacheState(),t===void 0?(this.table.columns.push(o),this.table.rows.forEach((n,u)=>{n.push(r[u])})):(this.table.columns.splice(t,0,o),this.table.rows.forEach((n,u)=>{n.splice(t,0,r[u])}))}removeColumns(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(o,r),this.table.rows.forEach(t=>{t.splice(o,r)})}_assign(o,r,t){this.cacheState(),o[r]=t}get ref(){return this.table.ref}set ref(o){this._assign(this.table,"ref",o)}get name(){return this.table.name}set name(o){this.table.name=o}get displayName(){return this.table.displyName||this.table.name}set displayNamename(o){this.table.displayName=o}get headerRow(){return this.table.headerRow}set headerRow(o){this._assign(this.table,"headerRow",o)}get totalsRow(){return this.table.totalsRow}set totalsRow(o){this._assign(this.table,"totalsRow",o)}get theme(){return this.table.style.name}set theme(o){this.table.style.name=o}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(o){this.table.style.showFirstColumn=o}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(o){this.table.style.showLastColumn=o}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(o){this.table.style.showRowStripes=o}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(o){this.table.style.showColumnStripes=o}}},{"../utils/col-cache":19}],13:[function(e,h,f){const l=e("./worksheet"),s=e("./defined-names"),o=e("../xlsx/xlsx"),r=e("../csv/csv");h.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new s}get xlsx(){return this._xlsx||(this._xlsx=new o(this)),this._xlsx}get csv(){return this._csv||(this._csv=new r(this)),this._csv}get nextId(){for(let t=1;t<this._worksheets.length;t++)if(!this._worksheets[t])return t;return this._worksheets.length||1}addWorksheet(t,n){const u=this.nextId;n&&(typeof n=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),n={properties:{tabColor:{argb:n}}}):(n.argb||n.theme||n.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),n={properties:{tabColor:n}}));const c=this._worksheets.reduce((g,p)=>(p&&p.orderNo)>g?p.orderNo:g,0),d=Object.assign({},n,{id:u,name:t,orderNo:c+1,workbook:this}),b=new l(d);return this._worksheets[u]=b,b}removeWorksheetEx(t){delete this._worksheets[t.id]}removeWorksheet(t){const n=this.getWorksheet(t);n&&n.destroy()}getWorksheet(t){return t===void 0?this._worksheets.find(Boolean):typeof t=="number"?this._worksheets[t]:typeof t=="string"?this._worksheets.find(n=>n&&n.name===t):void 0}get worksheets(){return this._worksheets.slice(1).sort((t,n)=>t.orderNo-n.orderNo).filter(Boolean)}eachSheet(t){this.worksheets.forEach(n=>{t(n,n.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(t){const n=this.media.length;return this.media.push(Object.assign({},t,{type:"image"})),n}getImage(t){return this.media[t]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(t=>t.model),sheets:this.worksheets.map(t=>t.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(t){this.creator=t.creator,this.lastModifiedBy=t.lastModifiedBy,this.lastPrinted=t.lastPrinted,this.created=t.created,this.modified=t.modified,this.company=t.company,this.manager=t.manager,this.title=t.title,this.subject=t.subject,this.keywords=t.keywords,this.category=t.category,this.description=t.description,this.language=t.language,this.revision=t.revision,this.contentStatus=t.contentStatus,this.properties=t.properties,this.calcProperties=t.calcProperties,this._worksheets=[],t.worksheets.forEach(n=>{const{id:u,name:c,state:d}=n,b=t.sheets&&t.sheets.findIndex(g=>g.id===u);(this._worksheets[u]=new l({id:u,name:c,orderNo:b,state:d,workbook:this})).model=n}),this._definedNames.model=t.definedNames,this.views=t.views,this._themes=t.themes,this.media=t.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,h,f){const l=e("../utils/under-dash"),s=e("../utils/col-cache"),o=e("./range"),r=e("./row"),t=e("./column"),n=e("./enums"),u=e("./image"),c=e("./table"),d=e("./data-validations"),b=e("../utils/encryptor"),{copyStyle:g}=e("../utils/copy-style");h.exports=class{constructor(p){p=p||{},this._workbook=p.workbook,this.id=p.id,this.orderNo=p.orderNo,this.name=p.name,this.state=p.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},p.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!p.pageSetup||!p.pageSetup.fitToWidth&&!p.pageSetup.fitToHeight||p.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},p.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},p.headerFooter),this.dataValidations=new d,this.views=p.views||[],this.autoFilter=p.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(p){if(p===void 0&&(p="sheet"+this.id),this._name!==p){if(typeof p!="string")throw new Error("The name has to be a string.");if(p==="")throw new Error("The name can't be empty.");if(p==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(p))throw new Error(`Worksheet name ${p} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(p))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+p);if(p&&p.length>31&&(console.warn(`Worksheet name ${p} exceeds 31 chars. This will be truncated`),p=p.substring(0,31)),this._workbook._worksheets.find(x=>x&&x.name.toLowerCase()===p.toLowerCase()))throw new Error("Worksheet name already exists: "+p);this._name=p}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const p=new o;return this._rows.forEach(x=>{if(x){const y=x.dimensions;y&&p.expand(x.number,y.min,x.number,y.max)}}),p}get columns(){return this._columns}set columns(p){this._headerRowCount=p.reduce((v,S)=>{const N=(S.header?1:S.headers&&S.headers.length)||0;return Math.max(v,N)},0);let x=1;const y=this._columns=[];p.forEach(v=>{const S=new t(this,x++,!1);y.push(S),S.defn=v})}getColumnKey(p){return this._keys[p]}setColumnKey(p,x){this._keys[p]=x}deleteColumnKey(p){delete this._keys[p]}eachColumnKey(p){l.each(this._keys,p)}getColumn(p){if(typeof p=="string"){const x=this._keys[p];if(x)return x;p=s.l2n(p)}if(this._columns||(this._columns=[]),p>this._columns.length){let x=this._columns.length+1;for(;x<=p;)this._columns.push(new t(this,x++))}return this._columns[p-1]}spliceColumns(p,x){const y=this._rows.length;for(var v=arguments.length,S=new Array(v>2?v-2:0),N=2;N<v;N++)S[N-2]=arguments[N];if(S.length>0)for(let F=0;F<y;F++){const q=[p,x];S.forEach(O=>{q.push(O[F]||null)});const V=this.getRow(F+1);V.splice.apply(V,q)}else this._rows.forEach(F=>{F&&F.splice(p,x)});const R=S.length-x,B=p+x,M=this._columns.length;if(R<0)for(let F=p+S.length;F<=M;F++)this.getColumn(F).defn=this.getColumn(F-R).defn;else if(R>0)for(let F=M;F>=B;F--)this.getColumn(F+R).defn=this.getColumn(F).defn;for(let F=p;F<p+S.length;F++)this.getColumn(F).defn=null;this.workbook.definedNames.spliceColumns(this.name,p,x,S.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let p=0;return this.eachRow(x=>{p=Math.max(p,x.cellCount)}),p}get actualColumnCount(){const p=[];let x=0;return this.eachRow(y=>{y.eachCell(v=>{let{col:S}=v;p[S]||(p[S]=!0,x++)})}),x}_commitRow(){}get _lastRowNumber(){const p=this._rows;let x=p.length;for(;x>0&&p[x-1]===void 0;)x--;return x}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(p){return this._rows[p-1]}findRows(p,x){return this._rows.slice(p-1,p-1+x)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let p=0;return this.eachRow(()=>{p++}),p}getRow(p){let x=this._rows[p-1];return x||(x=this._rows[p-1]=new r(this,p)),x}getRows(p,x){if(x<1)return;const y=[];for(let v=p;v<p+x;v++)y.push(this.getRow(v));return y}addRow(p){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=this._nextRow,v=this.getRow(y);return v.values=p,this._setStyleOption(y,x[0]==="i"?x:"n"),v}addRows(p){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=[];return p.forEach(v=>{y.push(this.addRow(v,x))}),y}insertRow(p,x){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(p,0,x),this._setStyleOption(p,y),this.getRow(p)}insertRows(p,x){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(p,0,...x),y!=="n")for(let v=0;v<x.length;v++)y[0]==="o"&&this.findRow(x.length+p+v)!==void 0?this._copyStyle(x.length+p+v,p+v,y[1]==="+"):y[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p+v,y[1]==="+");return this.getRows(p,x.length)}_setStyleOption(p){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";x[0]==="o"&&this.findRow(p+1)!==void 0?this._copyStyle(p+1,p,x[1]==="+"):x[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p,x[1]==="+")}_copyStyle(p,x){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this.getRow(p),S=this.getRow(x);S.style=g(v.style),v.eachCell({includeEmpty:y},(N,R)=>{S.getCell(R).style=g(N.style)}),S.height=v.height}duplicateRow(p,x){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this._rows[p-1],S=new Array(x).fill(v.values);this.spliceRows(p+1,y?0:x,...S);for(let N=0;N<x;N++){const R=this._rows[p+N];R.style=v.style,R.height=v.height,v.eachCell({includeEmpty:!0},(B,M)=>{R.getCell(M).style=B.style})}}spliceRows(p,x){const y=p+x;for(var v=arguments.length,S=new Array(v>2?v-2:0),N=2;N<v;N++)S[N-2]=arguments[N];const R=S.length,B=R-x,M=this._rows.length;let F,q;if(B<0)for(p===M&&(this._rows[M-1]=void 0),F=y;F<=M;F++)if(q=this._rows[F-1],q){const V=this.getRow(F+B);V.values=q.values,V.style=q.style,V.height=q.height,q.eachCell({includeEmpty:!0},(O,T)=>{V.getCell(T).style=O.style}),this._rows[F-1]=void 0}else this._rows[F+B-1]=void 0;else if(B>0)for(F=M;F>=y;F--)if(q=this._rows[F-1],q){const V=this.getRow(F+B);V.values=q.values,V.style=q.style,V.height=q.height,q.eachCell({includeEmpty:!0},(O,T)=>{if(V.getCell(T).style=O.style,O._value.constructor.name==="MergeValue"){const A=this.getRow(O._row._number+R).getCell(T),C=O._value._master,w=this.getRow(C._row._number+R).getCell(C._column._number);A.merge(w)}})}else this._rows[F+B-1]=void 0;for(F=0;F<R;F++){const V=this.getRow(p+F);V.style={},V.values=S[F]}this.workbook.definedNames.spliceRows(this.name,p,x,R)}eachRow(p,x){if(x||(x=p,p=void 0),p&&p.includeEmpty){const y=this._rows.length;for(let v=1;v<=y;v++)x(this.getRow(v),v)}else this._rows.forEach(y=>{y&&y.hasValues&&x(y,y.number)})}getSheetValues(){const p=[];return this._rows.forEach(x=>{x&&(p[x.number]=x.values)}),p}findCell(p,x){const y=s.getAddress(p,x),v=this._rows[y.row-1];return v?v.findCell(y.col):void 0}getCell(p,x){const y=s.getAddress(p,x);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var p=arguments.length,x=new Array(p),y=0;y<p;y++)x[y]=arguments[y];const v=new o(x);this._mergeCellsInternal(v)}mergeCellsWithoutStyle(){for(var p=arguments.length,x=new Array(p),y=0;y<p;y++)x[y]=arguments[y];const v=new o(x);this._mergeCellsInternal(v,!0)}_mergeCellsInternal(p,x){l.each(this._merges,v=>{if(v.intersects(p))throw new Error("Cannot merge already merged cells")});const y=this.getCell(p.top,p.left);for(let v=p.top;v<=p.bottom;v++)for(let S=p.left;S<=p.right;S++)(v>p.top||S>p.left)&&this.getCell(v,S).merge(y,x);this._merges[y.address]=p}_unMergeMaster(p){const x=this._merges[p.address];if(x){for(let y=x.top;y<=x.bottom;y++)for(let v=x.left;v<=x.right;v++)this.getCell(y,v).unmerge();delete this._merges[p.address]}}get hasMerges(){return l.some(this._merges,Boolean)}unMergeCells(){for(var p=arguments.length,x=new Array(p),y=0;y<p;y++)x[y]=arguments[y];const v=new o(x);for(let S=v.top;S<=v.bottom;S++)for(let N=v.left;N<=v.right;N++){const R=this.findCell(S,N);R&&(R.type===n.ValueType.Merge?this._unMergeMaster(R.master):this._merges[R.address]&&this._unMergeMaster(R))}}fillFormula(p,x,y){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const S=s.decode(p),{top:N,left:R,bottom:B,right:M}=S,F=M-R+1,q=s.encodeAddress(N,R),V=v==="shared";let O;O=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(A,C)=>y[A-N][C-R]:(A,C)=>y[(A-N)*F+(C-R)]:()=>{};let T=!0;for(let A=N;A<=B;A++)for(let C=R;C<=M;C++)T?(this.getCell(A,C).value={shareType:v,formula:x,ref:p,result:O(A,C)},T=!1):this.getCell(A,C).value=V?{sharedFormula:q,result:O(A,C)}:O(A,C)}addImage(p,x){const y={type:"image",imageId:p,range:x};this._media.push(new u(this,y))}getImages(){return this._media.filter(p=>p.type==="image")}addBackgroundImage(p){const x={type:"background",imageId:p};this._media.push(new u(this,x))}getBackgroundImageId(){const p=this._media.find(x=>x.type==="background");return p&&p.imageId}protect(p,x){return new Promise(y=>{this.sheetProtection={sheet:!0},x&&"spinCount"in x&&(x.spinCount=Number.isFinite(x.spinCount)?Math.round(Math.max(0,x.spinCount)):1e5),p&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=b.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=x&&"spinCount"in x?x.spinCount:1e5,this.sheetProtection.hashValue=b.convertPasswordToHash(p,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),x&&(this.sheetProtection=Object.assign(this.sheetProtection,x),!p&&"spinCount"in x&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(p){const x=new c(this,p);return this.tables[p.name]=x,x}getTable(p){return this.tables[p]}removeTable(p){delete this.tables[p]}getTables(){return Object.values(this.tables)}addConditionalFormatting(p){this.conditionalFormattings.push(p)}removeConditionalFormatting(p){typeof p=="number"?this.conditionalFormattings.splice(p,1):this.conditionalFormattings=p instanceof Function?this.conditionalFormattings.filter(p):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(p){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=p}get model(){const p={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(v=>v.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(v=>v.model),conditionalFormattings:this.conditionalFormattings};p.cols=t.toModel(this.columns);const x=p.rows=[],y=p.dimensions=new o;return this._rows.forEach(v=>{const S=v&&v.model;S&&(y.expand(S.number,S.min,S.number,S.max),x.push(S))}),p.merges=[],l.each(this._merges,v=>{p.merges.push(v.range)}),p}_parseRows(p){this._rows=[],p.rows.forEach(x=>{const y=new r(this,x.number);this._rows[y.number-1]=y,y.model=x})}_parseMergeCells(p){l.each(p.mergeCells,x=>{this.mergeCellsWithoutStyle(x)})}set model(p){this.name=p.name,this._columns=t.fromModel(this,p.cols),this._parseRows(p),this._parseMergeCells(p),this.dataValidations=new d(p.dataValidations),this.properties=p.properties,this.pageSetup=p.pageSetup,this.headerFooter=p.headerFooter,this.views=p.views,this.autoFilter=p.autoFilter,this._media=p.media.map(x=>new u(this,x)),this.sheetProtection=p.sheetProtection,this.tables=p.tables.reduce((x,y)=>{const v=new c;return v.model=y,x[y.name]=v,x},{}),this.conditionalFormattings=p.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,h,f){e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");const l={Workbook:e("./doc/workbook")},s=e("./doc/enums");Object.keys(s).forEach(o=>{l[o]=s[o]}),h.exports=l},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,h,f){const l=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");f.bufferToString=function(s){return typeof s=="string"?s:l?l.decode(s):s.toString()}},{}],17:[function(e,h,f){const l=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:s}=e("buffer");f.stringToBuffer=function(o){return typeof o!="string"?o:l?s.from(l.encode(o).buffer):s.from(o)}},{buffer:220}],18:[function(e,h,f){const l=e("./under-dash"),s=e("./col-cache");h.exports=class{constructor(o){this.template=o,this.sheets={}}addCell(o){this.addCellEx(s.decodeEx(o))}getCell(o){return this.findCellEx(s.decodeEx(o),!0)}findCell(o){return this.findCellEx(s.decodeEx(o),!1)}findCellAt(o,r,t){const n=this.sheets[o],u=n&&n[r];return u&&u[t]}addCellEx(o){if(o.top)for(let r=o.top;r<=o.bottom;r++)for(let t=o.left;t<=o.right;t++)this.getCellAt(o.sheetName,r,t);else this.findCellEx(o,!0)}getCellEx(o){return this.findCellEx(o,!0)}findCellEx(o,r){const t=this.findSheet(o,r),n=this.findSheetRow(t,o,r);return this.findRowCell(n,o,r)}getCellAt(o,r,t){const n=this.sheets[o]||(this.sheets[o]=[]),u=n[r]||(n[r]=[]);return u[t]||(u[t]={sheetName:o,address:s.n2l(t)+r,row:r,col:t})}removeCellEx(o){const r=this.findSheet(o);if(!r)return;const t=this.findSheetRow(r,o);t&&delete t[o.col]}forEachInSheet(o,r){const t=this.sheets[o];t&&t.forEach((n,u)=>{n&&n.forEach((c,d)=>{c&&r(c,u,d)})})}forEach(o){l.each(this.sheets,(r,t)=>{this.forEachInSheet(t,o)})}map(o){const r=[];return this.forEach(t=>{r.push(o(t))}),r}findSheet(o,r){const t=o.sheetName;return this.sheets[t]?this.sheets[t]:r?this.sheets[t]=[]:void 0}findSheetRow(o,r,t){const{row:n}=r;return o&&o[n]?o[n]:t?o[n]=[]:void 0}findRowCell(o,r,t){const{col:n}=r;return o&&o[n]?o[n]:t?o[n]=this.template?Object.assign(r,JSON.parse(JSON.stringify(this.template))):r:void 0}spliceRows(o,r,t,n){const u=this.sheets[o];if(u){const c=[];for(let d=0;d<n;d++)c.push([]);u.splice(r,t,...c)}}spliceColumns(o,r,t,n){const u=this.sheets[o];if(u){const c=[];for(let d=0;d<n;d++)c.push(null);l.each(u,d=>{d.splice(r,t,...c)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,h,f){const l=/^[A-Z]+\d+$/,s={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:o=>o<=26?1:o<=676?2:3,_fill(o){let r,t,n,u,c,d=1;if(o>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&o>=1){for(;d<=26;)r=this._dictionary[d-1],this._n2l[d]=r,this._l2n[r]=d,d++;this._l2nFill=1}if(this._l2nFill<2&&o>=2){for(d=27;d<=702;)t=d-27,n=t%26,u=Math.floor(t/26),r=this._dictionary[u]+this._dictionary[n],this._n2l[d]=r,this._l2n[r]=d,d++;this._l2nFill=2}if(this._l2nFill<3&&o>=3){for(d=703;d<=16384;)t=d-703,n=t%26,u=Math.floor(t/26)%26,c=Math.floor(t/676),r=this._dictionary[c]+this._dictionary[u]+this._dictionary[n],this._n2l[d]=r,this._l2n[r]=d,d++;this._l2nFill=3}},l2n(o){if(this._l2n[o]||this._fill(o.length),!this._l2n[o])throw new Error("Out of bounds. Invalid column letter: "+o);return this._l2n[o]},n2l(o){if(o<1||o>16384)throw new Error(o+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[o]||this._fill(this._level(o)),this._n2l[o]},_hash:{},validateAddress(o){if(!l.test(o))throw new Error("Invalid Address: "+o);return!0},decodeAddress(o){const r=o.length<5&&this._hash[o];if(r)return r;let t=!1,n="",u=0,c=!1,d="",b=0;for(let p,x=0;x<o.length;x++)if(p=o.charCodeAt(x),!c&&p>=65&&p<=90)t=!0,n+=o[x],u=26*u+p-64;else if(p>=48&&p<=57)c=!0,d+=o[x],b=10*b+p-48;else if(c&&t&&p!==36)break;if(t){if(u>16384)throw new Error("Out of bounds. Invalid column letter: "+n)}else u=void 0;c||(b=void 0);const g={address:o=n+d,col:u,row:b,$col$row:`$${n}$${d}`};return u<=100&&b<=100&&(this._hash[o]=g,this._hash[g.$col$row]=g),g},getAddress(o,r){if(r){const t=this.n2l(r)+o;return this.decodeAddress(t)}return this.decodeAddress(o)},decode(o){const r=o.split(":");if(r.length===2){const t=this.decodeAddress(r[0]),n=this.decodeAddress(r[1]),u={top:Math.min(t.row,n.row),left:Math.min(t.col,n.col),bottom:Math.max(t.row,n.row),right:Math.max(t.col,n.col)};return u.tl=this.n2l(u.left)+u.top,u.br=this.n2l(u.right)+u.bottom,u.dimensions=`${u.tl}:${u.br}`,u}return this.decodeAddress(o)},decodeEx(o){const r=o.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),t=r[1]||r[2],n=r[3],u=n.split(":");if(u.length>1){let d=this.decodeAddress(u[0]),b=this.decodeAddress(u[1]);const g=Math.min(d.row,b.row),p=Math.min(d.col,b.col),x=Math.max(d.row,b.row),y=Math.max(d.col,b.col);return d=this.n2l(p)+g,b=this.n2l(y)+x,{top:g,left:p,bottom:x,right:y,sheetName:t,tl:{address:d,col:p,row:g,$col$row:`$${this.n2l(p)}$${g}`,sheetName:t},br:{address:b,col:y,row:x,$col$row:`$${this.n2l(y)}$${x}`,sheetName:t},dimensions:`${d}:${b}`}}if(n.startsWith("#"))return t?{sheetName:t,error:n}:{error:n};const c=this.decodeAddress(n);return t?{sheetName:t,...c}:c},encodeAddress:(o,r)=>s.n2l(r)+o,encode(){switch(arguments.length){case 2:return s.encodeAddress(arguments[0],arguments[1]);case 4:return`${s.encodeAddress(arguments[0],arguments[1])}:${s.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(o,r){const[t,n,,u,c]=o,[d,b]=r;return d>=t&&d<=u&&b>=n&&b<=c}};h.exports=s},{}],20:[function(e,h,f){const l=(o,r)=>({...o,...r.reduce((t,n)=>(o[n]&&(t[n]={...o[n]}),t),{})}),s=function(o,r,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];o[t]&&(r[t]=l(o[t],n))};f.copyStyle=o=>{if(!o)return o;if(r=o,Object.keys(r).length===0)return{};var r;const t={...o};return s(o,t,"font",["color"]),s(o,t,"alignment"),s(o,t,"protection"),o.border&&(s(o,t,"border"),s(o.border,t.border,"top",["color"]),s(o.border,t.border,"left",["color"]),s(o.border,t.border,"bottom",["color"]),s(o.border,t.border,"right",["color"]),s(o.border,t.border,"diagonal",["color"])),o.fill&&(s(o,t,"fill",["fgColor","bgColor","center"]),o.fill.stops&&(t.fill.stops=o.fill.stops.map(n=>l(n,["color"])))),t}},{}],21:[function(e,h,f){(function(l){(function(){const s=e("crypto"),o={hash(r){const t=s.createHash(r);for(var n=arguments.length,u=new Array(n>1?n-1:0),c=1;c<n;c++)u[c-1]=arguments[c];return t.update(l.concat(u)),t.digest()},convertPasswordToHash(r,t,n,u){if(t=t.toLowerCase(),s.getHashes().indexOf(t)<0)throw new Error(`Hash algorithm '${t}' not supported!`);const c=l.from(r,"utf16le");let d=this.hash(t,l.from(n,"base64"),c);for(let b=0;b<u;b++){const g=l.alloc(4);g.writeUInt32LE(b,0),d=this.hash(t,d,g)}return d.toString("base64")},randomBytes:r=>s.randomBytes(r)};h.exports=o}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,h,f){const{SaxesParser:l}=e("saxes"),{PassThrough:s}=e("readable-stream"),{bufferToString:o}=e("./browser-buffer-decode");h.exports=async function*(r){r.pipe&&!r[Symbol.asyncIterator]&&(r=r.pipe(new s));const t=new l;let n;t.on("error",c=>{n=c});let u=[];t.on("opentag",c=>u.push({eventType:"opentag",value:c})),t.on("text",c=>u.push({eventType:"text",value:c})),t.on("closetag",c=>u.push({eventType:"closetag",value:c}));for await(const c of r){if(t.write(o(c)),n)throw n;yield u,u=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,h,f){const l=e("./col-cache"),s=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,o=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;h.exports={slideFormula:function(r,t,n){const u=l.decode(t),c=l.decode(n);return r.replace(s,(d,b,g,p,x)=>{if(x)return d;const y=o.exec(p);if(y){const v=y[1],S=y[2].toUpperCase(),N=y[3],R=y[4];if(S.length>3||S.length===3&&S>"XFD")return d;let B=l.l2n(S),M=parseInt(R,10);return v||(B+=c.col-u.col),N||(M+=c.row-u.row),(b||"")+(v||"")+l.n2l(B)+(N||"")+M}return d})}}},{"./col-cache":19}],24:[function(e,h,f){(function(l,s){(function(){const o=e("readable-stream"),r=e("./utils"),t=e("./string-buf");class n{constructor(p,x){this._data=p,this._encoding=x}get length(){return this.toBuffer().length}copy(p,x,y,v){return this.toBuffer().copy(p,x,y,v)}toBuffer(){return this._buffer||(this._buffer=s.from(this._data,this._encoding)),this._buffer}}class u{constructor(p){this._data=p}get length(){return this._data.length}copy(p,x,y,v){return this._data._buf.copy(p,x,y,v)}toBuffer(){return this._data.toBuffer()}}class c{constructor(p){this._data=p}get length(){return this._data.length}copy(p,x,y,v){this._data.copy(p,x,y,v)}toBuffer(){return this._data}}class d{constructor(p){this.size=p,this.buffer=s.alloc(p),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const p=s.alloc(this.iWrite-this.iRead);return this.buffer.copy(p,0,this.iRead,this.iWrite),p}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(p){let x;return p===0?null:p===void 0||p>=this.length?(x=this.toBuffer(),this.iRead=this.iWrite,x):(x=s.alloc(p),this.buffer.copy(x,0,this.iRead,p),this.iRead+=p,x)}write(p,x,y){const v=Math.min(y,this.size-this.iWrite);return p.copy(this.buffer,this.iWrite,x,x+v),this.iWrite+=v,v}}const b=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};r.inherits(b,o.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return s.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const p=this.buffers[this.buffers.length-1];if(!p.full)return p}const g=new d(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map((function(p){return new Promise(x=>{p.write(g.toBuffer(),()=>{x()})})})))},_writeToBuffers(g){let p=0;const x=g.length;for(;p<x;)p+=this._getWritableBuffer().write(g,p,x-p)},async write(g,p,x){let y;if(p instanceof Function&&(x=p,p="utf8"),x=x||r.nop,g instanceof t)y=new u(g);else if(g instanceof s)y=new c(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new n(g,p)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),l.nextTick(x)):(await this._pipe(y),x());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,p,x){const y=v=>{v?x(v):(this._flush(),this.pipes.forEach(S=>{S.end()}),this.emit("finish"))};g?this.write(g,p,y):y()},read(g){let p;if(g){for(p=[];g&&this.buffers.length&&!this.buffers[0].eod;){const x=this.buffers[0],y=x.read(g);g-=y.length,p.push(y),x.eod&&x.full&&this.buffers.shift()}return s.concat(p)}return p=this.buffers.map(x=>x.toBuffer()).filter(Boolean),this.buffers=[],s.concat(p)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(p=>p!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),h.exports=b}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,h,f){(function(l){(function(){h.exports=class{constructor(s){this._buf=l.alloc(s&&s.size||16384),this._encoding=s&&s.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=l.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(s){s=s||0,this._buffer=void 0,this._inPos=s}_grow(s){let o=2*this._buf.length;for(;o<s;)o*=2;const r=l.alloc(o);this._buf.copy(r,0),this._buf=r}addText(s){this._buffer=void 0;let o=this._inPos+this._buf.write(s,this._inPos,this._encoding);for(;o>=this._buf.length-4;)this._grow(this._inPos+s.length),o=this._inPos+this._buf.write(s,this._inPos,this._encoding);this._inPos=o}addStringBuf(s){s.length&&(this._buffer=void 0,this.length+s.length>this.capacity&&this._grow(this.length+s.length),s._buf.copy(this._buf,this._inPos,0,s.length),this._inPos+=s.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,h,f){const{toString:l}=Object.prototype,s=/["&<>]/,o={each:function(r,t){r&&(Array.isArray(r)?r.forEach(t):Object.keys(r).forEach(n=>{t(r[n],n)}))},some:function(r,t){return!!r&&(Array.isArray(r)?r.some(t):Object.keys(r).some(n=>t(r[n],n)))},every:function(r,t){return!r||(Array.isArray(r)?r.every(t):Object.keys(r).every(n=>t(r[n],n)))},map:function(r,t){return r?Array.isArray(r)?r.map(t):Object.keys(r).map(n=>t(r[n],n)):[]},keyBy:(r,t)=>r.reduce((n,u)=>(n[u[t]]=u,n),{}),isEqual:function(r,t){const n=typeof r,u=typeof t,c=Array.isArray(r),d=Array.isArray(t);let b;if(n!==u)return!1;switch(typeof r){case"object":if(c||d)return!(!c||!d)&&r.length===t.length&&r.every((g,p)=>{const x=t[p];return o.isEqual(g,x)});if(r===null||t===null)return r===t;if(b=Object.keys(r),Object.keys(t).length!==b.length)return!1;for(const g of b)if(!t.hasOwnProperty(g))return!1;return o.every(r,(g,p)=>{const x=t[p];return o.isEqual(g,x)});default:return r===t}},escapeHtml(r){const t=s.exec(r);if(!t)return r;let n="",u="",c=0,d=t.index;for(;d<r.length;d++){switch(r.charAt(d)){case'"':u="&quot;";break;case"&":u="&amp;";break;case"'":u="&apos;";break;case"<":u="&lt;";break;case">":u="&gt;";break;default:continue}c!==d&&(n+=r.substring(c,d)),c=d+1,n+=u}return c!==d?n+r.substring(c,d):n},strcmp:(r,t)=>r<t?-1:r>t?1:0,isUndefined:r=>l.call(r)==="[object Undefined]",isObject:r=>l.call(r)==="[object Object]",deepMerge(){const r=arguments[0]||{},{length:t}=arguments;let n,u,c;function d(b,g){n=r[g],c=Array.isArray(b),o.isObject(b)||c?(c?(c=!1,u=n&&Array.isArray(n)?n:[]):u=n&&o.isObject(n)?n:{},r[g]=o.deepMerge(u,b)):o.isUndefined(b)||(r[g]=b)}for(let b=0;b<t;b++)o.each(arguments[b],d);return r}};h.exports=o},{}],27:[function(e,h,f){(function(l,s){(function(){const o=e("fs"),r=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,t={nop(){},promiseImmediate:n=>new Promise(u=>{l.setImmediate?s(()=>{u(n)}):setTimeout(()=>{u(n)},1)}),inherits:function(n,u,c,d){n.super_=u,d||(d=c,c=null),c&&Object.keys(c).forEach(g=>{Object.defineProperty(n,g,Object.getOwnPropertyDescriptor(c,g))});const b={constructor:{value:n,enumerable:!1,writable:!1,configurable:!0}};d&&Object.keys(d).forEach(g=>{b[g]=Object.getOwnPropertyDescriptor(d,g)}),n.prototype=Object.create(u.prototype,b)},dateToExcel:(n,u)=>25569+n.getTime()/864e5-(u?1462:0),excelToDate(n,u){const c=Math.round(24*(n-25569+(u?1462:0))*3600*1e3);return new Date(c)},parsePath(n){const u=n.lastIndexOf("/");return{path:n.substring(0,u),name:n.substring(u+1)}},getRelsPath(n){const u=t.parsePath(n);return`${u.path}/_rels/${u.name}.rels`},xmlEncode(n){const u=r.exec(n);if(!u)return n;let c="",d="",b=0,g=u.index;for(;g<n.length;g++){const p=n.charCodeAt(g);switch(p){case 34:d="&quot;";break;case 38:d="&amp;";break;case 39:d="&apos;";break;case 60:d="&lt;";break;case 62:d="&gt;";break;case 127:d="";break;default:if(p<=31&&(p<=8||p>=11&&p!==13)){d="";break}continue}b!==g&&(c+=n.substring(b,g)),b=g+1,d&&(c+=d)}return b!==g?c+n.substring(b,g):c},xmlDecode:n=>n.replace(/&([a-z]*);/g,u=>{switch(u){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return u}}),validInt(n){const u=parseInt(n,10);return Number.isNaN(u)?0:u},isDateFmt(n){return n?(n=(n=n.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:n=>new Promise(u=>{o.access(n,o.constants.F_OK,c=>{u(!c)})})},toIsoDateString:n=>n.toIsoString().subsstr(0,10),parseBoolean:n=>n===!0||n==="true"||n===1||n==="1"};h.exports=t}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,h,f){const l=e("./under-dash"),s=e("./utils");function o(n,u,c){n.push(` ${u}="${s.xmlEncode(c.toString())}"`)}function r(n,u){if(u){const c=[];l.each(u,(d,b)=>{d!==void 0&&o(c,b,d)}),n.push(c.join(""))}}class t{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(u){const c=this._xml;c.push("<?xml"),r(c,u),c.push(`?>
`)}openNode(u,c){const d=this.tos,b=this._xml;d&&this.open&&b.push(">"),this._stack.push(u),b.push("<"),b.push(u),r(b,c),this.leaf=!0,this.open=!0}addAttribute(u,c){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");c!==void 0&&o(this._xml,u,c)}addAttributes(u){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");r(this._xml,u)}writeText(u){const c=this._xml;this.open&&(c.push(">"),this.open=!1),this.leaf=!1,c.push(s.xmlEncode(u.toString()))}writeXml(u){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(u)}closeNode(){const u=this._stack.pop(),c=this._xml;this.leaf?c.push("/>"):(c.push("</"),c.push(u),c.push(">")),this.open=!1,this.leaf=!1}leafNode(u,c,d){this.openNode(u,c),d!==void 0&&this.writeText(d),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const u=this._rollbacks.pop();this._xml.length>u.xml&&this._xml.splice(u.xml,this._xml.length-u.xml),this._stack.length>u.stack&&this._stack.splice(u.stack,this._stack.length-u.stack),this.leaf=u.leaf,this.open=u.open}get xml(){return this.closeAll(),this._xml.join("")}}t.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},h.exports=t},{"./under-dash":26,"./utils":27}],29:[function(e,h,f){(function(l){(function(){const s=e("events"),o=e("jszip"),r=e("./stream-buf"),{stringToBuffer:t}=e("./browser-buffer-encode");class n extends s.EventEmitter{constructor(c){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},c),this.zip=new o,this.stream=new r}append(c,d){d.hasOwnProperty("base64")&&d.base64?this.zip.file(d.name,c,{base64:!0}):(l.browser&&typeof c=="string"&&(c=t(c)),this.zip.file(d.name,c))}async finalize(){const c=await this.zip.generateAsync(this.options);this.stream.end(c),this.emit("finish")}read(c){return this.stream.read(c)}setEncoding(c){return this.stream.setEncoding(c)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(c,d){return this.stream.pipe(c,d)}unpipe(c){return this.stream.unpipe(c)}unshift(c){return this.stream.unshift(c)}wrap(c){return this.stream.wrap(c)}}h.exports={ZipWriter:n}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,h,f){h.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},28:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"年"m"月"d"日"',"zh-cn":'yyyy"年"m"月"d"日"',"ja-jp":'yyyy"年"m"月"d"日"',"ko-kr":'yyyy"년" mm"월" dd"일"'},32:{"zh-tw":'hh"時"mm"分"',"zh-cn":'h"时"mm"分"',"ja-jp":'h"時"mm"分"',"ko-kr":'h"시" mm"분"'},33:{"zh-tw":'hh"時"mm"分"ss"秒"',"zh-cn":'h"时"mm"分"ss"秒"',"ja-jp":'h"時"mm"分"ss"秒"',"ko-kr":'h"시" mm"분" ss"초"'},34:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},51:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},52:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'yyyy"年"m"月"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'m"月"d"日"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},55:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},58:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,h,f){h.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,h,f){const l=e("../../utils/parse-sax"),s=e("../../utils/xml-stream");class o{prepare(){}render(){}parseOpen(t){}parseText(t){}parseClose(t){}reconcile(t,n){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(t=>{t instanceof o?t.reset():t.xform&&t.xform.reset()})}mergeModel(t){this.model=Object.assign(this.model||{},t)}async parse(t){for await(const n of t)for(const{eventType:u,value:c}of n)if(u==="opentag")this.parseOpen(c);else if(u==="text")this.parseText(c);else if(u==="closetag"&&!this.parseClose(c.name))return this.model;return this.model}async parseStream(t){return this.parse(l(t))}get xml(){return this.toXml(this.model)}toXml(t){const n=new s;return this.render(n,t),n.xml}static toAttribute(t,n){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(t===void 0){if(u)return n}else if(u||t!==n)return t.toString()}static toStringAttribute(t,n){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(t,n,u)}static toStringValue(t,n){return t===void 0?n:t}static toBoolAttribute(t,n){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(t===void 0){if(u)return n}else if(u||t!==n)return t?"1":"0"}static toBoolValue(t,n){return t===void 0?n:t==="1"}static toIntAttribute(t,n){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(t,n,u)}static toIntValue(t,n){return t===void 0?n:parseInt(t,10)}static toFloatAttribute(t,n){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(t,n,u)}static toFloatValue(t,n){return t===void 0?n:parseFloat(t)}}h.exports=o},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,h,f){const l=e("../base-xform"),s=e("../../../utils/col-cache");function o(t){try{return s.decodeEx(t),!0}catch{return!1}}function r(t){const n=[];let u=!1,c="";return t.split(",").forEach(d=>{if(!d)return;const b=(d.match(/'/g)||[]).length;if(!b)return void(u?c+=d+",":o(d)&&n.push(d));const g=b%2==0;!u&&g&&o(d)?n.push(d):u&&!g?(u=!1,o(c+d)&&n.push(c+d),c=""):(u=!0,c+=d+",")}),n}h.exports=class extends l{render(t,n){t.openNode("definedName",{name:n.name,localSheetId:n.localSheetId}),t.writeText(n.ranges.join(",")),t.closeNode()}parseOpen(t){switch(t.name){case"definedName":return this._parsedName=t.attributes.name,this._parsedLocalSheetId=t.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(t){this._parsedText.push(t)}parseClose(){return this.model={name:this._parsedName,ranges:r(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,h,f){const l=e("../../../utils/utils"),s=e("../base-xform");h.exports=class extends s{render(o,r){o.leafNode("sheet",{sheetId:r.id,name:r.name,state:r.state,"r:id":r.rId})}parseOpen(o){return o.name==="sheet"&&(this.model={name:l.xmlDecode(o.attributes.name),id:parseInt(o.attributes.sheetId,10),state:o.attributes.state,rId:o.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){s.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:o.fullCalcOnLoad?1:void 0})}parseOpen(s){return s.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){s.leafNode("workbookPr",{date1904:o.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(s){return s.name==="workbookPr"&&(this.model={date1904:s.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){const r={xWindow:o.x||0,yWindow:o.y||0,windowWidth:o.width||12e3,windowHeight:o.height||24e3,firstSheet:o.firstSheet,activeTab:o.activeTab};o.visibility&&o.visibility!=="visible"&&(r.visibility=o.visibility),s.leafNode("workbookView",r)}parseOpen(s){if(s.name==="workbookView"){const o=this.model={},r=function(n,u,c){const d=u!==void 0?o[n]=u:c;d!==void 0&&(o[n]=d)},t=function(n,u,c){const d=u!==void 0?o[n]=parseInt(u,10):c;d!==void 0&&(o[n]=d)};return t("x",s.attributes.xWindow,0),t("y",s.attributes.yWindow,0),t("width",s.attributes.windowWidth,25e3),t("height",s.attributes.windowHeight,1e4),r("visibility",s.attributes.visibility,"visible"),t("activeTab",s.attributes.activeTab,void 0),t("firstSheet",s.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),r=e("../base-xform"),t=e("../static-xform"),n=e("../list-xform"),u=e("./defined-name-xform"),c=e("./sheet-xform"),d=e("./workbook-view-xform"),b=e("./workbook-properties-xform"),g=e("./workbook-calc-properties-xform");class p extends r{constructor(){super(),this.map={fileVersion:p.STATIC_XFORMS.fileVersion,workbookPr:new b,bookViews:new n({tag:"bookViews",count:!1,childXform:new d}),sheets:new n({tag:"sheets",count:!1,childXform:new c}),definedNames:new n({tag:"definedNames",count:!1,childXform:new u}),calcPr:new g}}prepare(y){y.sheets=y.worksheets;const v=[];let S=0;y.sheets.forEach(N=>{if(N.pageSetup&&N.pageSetup.printArea&&N.pageSetup.printArea.split("&&").forEach(R=>{const B=R.split(":"),M={name:"_xlnm.Print_Area",ranges:[`'${N.name}'!$${B[0]}:$${B[1]}`],localSheetId:S};v.push(M)}),N.pageSetup&&(N.pageSetup.printTitlesRow||N.pageSetup.printTitlesColumn)){const R=[];if(N.pageSetup.printTitlesColumn){const M=N.pageSetup.printTitlesColumn.split(":");R.push(`'${N.name}'!$${M[0]}:$${M[1]}`)}if(N.pageSetup.printTitlesRow){const M=N.pageSetup.printTitlesRow.split(":");R.push(`'${N.name}'!$${M[0]}:$${M[1]}`)}const B={name:"_xlnm.Print_Titles",ranges:R,localSheetId:S};v.push(B)}S++}),v.length&&(y.definedNames=y.definedNames.concat(v)),(y.media||[]).forEach((N,R)=>{N.name=N.type+(R+1)})}render(y,v){y.openXml(o.StdDocAttributes),y.openNode("workbook",p.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,v.properties),this.map.bookViews.render(y,v.views),this.map.sheets.render(y,v.sheets),this.map.definedNames.render(y,v.definedNames),this.map.calcPr.render(y,v.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){const v=(y.workbookRels||[]).reduce((M,F)=>(M[F.Id]=F,M),{}),S=[];let N,R=0;(y.sheets||[]).forEach(M=>{const F=v[M.rId];F&&(N=y.worksheetHash["xl/"+F.Target.replace(/^(\s|\/xl\/)+/,"")],N&&(N.name=M.name,N.id=M.id,N.state=M.state,S[R++]=N))});const B=[];l.each(y.definedNames,M=>{if(M.name==="_xlnm.Print_Area"){if(N=S[M.localSheetId],N){N.pageSetup||(N.pageSetup={});const F=s.decodeEx(M.ranges[0]);N.pageSetup.printArea=N.pageSetup.printArea?`${N.pageSetup.printArea}&&${F.dimensions}`:F.dimensions}}else if(M.name==="_xlnm.Print_Titles"){if(N=S[M.localSheetId],N){N.pageSetup||(N.pageSetup={});const F=M.ranges.join(","),q=/\$/g,V=/\$\d+:\$\d+/,O=F.match(V);if(O&&O.length){const C=O[0];N.pageSetup.printTitlesRow=C.replace(q,"")}const T=/\$[A-Z]+:\$[A-Z]+/,A=F.match(T);if(A&&A.length){const C=A[0];N.pageSetup.printTitlesColumn=C.replace(q,"")}}}else B.push(M)}),y.definedNames=B,y.media.forEach((M,F)=>{M.index=F})}}p.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},p.STATIC_XFORMS={fileVersion:new t({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},h.exports=p},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,h,f){const l=e("../strings/rich-text-xform"),s=e("../../../utils/utils"),o=e("../base-xform"),r=h.exports=function(t){this.model=t};s.inherits(r,o,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new l),this._richTextXform},render(t,n){n=n||this.model,t.openNode("comment",{ref:n.ref,authorId:0}),t.openNode("text"),n&&n.note&&n.note.texts&&n.note.texts.forEach(u=>{this.richTextXform.render(t,u)}),t.closeNode(),t.closeNode()},parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case"comment":return this.model={type:"note",note:{texts:[]},...t.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(t),!0;default:return!1}},parseText(t){this.parser&&this.parser.parseText(t)},parseClose(t){switch(t){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(t),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../../../utils/utils"),o=e("../base-xform"),r=e("./comment-xform"),t=h.exports=function(){this.map={comment:new r}};s.inherits(t,o,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(n,u){u=u||this.model,n.openXml(l.StdDocAttributes),n.openNode("comments",t.COMMENTS_ATTRIBUTES),n.openNode("authors"),n.leafNode("author",null,"Author"),n.closeNode(),n.openNode("commentList"),u.comments.forEach(c=>{this.map.comment.render(n,c)}),n.closeNode(),n.closeNode()},parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(n),!0;default:return!1}},parseText(n){this.parser&&this.parser.parseText(n)},parseClose(n){switch(n){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,o,r){(o===r[2]||this.tag==="x:SizeWithCells"&&o===r[1])&&s.leafNode(this.tag)}parseOpen(s){switch(s.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"x:Anchor"}getAnchorRect(s){const o=Math.floor(s.left),r=Math.floor(68*(s.left-o)),t=Math.floor(s.top),n=Math.floor(18*(s.top-t)),u=Math.floor(s.right),c=Math.floor(68*(s.right-u)),d=Math.floor(s.bottom);return[o,r,t,n,u,c,d,Math.floor(18*(s.bottom-d))]}getDefaultRect(s){const o=s.col,r=Math.max(s.row-2,0);return[o,6,r,14,o+2,2,r+4,16]}render(s,o){const r=o.anchor?this.getAnchorRect(o.anchor):this.getDefaultRect(o.refAddress);s.leafNode("x:Anchor",null,r.join(", "))}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,h,f){const l=e("../base-xform"),s=e("./vml-anchor-xform"),o=e("./style/vml-protection-xform"),r=e("./style/vml-position-xform"),t=["twoCells","oneCells","absolute"];h.exports=class extends l{constructor(){super(),this.map={"x:Anchor":new s,"x:Locked":new o({tag:"x:Locked"}),"x:LockText":new o({tag:"x:LockText"}),"x:SizeWithCells":new r({tag:"x:SizeWithCells"}),"x:MoveWithCells":new r({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(n,u){const{protection:c,editAs:d}=u.note;n.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(n,d,t),this.map["x:SizeWithCells"].render(n,d,t),this.map["x:Anchor"].render(n,u),this.map["x:Locked"].render(n,c.locked),n.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(n,c.lockText),n.leafNode("x:Row",null,u.refAddress.row-1),n.leafNode("x:Column",null,u.refAddress.col-1),n.closeNode()}parseOpen(n){switch(n.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const n=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),u=Object.keys(n).length;this.model.editAs=t[u],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./vml-shape-xform");class r extends s{constructor(){super(),this.map={"v:shape":new o}}get tag(){return"xml"}render(n,u){n.openXml(l.StdDocAttributes),n.openNode(this.tag,r.DRAWING_ATTRIBUTES),n.openNode("o:shapelayout",{"v:ext":"edit"}),n.leafNode("o:idmap",{"v:ext":"edit",data:1}),n.closeNode(),n.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),n.leafNode("v:stroke",{joinstyle:"miter"}),n.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),n.closeNode(),u.comments.forEach((c,d)=>{this.map["v:shape"].render(n,c,d)}),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(n){case this.tag:return!1;default:return!0}}reconcile(n,u){n.anchors.forEach(c=>{c.br?this.map["xdr:twoCellAnchor"].reconcile(c,u):this.map["xdr:oneCellAnchor"].reconcile(c,u)})}}r.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},h.exports=r},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,h,f){const l=e("../base-xform"),s=e("./vml-textbox-xform"),o=e("./vml-client-data-xform");class r extends l{constructor(){super(),this.map={"v:textbox":new s,"x:ClientData":new o}}get tag(){return"v:shape"}render(n,u,c){n.openNode("v:shape",r.V_SHAPE_ATTRIBUTES(u,c)),n.leafNode("v:fill",{color2:"infoBackground [80]"}),n.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),n.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(n,u),this.map["x:ClientData"].render(n,u),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset(),this.model={margins:{insetmode:n.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}r.V_SHAPE_ATTRIBUTES=(t,n)=>({id:"_x0000_s"+(1025+n),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":t.note.margins&&t.note.margins.insetmode}),h.exports=r},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"v:textbox"}conversionUnit(s,o,r){return`${parseFloat(s)*o.toFixed(2)}${r}`}reverseConversionUnit(s){return(s||"").split(",").map(o=>Number(parseFloat(this.conversionUnit(parseFloat(o),.1,"")).toFixed(2)))}render(s,o){const r={style:"mso-direction-alt:auto"};if(o&&o.note){let{inset:t}=o.note&&o.note.margins;Array.isArray(t)&&(t=t.map(n=>this.conversionUnit(n,10,"mm")).join(",")),t&&(r.inset=t)}s.openNode("v:textbox",r),s.leafNode("div",{style:"text-align:left"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:return this.model={inset:this.reverseConversionUnit(s.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(e,h,f){const l=e("./base-xform");h.exports=class extends l{createNewModel(s){return{}}parseOpen(s){return this.parser=this.parser||this.map[s.name],this.parser?(this.parser.parseOpen(s),!0):s.name===this.tag&&(this.model=this.createNewModel(s),!0)}parseText(s){this.parser&&this.parser.parseText(s)}onParserClose(s,o){this.model[s]=o.model}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.onParserClose(s,this.parser),this.parser=void 0),!0):s!==this.tag}}},{"./base-xform":32}],49:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){s.openNode("HeadingPairs"),s.openNode("vt:vector",{size:2,baseType:"variant"}),s.openNode("vt:variant"),s.leafNode("vt:lpstr",void 0,"Worksheets"),s.closeNode(),s.openNode("vt:variant"),s.leafNode("vt:i4",void 0,o.length),s.closeNode(),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="HeadingPairs"}parseText(){}parseClose(s){return s!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){s.openNode("TitlesOfParts"),s.openNode("vt:vector",{size:o.length,baseType:"lpstr"}),o.forEach(r=>{s.leafNode("vt:lpstr",void 0,r.name)}),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="TitlesOfParts"}parseText(){}parseClose(s){return s!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../simple/string-xform"),r=e("./app-heading-pairs-xform"),t=e("./app-titles-of-parts-xform");class n extends s{constructor(){super(),this.map={Company:new o({tag:"Company"}),Manager:new o({tag:"Manager"}),HeadingPairs:new r,TitleOfParts:new t}}render(c,d){c.openXml(l.StdDocAttributes),c.openNode("Properties",n.PROPERTY_ATTRIBUTES),c.leafNode("Application",void 0,"Microsoft Excel"),c.leafNode("DocSecurity",void 0,"0"),c.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(c,d.worksheets),this.map.TitleOfParts.render(c,d.worksheets),this.map.Company.render(c,d.company||""),this.map.Manager.render(c,d.manager),c.leafNode("LinksUpToDate",void 0,"false"),c.leafNode("SharedDoc",void 0,"false"),c.leafNode("HyperlinksChanged",void 0,"false"),c.leafNode("AppVersion",void 0,"16.0300"),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"Properties":return!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}n.DateFormat=function(u){return u.toISOString().replace(/[.]\d{3,6}/,"")},n.DateAttrs={"xsi:type":"dcterms:W3CDTF"},n.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},h.exports=n},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform");class o extends s{render(t,n){t.openXml(l.StdDocAttributes),t.openNode("Types",o.PROPERTY_ATTRIBUTES);const u={};(n.media||[]).forEach(c=>{if(c.type==="image"){const d=c.extension;u[d]||(u[d]=!0,t.leafNode("Default",{Extension:d,ContentType:"image/"+d}))}}),t.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),t.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),t.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),n.worksheets.forEach(c=>{const d=`/xl/worksheets/sheet${c.id}.xml`;t.leafNode("Override",{PartName:d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),t.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),t.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),n.sharedStrings&&n.sharedStrings.count&&t.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),n.tables&&n.tables.forEach(c=>{t.leafNode("Override",{PartName:"/xl/tables/"+c.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),n.drawings&&n.drawings.forEach(c=>{t.leafNode("Override",{PartName:`/xl/drawings/${c.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),n.commentRefs&&(t.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),n.commentRefs.forEach(c=>{let{commentName:d}=c;t.leafNode("Override",{PartName:`/xl/${d}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),t.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),t.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),t.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}o.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},h.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../simple/date-xform"),r=e("../simple/string-xform"),t=e("../simple/integer-xform");class n extends s{constructor(){super(),this.map={"dc:creator":new r({tag:"dc:creator"}),"dc:title":new r({tag:"dc:title"}),"dc:subject":new r({tag:"dc:subject"}),"dc:description":new r({tag:"dc:description"}),"dc:identifier":new r({tag:"dc:identifier"}),"dc:language":new r({tag:"dc:language"}),"cp:keywords":new r({tag:"cp:keywords"}),"cp:category":new r({tag:"cp:category"}),"cp:lastModifiedBy":new r({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new o({tag:"cp:lastPrinted",format:n.DateFormat}),"cp:revision":new t({tag:"cp:revision"}),"cp:version":new r({tag:"cp:version"}),"cp:contentStatus":new r({tag:"cp:contentStatus"}),"cp:contentType":new r({tag:"cp:contentType"}),"dcterms:created":new o({tag:"dcterms:created",attrs:n.DateAttrs,format:n.DateFormat}),"dcterms:modified":new o({tag:"dcterms:modified",attrs:n.DateAttrs,format:n.DateFormat})}}render(c,d){c.openXml(l.StdDocAttributes),c.openNode("cp:coreProperties",n.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(c,d.creator),this.map["dc:title"].render(c,d.title),this.map["dc:subject"].render(c,d.subject),this.map["dc:description"].render(c,d.description),this.map["dc:identifier"].render(c,d.identifier),this.map["dc:language"].render(c,d.language),this.map["cp:keywords"].render(c,d.keywords),this.map["cp:category"].render(c,d.category),this.map["cp:lastModifiedBy"].render(c,d.lastModifiedBy),this.map["cp:lastPrinted"].render(c,d.lastPrinted),this.map["cp:revision"].render(c,d.revision),this.map["cp:version"].render(c,d.version),this.map["cp:contentStatus"].render(c,d.contentStatus),this.map["cp:contentType"].render(c,d.contentType),this.map["dcterms:created"].render(c,d.created),this.map["dcterms:modified"].render(c,d.modified),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[c.name],this.parser)return this.parser.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}n.DateFormat=function(u){return u.toISOString().replace(/[.]\d{3}/,"")},n.DateAttrs={"xsi:type":"dcterms:W3CDTF"},n.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},h.exports=n},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{render(s,o){s.leafNode("Relationship",o)}parseOpen(s){switch(s.name){case"Relationship":return this.model=s.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./relationship-xform");class r extends s{constructor(){super(),this.map={Relationship:new o}}render(n,u){u=u||this._values,n.openXml(l.StdDocAttributes),n.openNode("Relationships",r.RELATIONSHIPS_ATTRIBUTES),u.forEach(c=>{this.map.Relationship.render(n,c)}),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[n.name],this.parser)return this.parser.parseOpen(n),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(n))}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(n){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+n)}}}r.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},h.exports=r},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={range:{editAs:s.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}reconcilePicture(s,o){if(s&&s.rId){const r=o.rels[s.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(r){const t=r[1],n=o.mediaIndex[t];return o.media[n]}}}}},{"../base-xform":32}],57:[function(e,h,f){const l=e("../base-xform"),s=e("./blip-xform");h.exports=class extends l{constructor(){super(),this.map={"a:blip":new s}}get tag(){return"xdr:blipFill"}render(o,r){o.openNode(this.tag),this.map["a:blip"].render(o,r),o.openNode("a:stretch"),o.leafNode("a:fillRect"),o.closeNode(),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"a:blip"}render(s,o){s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":o.rId,cstate:"print"})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"xdr:cNvPicPr"}render(s){s.openNode(this.tag),s.leafNode("a:picLocks",{noChangeAspect:"1"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(e,h,f){const l=e("../base-xform"),s=e("./hlink-click-xform"),o=e("./ext-lst-xform");h.exports=class extends l{constructor(){super(),this.map={"a:hlinkClick":new s,"a:extLst":new o}}get tag(){return"xdr:cNvPr"}render(r,t){r.openNode(this.tag,{id:t.index,name:"Picture "+t.index}),this.map["a:hlinkClick"].render(r,t),this.map["a:extLst"].render(r,t),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset();break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(){}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,h,f){const l=e("../base-xform"),s=e("../simple/integer-xform");h.exports=class extends l{constructor(o){super(),this.tag=o.tag,this.map={"xdr:col":new s({tag:"xdr:col",zero:!0}),"xdr:colOff":new s({tag:"xdr:colOff",zero:!0}),"xdr:row":new s({tag:"xdr:row",zero:!0}),"xdr:rowOff":new s({tag:"xdr:rowOff",zero:!0})}}render(o,r){o.openNode(this.tag),this.map["xdr:col"].render(o,r.nativeCol),this.map["xdr:colOff"].render(o,r.nativeColOff),this.map["xdr:row"].render(o,r.nativeRow),this.map["xdr:rowOff"].render(o,r.nativeRowOff),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,h,f){const l=e("../../../utils/col-cache"),s=e("../../../utils/xml-stream"),o=e("../base-xform"),r=e("./two-cell-anchor-xform"),t=e("./one-cell-anchor-xform");class n extends o{constructor(){super(),this.map={"xdr:twoCellAnchor":new r,"xdr:oneCellAnchor":new t}}prepare(c){c.anchors.forEach((d,b)=>{d.anchorType=(function(g){return(typeof g.range=="string"?l.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"})(d),this.map[d.anchorType].prepare(d,{index:b})})}get tag(){return"xdr:wsDr"}render(c,d){c.openXml(s.StdDocAttributes),c.openNode(this.tag,n.DRAWING_ATTRIBUTES),d.anchors.forEach(b=>{this.map[b.anchorType].render(c,b)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}reconcile(c,d){c.anchors.forEach(b=>{b.br?this.map["xdr:twoCellAnchor"].reconcile(b,d):this.map["xdr:oneCellAnchor"].reconcile(b,d)})}}n.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},h.exports=n},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"a:extLst"}render(s){s.openNode(this.tag),s.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),s.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),s.closeNode(),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.map={}}render(s,o){s.openNode(this.tag);const r=Math.floor(9525*o.width),t=Math.floor(9525*o.height);s.addAttribute("cx",r),s.addAttribute("cy",t),s.closeNode()}parseOpen(s){return s.name===this.tag&&(this.model={width:parseInt(s.attributes.cx||"0",10)/9525,height:parseInt(s.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"a:hlinkClick"}render(s,o){o.hyperlinks&&o.hyperlinks.rId&&s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":o.hyperlinks.rId,tooltip:o.hyperlinks.tooltip})}parseOpen(s){switch(s.name){case this.tag:return this.model={hyperlinks:{rId:s.attributes["r:id"],tooltip:s.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,h,f){const l=e("../base-xform"),s=e("./c-nv-pr-xform"),o=e("./c-nv-pic-pr-xform");h.exports=class extends l{constructor(){super(),this.map={"xdr:cNvPr":new s,"xdr:cNvPicPr":new o}}get tag(){return"xdr:nvPicPr"}render(r,t){r.openNode(this.tag),this.map["xdr:cNvPr"].render(r,t),this.map["xdr:cNvPicPr"].render(r,t),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset();break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(){}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,h,f){const l=e("./base-cell-anchor-xform"),s=e("../static-xform"),o=e("./cell-position-xform"),r=e("./ext-xform"),t=e("./pic-xform");h.exports=class extends l{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:ext":new r({tag:"xdr:ext"}),"xdr:pic":new t,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(n,u){this.map["xdr:pic"].prepare(n.picture,u)}render(n,u){n.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(n,u.range.tl),this.map["xdr:ext"].render(n,u.range.ext),this.map["xdr:pic"].render(n,u.picture),this.map["xdr:clientData"].render(n,{}),n.closeNode()}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(n,u){n.medium=this.reconcilePicture(n.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,h,f){const l=e("../base-xform"),s=e("../static-xform"),o=e("./blip-fill-xform"),r=e("./nv-pic-pr-xform"),t=e("./sp-pr");h.exports=class extends l{constructor(){super(),this.map={"xdr:nvPicPr":new r,"xdr:blipFill":new o,"xdr:spPr":new s(t)}}get tag(){return"xdr:pic"}prepare(n,u){n.index=u.index+1}render(n,u){n.openNode(this.tag),this.map["xdr:nvPicPr"].render(n,u),this.map["xdr:blipFill"].render(n,u),this.map["xdr:spPr"].render(n,u),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset();break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(){}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,h,f){h.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,h,f){const l=e("./base-cell-anchor-xform"),s=e("../static-xform"),o=e("./cell-position-xform"),r=e("./pic-xform");h.exports=class extends l{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:to":new o({tag:"xdr:to"}),"xdr:pic":new r,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(t,n){this.map["xdr:pic"].prepare(t.picture,n)}render(t,n){t.openNode(this.tag,{editAs:n.range.editAs||"oneCell"}),this.map["xdr:from"].render(t,n.range.tl),this.map["xdr:to"].render(t,n.range.br),this.map["xdr:pic"].render(t,n.picture),this.map["xdr:clientData"].render(t,{}),t.closeNode()}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(t,n){t.medium=this.reconcilePicture(t.picture,n)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,h,f){const l=e("./base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.always=!!s.always,this.count=s.count,this.empty=s.empty,this.$count=s.$count||"count",this.$=s.$,this.childXform=s.childXform,this.maxItems=s.maxItems}prepare(s,o){const{childXform:r}=this;s&&s.forEach((t,n)=>{o.index=n,r.prepare(t,o)})}render(s,o){if(this.always||o&&o.length){s.openNode(this.tag,this.$),this.count&&s.addAttribute(this.$count,o&&o.length||0);const{childXform:r}=this;(o||[]).forEach((t,n)=>{r.render(s,t,n)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(s)&&(this.parser=this.childXform,!0)}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser){if(!this.parser.parseClose(s)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(s,o){if(s){const{childXform:r}=this;s.forEach(t=>{r.reconcile(t,o)})}}}},{"./base-xform":32}],72:[function(e,h,f){const l=e("../../../utils/col-cache"),s=e("../base-xform");h.exports=class extends s{get tag(){return"autoFilter"}render(o,r){if(r)if(typeof r=="string")o.leafNode("autoFilter",{ref:r});else{const t=function(c){return typeof c=="string"?c:l.getAddress(c.row,c.column).address},n=t(r.from),u=t(r.to);n&&u&&o.leafNode("autoFilter",{ref:`${n}:${u}`})}}parseOpen(o){o.name==="autoFilter"&&(this.model=o.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,h,f){const l=e("../../../utils/utils"),s=e("../base-xform"),o=e("../../../doc/range"),r=e("../../../doc/enums"),t=e("../strings/rich-text-xform");function n(u){if(u==null)return r.ValueType.Null;if(u instanceof String||typeof u=="string")return r.ValueType.String;if(typeof u=="number")return r.ValueType.Number;if(typeof u=="boolean")return r.ValueType.Boolean;if(u instanceof Date)return r.ValueType.Date;if(u.text&&u.hyperlink)return r.ValueType.Hyperlink;if(u.formula)return r.ValueType.Formula;if(u.error)return r.ValueType.Error;throw new Error("I could not understand type of value")}h.exports=class extends s{constructor(){super(),this.richTextXForm=new t}get tag(){return"c"}prepare(u,c){const d=c.styles.addStyleModel(u.style||{},(function(b){switch(b.type){case r.ValueType.Formula:return n(b.result);default:return b.type}})(u));switch(d&&(u.styleId=d),u.comment&&c.comments.push({...u.comment,ref:u.address}),u.type){case r.ValueType.String:case r.ValueType.RichText:c.sharedStrings&&(u.ssId=c.sharedStrings.add(u.value));break;case r.ValueType.Date:c.date1904&&(u.date1904=!0);break;case r.ValueType.Hyperlink:c.sharedStrings&&u.text!==void 0&&u.text!==null&&(u.ssId=c.sharedStrings.add(u.text)),c.hyperlinks.push({address:u.address,target:u.hyperlink,tooltip:u.tooltip});break;case r.ValueType.Merge:c.merges.add(u);break;case r.ValueType.Formula:if(c.date1904&&(u.date1904=!0),u.shareType==="shared"&&(u.si=c.siFormulae++),u.formula)c.formulae[u.address]=u;else if(u.sharedFormula){const b=c.formulae[u.sharedFormula];if(!b)throw new Error("Shared Formula master must exist above and or left of clone for cell "+u.address);b.si===void 0?(b.shareType="shared",b.si=c.siFormulae++,b.range=new o(b.address,u.address)):b.range&&b.range.expandToAddress(u.address),u.si=b.si}}}renderFormula(u,c){let d=null;switch(c.shareType){case"shared":d={t:"shared",ref:c.ref||c.range.range,si:c.si};break;case"array":d={t:"array",ref:c.ref};break;default:c.si!==void 0&&(d={t:"shared",si:c.si})}switch(n(c.result)){case r.ValueType.Null:u.leafNode("f",d,c.formula);break;case r.ValueType.String:u.addAttribute("t","str"),u.leafNode("f",d,c.formula),u.leafNode("v",null,c.result);break;case r.ValueType.Number:u.leafNode("f",d,c.formula),u.leafNode("v",null,c.result);break;case r.ValueType.Boolean:u.addAttribute("t","b"),u.leafNode("f",d,c.formula),u.leafNode("v",null,c.result?1:0);break;case r.ValueType.Error:u.addAttribute("t","e"),u.leafNode("f",d,c.formula),u.leafNode("v",null,c.result.error);break;case r.ValueType.Date:u.leafNode("f",d,c.formula),u.leafNode("v",null,l.dateToExcel(c.result,c.date1904));break;default:throw new Error("I could not understand type of value")}}render(u,c){if(c.type!==r.ValueType.Null||c.styleId){switch(u.openNode("c"),u.addAttribute("r",c.address),c.styleId&&u.addAttribute("s",c.styleId),c.type){case r.ValueType.Null:break;case r.ValueType.Number:u.leafNode("v",null,c.value);break;case r.ValueType.Boolean:u.addAttribute("t","b"),u.leafNode("v",null,c.value?"1":"0");break;case r.ValueType.Error:u.addAttribute("t","e"),u.leafNode("v",null,c.value.error);break;case r.ValueType.String:case r.ValueType.RichText:c.ssId!==void 0?(u.addAttribute("t","s"),u.leafNode("v",null,c.ssId)):c.value&&c.value.richText?(u.addAttribute("t","inlineStr"),u.openNode("is"),c.value.richText.forEach(d=>{this.richTextXForm.render(u,d)}),u.closeNode("is")):(u.addAttribute("t","str"),u.leafNode("v",null,c.value));break;case r.ValueType.Date:u.leafNode("v",null,l.dateToExcel(c.value,c.date1904));break;case r.ValueType.Hyperlink:c.ssId!==void 0?(u.addAttribute("t","s"),u.leafNode("v",null,c.ssId)):(u.addAttribute("t","str"),u.leafNode("v",null,c.text));break;case r.ValueType.Formula:this.renderFormula(u,c);break;case r.ValueType.Merge:}u.closeNode()}}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"c":return this.model={address:u.attributes.r},this.t=u.attributes.t,u.attributes.s&&(this.model.styleId=parseInt(u.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=u.attributes.si,this.model.shareType=u.attributes.t,this.model.ref=u.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){if(this.parser)this.parser.parseText(u);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+u:u;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+u:u:this.model.value=this.model.value?this.model.value+u:u}}parseClose(u){switch(u){case"c":{const{model:c}=this;if(c.formula||c.shareType)c.type=r.ValueType.Formula,c.value&&(this.t==="str"?c.result=l.xmlDecode(c.value):this.t==="b"?c.result=parseInt(c.value,10)!==0:this.t==="e"?c.result={error:c.value}:c.result=parseFloat(c.value),c.value=void 0);else if(c.value!==void 0)switch(this.t){case"s":c.type=r.ValueType.String,c.value=parseInt(c.value,10);break;case"str":c.type=r.ValueType.String,c.value=l.xmlDecode(c.value);break;case"inlineStr":c.type=r.ValueType.String;break;case"b":c.type=r.ValueType.Boolean,c.value=parseInt(c.value,10)!==0;break;case"e":c.type=r.ValueType.Error,c.value={error:c.value};break;default:c.type=r.ValueType.Number,c.value=parseFloat(c.value)}else c.styleId?c.type=r.ValueType.Null:c.type=r.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(u),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(u),!0)}}reconcile(u,c){const d=u.styleId&&c.styles&&c.styles.getStyleModel(u.styleId);switch(d&&(u.style=d),u.styleId!==void 0&&(u.styleId=void 0),u.type){case r.ValueType.String:typeof u.value=="number"&&c.sharedStrings&&(u.value=c.sharedStrings.getString(u.value)),u.value.richText&&(u.type=r.ValueType.RichText);break;case r.ValueType.Number:d&&l.isDateFmt(d.numFmt)&&(u.type=r.ValueType.Date,u.value=l.excelToDate(u.value,c.date1904));break;case r.ValueType.Formula:u.result!==void 0&&d&&l.isDateFmt(d.numFmt)&&(u.result=l.excelToDate(u.result,c.date1904)),u.shareType==="shared"&&(u.ref?c.formulae[u.si]=u.address:(u.sharedFormula=c.formulae[u.si],delete u.shareType),delete u.si)}const b=c.hyperlinkMap[u.address];b&&(u.type===r.ValueType.Formula?(u.text=u.result,u.result=void 0):(u.text=u.value,u.value=void 0),u.type=r.ValueType.Hyperlink,u.hyperlink=b);const g=c.commentsMap&&c.commentsMap[u.address];g&&(u.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{get tag(){return"x14:cfIcon"}render(s,o){s.leafNode(this.tag,{iconSet:o.iconSet,iconId:o.iconId})}parseOpen(s){let{attributes:o}=s;this.model={iconSet:o.iconSet,iconId:l.toIntValue(o.iconId)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],75:[function(e,h,f){const{v4:l}=e("uuid"),s=e("../../base-xform"),o=e("../../composite-xform"),r=e("./databar-ext-xform"),t=e("./icon-set-ext-xform"),n={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class u extends o{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new r,"x14:iconSet":this.iconSetXform=new t}}get tag(){return"x14:cfRule"}static isExt(d){return d.type==="dataBar"?r.isExt(d):!(d.type!=="iconSet"||!d.custom&&!n[d.iconSet])}prepare(d){u.isExt(d)&&(d.x14Id=`{${l()}}`.toUpperCase())}render(d,b){if(u.isExt(b))switch(b.type){case"dataBar":this.renderDataBar(d,b);break;case"iconSet":this.renderIconSet(d,b)}}renderDataBar(d,b){d.openNode(this.tag,{type:"dataBar",id:b.x14Id}),this.databarXform.render(d,b),d.closeNode()}renderIconSet(d,b){d.openNode(this.tag,{type:"iconSet",priority:b.priority,id:b.x14Id||`{${l()}}`}),this.iconSetXform.render(d,b),d.closeNode()}createNewModel(d){let{attributes:b}=d;return{type:b.type,x14Id:b.id,priority:s.toIntValue(b.priority)}}onParserClose(d,b){Object.assign(this.model,b.model)}}h.exports=u},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,h,f){const l=e("../../composite-xform"),s=e("./f-ext-xform");h.exports=class extends l{constructor(){super(),this.map={"xm:f":this.fExtXform=new s}}get tag(){return"x14:cfvo"}render(o,r){o.openNode(this.tag,{type:r.type}),r.value!==void 0&&this.fExtXform.render(o,r.value),o.closeNode()}createNewModel(o){return{type:o.attributes.type}}onParserClose(o,r){switch(o){case"xm:f":this.model.value=r.model?parseFloat(r.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,h,f){const l=e("../../composite-xform"),s=e("./sqref-ext-xform"),o=e("./cf-rule-ext-xform");h.exports=class extends l{constructor(){super(),this.map={"xm:sqref":this.sqRef=new s,"x14:cfRule":this.cfRule=new o}}get tag(){return"x14:conditionalFormatting"}prepare(r,t){r.rules.forEach(n=>{this.cfRule.prepare(n,t)})}render(r,t){t.rules.some(o.isExt)&&(r.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),t.rules.filter(o.isExt).forEach(n=>this.cfRule.render(r,n)),this.sqRef.render(r,t.ref),r.closeNode())}createNewModel(){return{rules:[]}}onParserClose(r,t){switch(r){case"xm:sqref":this.model.ref=t.model;break;case"x14:cfRule":this.model.rules.push(t.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,h,f){const l=e("../../composite-xform"),s=e("./cf-rule-ext-xform"),o=e("./conditional-formatting-ext-xform");h.exports=class extends l{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new o}}get tag(){return"x14:conditionalFormattings"}hasContent(r){return r.hasExtContent===void 0&&(r.hasExtContent=r.some(t=>t.rules.some(s.isExt))),r.hasExtContent}prepare(r,t){r.forEach(n=>{this.cfXform.prepare(n,t)})}render(r,t){this.hasContent(t)&&(r.openNode(this.tag),t.forEach(n=>this.cfXform.render(r,n)),r.closeNode())}createNewModel(){return[]}onParserClose(r,t){this.model.push(t.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,h,f){const l=e("../../base-xform"),s=e("../../composite-xform"),o=e("../../style/color-xform"),r=e("./cfvo-ext-xform");h.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new r,"x14:borderColor":this.borderColorXform=new o("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new o("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new o("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new o("x14:axisColor")}}static isExt(t){return!t.gradient}get tag(){return"x14:dataBar"}render(t,n){t.openNode(this.tag,{minLength:l.toIntAttribute(n.minLength,0,!0),maxLength:l.toIntAttribute(n.maxLength,100,!0),border:l.toBoolAttribute(n.border,!1),gradient:l.toBoolAttribute(n.gradient,!0),negativeBarColorSameAsPositive:l.toBoolAttribute(n.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:l.toBoolAttribute(n.negativeBarBorderColorSameAsPositive,!0),axisPosition:l.toAttribute(n.axisPosition,"auto"),direction:l.toAttribute(n.direction,"leftToRight")}),n.cfvo.forEach(u=>{this.cfvoXform.render(t,u)}),this.borderColorXform.render(t,n.borderColor),this.negativeBorderColorXform.render(t,n.negativeBorderColor),this.negativeFillColorXform.render(t,n.negativeFillColor),this.axisColorXform.render(t,n.axisColor),t.closeNode()}createNewModel(t){let{attributes:n}=t;return{cfvo:[],minLength:l.toIntValue(n.minLength,0),maxLength:l.toIntValue(n.maxLength,100),border:l.toBoolValue(n.border,!1),gradient:l.toBoolValue(n.gradient,!0),negativeBarColorSameAsPositive:l.toBoolValue(n.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:l.toBoolValue(n.negativeBarBorderColorSameAsPositive,!0),axisPosition:l.toStringValue(n.axisPosition,"auto"),direction:l.toStringValue(n.direction,"leftToRight")}}onParserClose(t,n){const[,u]=t.split(":");switch(u){case"cfvo":this.model.cfvo.push(n.model);break;default:this.model[u]=n.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{get tag(){return"xm:f"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],81:[function(e,h,f){const l=e("../../base-xform"),s=e("../../composite-xform"),o=e("./cfvo-ext-xform"),r=e("./cf-icon-ext-xform");h.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new o,"x14:cfIcon":this.cfIconXform=new r}}get tag(){return"x14:iconSet"}render(t,n){t.openNode(this.tag,{iconSet:l.toStringAttribute(n.iconSet),reverse:l.toBoolAttribute(n.reverse,!1),showValue:l.toBoolAttribute(n.showValue,!0),custom:l.toBoolAttribute(n.icons,!1)}),n.cfvo.forEach(u=>{this.cfvoXform.render(t,u)}),n.icons&&n.icons.forEach((u,c)=>{u.iconId=c,this.cfIconXform.render(t,u)}),t.closeNode()}createNewModel(t){let{attributes:n}=t;return{cfvo:[],iconSet:l.toStringValue(n.iconSet,"3TrafficLights"),reverse:l.toBoolValue(n.reverse,!1),showValue:l.toBoolValue(n.showValue,!0)}}onParserClose(t,n){const[,u]=t.split(":");switch(u){case"cfvo":this.model.cfvo.push(n.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(n.model);break;default:this.model[u]=n.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{get tag(){return"xm:sqref"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],83:[function(e,h,f){const l=e("../../base-xform"),s=e("../../composite-xform"),o=e("../../../../doc/range"),r=e("./databar-xform"),t=e("./ext-lst-ref-xform"),n=e("./formula-xform"),u=e("./color-scale-xform"),c=e("./icon-set-xform"),d={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},b=p=>{const{type:x,operator:y}=p;switch(x){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:x};default:return{type:x,operator:y}}};class g extends s{constructor(){super(),this.map={dataBar:this.databarXform=new r,extLst:this.extLstRefXform=new t,formula:this.formulaXform=new n,colorScale:this.colorScaleXform=new u,iconSet:this.iconSetXform=new c}}get tag(){return"cfRule"}static isPrimitive(x){return x.type!=="iconSet"||!x.custom&&!d[x.iconSet]}render(x,y){switch(y.type){case"expression":this.renderExpression(x,y);break;case"cellIs":this.renderCellIs(x,y);break;case"top10":this.renderTop10(x,y);break;case"aboveAverage":this.renderAboveAverage(x,y);break;case"dataBar":this.renderDataBar(x,y);break;case"colorScale":this.renderColorScale(x,y);break;case"iconSet":this.renderIconSet(x,y);break;case"containsText":this.renderText(x,y);break;case"timePeriod":this.renderTimePeriod(x,y)}}renderExpression(x,y){x.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(x,y.formulae[0]),x.closeNode()}renderCellIs(x,y){x.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(v=>{this.formulaXform.render(x,v)}),x.closeNode()}renderTop10(x,y){x.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:l.toBoolAttribute(y.percent,!1),bottom:l.toBoolAttribute(y.bottom,!1),rank:l.toIntValue(y.rank,10,!0)})}renderAboveAverage(x,y){x.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:l.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(x,y){x.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(x,y),this.extLstRefXform.render(x,y),x.closeNode()}renderColorScale(x,y){x.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(x,y),x.closeNode()}renderIconSet(x,y){g.isPrimitive(y)&&(x.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(x,y),x.closeNode())}renderText(x,y){x.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:l.toStringAttribute(y.operator,"containsText")});const v=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];const N=new o(S.ref),{tl:R}=N;switch(S.operator){case"containsText":return`NOT(ISERROR(SEARCH("${S.text}",${R})))`;case"containsBlanks":return`LEN(TRIM(${R}))=0`;case"notContainsBlanks":return`LEN(TRIM(${R}))>0`;case"containsErrors":return`ISERROR(${R})`;case"notContainsErrors":return`NOT(ISERROR(${R}))`;default:return}})(y);v&&this.formulaXform.render(x,v),x.closeNode()}renderTimePeriod(x,y){x.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});const v=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];const N=new o(S.ref),{tl:R}=N;switch(S.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${R},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${R},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${R},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${R},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${R},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${R},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${R},1)=TODAY()-1`;case"today":return`FLOOR(${R},1)=TODAY()`;case"tomorrow":return`FLOOR(${R},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${R},1)<=6,FLOOR(${R},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${R})=MONTH(EDATE(TODAY(),0-1)),YEAR(${R})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${R})=MONTH(TODAY()),YEAR(${R})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${R})=MONTH(EDATE(TODAY(),0+1)),YEAR(${R})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);v&&this.formulaXform.render(x,v),x.closeNode()}createNewModel(x){let{attributes:y}=x;return{...b(y),dxfId:l.toIntValue(y.dxfId),priority:l.toIntValue(y.priority),timePeriod:y.timePeriod,percent:l.toBoolValue(y.percent),bottom:l.toBoolValue(y.bottom),rank:l.toIntValue(y.rank),aboveAverage:l.toBoolValue(y.aboveAverage)}}onParserClose(x,y){switch(x){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}h.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{get tag(){return"cfvo"}render(s,o){s.leafNode(this.tag,{type:o.type,val:o.value})}parseOpen(s){this.model={type:s.attributes.type,value:l.toFloatValue(s.attributes.val)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],85:[function(e,h,f){const l=e("../../composite-xform"),s=e("../../style/color-xform"),o=e("./cfvo-xform");h.exports=class extends l{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new s}}get tag(){return"colorScale"}render(r,t){r.openNode(this.tag),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),t.color.forEach(n=>{this.colorXform.render(r,n)}),r.closeNode()}createNewModel(r){return{cfvo:[],color:[]}}onParserClose(r,t){this.model[r].push(t.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,h,f){const l=e("../../composite-xform"),s=e("./cf-rule-xform");h.exports=class extends l{constructor(){super(),this.map={cfRule:new s}}get tag(){return"conditionalFormatting"}render(o,r){r.rules.some(s.isPrimitive)&&(o.openNode(this.tag,{sqref:r.ref}),r.rules.forEach(t=>{s.isPrimitive(t)&&(t.ref=r.ref,this.map.cfRule.render(o,t))}),o.closeNode())}createNewModel(o){let{attributes:r}=o;return{ref:r.sqref,rules:[]}}onParserClose(o,r){this.model.rules.push(r.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,h,f){const l=e("../../base-xform"),s=e("./conditional-formatting-xform");h.exports=class extends l{constructor(){super(),this.cfXform=new s}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(o,r){let t=o.reduce((n,u)=>Math.max(n,...u.rules.map(c=>c.priority||0)),1);o.forEach(n=>{n.rules.forEach(u=>{u.priority||(u.priority=t++),u.style&&(u.dxfId=r.styles.addDxfStyle(u.style))})})}render(o,r){r.forEach(t=>{this.cfXform.render(o,t)})}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(o),!0;default:return!1}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){return!!this.parser&&(!!this.parser.parseClose(o)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(o,r){o.forEach(t=>{t.rules.forEach(n=>{n.dxfId!==void 0&&(n.style=r.styles.getDxfStyle(n.dxfId),delete n.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,h,f){const l=e("../../composite-xform"),s=e("../../style/color-xform"),o=e("./cfvo-xform");h.exports=class extends l{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new s}}get tag(){return"dataBar"}render(r,t){r.openNode(this.tag),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),this.colorXform.render(r,t.color),r.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(r,t){switch(r){case"cfvo":this.model.cfvo.push(t.model);break;case"color":this.model.color=t.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,h,f){const l=e("../../base-xform"),s=e("../../composite-xform");class o extends l{get tag(){return"x14:id"}render(n,u){n.leafNode(this.tag,null,u)}parseOpen(){this.model=""}parseText(n){this.model+=n}parseClose(n){return n!==this.tag}}class r extends s{constructor(){super(),this.map={"x14:id":this.idXform=new o}}get tag(){return"ext"}render(n,u){n.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(n,u.x14Id),n.closeNode()}createNewModel(){return{}}onParserClose(n,u){this.model.x14Id=u.model}}h.exports=class extends s{constructor(){super(),this.map={ext:new r}}get tag(){return"extLst"}render(t,n){t.openNode(this.tag),this.map.ext.render(t,n),t.closeNode()}createNewModel(){return{}}onParserClose(t,n){Object.assign(this.model,n.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,h,f){const l=e("../../base-xform");h.exports=class extends l{get tag(){return"formula"}render(s,o){s.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],91:[function(e,h,f){const l=e("../../base-xform"),s=e("../../composite-xform"),o=e("./cfvo-xform");h.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new o}}get tag(){return"iconSet"}render(r,t){r.openNode(this.tag,{iconSet:l.toStringAttribute(t.iconSet,"3TrafficLights"),reverse:l.toBoolAttribute(t.reverse,!1),showValue:l.toBoolAttribute(t.showValue,!0)}),t.cfvo.forEach(n=>{this.cfvoXform.render(r,n)}),r.closeNode()}createNewModel(r){let{attributes:t}=r;return{iconSet:l.toStringValue(t.iconSet,"3TrafficLights"),reverse:l.toBoolValue(t.reverse),showValue:l.toBoolValue(t.showValue),cfvo:[]}}onParserClose(r,t){this.model[r].push(t.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,h,f){const l=e("../../../utils/utils"),s=e("../base-xform");h.exports=class extends s{get tag(){return"col"}prepare(o,r){const t=r.styles.addStyleModel(o.style||{});t&&(o.styleId=t)}render(o,r){o.openNode("col"),o.addAttribute("min",r.min),o.addAttribute("max",r.max),r.width&&o.addAttribute("width",r.width),r.styleId&&o.addAttribute("style",r.styleId),r.hidden&&o.addAttribute("hidden","1"),r.bestFit&&o.addAttribute("bestFit","1"),r.outlineLevel&&o.addAttribute("outlineLevel",r.outlineLevel),r.collapsed&&o.addAttribute("collapsed","1"),o.addAttribute("customWidth","1"),o.closeNode()}parseOpen(o){if(o.name==="col"){const r=this.model={min:parseInt(o.attributes.min||"0",10),max:parseInt(o.attributes.max||"0",10),width:o.attributes.width===void 0?void 0:parseFloat(o.attributes.width||"0")};return o.attributes.style&&(r.styleId=parseInt(o.attributes.style,10)),l.parseBoolean(o.attributes.hidden)&&(r.hidden=!0),l.parseBoolean(o.attributes.bestFit)&&(r.bestFit=!0),o.attributes.outlineLevel&&(r.outlineLevel=parseInt(o.attributes.outlineLevel,10)),l.parseBoolean(o.attributes.collapsed)&&(r.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(o,r){o.styleId&&(o.style=r.styles.getStyleModel(o.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../../../utils/utils"),o=e("../../../utils/col-cache"),r=e("../base-xform"),t=e("../../../doc/range");function n(c,d,b,g){const p=d[b];p!==void 0?c[b]=p:g!==void 0&&(c[b]=g)}function u(c,d,b,g){const p=d[b];p!==void 0&&(c[b]=s.parseBoolean(p))}h.exports=class extends r{get tag(){return"dataValidations"}render(c,d){const b=(function(g){const p=l.map(g,(v,S)=>({address:S,dataValidation:v,marked:!1})).sort((v,S)=>l.strcmp(v.address,S.address)),x=l.keyBy(p,"address"),y=(v,S,N)=>{for(let R=0;R<S;R++){const B=o.encodeAddress(v.row+R,N);if(!g[B]||!l.isEqual(g[v.address],g[B]))return!1}return!0};return p.map(v=>{if(!v.marked){const S=o.decodeEx(v.address);if(S.dimensions)return x[S.dimensions].marked=!0,{...v.dataValidation,sqref:v.address};let N=1,R=o.encodeAddress(S.row+N,S.col);for(;g[R]&&l.isEqual(v.dataValidation,g[R]);)N++,R=o.encodeAddress(S.row+N,S.col);let B=1;for(;y(S,N,S.col+B);)B++;for(let M=0;M<N;M++)for(let F=0;F<B;F++)R=o.encodeAddress(S.row+M,S.col+F),x[R].marked=!0;if(N>1||B>1){const M=S.row+(N-1),F=S.col+(B-1);return{...v.dataValidation,sqref:`${v.address}:${o.encodeAddress(M,F)}`}}return{...v.dataValidation,sqref:v.address}}return null}).filter(Boolean)})(d);b.length&&(c.openNode("dataValidations",{count:b.length}),b.forEach(g=>{c.openNode("dataValidation"),g.type!=="any"&&(c.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&c.addAttribute("operator",g.operator),g.allowBlank&&c.addAttribute("allowBlank","1")),g.showInputMessage&&c.addAttribute("showInputMessage","1"),g.promptTitle&&c.addAttribute("promptTitle",g.promptTitle),g.prompt&&c.addAttribute("prompt",g.prompt),g.showErrorMessage&&c.addAttribute("showErrorMessage","1"),g.errorStyle&&c.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&c.addAttribute("errorTitle",g.errorTitle),g.error&&c.addAttribute("error",g.error),c.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((p,x)=>{c.openNode("formula"+(x+1)),g.type==="date"?c.writeText(s.dateToExcel(new Date(p))):c.writeText(p),c.closeNode()}),c.closeNode()}),c.closeNode())}parseOpen(c){switch(c.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=c.attributes.sqref;const d={type:c.attributes.type||"any",formulae:[]};switch(c.attributes.type&&u(d,c.attributes,"allowBlank"),u(d,c.attributes,"showInputMessage"),u(d,c.attributes,"showErrorMessage"),d.type){case"any":case"list":case"custom":break;default:n(d,c.attributes,"operator","between")}return n(d,c.attributes,"promptTitle"),n(d,c.attributes,"prompt"),n(d,c.attributes,"errorStyle"),n(d,c.attributes,"errorTitle"),n(d,c.attributes,"error"),this._dataValidation=d,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(c){this._formula&&this._formula.push(c)}parseClose(c){switch(c){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(d=>{d.includes(":")?new t(d).forEachAddress(b=>{this.model[b]=this._dataValidation}):this.model[d]=this._dataValidation}),!0;case"formula1":case"formula2":{let d=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":d=parseInt(d,10);break;case"decimal":d=parseFloat(d);break;case"date":d=s.excelToDate(parseFloat(d))}return this._dataValidation.formulae.push(d),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"dimension"}render(s,o){o&&s.leafNode("dimension",{ref:o})}parseOpen(s){return s.name==="dimension"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"drawing"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,h,f){const l=e("../composite-xform"),s=e("./cf-ext/conditional-formattings-ext-xform");class o extends l{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new s}}get tag(){return"ext"}hasContent(t){return this.conditionalFormattings.hasContent(t.conditionalFormattings)}prepare(t,n){this.conditionalFormattings.prepare(t.conditionalFormattings,n)}render(t,n){t.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(t,n.conditionalFormattings),t.closeNode()}createNewModel(){return{}}onParserClose(t,n){this.model[t]=n.model}}h.exports=class extends l{constructor(){super(),this.map={ext:this.ext=new o}}get tag(){return"extLst"}prepare(r,t){this.ext.prepare(r,t)}hasContent(r){return this.ext.hasContent(r)}render(r,t){this.hasContent(t)&&(r.openNode("extLst"),this.ext.render(r,t),r.closeNode())}createNewModel(){return{}}onParserClose(r,t){Object.assign(this.model,t.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"headerFooter"}render(s,o){if(o){s.addRollback();let r=!1;s.openNode("headerFooter"),o.differentFirst&&(s.addAttribute("differentFirst","1"),r=!0),o.differentOddEven&&(s.addAttribute("differentOddEven","1"),r=!0),o.oddHeader&&typeof o.oddHeader=="string"&&(s.leafNode("oddHeader",null,o.oddHeader),r=!0),o.oddFooter&&typeof o.oddFooter=="string"&&(s.leafNode("oddFooter",null,o.oddFooter),r=!0),o.evenHeader&&typeof o.evenHeader=="string"&&(s.leafNode("evenHeader",null,o.evenHeader),r=!0),o.evenFooter&&typeof o.evenFooter=="string"&&(s.leafNode("evenFooter",null,o.evenFooter),r=!0),o.firstHeader&&typeof o.firstHeader=="string"&&(s.leafNode("firstHeader",null,o.firstHeader),r=!0),o.firstFooter&&typeof o.firstFooter=="string"&&(s.leafNode("firstFooter",null,o.firstFooter),r=!0),r?(s.closeNode(),s.commit()):s.rollback()}}parseOpen(s){switch(s.name){case"headerFooter":return this.model={},s.attributes.differentFirst&&(this.model.differentFirst=parseInt(s.attributes.differentFirst,0)===1),s.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(s.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(s){switch(this.currentNode){case"oddHeader":this.model.oddHeader=s;break;case"oddFooter":this.model.oddFooter=s;break;case"evenHeader":this.model.evenHeader=s;break;case"evenFooter":this.model.evenFooter=s;break;case"firstHeader":this.model.firstHeader=s;break;case"firstFooter":this.model.firstFooter=s}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"hyperlink"}render(s,o){this.isInternalLink(o)?s.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip,location:o.target}):s.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip})}parseOpen(s){return s.name==="hyperlink"&&(this.model={address:s.attributes.ref,rId:s.attributes["r:id"],tooltip:s.attributes.tooltip},s.attributes.location&&(this.model.target=s.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(s){return s.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(s.target)}}},{"../base-xform":32}],99:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"mergeCell"}render(s,o){s.leafNode("mergeCell",{ref:o})}parseOpen(s){return s.name==="mergeCell"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../../../doc/range"),o=e("../../../utils/col-cache"),r=e("../../../doc/enums");h.exports=class{constructor(){this.merges={}}add(t){if(this.merges[t.master])this.merges[t.master].expandToAddress(t.address);else{const n=`${t.master}:${t.address}`;this.merges[t.master]=new s(n)}}get mergeCells(){return l.map(this.merges,t=>t.range)}reconcile(t,n){l.each(t,u=>{const c=o.decode(u);for(let d=c.top;d<=c.bottom;d++){const b=n[d-1];for(let g=c.left;g<=c.right;g++){const p=b.cells[g-1];p?p.type===r.ValueType.Merge&&(p.master=c.tl):b.cells[g]={type:r.ValueType.Null,address:o.encodeAddress(d,g)}}}})}getMasterAddress(t){const n=this.hash[t];return n&&n.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,h,f){const l=e("../base-xform"),s=o=>o!==void 0;h.exports=class extends l{get tag(){return"outlinePr"}render(o,r){return!(!r||!s(r.summaryBelow)&&!s(r.summaryRight))&&(o.leafNode(this.tag,{summaryBelow:s(r.summaryBelow)?Number(r.summaryBelow):void 0,summaryRight:s(r.summaryRight)?Number(r.summaryRight):void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={summaryBelow:s(o.attributes.summaryBelow)?!!Number(o.attributes.summaryBelow):void 0,summaryRight:s(o.attributes.summaryRight)?!!Number(o.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"brk"}render(s,o){s.leafNode("brk",o)}parseOpen(s){return s.name==="brk"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../base-xform");h.exports=class extends s{get tag(){return"pageMargins"}render(o,r){if(r){const t={left:r.left,right:r.right,top:r.top,bottom:r.bottom,header:r.header,footer:r.footer};l.some(t,n=>n!==void 0)&&o.leafNode(this.tag,t)}}parseOpen(o){switch(o.name){case this.tag:return this.model={left:parseFloat(o.attributes.left||.7),right:parseFloat(o.attributes.right||.7),top:parseFloat(o.attributes.top||.75),bottom:parseFloat(o.attributes.bottom||.75),header:parseFloat(o.attributes.header||.3),footer:parseFloat(o.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"pageSetUpPr"}render(s,o){return!(!o||!o.fitToPage)&&(s.leafNode(this.tag,{fitToPage:o.fitToPage?"1":void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={fitToPage:s.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../base-xform");function o(u){return u?"1":void 0}function r(u){switch(u){case"overThenDown":return u;default:return}}function t(u){switch(u){case"atEnd":case"asDisplyed":return u;default:return}}function n(u){switch(u){case"dash":case"blank":case"NA":return u;default:return}}h.exports=class extends s{get tag(){return"pageSetup"}render(u,c){if(c){const d={paperSize:c.paperSize,orientation:c.orientation,horizontalDpi:c.horizontalDpi,verticalDpi:c.verticalDpi,pageOrder:r(c.pageOrder),blackAndWhite:o(c.blackAndWhite),draft:o(c.draft),cellComments:t(c.cellComments),errors:n(c.errors),scale:c.scale,fitToWidth:c.fitToWidth,fitToHeight:c.fitToHeight,firstPageNumber:c.firstPageNumber,useFirstPageNumber:o(c.firstPageNumber),usePrinterDefaults:o(c.usePrinterDefaults),copies:c.copies};l.some(d,b=>b!==void 0)&&u.leafNode(this.tag,d)}}parseOpen(u){switch(u.name){case this.tag:return this.model={paperSize:(c=u.attributes.paperSize,c!==void 0?parseInt(c,10):void 0),orientation:u.attributes.orientation||"portrait",horizontalDpi:parseInt(u.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(u.attributes.verticalDpi||"4294967295",10),pageOrder:u.attributes.pageOrder||"downThenOver",blackAndWhite:u.attributes.blackAndWhite==="1",draft:u.attributes.draft==="1",cellComments:u.attributes.cellComments||"None",errors:u.attributes.errors||"displayed",scale:parseInt(u.attributes.scale||"100",10),fitToWidth:parseInt(u.attributes.fitToWidth||"1",10),fitToHeight:parseInt(u.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(u.attributes.firstPageNumber||"1",10),useFirstPageNumber:u.attributes.useFirstPageNumber==="1",usePrinterDefaults:u.attributes.usePrinterDefaults==="1",copies:parseInt(u.attributes.copies||"1",10)},!0;default:return!1}var c}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"picture"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../base-xform");function o(r){return r?"1":void 0}h.exports=class extends s{get tag(){return"printOptions"}render(r,t){if(t){const n={headings:o(t.showRowColHeaders),gridLines:o(t.showGridLines),horizontalCentered:o(t.horizontalCentered),verticalCentered:o(t.verticalCentered)};l.some(n,u=>u!==void 0)&&r.leafNode(this.tag,n)}}parseOpen(r){switch(r.name){case this.tag:return this.model={showRowColHeaders:r.attributes.headings==="1",showGridLines:r.attributes.gridLines==="1",horizontalCentered:r.attributes.horizontalCentered==="1",verticalCentered:r.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,h,f){const l=e("./page-breaks-xform"),s=e("../list-xform");h.exports=class extends s{constructor(){super({tag:"rowBreaks",count:!0,childXform:new l})}render(o,r){if(r&&r.length){o.openNode(this.tag,this.$),this.count&&(o.addAttribute(this.$count,r.length),o.addAttribute("manualBreakCount",r.length));const{childXform:t}=this;r.forEach(n=>{t.render(o,n)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,h,f){const l=e("../base-xform"),s=e("../../../utils/utils"),o=e("./cell-xform");h.exports=class extends l{constructor(r){super(),this.maxItems=r&&r.maxItems,this.map={c:new o}}get tag(){return"row"}prepare(r,t){const n=t.styles.addStyleModel(r.style);n&&(r.styleId=n);const u=this.map.c;r.cells.forEach(c=>{u.prepare(c,t)})}render(r,t,n){r.openNode("row"),r.addAttribute("r",t.number),t.height&&(r.addAttribute("ht",t.height),r.addAttribute("customHeight","1")),t.hidden&&r.addAttribute("hidden","1"),t.min>0&&t.max>0&&t.min<=t.max&&r.addAttribute("spans",`${t.min}:${t.max}`),t.styleId&&(r.addAttribute("s",t.styleId),r.addAttribute("customFormat","1")),r.addAttribute("x14ac:dyDescent","0.25"),t.outlineLevel&&r.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&r.addAttribute("collapsed","1");const u=this.map.c;t.cells.forEach(c=>{u.render(r,c,n)}),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;if(r.name==="row"){this.numRowsSeen+=1;const t=r.attributes.spans?r.attributes.spans.split(":").map(u=>parseInt(u,10)):[void 0,void 0],n=this.model={number:parseInt(r.attributes.r,10),min:t[0],max:t[1],cells:[]};return r.attributes.s&&(n.styleId=parseInt(r.attributes.s,10)),s.parseBoolean(r.attributes.hidden)&&(n.hidden=!0),s.parseBoolean(r.attributes.bestFit)&&(n.bestFit=!0),r.attributes.ht&&(n.height=parseFloat(r.attributes.ht)),r.attributes.outlineLevel&&(n.outlineLevel=parseInt(r.attributes.outlineLevel,10)),s.parseBoolean(r.attributes.collapsed)&&(n.collapsed=!0),!0}return this.parser=this.map[r.name],!!this.parser&&(this.parser.parseOpen(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(r,t){r.style=r.styleId?t.styles.getStyleModel(r.styleId):{},r.styleId!==void 0&&(r.styleId=void 0);const n=this.map.c;r.cells.forEach(u=>{n.reconcile(u,t)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../base-xform");h.exports=class extends s{get tag(){return"sheetFormatPr"}render(o,r){if(r){const t={defaultRowHeight:r.defaultRowHeight,outlineLevelRow:r.outlineLevelRow,outlineLevelCol:r.outlineLevelCol,"x14ac:dyDescent":r.dyDescent};r.defaultColWidth&&(t.defaultColWidth=r.defaultColWidth),r.defaultRowHeight&&r.defaultRowHeight===15||(t.customHeight="1"),l.some(t,n=>n!==void 0)&&o.leafNode("sheetFormatPr",t)}}parseOpen(o){return o.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(o.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(o.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(o.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(o.attributes.outlineLevelCol||"0",10)},o.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(o.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,h,f){const l=e("../base-xform"),s=e("../style/color-xform"),o=e("./page-setup-properties-xform"),r=e("./outline-properties-xform");h.exports=class extends l{constructor(){super(),this.map={tabColor:new s("tabColor"),pageSetUpPr:new o,outlinePr:new r}}get tag(){return"sheetPr"}render(t,n){if(n){t.addRollback(),t.openNode("sheetPr");let u=!1;u=this.map.tabColor.render(t,n.tabColor)||u,u=this.map.pageSetUpPr.render(t,n.pageSetup)||u,u=this.map.outlinePr.render(t,n.outlineProperties)||u,u?(t.closeNode(),t.commit()):t.rollback()}}parseOpen(t){return this.parser?(this.parser.parseOpen(t),!0):t.name===this.tag?(this.reset(),!0):!!this.map[t.name]&&(this.parser=this.map[t.name],this.parser.parseOpen(t),!0)}parseText(t){return!!this.parser&&(this.parser.parseText(t),!0)}parseClose(t){return this.parser?(this.parser.parseClose(t)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../base-xform");function o(t,n){return t?n:void 0}function r(t,n){return t===n||void 0}h.exports=class extends s{get tag(){return"sheetProtection"}render(t,n){if(n){const u={sheet:o(n.sheet,"1"),selectLockedCells:n.selectLockedCells===!1?"1":void 0,selectUnlockedCells:n.selectUnlockedCells===!1?"1":void 0,formatCells:o(n.formatCells,"0"),formatColumns:o(n.formatColumns,"0"),formatRows:o(n.formatRows,"0"),insertColumns:o(n.insertColumns,"0"),insertRows:o(n.insertRows,"0"),insertHyperlinks:o(n.insertHyperlinks,"0"),deleteColumns:o(n.deleteColumns,"0"),deleteRows:o(n.deleteRows,"0"),sort:o(n.sort,"0"),autoFilter:o(n.autoFilter,"0"),pivotTables:o(n.pivotTables,"0")};n.sheet&&(u.algorithmName=n.algorithmName,u.hashValue=n.hashValue,u.saltValue=n.saltValue,u.spinCount=n.spinCount,u.objects=o(n.objects===!1,"1"),u.scenarios=o(n.scenarios===!1,"1")),l.some(u,c=>c!==void 0)&&t.leafNode(this.tag,u)}}parseOpen(t){switch(t.name){case this.tag:return this.model={sheet:r(t.attributes.sheet,"1"),objects:t.attributes.objects!=="1"&&void 0,scenarios:t.attributes.scenarios!=="1"&&void 0,selectLockedCells:t.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:t.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:r(t.attributes.formatCells,"0"),formatColumns:r(t.attributes.formatColumns,"0"),formatRows:r(t.attributes.formatRows,"0"),insertColumns:r(t.attributes.insertColumns,"0"),insertRows:r(t.attributes.insertRows,"0"),insertHyperlinks:r(t.attributes.insertHyperlinks,"0"),deleteColumns:r(t.attributes.deleteColumns,"0"),deleteRows:r(t.attributes.deleteRows,"0"),sort:r(t.attributes.sort,"0"),autoFilter:r(t.attributes.autoFilter,"0"),pivotTables:r(t.attributes.pivotTables,"0")},t.attributes.algorithmName&&(this.model.algorithmName=t.attributes.algorithmName,this.model.hashValue=t.attributes.hashValue,this.model.saltValue=t.attributes.saltValue,this.model.spinCount=parseInt(t.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,h,f){const l=e("../../../utils/col-cache"),s=e("../base-xform"),o={frozen:"frozen",frozenSplit:"frozen",split:"split"};h.exports=class extends s{get tag(){return"sheetView"}prepare(r){switch(r.state){case"frozen":case"split":break;default:r.state="normal"}}render(r,t){r.openNode("sheetView",{workbookViewId:t.workbookViewId||0});const n=function(g,p,x){x&&r.addAttribute(g,p)};let u,c,d,b;switch(n("rightToLeft","1",t.rightToLeft===!0),n("tabSelected","1",t.tabSelected),n("showRuler","0",t.showRuler===!1),n("showRowColHeaders","0",t.showRowColHeaders===!1),n("showGridLines","0",t.showGridLines===!1),n("zoomScale",t.zoomScale,t.zoomScale),n("zoomScaleNormal",t.zoomScaleNormal,t.zoomScaleNormal),n("view",t.style,t.style),t.state){case"frozen":c=t.xSplit||0,d=t.ySplit||0,u=t.topLeftCell||l.getAddress(d+1,c+1).address,b=(t.xSplit&&t.ySplit?"bottomRight":t.xSplit&&"topRight")||"bottomLeft",r.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:u,activePane:b,state:"frozen"}),r.leafNode("selection",{pane:b,activeCell:t.activeCell,sqref:t.activeCell});break;case"split":t.activePane==="topLeft"&&(t.activePane=void 0),r.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:t.topLeftCell,activePane:t.activePane}),r.leafNode("selection",{pane:t.activePane,activeCell:t.activeCell,sqref:t.activeCell});break;case"normal":t.activeCell&&r.leafNode("selection",{activeCell:t.activeCell,sqref:t.activeCell})}r.closeNode()}parseOpen(r){switch(r.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(r.attributes.workbookViewId,10),rightToLeft:r.attributes.rightToLeft==="1",tabSelected:r.attributes.tabSelected==="1",showRuler:r.attributes.showRuler!=="0",showRowColHeaders:r.attributes.showRowColHeaders!=="0",showGridLines:r.attributes.showGridLines!=="0",zoomScale:parseInt(r.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(r.attributes.zoomScaleNormal||"100",10),style:r.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(r.attributes.xSplit||"0",10),ySplit:parseInt(r.attributes.ySplit||"0",10),topLeftCell:r.attributes.topLeftCell,activePane:r.attributes.activePane||"topLeft",state:r.attributes.state},!0;case"selection":{const t=r.attributes.pane||"topLeft";return this.selections[t]={pane:t,activeCell:r.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(r){let t,n;switch(r){case"sheetView":return this.sheetView&&this.pane?(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:o[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(t.activePane=this.pane.activePane),n=this.selections[this.pane.activePane],n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)):(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},n=this.selections.topLeft,n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"tablePart"}render(s,o){o&&s.leafNode(this.tag,{"r:id":o.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),r=e("../../rel-type"),t=e("./merges"),n=e("../base-xform"),u=e("../list-xform"),c=e("./row-xform"),d=e("./col-xform"),b=e("./dimension-xform"),g=e("./hyperlink-xform"),p=e("./merge-cell-xform"),x=e("./data-validations-xform"),y=e("./sheet-properties-xform"),v=e("./sheet-format-properties-xform"),S=e("./sheet-view-xform"),N=e("./sheet-protection-xform"),R=e("./page-margins-xform"),B=e("./page-setup-xform"),M=e("./print-options-xform"),F=e("./auto-filter-xform"),q=e("./picture-xform"),V=e("./drawing-xform"),O=e("./table-part-xform"),T=e("./row-breaks-xform"),A=e("./header-footer-xform"),C=e("./cf/conditional-formattings-xform"),w=e("./ext-lst-xform"),_=(k,E)=>{if(!E||!E.length)return k;if(!k||!k.length)return E;const I={},D={};return k.forEach(X=>{I[X.ref]=X,X.rules.forEach(G=>{const{x14Id:K}=G;K&&(D[K]=G)})}),E.forEach(X=>{X.rules.forEach(G=>{const K=D[G.x14Id];K?((U,J)=>{Object.keys(J).forEach($=>{const L=U[$],W=J[$];L===void 0&&W!==void 0&&(U[$]=W)})})(K,G):I[X.ref]?I[X.ref].rules.push(G):k.push({ref:X.ref,rules:[G]})})}),k};class j extends n{constructor(E){super();const{maxRows:I,maxCols:D,ignoreNodes:X}=E||{};this.ignoreNodes=X||[],this.map={sheetPr:new y,dimension:new b,sheetViews:new u({tag:"sheetViews",count:!1,childXform:new S}),sheetFormatPr:new v,cols:new u({tag:"cols",count:!1,childXform:new d}),sheetData:new u({tag:"sheetData",count:!1,empty:!0,childXform:new c({maxItems:D}),maxItems:I}),autoFilter:new F,mergeCells:new u({tag:"mergeCells",count:!0,childXform:new p}),rowBreaks:new T,hyperlinks:new u({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new R,dataValidations:new x,pageSetup:new B,headerFooter:new A,printOptions:new M,picture:new q,drawing:new V,sheetProtection:new N,tableParts:new u({tag:"tableParts",count:!0,childXform:new O}),conditionalFormatting:new C,extLst:new w}}prepare(E,I){I.merges=new t,E.hyperlinks=I.hyperlinks=[],E.comments=I.comments=[],I.formulae={},I.siFormulae=0,this.map.cols.prepare(E.cols,I),this.map.sheetData.prepare(E.rows,I),this.map.conditionalFormatting.prepare(E.conditionalFormattings,I),E.mergeCells=I.merges.mergeCells;const D=E.rels=[];function X(U){return"rId"+(U.length+1)}if(E.hyperlinks.forEach(U=>{const J=X(D);U.rId=J,D.push({Id:J,Type:r.Hyperlink,Target:U.target,TargetMode:"External"})}),E.comments.length>0){const U={Id:X(D),Type:r.Comments,Target:`../comments${E.id}.xml`};D.push(U);const J={Id:X(D),Type:r.VmlDrawing,Target:`../drawings/vmlDrawing${E.id}.vml`};D.push(J),E.comments.forEach($=>{$.refAddress=s.decodeAddress($.ref)}),I.commentRefs.push({commentName:"comments"+E.id,vmlDrawing:"vmlDrawing"+E.id})}const G=[];let K;E.media.forEach(U=>{if(U.type==="background"){const J=X(D);K=I.media[U.imageId],D.push({Id:J,Type:r.Image,Target:`../media/${K.name}.${K.extension}`}),E.background={rId:J},E.image=I.media[U.imageId]}else if(U.type==="image"){let{drawing:J}=E;K=I.media[U.imageId],J||(J=E.drawing={rId:X(D),name:"drawing"+ ++I.drawingsCount,anchors:[],rels:[]},I.drawings.push(J),D.push({Id:J.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${J.name}.xml`}));let $=this.preImageId===U.imageId?G[U.imageId]:G[J.rels.length];$||($=X(J.rels),G[J.rels.length]=$,J.rels.push({Id:$,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${K.name}.${K.extension}`}));const L={picture:{rId:$},range:U.range};if(U.hyperlinks&&U.hyperlinks.hyperlink){const W=X(J.rels);G[J.rels.length]=W,L.picture.hyperlinks={tooltip:U.hyperlinks.tooltip,rId:W},J.rels.push({Id:W,Type:r.Hyperlink,Target:U.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=U.imageId,J.anchors.push(L)}}),E.tables.forEach(U=>{const J=X(D);U.rId=J,D.push({Id:J,Type:r.Table,Target:"../tables/"+U.target}),U.columns.forEach($=>{const{style:L}=$;L&&($.dxfId=I.styles.addDxfStyle(L))})}),this.map.extLst.prepare(E,I)}render(E,I){E.openXml(o.StdDocAttributes),E.openNode("worksheet",j.WORKSHEET_ATTRIBUTES);const D=I.properties?{defaultRowHeight:I.properties.defaultRowHeight,dyDescent:I.properties.dyDescent,outlineLevelCol:I.properties.outlineLevelCol,outlineLevelRow:I.properties.outlineLevelRow}:void 0;I.properties&&I.properties.defaultColWidth&&(D.defaultColWidth=I.properties.defaultColWidth);const X={outlineProperties:I.properties&&I.properties.outlineProperties,tabColor:I.properties&&I.properties.tabColor,pageSetup:I.pageSetup&&I.pageSetup.fitToPage?{fitToPage:I.pageSetup.fitToPage}:void 0},G=I.pageSetup&&I.pageSetup.margins,K={showRowColHeaders:I.pageSetup&&I.pageSetup.showRowColHeaders,showGridLines:I.pageSetup&&I.pageSetup.showGridLines,horizontalCentered:I.pageSetup&&I.pageSetup.horizontalCentered,verticalCentered:I.pageSetup&&I.pageSetup.verticalCentered},U=I.sheetProtection;this.map.sheetPr.render(E,X),this.map.dimension.render(E,I.dimensions),this.map.sheetViews.render(E,I.views),this.map.sheetFormatPr.render(E,D),this.map.cols.render(E,I.cols),this.map.sheetData.render(E,I.rows),this.map.sheetProtection.render(E,U),this.map.autoFilter.render(E,I.autoFilter),this.map.mergeCells.render(E,I.mergeCells),this.map.conditionalFormatting.render(E,I.conditionalFormattings),this.map.dataValidations.render(E,I.dataValidations),this.map.hyperlinks.render(E,I.hyperlinks),this.map.printOptions.render(E,K),this.map.pageMargins.render(E,G),this.map.pageSetup.render(E,I.pageSetup),this.map.headerFooter.render(E,I.headerFooter),this.map.rowBreaks.render(E,I.rowBreaks),this.map.drawing.render(E,I.drawing),this.map.picture.render(E,I.background),this.map.tableParts.render(E,I.tables),this.map.extLst.render(E,I),I.rels&&I.rels.forEach(J=>{J.Type===r.VmlDrawing&&E.leafNode("legacyDrawing",{"r:id":J.Id})}),E.closeNode()}parseOpen(E){return this.parser?(this.parser.parseOpen(E),!0):E.name==="worksheet"?(l.each(this.map,I=>{I.reset()}),!0):(this.map[E.name]&&!this.ignoreNodes.includes(E.name)&&(this.parser=this.map[E.name],this.parser.parseOpen(E)),!0)}parseText(E){this.parser&&this.parser.parseText(E)}parseClose(E){if(this.parser)return this.parser.parseClose(E)||(this.parser=void 0),!0;switch(E){case"worksheet":{const I=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(I.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(I.outlineProperties=this.map.sheetPr.model.outlineProperties);const D={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},X=Object.assign(D,this.map.pageSetup.model,this.map.printOptions.model),G=_(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:I,views:this.map.sheetViews.model,pageSetup:X,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:G},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(E,I){const D=(E.relationships||[]).reduce((G,K)=>{if(G[K.Id]=K,K.Type===r.Comments&&(E.comments=I.comments[K.Target].comments),K.Type===r.VmlDrawing&&E.comments&&E.comments.length){const U=I.vmlDrawings[K.Target].comments;E.comments.forEach((J,$)=>{J.note=Object.assign({},J.note,U[$])})}return G},{});if(I.commentsMap=(E.comments||[]).reduce((G,K)=>(K.ref&&(G[K.ref]=K),G),{}),I.hyperlinkMap=(E.hyperlinks||[]).reduce((G,K)=>(K.rId&&(G[K.address]=D[K.rId].Target),G),{}),I.formulae={},E.rows=E.rows&&E.rows.filter(Boolean)||[],E.rows.forEach(G=>{G.cells=G.cells&&G.cells.filter(Boolean)||[]}),this.map.cols.reconcile(E.cols,I),this.map.sheetData.reconcile(E.rows,I),this.map.conditionalFormatting.reconcile(E.conditionalFormattings,I),E.media=[],E.drawing){const G=D[E.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(G){const K=G[1];I.drawings[K].anchors.forEach(U=>{if(U.medium){const J={type:"image",imageId:U.medium.index,range:U.range,hyperlinks:U.picture.hyperlinks};E.media.push(J)}})}}const X=E.background&&D[E.background.rId];if(X){const G=X.Target.split("/media/")[1],K=I.mediaIndex&&I.mediaIndex[G];K!==void 0&&E.media.push({type:"background",imageId:K})}E.tables=(E.tables||[]).map(G=>{const K=D[G.rId];return I.tables[K.Target]}),delete E.relationships,delete E.hyperlinks,delete E.comments}}j.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},h.exports=j},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.attr=s.attr}render(s,o){o&&(s.openNode(this.tag),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this._format=s.format||function(o){try{return Number.isNaN(o.getTime())?"":o.toISOString()}catch{return""}},this._parse=s.parse||function(o){return new Date(o)}}render(s,o){o&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,this._format(o)):s.writeText(this._format(o)),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=this._parse(s.attributes[this.attr]):this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this.zero=s.zero}render(s,o){(o||this.zero)&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,o):s.writeText(o),s.closeNode())}parseOpen(s){return s.name===this.tag&&(this.attr?this.model=parseInt(s.attributes[this.attr],10):this.text=[],!0)}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs}render(s,o){o!==void 0&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,o):s.writeText(o),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=s.attributes[this.attr]:this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,h,f){const l=e("./base-xform"),s=e("../../utils/xml-stream");h.exports=class extends l{constructor(o){super(),this._model=o}render(o){if(!this._xml){const r=new s;(function t(n,u){n.openNode(u.tag,u.$),u.c&&u.c.forEach(c=>{t(n,c)}),u.t&&n.writeText(u.t),n.closeNode()})(r,this._model),this._xml=r.xml}o.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(o){switch(o){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,h,f){const l=e("./text-xform"),s=e("./rich-text-xform"),o=e("../base-xform");h.exports=class extends o{constructor(){super(),this.map={r:new s,t:new l}}get tag(){return"rPh"}render(r,t){if(r.openNode(this.tag,{sb:t.sb||0,eb:t.eb||0}),t&&t.hasOwnProperty("richText")&&t.richText){const{r:n}=this.map;t.richText.forEach(u=>{n.render(r,u)})}else t&&this.map.t.render(r,t.text);r.closeNode()}parseOpen(r){const{name:t}=r;return this.parser?(this.parser.parseOpen(r),!0):t===this.tag?(this.model={sb:parseInt(r.attributes.sb,10),eb:parseInt(r.attributes.eb,10)},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(r),!0))}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)){switch(r){case"r":{let t=this.model.richText;t||(t=this.model.richText=[]),t.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,h,f){const l=e("./text-xform"),s=e("../style/font-xform"),o=e("../base-xform");class r extends o{constructor(n){super(),this.model=n}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new l)}get fontXform(){return this._fontXform||(this._fontXform=new s(r.FONT_OPTIONS))}render(n,u){u=u||this.model,n.openNode("r"),u.font&&this.fontXform.render(n,u.font),this.textXform.render(n,u.text),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(n),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(n),!0;default:return!1}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){switch(n){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}}r.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},h.exports=r},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,h,f){const l=e("./text-xform"),s=e("./rich-text-xform"),o=e("./phonetic-text-xform"),r=e("../base-xform");h.exports=class extends r{constructor(t){super(),this.model=t,this.map={r:new s,t:new l,rPh:new o}}get tag(){return"si"}render(t,n){t.openNode(this.tag),n&&n.hasOwnProperty("richText")&&n.richText?n.richText.length?n.richText.forEach(u=>{this.map.r.render(t,u)}):this.map.t.render(t,""):n!=null&&this.map.t.render(t,n),t.closeNode()}parseOpen(t){const{name:n}=t;return this.parser?(this.parser.parseOpen(t),!0):n===this.tag?(this.model={},!0):(this.parser=this.map[n],!!this.parser&&(this.parser.parseOpen(t),!0))}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser){if(!this.parser.parseClose(t)){switch(t){case"r":{let n=this.model.richText;n||(n=this.model.richText=[]),n.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(t){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("./shared-string-xform");h.exports=class extends s{constructor(r){super(),this.model=r||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new o)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(r){return this.model.values[r]}add(r){return r.richText?this.addRichText(r):this.addText(r)}addText(r){let t=this.hash[r];return t===void 0&&(t=this.hash[r]=this.model.values.length,this.model.values.push(r)),this.model.count++,t}addRichText(r){const t=this.sharedStringXform.toXml(r);let n=this.rich[t];return n===void 0&&(n=this.rich[t]=this.model.values.length,this.model.values.push(r)),this.model.count++,n}render(r,t){t=t||this._values,r.openXml(l.StdDocAttributes),r.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.count,uniqueCount:t.values.length});const n=this.sharedStringXform;t.values.forEach(u=>{n.render(r,u)}),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(r),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(r))}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(r){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+r)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"t"}render(s,o){s.openNode("t"),/^\s|\n|\s$/.test(o)&&s.addAttribute("xml:space","preserve"),s.writeText(o),s.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(s,o)=>String.fromCharCode(parseInt(o,16)))}parseOpen(s){switch(s.name){case"t":return this._text=[],!0;default:return!1}}parseText(s){this._text.push(s)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,h,f){const l=e("../../../doc/enums"),s=e("../../../utils/utils"),o=e("../base-xform"),r={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((n,u)=>(n[u]=!0,n),{}),horizontal(n){return this.horizontalValues[n]?n:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((n,u)=>(n[u]=!0,n),{}),vertical(n){return n==="middle"?"center":this.verticalValues[n]?n:void 0},wrapText:n=>!!n||void 0,shrinkToFit:n=>!!n||void 0,textRotation(n){switch(n){case"vertical":return n;default:return(n=s.validInt(n))>=-90&&n<=90?n:void 0}},indent:n=>(n=s.validInt(n),Math.max(0,n)),readingOrder(n){switch(n){case"ltr":return l.ReadingOrder.LeftToRight;case"rtl":return l.ReadingOrder.RightToLeft;default:return}}},t={toXml(n){if(n=r.textRotation(n)){if(n==="vertical")return 255;const u=Math.round(n);if(u>=0&&u<=90)return u;if(u<0&&u>=-90)return 90-u}},toModel(n){const u=s.validInt(n);if(u!==void 0){if(u===255)return"vertical";if(u>=0&&u<=90)return u;if(u>90&&u<=180)return 90-u}}};h.exports=class extends o{get tag(){return"alignment"}render(n,u){n.addRollback(),n.openNode("alignment");let c=!1;function d(b,g){g&&(n.addAttribute(b,g),c=!0)}d("horizontal",r.horizontal(u.horizontal)),d("vertical",r.vertical(u.vertical)),d("wrapText",!!r.wrapText(u.wrapText)&&"1"),d("shrinkToFit",!!r.shrinkToFit(u.shrinkToFit)&&"1"),d("indent",r.indent(u.indent)),d("textRotation",t.toXml(u.textRotation)),d("readingOrder",r.readingOrder(u.readingOrder)),n.closeNode(),c?n.commit():n.rollback()}parseOpen(n){const u={};let c=!1;function d(b,g,p){b&&(u[g]=p,c=!0)}d(n.attributes.horizontal,"horizontal",n.attributes.horizontal),d(n.attributes.vertical,"vertical",n.attributes.vertical==="center"?"middle":n.attributes.vertical),d(n.attributes.wrapText,"wrapText",s.parseBoolean(n.attributes.wrapText)),d(n.attributes.shrinkToFit,"shrinkToFit",s.parseBoolean(n.attributes.shrinkToFit)),d(n.attributes.indent,"indent",parseInt(n.attributes.indent,10)),d(n.attributes.textRotation,"textRotation",t.toModel(n.attributes.textRotation)),d(n.attributes.readingOrder,"readingOrder",n.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=c?u:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,h,f){const l=e("../base-xform"),s=e("../../../utils/utils"),o=e("./color-xform");class r extends l{constructor(n){super(),this.name=n,this.map={color:new o}}get tag(){return this.name}render(n,u,c){const d=u&&u.color||c||this.defaultColor;n.openNode(this.name),u&&u.style&&(n.addAttribute("style",u.style),d&&this.map.color.render(n,d)),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.name:{const{style:u}=n.attributes;return this.model=u?{style:u}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(n),!0;default:return!1}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){return this.parser?(this.parser.parseClose(n)||(this.parser=void 0),!0):(n===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(n){return r.validStyleValues[n]}}r.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((t,n)=>(t[n]=!0,t),{}),h.exports=class extends l{constructor(){super(),this.map={top:new r("top"),left:new r("left"),bottom:new r("bottom"),right:new r("right"),diagonal:new r("diagonal")}}render(t,n){const{color:u}=n;function c(d,b){d&&!d.color&&n.color&&(d={...d,color:n.color}),b.render(t,d,u)}t.openNode("border"),n.diagonal&&n.diagonal.style&&(n.diagonal.up&&t.addAttribute("diagonalUp","1"),n.diagonal.down&&t.addAttribute("diagonalDown","1")),c(n.left,this.map.left),c(n.right,this.map.right),c(n.top,this.map.top),c(n.bottom,this.map.bottom),c(n.diagonal,this.map.diagonal),t.closeNode()}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case"border":return this.reset(),this.diagonalUp=s.parseBoolean(t.attributes.diagonalUp),this.diagonalDown=s.parseBoolean(t.attributes.diagonalDown),!0;default:return this.parser=this.map[t.name],!!this.parser&&(this.parser.parseOpen(t),!0)}}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;if(t==="border"){const n=this.model={},u=function(c,d,b){d&&(b&&Object.assign(d,b),n[c]=d)};u("left",this.map.left.model),u("right",this.map.right.model),u("top",this.map.top.model),u("bottom",this.map.bottom.model),u("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{constructor(s){super(),this.name=s||"color"}get tag(){return this.name}render(s,o){return!!o&&(s.openNode(this.name),o.argb?s.addAttribute("rgb",o.argb):o.theme!==void 0?(s.addAttribute("theme",o.theme),o.tint!==void 0&&s.addAttribute("tint",o.tint)):o.indexed!==void 0?s.addAttribute("indexed",o.indexed):s.addAttribute("auto","1"),s.closeNode(),!0)}parseOpen(s){return s.name===this.name&&(s.attributes.rgb?this.model={argb:s.attributes.rgb}:s.attributes.theme?(this.model={theme:parseInt(s.attributes.theme,10)},s.attributes.tint&&(this.model.tint=parseFloat(s.attributes.tint))):s.attributes.indexed?this.model={indexed:parseInt(s.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,h,f){const l=e("../base-xform"),s=e("./alignment-xform"),o=e("./border-xform"),r=e("./fill-xform"),t=e("./font-xform"),n=e("./numfmt-xform"),u=e("./protection-xform");h.exports=class extends l{constructor(){super(),this.map={alignment:new s,border:new o,fill:new r,font:new t,numFmt:new n,protection:new u}}get tag(){return"dxf"}render(c,d){if(c.openNode(this.tag),d.font&&this.map.font.render(c,d.font),d.numFmt&&d.numFmtId){const b={id:d.numFmtId,formatCode:d.numFmt};this.map.numFmt.render(c,b)}d.fill&&this.map.fill.render(c,d.fill),d.alignment&&this.map.alignment.render(c,d.alignment),d.border&&this.map.border.render(c,d.border),d.protection&&this.map.protection.render(c,d.protection),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c),!0}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):c!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,h,f){const l=e("../base-xform"),s=e("./color-xform");class o extends l{constructor(){super(),this.map={color:new s}}get tag(){return"stop"}render(c,d){c.openNode("stop"),c.addAttribute("position",d.position),this.map.color.render(c,d.color),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"stop":return this.model={position:parseFloat(c.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(c),!0;default:return!1}}parseText(){}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class r extends l{constructor(){super(),this.map={fgColor:new s("fgColor"),bgColor:new s("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(c,d){c.openNode("patternFill"),c.addAttribute("patternType",d.pattern),d.fgColor&&this.map.fgColor.render(c,d.fgColor),d.bgColor&&this.map.bgColor.render(c,d.bgColor),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"patternFill":return this.model={type:"pattern",pattern:c.attributes.patternType},!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.parser.model&&(this.model[c]=this.parser.model),this.parser=void 0),!0)}}class t extends l{constructor(){super(),this.map={stop:new o}}get name(){return"gradient"}get tag(){return"gradientFill"}render(c,d){switch(c.openNode("gradientFill"),d.gradient){case"angle":c.addAttribute("degree",d.degree);break;case"path":c.addAttribute("type","path"),d.center.left&&(c.addAttribute("left",d.center.left),d.center.right===void 0&&c.addAttribute("right",d.center.left)),d.center.right&&c.addAttribute("right",d.center.right),d.center.top&&(c.addAttribute("top",d.center.top),d.center.bottom===void 0&&c.addAttribute("bottom",d.center.top)),d.center.bottom&&c.addAttribute("bottom",d.center.bottom)}const b=this.map.stop;d.stops.forEach(g=>{b.render(c,g)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"gradientFill":{const d=this.model={stops:[]};return c.attributes.degree?(d.gradient="angle",d.degree=parseInt(c.attributes.degree,10)):c.attributes.type==="path"&&(d.gradient="path",d.center={left:c.attributes.left?parseFloat(c.attributes.left):0,top:c.attributes.top?parseFloat(c.attributes.top):0},c.attributes.right!==c.attributes.left&&(d.center.right=c.attributes.right?parseFloat(c.attributes.right):0),c.attributes.bottom!==c.attributes.top&&(d.center.bottom=c.attributes.bottom?parseFloat(c.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class n extends l{constructor(){super(),this.map={patternFill:new r,gradientFill:new t}}get tag(){return"fill"}render(c,d){switch(c.addRollback(),c.openNode("fill"),d.type){case"pattern":this.map.patternFill.render(c,d);break;case"gradient":this.map.gradientFill.render(c,d);break;default:return void c.rollback()}c.closeNode(),c.commit()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"fill":return this.model={},!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(c){return n.validPatternValues[c]}}n.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((u,c)=>(u[c]=!0,u),{}),n.StopXform=o,n.PatternFillXform=r,n.GradientFillXform=t,h.exports=n},{"../base-xform":32,"./color-xform":128}],131:[function(e,h,f){const l=e("./color-xform"),s=e("../simple/boolean-xform"),o=e("../simple/integer-xform"),r=e("../simple/string-xform"),t=e("./underline-xform"),n=e("../../../utils/under-dash"),u=e("../base-xform");class c extends u{constructor(b){super(),this.options=b||c.OPTIONS,this.map={b:{prop:"bold",xform:new s({tag:"b",attr:"val"})},i:{prop:"italic",xform:new s({tag:"i",attr:"val"})},u:{prop:"underline",xform:new t},charset:{prop:"charset",xform:new o({tag:"charset",attr:"val"})},color:{prop:"color",xform:new l},condense:{prop:"condense",xform:new s({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new s({tag:"extend",attr:"val"})},family:{prop:"family",xform:new o({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new s({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new r({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new r({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new s({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new s({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new o({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new r({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(b,g){const{map:p}=this;b.openNode(this.options.tagName),n.each(this.map,(x,y)=>{p[y].xform.render(b,g[x.prop])}),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;if(this.map[b.name])return this.parser=this.map[b.name].xform,this.parser.parseOpen(b);switch(b.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser&&!this.parser.parseClose(b)){const g=this.map[b];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(b){case this.options.tagName:return!1;default:return!0}}}c.OPTIONS={tagName:"font",fontNameTag:"name"},h.exports=c},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,h,f){const l=e("../../../utils/under-dash"),s=e("../../defaultnumformats"),o=e("../base-xform"),r=(function(){const n={};return l.each(s,(u,c)=>{u.f&&(n[u.f]=parseInt(c,10))}),n})();class t extends o{constructor(u,c){super(),this.id=u,this.formatCode=c}get tag(){return"numFmt"}render(u,c){u.leafNode("numFmt",{numFmtId:c.id,formatCode:c.formatCode})}parseOpen(u){switch(u.name){case"numFmt":return this.model={id:parseInt(u.attributes.numFmtId,10),formatCode:u.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}t.getDefaultFmtId=function(n){return r[n]},t.getDefaultFmtCode=function(n){return s[n]&&s[n].f},h.exports=t},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,h,f){const l=e("../base-xform"),s={boolean:(o,r)=>o===void 0?r:o};h.exports=class extends l{get tag(){return"protection"}render(o,r){o.addRollback(),o.openNode("protection");let t=!1;function n(u,c){c!==void 0&&(o.addAttribute(u,c),t=!0)}n("locked",s.boolean(r.locked,!0)?void 0:"0"),n("hidden",s.boolean(r.hidden,!1)?"1":void 0),o.closeNode(),t?o.commit():o.rollback()}parseOpen(o){const r={locked:o.attributes.locked!=="0",hidden:o.attributes.hidden==="1"},t=!r.locked||r.hidden;this.model=t?r:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,h,f){const l=e("../base-xform"),s=e("./alignment-xform"),o=e("./protection-xform");h.exports=class extends l{constructor(r){super(),this.xfId=!(!r||!r.xfId),this.map={alignment:new s,protection:new o}}get tag(){return"xf"}render(r,t){r.openNode("xf",{numFmtId:t.numFmtId||0,fontId:t.fontId||0,fillId:t.fillId||0,borderId:t.borderId||0}),this.xfId&&r.addAttribute("xfId",t.xfId||0),t.numFmtId&&r.addAttribute("applyNumberFormat","1"),t.fontId&&r.addAttribute("applyFont","1"),t.fillId&&r.addAttribute("applyFill","1"),t.borderId&&r.addAttribute("applyBorder","1"),t.alignment&&r.addAttribute("applyAlignment","1"),t.protection&&r.addAttribute("applyProtection","1"),t.alignment&&this.map.alignment.render(r,t.alignment),t.protection&&this.map.protection.render(r,t.protection),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"xf":return this.model={numFmtId:parseInt(r.attributes.numFmtId,10),fontId:parseInt(r.attributes.fontId,10),fillId:parseInt(r.attributes.fillId,10),borderId:parseInt(r.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(r.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(r),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(r),!0;default:return!1}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):r!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,h,f){const l=e("../../../doc/enums"),s=e("../../../utils/xml-stream"),o=e("../base-xform"),r=e("../static-xform"),t=e("../list-xform"),n=e("./font-xform"),u=e("./fill-xform"),c=e("./border-xform"),d=e("./numfmt-xform"),b=e("./style-xform"),g=e("./dxf-xform");class p extends o{constructor(y){super(),this.map={numFmts:new t({tag:"numFmts",count:!0,childXform:new d}),fonts:new t({tag:"fonts",count:!0,childXform:new n,$:{"x14ac:knownFonts":1}}),fills:new t({tag:"fills",count:!0,childXform:new u}),borders:new t({tag:"borders",count:!0,childXform:new c}),cellStyleXfs:new t({tag:"cellStyleXfs",count:!0,childXform:new b}),cellXfs:new t({tag:"cellXfs",count:!0,childXform:new b({xfId:!0})}),dxfs:new t({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new d,font:new n,fill:new u,border:new c,style:new b({xfId:!0}),cellStyles:p.STATIC_XFORMS.cellStyles,tableStyles:p.STATIC_XFORMS.tableStyles,extLst:p.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,v){v=v||this.model,y.openXml(s.StdDocAttributes),y.openNode("styleSheet",p.STYLESHEET_ATTRIBUTES),this.index?(v.numFmts&&v.numFmts.length&&(y.openNode("numFmts",{count:v.numFmts.length}),v.numFmts.forEach(S=>{y.writeXml(S)}),y.closeNode()),v.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:v.fonts.length,"x14ac:knownFonts":1}),v.fonts.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("fills",{count:v.fills.length}),v.fills.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("borders",{count:v.borders.length}),v.borders.forEach(S=>{y.writeXml(S)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:v.styles.length}),v.styles.forEach(S=>{y.writeXml(S)}),y.closeNode()):(this.map.numFmts.render(y,v.numFmts),this.map.fonts.render(y,v.fonts),this.map.fills.render(y,v.fills),this.map.borders.render(y,v.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,v.styles)),p.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,v.dxfs),p.STATIC_XFORMS.tableStyles.render(y),p.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};const v=(S,N)=>{N.model&&N.model.length&&(this.model[S]=N.model)};if(v("numFmts",this.map.numFmts),v("fonts",this.map.fonts),v("fills",this.map.fills),v("borders",this.map.borders),v("styles",this.map.cellXfs),v("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const S=this.index.numFmt;this.model.numFmts.forEach(N=>{S[N.id]=N.formatCode})}return!1}default:return!0}}addStyleModel(y,v){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);const S={};if(v=v||l.ValueType.Number,y.numFmt)S.numFmtId=this._addNumFmtStr(y.numFmt);else switch(v){case l.ValueType.Number:S.numFmtId=this._addNumFmtStr("General");break;case l.ValueType.Date:S.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(S.fontId=this._addFont(y.font)),y.border&&(S.borderId=this._addBorder(y.border)),y.fill&&(S.fillId=this._addFill(y.fill)),y.alignment&&(S.alignment=y.alignment),y.protection&&(S.protection=y.protection);const N=this._addStyle(S);return this.weakMap&&this.weakMap.set(y,N),N}getStyleModel(y){const v=this.model.styles[y];if(!v)return null;let S=this.index.model[y];if(S)return S;if(S=this.index.model[y]={},v.numFmtId){const R=this.index.numFmt[v.numFmtId]||d.getDefaultFmtCode(v.numFmtId);R&&(S.numFmt=R)}function N(R,B,M){if(M||M===0){const F=B[M];F&&(S[R]=F)}}return N("font",this.model.fonts,v.fontId),N("border",this.model.borders,v.borderId),N("fill",this.model.fills,v.fillId),v.alignment&&(S.alignment=v.alignment),v.protection&&(S.protection=v.protection),S}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){const v=this.map.style.toXml(y);let S=this.index.style[v];return S===void 0&&(S=this.index.style[v]=this.model.styles.length,this.model.styles.push(v)),S}_addNumFmtStr(y){let v=d.getDefaultFmtId(y);if(v!==void 0||(v=this.index.numFmt[y],v!==void 0))return v;v=this.index.numFmt[y]=164+this.model.numFmts.length;const S=this.map.numFmt.toXml({id:v,formatCode:y});return this.model.numFmts.push(S),v}_addFont(y){const v=this.map.font.toXml(y);let S=this.index.font[v];return S===void 0&&(S=this.index.font[v]=this.model.fonts.length,this.model.fonts.push(v)),S}_addBorder(y){const v=this.map.border.toXml(y);let S=this.index.border[v];return S===void 0&&(S=this.index.border[v]=this.model.borders.length,this.model.borders.push(v)),S}_addFill(y){const v=this.map.fill.toXml(y);let S=this.index.fill[v];return S===void 0&&(S=this.index.fill[v]=this.model.fills.length,this.model.fills.push(v)),S}}p.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},p.STATIC_XFORMS={cellStyles:new r({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new r({tag:"dxfs",$:{count:0}}),tableStyles:new r({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new r({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},p.Mock=class extends p{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(x){return x.autodrain(),Promise.resolve()}addStyleModel(x,y){switch(y){case l.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const x={numFmtId:d.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(x)}return this._dateStyleId}getStyleModel(){return{}}},h.exports=p},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,h,f){const l=e("../base-xform");class s extends l{constructor(r){super(),this.model=r}get tag(){return"u"}render(r,t){if((t=t||this.model)===!0)r.leafNode("u");else{const n=s.Attributes[t];n&&r.leafNode("u",n)}}parseOpen(r){r.name==="u"&&(this.model=r.attributes.val||!0)}parseText(){}parseClose(){return!1}}s.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},h.exports=s},{"../base-xform":32}],137:[function(e,h,f){const l=e("../base-xform"),s=e("./filter-column-xform");h.exports=class extends l{constructor(){super(),this.map={filterColumn:new s}}get tag(){return"autoFilter"}prepare(o){o.columns.forEach((r,t)=>{this.map.filterColumn.prepare(r,{index:t})})}render(o,r){return o.openNode(this.tag,{ref:r.autoFilterRef}),r.columns.forEach(t=>{this.map.filterColumn.render(o,t)}),o.closeNode(),!0}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model={autoFilterRef:o.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[o.name],this.parser)return this.parseOpen(o),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(o){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+o)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"customFilter"}render(s,o){s.leafNode(this.tag,{val:o.val,operator:o.operator})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val,operator:s.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,h,f){const l=e("../base-xform"),s=e("../list-xform"),o=e("./custom-filter-xform"),r=e("./filter-xform");h.exports=class extends l{constructor(){super(),this.map={customFilters:new s({tag:"customFilters",count:!1,empty:!0,childXform:new o}),filters:new s({tag:"filters",count:!1,empty:!0,childXform:new r})}}get tag(){return"filterColumn"}prepare(t,n){t.colId=n.index.toString()}render(t,n){return n.customFilters?(t.openNode(this.tag,{colId:n.colId,hiddenButton:n.filterButton?"0":"1"}),this.map.customFilters.render(t,n.customFilters),t.closeNode(),!0):(t.leafNode(this.tag,{colId:n.colId,hiddenButton:n.filterButton?"0":"1"}),!0)}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;const{attributes:n}=t;switch(t.name){case this.tag:return this.model={filterButton:n.hiddenButton==="0"},!0;default:if(this.parser=this.map[t.name],this.parser)return this.parseOpen(t),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(t))}}parseText(){}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"filter"}render(s,o){s.leafNode(this.tag,{val:o.val})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"tableColumn"}prepare(s,o){s.id=o.index+1}render(s,o){return s.leafNode(this.tag,{id:o.id.toString(),name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:o}=s;return this.model={name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,h,f){const l=e("../base-xform");h.exports=class extends l{get tag(){return"tableStyleInfo"}render(s,o){return s.leafNode(this.tag,{name:o.theme?o.theme:void 0,showFirstColumn:o.showFirstColumn?"1":"0",showLastColumn:o.showLastColumn?"1":"0",showRowStripes:o.showRowStripes?"1":"0",showColumnStripes:o.showColumnStripes?"1":"0"}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:o}=s;return this.model={theme:o.name?o.name:null,showFirstColumn:o.showFirstColumn==="1",showLastColumn:o.showLastColumn==="1",showRowStripes:o.showRowStripes==="1",showColumnStripes:o.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,h,f){const l=e("../../../utils/xml-stream"),s=e("../base-xform"),o=e("../list-xform"),r=e("./auto-filter-xform"),t=e("./table-column-xform"),n=e("./table-style-info-xform");class u extends s{constructor(){super(),this.map={autoFilter:new r,tableColumns:new o({tag:"tableColumns",count:!0,empty:!0,childXform:new t}),tableStyleInfo:new n}}prepare(d,b){this.map.autoFilter.prepare(d),this.map.tableColumns.prepare(d.columns,b)}get tag(){return"table"}render(d,b){d.openXml(l.StdDocAttributes),d.openNode(this.tag,{...u.TABLE_ATTRIBUTES,id:b.id,name:b.name,displayName:b.displayName||b.name,ref:b.tableRef,totalsRowCount:b.totalsRow?"1":void 0,totalsRowShown:b.totalsRow?void 0:"1",headerRowCount:b.headerRow?"1":"0"}),this.map.autoFilter.render(d,b),this.map.tableColumns.render(d,b.columns),this.map.tableStyleInfo.render(d,b.style),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;const{name:b,attributes:g}=d;switch(b){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((b,g)=>{this.model.columns[g].filterButton=b.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(d,b){d.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=b.styles.getDxfStyle(g.dxfId))})}}u.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},h.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,h,f){(function(l,s){(function(){const o=e("fs"),r=e("jszip"),{PassThrough:t}=e("readable-stream"),n=e("../utils/zip-stream"),u=e("../utils/stream-buf"),c=e("../utils/utils"),d=e("../utils/xml-stream"),{bufferToString:b}=e("../utils/browser-buffer-decode"),g=e("./xform/style/styles-xform"),p=e("./xform/core/core-xform"),x=e("./xform/strings/shared-strings-xform"),y=e("./xform/core/relationships-xform"),v=e("./xform/core/content-types-xform"),S=e("./xform/core/app-xform"),N=e("./xform/book/workbook-xform"),R=e("./xform/sheet/worksheet-xform"),B=e("./xform/drawing/drawing-xform"),M=e("./xform/table/table-xform"),F=e("./xform/comment/comments-xform"),q=e("./xform/comment/vml-notes-xform"),V=e("./xml/theme1");class O{constructor(A){this.workbook=A}async readFile(A,C){if(!await c.fs.exists(A))throw new Error("File not found: "+A);const w=o.createReadStream(A);try{const _=await this.read(w,C);return w.close(),_}catch(_){throw w.close(),_}}parseRels(A){return new y().parseStream(A)}parseWorkbook(A){return new N().parseStream(A)}parseSharedStrings(A){return new x().parseStream(A)}reconcile(A,C){const w=new N,_=new R(C),j=new B,k=new M;w.reconcile(A);const E={media:A.media,mediaIndex:A.mediaIndex};Object.keys(A.drawings).forEach(X=>{const G=A.drawings[X],K=A.drawingRels[X];K&&(E.rels=K.reduce((U,J)=>(U[J.Id]=J,U),{}),(G.anchors||[]).forEach(U=>{const J=U.picture&&U.picture.hyperlinks;J&&E.rels[J.rId]&&(J.hyperlink=E.rels[J.rId].Target,delete J.rId)}),j.reconcile(G,E))});const I={styles:A.styles};Object.values(A.tables).forEach(X=>{k.reconcile(X,I)});const D={styles:A.styles,sharedStrings:A.sharedStrings,media:A.media,mediaIndex:A.mediaIndex,date1904:A.properties&&A.properties.date1904,drawings:A.drawings,comments:A.comments,tables:A.tables,vmlDrawings:A.vmlDrawings};A.worksheets.forEach(X=>{X.relationships=A.worksheetRels[X.sheetNo],_.reconcile(X,D)}),delete A.worksheetHash,delete A.worksheetRels,delete A.globalRels,delete A.sharedStrings,delete A.workbookRels,delete A.sheetDefs,delete A.styles,delete A.mediaIndex,delete A.drawings,delete A.drawingRels,delete A.vmlDrawings}async _processWorksheetEntry(A,C,w,_,j){const k=new R(_),E=await k.parseStream(A);E.sheetNo=w,C.worksheetHash[j]=E,C.worksheets.push(E)}async _processCommentEntry(A,C,w){const _=new F,j=await _.parseStream(A);C.comments[`../${w}.xml`]=j}async _processTableEntry(A,C,w){const _=new M,j=await _.parseStream(A);C.tables[`../tables/${w}.xml`]=j}async _processWorksheetRelsEntry(A,C,w){const _=new y,j=await _.parseStream(A);C.worksheetRels[w]=j}async _processMediaEntry(A,C,w){const _=w.lastIndexOf(".");if(_>=1){const j=w.substr(_+1),k=w.substr(0,_);await new Promise((E,I)=>{const D=new u;D.on("finish",()=>{C.mediaIndex[w]=C.media.length,C.mediaIndex[k]=C.media.length;const X={type:"image",name:k,extension:j,buffer:D.toBuffer()};C.media.push(X),E()}),A.on("error",X=>{I(X)}),A.pipe(D)})}}async _processDrawingEntry(A,C,w){const _=new B,j=await _.parseStream(A);C.drawings[w]=j}async _processDrawingRelsEntry(A,C,w){const _=new y,j=await _.parseStream(A);C.drawingRels[w]=j}async _processVmlDrawingEntry(A,C,w){const _=new q,j=await _.parseStream(A);C.vmlDrawings[`../drawings/${w}.vml`]=j}async _processThemeEntry(A,C,w){await new Promise((_,j)=>{const k=new u;A.on("error",j),k.on("error",j),k.on("finish",()=>{C.themes[w]=k.read().toString(),_()}),A.pipe(k)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(A,C){!A[Symbol.asyncIterator]&&A.pipe&&(A=A.pipe(new t));const w=[];for await(const _ of A)w.push(_);return this.load(s.concat(w),C)}async load(A,C){let w;w=C&&C.base64?s.from(A.toString(),"base64"):A;const _={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},j=await r.loadAsync(w);for(const k of Object.values(j.files))if(!k.dir){let E,I=k.name;if(I[0]==="/"&&(I=I.substr(1)),I.match(/xl\/media\//)||I.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))E=new t,E.write(await k.async("nodebuffer"));else{let D;E=new t({writableObjectMode:!0,readableObjectMode:!0}),D=l.browser?b(await k.async("nodebuffer")):await k.async("string");const X=16384;for(let G=0;G<D.length;G+=X)E.write(D.substring(G,G+X))}switch(E.end(),I){case"_rels/.rels":_.globalRels=await this.parseRels(E);break;case"xl/workbook.xml":{const D=await this.parseWorkbook(E);_.sheets=D.sheets,_.definedNames=D.definedNames,_.views=D.views,_.properties=D.properties,_.calcProperties=D.calcProperties;break}case"xl/_rels/workbook.xml.rels":_.workbookRels=await this.parseRels(E);break;case"xl/sharedStrings.xml":_.sharedStrings=new x,await _.sharedStrings.parseStream(E);break;case"xl/styles.xml":_.styles=new g,await _.styles.parseStream(E);break;case"docProps/app.xml":{const D=new S,X=await D.parseStream(E);_.company=X.company,_.manager=X.manager;break}case"docProps/core.xml":{const D=new p,X=await D.parseStream(E);Object.assign(_,X);break}default:{let D=I.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(D){await this._processWorksheetEntry(E,_,D[1],C,I);break}if(D=I.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),D){await this._processWorksheetRelsEntry(E,_,D[1]);break}if(D=I.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),D){await this._processThemeEntry(E,_,D[1]);break}if(D=I.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),D){await this._processMediaEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),D){await this._processDrawingEntry(E,_,D[1]);break}if(D=I.match(/xl\/(comments\d+)[.]xml/),D){await this._processCommentEntry(E,_,D[1]);break}if(D=I.match(/xl\/tables\/(table\d+)[.]xml/),D){await this._processTableEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),D){await this._processDrawingRelsEntry(E,_,D[1]);break}if(D=I.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),D){await this._processVmlDrawingEntry(E,_,D[1]);break}}}}return this.reconcile(_,C),this.workbook.model=_,this.workbook}async addMedia(A,C){await Promise.all(C.media.map(async w=>{if(w.type==="image"){const _=`xl/media/${w.name}.${w.extension}`;if(w.filename){const j=await(function(k,E){return new Promise((I,D)=>{o.readFile(k,E,(X,G)=>{X?D(X):I(G)})})})(w.filename);return A.append(j,{name:_})}if(w.buffer)return A.append(w.buffer,{name:_});if(w.base64){const j=w.base64,k=j.substring(j.indexOf(",")+1);return A.append(k,{name:_,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(A,C){const w=new B,_=new y;C.worksheets.forEach(j=>{const{drawing:k}=j;if(k){w.prepare(k,{});let E=w.toXml(k);A.append(E,{name:`xl/drawings/${k.name}.xml`}),E=_.toXml(k.rels),A.append(E,{name:`xl/drawings/_rels/${k.name}.xml.rels`})}})}addTables(A,C){const w=new M;C.worksheets.forEach(_=>{const{tables:j}=_;j.forEach(k=>{w.prepare(k,{});const E=w.toXml(k);A.append(E,{name:"xl/tables/"+k.target})})})}async addContentTypes(A,C){const w=new v().toXml(C);A.append(w,{name:"[Content_Types].xml"})}async addApp(A,C){const w=new S().toXml(C);A.append(w,{name:"docProps/app.xml"})}async addCore(A,C){const w=new p;A.append(w.toXml(C),{name:"docProps/core.xml"})}async addThemes(A,C){const w=C.themes||{theme1:V};Object.keys(w).forEach(_=>{const j=w[_],k=`xl/theme/${_}.xml`;A.append(j,{name:k})})}async addOfficeRels(A){const C=new y().toXml([{Id:"rId1",Type:O.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:O.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:O.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);A.append(C,{name:"_rels/.rels"})}async addWorkbookRels(A,C){let w=1;const _=[{Id:"rId"+w++,Type:O.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:O.RelType.Theme,Target:"theme/theme1.xml"}];C.sharedStrings.count&&_.push({Id:"rId"+w++,Type:O.RelType.SharedStrings,Target:"sharedStrings.xml"}),C.worksheets.forEach(k=>{k.rId="rId"+w++,_.push({Id:k.rId,Type:O.RelType.Worksheet,Target:`worksheets/sheet${k.id}.xml`})});const j=new y().toXml(_);A.append(j,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(A,C){C.sharedStrings&&C.sharedStrings.count&&A.append(C.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(A,C){const{xml:w}=C.styles;w&&A.append(w,{name:"xl/styles.xml"})}async addWorkbook(A,C){const w=new N;A.append(w.toXml(C),{name:"xl/workbook.xml"})}async addWorksheets(A,C){const w=new R,_=new y,j=new F,k=new q;C.worksheets.forEach(E=>{let I=new d;w.render(I,E),A.append(I.xml,{name:`xl/worksheets/sheet${E.id}.xml`}),E.rels&&E.rels.length&&(I=new d,_.render(I,E.rels),A.append(I.xml,{name:`xl/worksheets/_rels/sheet${E.id}.xml.rels`})),E.comments.length>0&&(I=new d,j.render(I,E),A.append(I.xml,{name:`xl/comments${E.id}.xml`}),I=new d,k.render(I,E),A.append(I.xml,{name:`xl/drawings/vmlDrawing${E.id}.vml`}))})}_finalize(A){return new Promise((C,w)=>{A.on("finish",()=>{C(this)}),A.on("error",w),A.finalize()})}prepareModel(A,C){A.creator=A.creator||"ExcelJS",A.lastModifiedBy=A.lastModifiedBy||"ExcelJS",A.created=A.created||new Date,A.modified=A.modified||new Date,A.useSharedStrings=C.useSharedStrings===void 0||C.useSharedStrings,A.useStyles=C.useStyles===void 0||C.useStyles,A.sharedStrings=new x,A.styles=A.useStyles?new g(!0):new g.Mock;const w=new N,_=new R;w.prepare(A);const j={sharedStrings:A.sharedStrings,styles:A.styles,date1904:A.properties.date1904,drawingsCount:0,media:A.media};j.drawings=A.drawings=[],j.commentRefs=A.commentRefs=[];let k=0;A.tables=[],A.worksheets.forEach(E=>{E.tables.forEach(I=>{k++,I.target=`table${k}.xml`,I.id=k,A.tables.push(I)}),_.prepare(E,j)})}async write(A,C){C=C||{};const{model:w}=this.workbook,_=new n.ZipWriter(C.zip);return _.pipe(A),this.prepareModel(w,C),await this.addContentTypes(_,w),await this.addOfficeRels(_,w),await this.addWorkbookRels(_,w),await this.addWorksheets(_,w),await this.addSharedStrings(_,w),await this.addDrawings(_,w),await this.addTables(_,w),await Promise.all([this.addThemes(_,w),this.addStyles(_,w)]),await this.addMedia(_,w),await Promise.all([this.addApp(_,w),this.addCore(_,w)]),await this.addWorkbook(_,w),this._finalize(_)}writeFile(A,C){const w=o.createWriteStream(A);return new Promise((_,j)=>{w.on("finish",()=>{_()}),w.on("error",k=>{j(k)}),this.write(w,C).then(()=>{w.end()}).catch(k=>{j(k)})})}async writeBuffer(A){const C=new u;return await this.write(C,A),C.read()}}O.RelType=e("./rel-type"),h.exports=O}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,h,f){h.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(e,h,f){(function(l){(function(){Object.defineProperty(f,"__esModule",{value:!0}),f.CsvFormatterStream=void 0;const s=e("stream"),o=e("./formatter");class r extends s.Transform{constructor(n){super({writableObjectMode:n.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=n,this.rowFormatter=new o.RowFormatter(n),this.hasWrittenBOM=!n.writeBOM}transform(n){return this.rowFormatter.rowTransform=n,this}_transform(n,u,c){let d=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(n,(b,g)=>b?(d=!0,c(b)):(g&&g.forEach(p=>{this.push(l.from(p,"utf8"))}),d=!0,c()))}catch(b){if(d)throw b;c(b)}}_flush(n){this.rowFormatter.finish((u,c)=>u?n(u):(c&&c.forEach(d=>{this.push(l.from(d,"utf8"))}),n()))}}f.CsvFormatterStream=r}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.FormatterOptions=void 0,f.FormatterOptions=class{constructor(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var s;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,l||{}),(l==null?void 0:l.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(l==null?void 0:l.quote)===!0?this.quote='"':(l==null?void 0:l.quote)===!1&&(this.quote=""),typeof(l==null?void 0:l.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((s=l.writeHeaders)===null||s===void 0||s),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(e,h,f){var l=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f,"__esModule",{value:!0}),f.FieldFormatter=void 0;const s=l(e("lodash.isboolean")),o=l(e("lodash.isnil")),r=l(e("lodash.escaperegexp"));f.FieldFormatter=class{constructor(t){this._headers=null,this.formatterOptions=t,t.headers!==null&&(this.headers=t.headers),this.REPLACE_REGEXP=new RegExp(t.quote,"g");const n=`[${t.delimiter}${r.default(t.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(n)}set headers(t){this._headers=t}shouldQuote(t,n){const u=n?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return s.default(u)?u:Array.isArray(u)?u[t]:this._headers!==null&&u[this._headers[t]]}format(t,n,u){const c=(""+(o.default(t)?"":t)).replace(/\0/g,""),{formatterOptions:d}=this;return d.quote!==""&&c.indexOf(d.quote)!==-1?this.quoteField(c.replace(this.REPLACE_REGEXP,d.escapedQuote)):c.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(n,u)?this.quoteField(c):c}quoteField(t){const{quote:n}=this.formatterOptions;return`${n}${t}${n}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,h,f){var l=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(f,"__esModule",{value:!0}),f.RowFormatter=void 0;const s=l(e("lodash.isfunction")),o=l(e("lodash.isequal")),r=e("./FieldFormatter"),t=e("../types");class n{constructor(c){this.rowCount=0,this.formatterOptions=c,this.fieldFormatter=new r.FieldFormatter(c),this.headers=c.headers,this.shouldWriteHeaders=c.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),c.transform&&(this.rowTransform=c.transform)}static isRowHashArray(c){return!!Array.isArray(c)&&Array.isArray(c[0])&&c[0].length===2}static isRowArray(c){return Array.isArray(c)&&!this.isRowHashArray(c)}static gatherHeaders(c){return n.isRowHashArray(c)?c.map(d=>d[0]):Array.isArray(c)?c:Object.keys(c)}static createTransform(c){return t.isSyncTransform(c)?(d,b)=>{let g=null;try{g=c(d)}catch(p){return b(p)}return b(null,g)}:(d,b)=>{c(d,b)}}set rowTransform(c){if(!s.default(c))throw new TypeError("The transform should be a function");this._rowTransform=n.createTransform(c)}format(c,d){this.callTransformer(c,(b,g)=>{if(b)return d(b);if(!c)return d(null);const p=[];if(g){const{shouldFormatColumns:x,headers:y}=this.checkHeaders(g);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(p.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),x){const v=this.gatherColumns(g);p.push(this.formatColumns(v,!1))}}return d(null,p)})}finish(c){const d=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return c(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));d.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&d.push(this.formatterOptions.rowDelimiter),c(null,d)}checkHeaders(c){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const d=n.gatherHeaders(c);return this.headers=d,this.fieldFormatter.headers=d,this.shouldWriteHeaders?{shouldFormatColumns:!o.default(d,c),headers:d}:{shouldFormatColumns:!0,headers:null}}gatherColumns(c){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(c)?n.isRowHashArray(c)?this.headers.map((d,b)=>{const g=c[b];return g?g[1]:""}):n.isRowArray(c)&&!this.shouldWriteHeaders?c:this.headers.map((d,b)=>c[b]):this.headers.map(d=>c[d])}callTransformer(c,d){return this._rowTransform?this._rowTransform(c,d):d(null,c)}formatColumns(c,d){const b=c.map((p,x)=>this.fieldFormatter.format(p,x,d)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,b].join(""):b}}f.RowFormatter=n},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.FieldFormatter=f.RowFormatter=void 0;var l=e("./RowFormatter");Object.defineProperty(f,"RowFormatter",{enumerable:!0,get:function(){return l.RowFormatter}});var s=e("./FieldFormatter");Object.defineProperty(f,"FieldFormatter",{enumerable:!0,get:function(){return s.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,h,f){(function(l){(function(){var s=Object.create?function(x,y,v,S){S===void 0&&(S=v),Object.defineProperty(x,S,{enumerable:!0,get:function(){return y[v]}})}:function(x,y,v,S){S===void 0&&(S=v),x[S]=y[v]},o=Object.create?function(x,y){Object.defineProperty(x,"default",{enumerable:!0,value:y})}:function(x,y){x.default=y},r=function(x){if(x&&x.__esModule)return x;var y={};if(x!=null)for(var v in x)v!=="default"&&Object.prototype.hasOwnProperty.call(x,v)&&s(y,x,v);return o(y,x),y},t=function(x,y){for(var v in x)v==="default"||Object.prototype.hasOwnProperty.call(y,v)||s(y,x,v)};Object.defineProperty(f,"__esModule",{value:!0}),f.writeToPath=f.writeToString=f.writeToBuffer=f.writeToStream=f.write=f.format=f.FormatterOptions=f.CsvFormatterStream=void 0;const n=e("util"),u=e("stream"),c=r(e("fs")),d=e("./FormatterOptions"),b=e("./CsvFormatterStream");t(e("./types"),f);var g=e("./CsvFormatterStream");Object.defineProperty(f,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var p=e("./FormatterOptions");Object.defineProperty(f,"FormatterOptions",{enumerable:!0,get:function(){return p.FormatterOptions}}),f.format=x=>new b.CsvFormatterStream(new d.FormatterOptions(x)),f.write=(x,y)=>{const v=f.format(y),S=n.promisify((N,R)=>{v.write(N,void 0,R)});return x.reduce((N,R)=>N.then(()=>S(R)),Promise.resolve()).then(()=>v.end()).catch(N=>{v.emit("error",N)}),v},f.writeToStream=(x,y,v)=>f.write(y,v).pipe(x),f.writeToBuffer=function(x){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=[],S=new u.Writable({write(N,R,B){v.push(N),B()}});return new Promise((N,R)=>{S.on("error",R).on("finish",()=>N(l.concat(v))),f.write(x,y).pipe(S)})},f.writeToString=(x,y)=>f.writeToBuffer(x,y).then(v=>v.toString()),f.writeToPath=(x,y,v)=>{const S=c.createWriteStream(x,{encoding:"utf8"});return f.write(y,v).pipe(S)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.isSyncTransform=void 0,f.isSyncTransform=l=>l.length===1},{}],153:[function(e,h,f){(function(l){(function(){Object.defineProperty(f,"__esModule",{value:!0}),f.CsvParserStream=void 0;const s=e("string_decoder"),o=e("stream"),r=e("./transforms"),t=e("./parser");class n extends o.Transform{constructor(c){super({objectMode:c.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=c,this.parser=new t.Parser(c),this.headerTransformer=new r.HeaderTransformer(c),this.decoder=new s.StringDecoder(c.encoding),this.rowTransformerValidator=new r.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(c){return this.rowTransformerValidator.rowTransform=c,this}validate(c){return this.rowTransformerValidator.rowValidator=c,this}emit(c){if(c==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var d=arguments.length,b=new Array(d>1?d-1:0),g=1;g<d;g++)b[g-1]=arguments[g];return super.emit(c,...b)}_transform(c,d,b){if(this.hasHitRowLimit)return b();const g=n.wrapDoneCallback(b);try{const{lines:p}=this,x=p+this.decoder.write(c),y=this.parse(x,!0);return this.processRows(y,g)}catch(p){return g(p)}}_flush(c){const d=n.wrapDoneCallback(c);if(this.hasHitRowLimit)return d();try{const b=this.lines+this.decoder.end(),g=this.parse(b,!1);return this.processRows(g,d)}catch(b){return d(b)}}parse(c,d){if(!c)return[];const{line:b,rows:g}=this.parser.parse(c,d);return this.lines=b,g}processRows(c,d){const b=c.length,g=p=>{const x=S=>S?d(S):p%100!=0?g(p+1):void l(()=>g(p+1));if(this.checkAndEmitHeaders(),p>=b||this.hasHitRowLimit)return d();if(this.parsedLineCount+=1,this.shouldSkipLine)return x();const y=c[p];this.rowCount+=1,this.parsedRowCount+=1;const v=this.rowCount;return this.transformRow(y,(S,N)=>{if(S)return this.rowCount-=1,x(S);if(!N)return x(new Error("expected transform result"));if(N.isValid){if(N.row)return this.pushRow(N.row,x)}else this.emit("data-invalid",N.row,v,N.reason);return x()})};g(0)}transformRow(c,d){try{this.headerTransformer.transform(c,(b,g)=>b?d(b):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,d):this.skipRow(d):(this.rowCount-=1,this.parsedRowCount-=1,d(null,{row:null,isValid:!0})):this.shouldEmitRows?d(null,{isValid:!1,row:c}):this.skipRow(d):d(new Error("Expected result from header transform")))}catch(b){d(b)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(c){return this.rowCount-=1,c(null,{row:null,isValid:!0})}pushRow(c,d){try{this.parserOptions.objectMode?this.push(c):this.push(JSON.stringify(c)),d()}catch(b){d(b)}}static wrapDoneCallback(c){let d=!1;return function(b){if(b){if(d)throw b;return d=!0,void c(b)}for(var g=arguments.length,p=new Array(g>1?g-1:0),x=1;x<g;x++)p[x-1]=arguments[x];c(...p)}}}f.CsvParserStream=n}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,h,f){var l=function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(f,"__esModule",{value:!0}),f.ParserOptions=void 0;const s=l(e("lodash.escaperegexp")),o=l(e("lodash.isnil"));f.ParserOptions=class{constructor(r){var t;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,r||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=s.default(this.delimiter),this.escapeChar=(t=this.escape)!==null&&t!==void 0?t:this.quote,this.supportsComments=!o.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,h,f){var l=Object.create?function(g,p,x,y){y===void 0&&(y=x),Object.defineProperty(g,y,{enumerable:!0,get:function(){return p[x]}})}:function(g,p,x,y){y===void 0&&(y=x),g[y]=p[x]},s=Object.create?function(g,p){Object.defineProperty(g,"default",{enumerable:!0,value:p})}:function(g,p){g.default=p},o=function(g){if(g&&g.__esModule)return g;var p={};if(g!=null)for(var x in g)x!=="default"&&Object.prototype.hasOwnProperty.call(g,x)&&l(p,g,x);return s(p,g),p},r=function(g,p){for(var x in g)x==="default"||Object.prototype.hasOwnProperty.call(p,x)||l(p,g,x)};Object.defineProperty(f,"__esModule",{value:!0}),f.parseString=f.parseFile=f.parseStream=f.parse=f.ParserOptions=f.CsvParserStream=void 0;const t=o(e("fs")),n=e("stream"),u=e("./ParserOptions"),c=e("./CsvParserStream");r(e("./types"),f);var d=e("./CsvParserStream");Object.defineProperty(f,"CsvParserStream",{enumerable:!0,get:function(){return d.CsvParserStream}});var b=e("./ParserOptions");Object.defineProperty(f,"ParserOptions",{enumerable:!0,get:function(){return b.ParserOptions}}),f.parse=g=>new c.CsvParserStream(new u.ParserOptions(g)),f.parseStream=(g,p)=>g.pipe(new c.CsvParserStream(new u.ParserOptions(p))),f.parseFile=function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.createReadStream(g).pipe(new c.CsvParserStream(new u.ParserOptions(p)))},f.parseString=(g,p)=>{const x=new n.Readable;return x.push(g),x.push(null),x.pipe(new c.CsvParserStream(new u.ParserOptions(p)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Parser=void 0;const l=e("./Scanner"),s=e("./RowParser"),o=e("./Token");class r{constructor(n){this.parserOptions=n,this.rowParser=new s.RowParser(this.parserOptions)}static removeBOM(n){return n&&n.charCodeAt(0)===65279?n.slice(1):n}parse(n,u){const c=new l.Scanner({line:r.removeBOM(n),parserOptions:this.parserOptions,hasMoreData:u});return this.parserOptions.supportsComments?this.parseWithComments(c):this.parseWithoutComments(c)}parseWithoutComments(n){const u=[];let c=!0;for(;c;)c=this.parseRow(n,u);return{line:n.line,rows:u}}parseWithComments(n){const{parserOptions:u}=this,c=[];for(let d=n.nextCharacterToken;d!==null;d=n.nextCharacterToken)if(o.Token.isTokenComment(d,u)){if(n.advancePastLine()===null)return{line:n.lineFromCursor,rows:c};if(!n.hasMoreCharacters)return{line:n.lineFromCursor,rows:c};n.truncateToCursor()}else if(!this.parseRow(n,c))break;return{line:n.line,rows:c}}parseRow(n,u){if(!n.nextNonSpaceToken)return!1;const c=this.rowParser.parse(n);return c!==null&&(this.parserOptions.ignoreEmpty&&s.RowParser.isEmptyRow(c)||u.push(c),!0)}}f.Parser=r},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.RowParser=void 0;const l=e("./column"),s=e("./Token");f.RowParser=class{constructor(o){this.parserOptions=o,this.columnParser=new l.ColumnParser(o)}static isEmptyRow(o){return o.join("").replace(/\s+/g,"")===""}parse(o){const{parserOptions:r}=this,{hasMoreData:t}=o,n=o,u=[];let c=this.getStartToken(n,u);for(;c;){if(s.Token.isTokenRowDelimiter(c))return n.advancePastToken(c),!n.hasMoreCharacters&&s.Token.isTokenCarriageReturn(c,r)&&t?null:(n.truncateToCursor(),u);if(!this.shouldSkipColumnParse(n,c,u)){const d=this.columnParser.parse(n);if(d===null)return null;u.push(d)}c=n.nextNonSpaceToken}return t?null:(n.truncateToCursor(),u)}getStartToken(o,r){const t=o.nextNonSpaceToken;return t!==null&&s.Token.isTokenDelimiter(t,this.parserOptions)?(r.push(""),o.nextNonSpaceToken):t}shouldSkipColumnParse(o,r,t){const{parserOptions:n}=this;if(s.Token.isTokenDelimiter(r,n)){o.advancePastToken(r);const u=o.nextCharacterToken;if(!o.hasMoreCharacters||u!==null&&s.Token.isTokenRowDelimiter(u)||u!==null&&s.Token.isTokenDelimiter(u,n))return t.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Scanner=void 0;const l=e("./Token"),s=/((?:\r\n)|\n|\r)/;f.Scanner=class{constructor(o){this.cursor=0,this.line=o.line,this.lineLength=this.line.length,this.parserOptions=o.parserOptions,this.hasMoreData=o.hasMoreData,this.cursor=o.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:o}=this,r=this.parserOptions.NEXT_TOKEN_REGEXP;if(o.search(r)===-1)return null;const t=r.exec(o);if(t==null)return null;const n=t[1],u=this.cursor+(t.index||0);return new l.Token({token:n,startCursor:u,endCursor:u+n.length-1})}get nextCharacterToken(){const{cursor:o,lineLength:r}=this;return r<=o?null:new l.Token({token:this.line[o],startCursor:o,endCursor:o})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const o=s.exec(this.lineFromCursor);return o?(this.cursor+=(o.index||0)+o[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(o){return this.cursor=o,this}advanceToToken(o){return this.cursor=o.startCursor,this}advancePastToken(o){return this.cursor=o.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Token=void 0,f.Token=class{constructor(l){this.token=l.token,this.startCursor=l.startCursor,this.endCursor=l.endCursor}static isTokenRowDelimiter(l){const s=l.token;return s==="\r"||s===`
`||s===`\r
`}static isTokenCarriageReturn(l,s){return l.token===s.carriageReturn}static isTokenComment(l,s){return s.supportsComments&&!!l&&l.token===s.comment}static isTokenEscapeCharacter(l,s){return l.token===s.escapeChar}static isTokenQuote(l,s){return l.token===s.quote}static isTokenDelimiter(l,s){return l.token===s.delimiter}}},{}],160:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ColumnFormatter=void 0,f.ColumnFormatter=class{constructor(l){l.trim?this.format=s=>s.trim():l.ltrim?this.format=s=>s.trimLeft():l.rtrim?this.format=s=>s.trimRight():this.format=s=>s}}},{}],161:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ColumnParser=void 0;const l=e("./NonQuotedColumnParser"),s=e("./QuotedColumnParser"),o=e("../Token");f.ColumnParser=class{constructor(r){this.parserOptions=r,this.quotedColumnParser=new s.QuotedColumnParser(r),this.nonQuotedColumnParser=new l.NonQuotedColumnParser(r)}parse(r){const{nextNonSpaceToken:t}=r;return t!==null&&o.Token.isTokenQuote(t,this.parserOptions)?(r.advanceToToken(t),this.quotedColumnParser.parse(r)):this.nonQuotedColumnParser.parse(r)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.NonQuotedColumnParser=void 0;const l=e("./ColumnFormatter"),s=e("../Token");f.NonQuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new l.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;const{parserOptions:r}=this,t=[];let n=o.nextCharacterToken;for(;n&&!s.Token.isTokenDelimiter(n,r)&&!s.Token.isTokenRowDelimiter(n);n=o.nextCharacterToken)t.push(n.token),o.advancePastToken(n);return this.columnFormatter.format(t.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.QuotedColumnParser=void 0;const l=e("./ColumnFormatter"),s=e("../Token");f.QuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new l.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;const r=o.cursor,{foundClosingQuote:t,col:n}=this.gatherDataBetweenQuotes(o);if(!t){if(o.advanceTo(r),!o.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${o.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(o),n}gatherDataBetweenQuotes(o){const{parserOptions:r}=this;let t=!1,n=!1;const u=[];let c=o.nextCharacterToken;for(;!n&&c!==null;c=o.nextCharacterToken){const d=s.Token.isTokenQuote(c,r);if(!t&&d)t=!0;else if(t)if(s.Token.isTokenEscapeCharacter(c,r)){o.advancePastToken(c);const b=o.nextCharacterToken;b!==null&&(s.Token.isTokenQuote(b,r)||s.Token.isTokenEscapeCharacter(b,r))?(u.push(b.token),c=b):d?n=!0:u.push(c.token)}else d?n=!0:u.push(c.token);o.advancePastToken(c)}return{col:this.columnFormatter.format(u.join("")),foundClosingQuote:n}}checkForMalformedColumn(o){const{parserOptions:r}=this,{nextNonSpaceToken:t}=o;if(t){const n=s.Token.isTokenDelimiter(t,r),u=s.Token.isTokenRowDelimiter(t);if(!n&&!u){const c=o.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${r.escapedDelimiter}' OR new line got: '${t.token}'. at '${c}`)}o.advanceToToken(t)}else o.hasMoreData||o.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ColumnFormatter=f.QuotedColumnParser=f.NonQuotedColumnParser=f.ColumnParser=void 0;var l=e("./ColumnParser");Object.defineProperty(f,"ColumnParser",{enumerable:!0,get:function(){return l.ColumnParser}});var s=e("./NonQuotedColumnParser");Object.defineProperty(f,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}});var o=e("./QuotedColumnParser");Object.defineProperty(f,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}});var r=e("./ColumnFormatter");Object.defineProperty(f,"ColumnFormatter",{enumerable:!0,get:function(){return r.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.QuotedColumnParser=f.NonQuotedColumnParser=f.ColumnParser=f.Token=f.Scanner=f.RowParser=f.Parser=void 0;var l=e("./Parser");Object.defineProperty(f,"Parser",{enumerable:!0,get:function(){return l.Parser}});var s=e("./RowParser");Object.defineProperty(f,"RowParser",{enumerable:!0,get:function(){return s.RowParser}});var o=e("./Scanner");Object.defineProperty(f,"Scanner",{enumerable:!0,get:function(){return o.Scanner}});var r=e("./Token");Object.defineProperty(f,"Token",{enumerable:!0,get:function(){return r.Token}});var t=e("./column");Object.defineProperty(f,"ColumnParser",{enumerable:!0,get:function(){return t.ColumnParser}}),Object.defineProperty(f,"NonQuotedColumnParser",{enumerable:!0,get:function(){return t.NonQuotedColumnParser}}),Object.defineProperty(f,"QuotedColumnParser",{enumerable:!0,get:function(){return t.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,h,f){var l=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(f,"__esModule",{value:!0}),f.HeaderTransformer=void 0;const s=l(e("lodash.isundefined")),o=l(e("lodash.isfunction")),r=l(e("lodash.uniq")),t=l(e("lodash.groupby"));f.HeaderTransformer=class{constructor(n){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=n,n.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(n.headers)?this.setHeaders(n.headers):o.default(n.headers)&&(this.headersTransform=n.headers)}transform(n,u){return this.shouldMapRow(n)?u(null,this.processRow(n)):u(null,{row:null,isValid:!0})}shouldMapRow(n){const{parserOptions:u}=this;if(!this.headersTransform&&u.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(n)){if(this.headersTransform)this.setHeaders(this.headersTransform(n));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(n)}return!1}return!0}processRow(n){if(!this.headers)return{row:n,isValid:!0};const{parserOptions:u}=this;if(!u.discardUnmappedColumns&&n.length>this.headersLength){if(!u.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${n.length}`);return{row:n,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${n.length}`}}return u.strictColumnHandling&&n.length<this.headersLength?{row:n,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${n.length}`}:{row:this.mapHeaders(n),isValid:!0}}mapHeaders(n){const u={},{headers:c,headersLength:d}=this;for(let b=0;b<d;b+=1){const g=c[b];if(!s.default(g)){const p=n[b];s.default(p)?u[g]="":u[g]=p}}return u}setHeaders(n){var u;const c=n.filter(d=>!!d);if(r.default(c).length!==c.length){const d=t.default(c),b=Object.keys(d).filter(g=>d[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(b))}this.headers=n,this.receivedHeaders=!0,this.headersLength=((u=this.headers)===null||u===void 0?void 0:u.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,h,f){var l=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f,"__esModule",{value:!0}),f.RowTransformerValidator=void 0;const s=l(e("lodash.isfunction")),o=e("../types");class r{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(n){return o.isSyncTransform(n)?(u,c)=>{let d=null;try{d=n(u)}catch(b){return c(b)}return c(null,d)}:n}static createValidator(n){return o.isSyncValidate(n)?(u,c)=>{c(null,{row:u,isValid:n(u)})}:(u,c)=>{n(u,(d,b,g)=>d?c(d):c(null,b?{row:u,isValid:b,reason:g}:{row:u,isValid:!1,reason:g}))}}set rowTransform(n){if(!s.default(n))throw new TypeError("The transform should be a function");this._rowTransform=r.createTransform(n)}set rowValidator(n){if(!s.default(n))throw new TypeError("The validate should be a function");this._rowValidator=r.createValidator(n)}transformAndValidate(n,u){return this.callTransformer(n,(c,d)=>c?u(c):d?this.callValidator(d,(b,g)=>b?u(b):g&&!g.isValid?u(null,{row:d,isValid:!1,reason:g.reason}):u(null,{row:d,isValid:!0})):u(null,{row:null,isValid:!0}))}callTransformer(n,u){return this._rowTransform?this._rowTransform(n,u):u(null,n)}callValidator(n,u){return this._rowValidator?this._rowValidator(n,u):u(null,{row:n,isValid:!0})}}f.RowTransformerValidator=r},{"../types":169,"lodash.isfunction":446}],168:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.HeaderTransformer=f.RowTransformerValidator=void 0;var l=e("./RowTransformerValidator");Object.defineProperty(f,"RowTransformerValidator",{enumerable:!0,get:function(){return l.RowTransformerValidator}});var s=e("./HeaderTransformer");Object.defineProperty(f,"HeaderTransformer",{enumerable:!0,get:function(){return s.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.isSyncValidate=f.isSyncTransform=void 0,f.isSyncTransform=l=>l.length===1,f.isSyncValidate=l=>l.length===1},{}],170:[function(e,h,f){const l=f;l.bignum=e("bn.js"),l.define=e("./asn1/api").define,l.base=e("./asn1/base"),l.constants=e("./asn1/constants"),l.decoders=e("./asn1/decoders"),l.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,h,f){const l=e("./encoders"),s=e("./decoders"),o=e("inherits");function r(t,n){this.name=t,this.body=n,this.decoders={},this.encoders={}}f.define=function(t,n){return new r(t,n)},r.prototype._createNamed=function(t){const n=this.name;function u(c){this._initNamed(c,n)}return o(u,t),u.prototype._initNamed=function(c,d){t.call(this,c,d)},new u(this)},r.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(s[t])),this.decoders[t]},r.prototype.decode=function(t,n,u){return this._getDecoder(n).decode(t,u)},r.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(l[t])),this.encoders[t]},r.prototype.encode=function(t,n,u){return this._getEncoder(n).encode(t,u)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,h,f){const l=e("inherits"),s=e("../base/reporter").Reporter,o=e("safer-buffer").Buffer;function r(n,u){s.call(this,u),o.isBuffer(n)?(this.base=n,this.offset=0,this.length=n.length):this.error("Input not Buffer")}function t(n,u){if(Array.isArray(n))this.length=0,this.value=n.map((function(c){return t.isEncoderBuffer(c)||(c=new t(c,u)),this.length+=c.length,c}),this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return u.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=o.byteLength(n);else{if(!o.isBuffer(n))return u.error("Unsupported type: "+typeof n);this.value=n,this.length=n.length}}l(r,s),f.DecoderBuffer=r,r.isDecoderBuffer=function(n){return n instanceof r?!0:typeof n=="object"&&o.isBuffer(n.base)&&n.constructor.name==="DecoderBuffer"&&typeof n.offset=="number"&&typeof n.length=="number"&&typeof n.save=="function"&&typeof n.restore=="function"&&typeof n.isEmpty=="function"&&typeof n.readUInt8=="function"&&typeof n.skip=="function"&&typeof n.raw=="function"},r.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},r.prototype.restore=function(n){const u=new r(this.base);return u.offset=n.offset,u.length=this.offset,this.offset=n.offset,s.prototype.restore.call(this,n.reporter),u},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(n){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(n||"DecoderBuffer overrun")},r.prototype.skip=function(n,u){if(!(this.offset+n<=this.length))return this.error(u||"DecoderBuffer overrun");const c=new r(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+n,this.offset+=n,c},r.prototype.raw=function(n){return this.base.slice(n?n.offset:this.offset,this.length)},f.EncoderBuffer=t,t.isEncoderBuffer=function(n){return n instanceof t?!0:typeof n=="object"&&n.constructor.name==="EncoderBuffer"&&typeof n.length=="number"&&typeof n.join=="function"},t.prototype.join=function(n,u){return n||(n=o.alloc(this.length)),u||(u=0),this.length===0||(Array.isArray(this.value)?this.value.forEach((function(c){c.join(n,u),u+=c.length})):(typeof this.value=="number"?n[u]=this.value:typeof this.value=="string"?n.write(this.value,u):o.isBuffer(this.value)&&this.value.copy(n,u),u+=this.length)),n}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,h,f){const l=f;l.Reporter=e("./reporter").Reporter,l.DecoderBuffer=e("./buffer").DecoderBuffer,l.EncoderBuffer=e("./buffer").EncoderBuffer,l.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,h,f){const l=e("../base/reporter").Reporter,s=e("../base/buffer").EncoderBuffer,o=e("../base/buffer").DecoderBuffer,r=e("minimalistic-assert"),t=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],n=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(t);function u(d,b,g){const p={};this._baseState=p,p.name=g,p.enc=d,p.parent=b||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}h.exports=u;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const d=this._baseState,b={};c.forEach((function(p){b[p]=d[p]}));const g=new this.constructor(b.parent);return g._baseState=b,g},u.prototype._wrap=function(){const d=this._baseState;n.forEach((function(b){this[b]=function(){const g=new this.constructor(this);return d.children.push(g),g[b].apply(g,arguments)}}),this)},u.prototype._init=function(d){const b=this._baseState;r(b.parent===null),d.call(this),b.children=b.children.filter((function(g){return g._baseState.parent===this}),this),r.equal(b.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(d){const b=this._baseState,g=d.filter((function(p){return p instanceof this.constructor}),this);d=d.filter((function(p){return!(p instanceof this.constructor)}),this),g.length!==0&&(r(b.children===null),b.children=g,g.forEach((function(p){p._baseState.parent=this}),this)),d.length!==0&&(r(b.args===null),b.args=d,b.reverseArgs=d.map((function(p){if(typeof p!="object"||p.constructor!==Object)return p;const x={};return Object.keys(p).forEach((function(y){y==(0|y)&&(y|=0);const v=p[y];x[v]=y})),x})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(d){u.prototype[d]=function(){const b=this._baseState;throw new Error(d+" not implemented for encoding: "+b.enc)}})),t.forEach((function(d){u.prototype[d]=function(){const b=this._baseState,g=Array.prototype.slice.call(arguments);return r(b.tag===null),b.tag=d,this._useArgs(g),this}})),u.prototype.use=function(d){r(d);const b=this._baseState;return r(b.use===null),b.use=d,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(d){const b=this._baseState;return r(b.default===null),b.default=d,b.optional=!0,this},u.prototype.explicit=function(d){const b=this._baseState;return r(b.explicit===null&&b.implicit===null),b.explicit=d,this},u.prototype.implicit=function(d){const b=this._baseState;return r(b.explicit===null&&b.implicit===null),b.implicit=d,this},u.prototype.obj=function(){const d=this._baseState,b=Array.prototype.slice.call(arguments);return d.obj=!0,b.length!==0&&this._useArgs(b),this},u.prototype.key=function(d){const b=this._baseState;return r(b.key===null),b.key=d,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(d){const b=this._baseState;return r(b.choice===null),b.choice=d,this._useArgs(Object.keys(d).map((function(g){return d[g]}))),this},u.prototype.contains=function(d){const b=this._baseState;return r(b.use===null),b.contains=d,this},u.prototype._decode=function(d,b){const g=this._baseState;if(g.parent===null)return d.wrapResult(g.children[0]._decode(d,b));let p,x=g.default,y=!0,v=null;if(g.key!==null&&(v=d.enterKey(g.key)),g.optional){let S=null;if(g.explicit!==null?S=g.explicit:g.implicit!==null?S=g.implicit:g.tag!==null&&(S=g.tag),S!==null||g.any){if(y=this._peekTag(d,S,g.any),d.isError(y))return y}else{const N=d.save();try{g.choice===null?this._decodeGeneric(g.tag,d,b):this._decodeChoice(d,b),y=!0}catch{y=!1}d.restore(N)}}if(g.obj&&y&&(p=d.enterObject()),y){if(g.explicit!==null){const N=this._decodeTag(d,g.explicit);if(d.isError(N))return N;d=N}const S=d.offset;if(g.use===null&&g.choice===null){let N;g.any&&(N=d.save());const R=this._decodeTag(d,g.implicit!==null?g.implicit:g.tag,g.any);if(d.isError(R))return R;g.any?x=d.raw(N):d=R}if(b&&b.track&&g.tag!==null&&b.track(d.path(),S,d.length,"tagged"),b&&b.track&&g.tag!==null&&b.track(d.path(),d.offset,d.length,"content"),g.any||(x=g.choice===null?this._decodeGeneric(g.tag,d,b):this._decodeChoice(d,b)),d.isError(x))return x;if(g.any||g.choice!==null||g.children===null||g.children.forEach((function(N){N._decode(d,b)})),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){const N=new o(x);x=this._getUse(g.contains,d._reporterState.obj)._decode(N,b)}}return g.obj&&y&&(x=d.leaveObject(p)),g.key===null||x===null&&y!==!0?v!==null&&d.exitKey(v):d.leaveKey(v,g.key,x),x},u.prototype._decodeGeneric=function(d,b,g){const p=this._baseState;return d==="seq"||d==="set"?null:d==="seqof"||d==="setof"?this._decodeList(b,d,p.args[0],g):/str$/.test(d)?this._decodeStr(b,d,g):d==="objid"&&p.args?this._decodeObjid(b,p.args[0],p.args[1],g):d==="objid"?this._decodeObjid(b,null,null,g):d==="gentime"||d==="utctime"?this._decodeTime(b,d,g):d==="null_"?this._decodeNull(b,g):d==="bool"?this._decodeBool(b,g):d==="objDesc"?this._decodeStr(b,d,g):d==="int"||d==="enum"?this._decodeInt(b,p.args&&p.args[0],g):p.use!==null?this._getUse(p.use,b._reporterState.obj)._decode(b,g):b.error("unknown tag: "+d)},u.prototype._getUse=function(d,b){const g=this._baseState;return g.useDecoder=this._use(d,b),r(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},u.prototype._decodeChoice=function(d,b){const g=this._baseState;let p=null,x=!1;return Object.keys(g.choice).some((function(y){const v=d.save(),S=g.choice[y];try{const N=S._decode(d,b);if(d.isError(N))return!1;p={type:y,value:N},x=!0}catch{return d.restore(v),!1}return!0}),this),x?p:d.error("Choice not matched")},u.prototype._createEncoderBuffer=function(d){return new s(d,this.reporter)},u.prototype._encode=function(d,b,g){const p=this._baseState;if(p.default!==null&&p.default===d)return;const x=this._encodeValue(d,b,g);return x===void 0||this._skipDefault(x,b,g)?void 0:x},u.prototype._encodeValue=function(d,b,g){const p=this._baseState;if(p.parent===null)return p.children[0]._encode(d,b||new l);let x=null;if(this.reporter=b,p.optional&&d===void 0){if(p.default===null)return;d=p.default}let y=null,v=!1;if(p.any)x=this._createEncoderBuffer(d);else if(p.choice)x=this._encodeChoice(d,b);else if(p.contains)y=this._getUse(p.contains,g)._encode(d,b),v=!0;else if(p.children)y=p.children.map((function(S){if(S._baseState.tag==="null_")return S._encode(null,b,d);if(S._baseState.key===null)return b.error("Child should have a key");const N=b.enterKey(S._baseState.key);if(typeof d!="object")return b.error("Child expected, but input is not object");const R=S._encode(d[S._baseState.key],b,d);return b.leaveKey(N),R}),this).filter((function(S){return S})),y=this._createEncoderBuffer(y);else if(p.tag==="seqof"||p.tag==="setof"){if(!p.args||p.args.length!==1)return b.error("Too many args for : "+p.tag);if(!Array.isArray(d))return b.error("seqof/setof, but data is not Array");const S=this.clone();S._baseState.implicit=null,y=this._createEncoderBuffer(d.map((function(N){const R=this._baseState;return this._getUse(R.args[0],d)._encode(N,b)}),S))}else p.use!==null?x=this._getUse(p.use,g)._encode(d,b):(y=this._encodePrimitive(p.tag,d),v=!0);if(!p.any&&p.choice===null){const S=p.implicit!==null?p.implicit:p.tag,N=p.implicit===null?"universal":"context";S===null?p.use===null&&b.error("Tag could be omitted only for .use()"):p.use===null&&(x=this._encodeComposite(S,v,N,y))}return p.explicit!==null&&(x=this._encodeComposite(p.explicit,!1,"context",x)),x},u.prototype._encodeChoice=function(d,b){const g=this._baseState,p=g.choice[d.type];return p||r(!1,d.type+" not found in "+JSON.stringify(Object.keys(g.choice))),p._encode(d.value,b)},u.prototype._encodePrimitive=function(d,b){const g=this._baseState;if(/str$/.test(d))return this._encodeStr(b,d);if(d==="objid"&&g.args)return this._encodeObjid(b,g.reverseArgs[0],g.args[1]);if(d==="objid")return this._encodeObjid(b,null,null);if(d==="gentime"||d==="utctime")return this._encodeTime(b,d);if(d==="null_")return this._encodeNull();if(d==="int"||d==="enum")return this._encodeInt(b,g.args&&g.reverseArgs[0]);if(d==="bool")return this._encodeBool(b);if(d==="objDesc")return this._encodeStr(b,d);throw new Error("Unsupported tag: "+d)},u.prototype._isNumstr=function(d){return/^[0-9 ]*$/.test(d)},u.prototype._isPrintstr=function(d){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(d)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,h,f){const l=e("inherits");function s(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}function o(r,t){this.path=r,this.rethrow(t)}f.Reporter=s,s.prototype.isError=function(r){return r instanceof o},s.prototype.save=function(){const r=this._reporterState;return{obj:r.obj,pathLen:r.path.length}},s.prototype.restore=function(r){const t=this._reporterState;t.obj=r.obj,t.path=t.path.slice(0,r.pathLen)},s.prototype.enterKey=function(r){return this._reporterState.path.push(r)},s.prototype.exitKey=function(r){const t=this._reporterState;t.path=t.path.slice(0,r-1)},s.prototype.leaveKey=function(r,t,n){const u=this._reporterState;this.exitKey(r),u.obj!==null&&(u.obj[t]=n)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const r=this._reporterState,t=r.obj;return r.obj={},t},s.prototype.leaveObject=function(r){const t=this._reporterState,n=t.obj;return t.obj=r,n},s.prototype.error=function(r){let t;const n=this._reporterState,u=r instanceof o;if(t=u?r:new o(n.path.map((function(c){return"["+JSON.stringify(c)+"]"})).join(""),r.message||r,r.stack),!n.options.partial)throw t;return u||n.errors.push(t),t},s.prototype.wrapResult=function(r){const t=this._reporterState;return t.options.partial?{result:this.isError(r)?null:r,errors:t.errors}:r},l(o,Error),o.prototype.rethrow=function(r){if(this.message=r+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},{inherits:440}],176:[function(e,h,f){function l(s){const o={};return Object.keys(s).forEach((function(r){(0|r)==r&&(r|=0);const t=s[r];o[t]=r})),o}f.tagClass={0:"universal",1:"application",2:"context",3:"private"},f.tagClassByName=l(f.tagClass),f.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},f.tagByName=l(f.tag)},{}],177:[function(e,h,f){const l=f;l._reverse=function(s){const o={};return Object.keys(s).forEach((function(r){(0|r)==r&&(r|=0);const t=s[r];o[t]=r})),o},l.der=e("./der")},{"./der":176}],178:[function(e,h,f){const l=e("inherits"),s=e("bn.js"),o=e("../base/buffer").DecoderBuffer,r=e("../base/node"),t=e("../constants/der");function n(b){this.enc="der",this.name=b.name,this.entity=b,this.tree=new u,this.tree._init(b.body)}function u(b){r.call(this,"der",b)}function c(b,g){let p=b.readUInt8(g);if(b.isError(p))return p;const x=t.tagClass[p>>6],y=(32&p)==0;if((31&p)==31){let v=p;for(p=0;(128&v)==128;){if(v=b.readUInt8(g),b.isError(v))return v;p<<=7,p|=127&v}}else p&=31;return{cls:x,primitive:y,tag:p,tagStr:t.tag[p]}}function d(b,g,p){let x=b.readUInt8(p);if(b.isError(x))return x;if(!g&&x===128)return null;if((128&x)==0)return x;const y=127&x;if(y>4)return b.error("length octect is too long");x=0;for(let v=0;v<y;v++){x<<=8;const S=b.readUInt8(p);if(b.isError(S))return S;x|=S}return x}h.exports=n,n.prototype.decode=function(b,g){return o.isDecoderBuffer(b)||(b=new o(b,g)),this.tree._decode(b,g)},l(u,r),u.prototype._peekTag=function(b,g,p){if(b.isEmpty())return!1;const x=b.save(),y=c(b,'Failed to peek tag: "'+g+'"');return b.isError(y)?y:(b.restore(x),y.tag===g||y.tagStr===g||y.tagStr+"of"===g||p)},u.prototype._decodeTag=function(b,g,p){const x=c(b,'Failed to decode tag of "'+g+'"');if(b.isError(x))return x;let y=d(b,x.primitive,'Failed to get length of "'+g+'"');if(b.isError(y))return y;if(!p&&x.tag!==g&&x.tagStr!==g&&x.tagStr+"of"!==g)return b.error('Failed to match tag: "'+g+'"');if(x.primitive||y!==null)return b.skip(y,'Failed to match body of: "'+g+'"');const v=b.save(),S=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(S)?S:(y=b.offset-v.offset,b.restore(v),b.skip(y,'Failed to match body of: "'+g+'"'))},u.prototype._skipUntilEnd=function(b,g){for(;;){const p=c(b,g);if(b.isError(p))return p;const x=d(b,p.primitive,g);if(b.isError(x))return x;let y;if(y=p.primitive||x!==null?b.skip(x):this._skipUntilEnd(b,g),b.isError(y))return y;if(p.tagStr==="end")break}},u.prototype._decodeList=function(b,g,p,x){const y=[];for(;!b.isEmpty();){const v=this._peekTag(b,"end");if(b.isError(v))return v;const S=p.decode(b,"der",x);if(b.isError(S)&&v)break;y.push(S)}return y},u.prototype._decodeStr=function(b,g){if(g==="bitstr"){const p=b.readUInt8();return b.isError(p)?p:{unused:p,data:b.raw()}}if(g==="bmpstr"){const p=b.raw();if(p.length%2==1)return b.error("Decoding of string type: bmpstr length mismatch");let x="";for(let y=0;y<p.length/2;y++)x+=String.fromCharCode(p.readUInt16BE(2*y));return x}if(g==="numstr"){const p=b.raw().toString("ascii");return this._isNumstr(p)?p:b.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return b.raw();if(g==="printstr"){const p=b.raw().toString("ascii");return this._isPrintstr(p)?p:b.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?b.raw().toString():b.error("Decoding of string type: "+g+" unsupported")},u.prototype._decodeObjid=function(b,g,p){let x;const y=[];let v=0,S=0;for(;!b.isEmpty();)S=b.readUInt8(),v<<=7,v|=127&S,(128&S)==0&&(y.push(v),v=0);128&S&&y.push(v);const N=y[0]/40|0,R=y[0]%40;if(x=p?y:[N,R].concat(y.slice(1)),g){let B=g[x.join(" ")];B===void 0&&(B=g[x.join(".")]),B!==void 0&&(x=B)}return x},u.prototype._decodeTime=function(b,g){const p=b.raw().toString();let x,y,v,S,N,R;if(g==="gentime")x=0|p.slice(0,4),y=0|p.slice(4,6),v=0|p.slice(6,8),S=0|p.slice(8,10),N=0|p.slice(10,12),R=0|p.slice(12,14);else{if(g!=="utctime")return b.error("Decoding "+g+" time is not supported yet");x=0|p.slice(0,2),y=0|p.slice(2,4),v=0|p.slice(4,6),S=0|p.slice(6,8),N=0|p.slice(8,10),R=0|p.slice(10,12),x=x<70?2e3+x:1900+x}return Date.UTC(x,y-1,v,S,N,R,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(b){const g=b.readUInt8();return b.isError(g)?g:g!==0},u.prototype._decodeInt=function(b,g){const p=b.raw();let x=new s(p);return g&&(x=g[x.toString(10)]||x),x},u.prototype._use=function(b,g){return typeof b=="function"&&(b=b(g)),b._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,h,f){const l=f;l.der=e("./der"),l.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,h,f){const l=e("inherits"),s=e("safer-buffer").Buffer,o=e("./der");function r(t){o.call(this,t),this.enc="pem"}l(r,o),h.exports=r,r.prototype.decode=function(t,n){const u=t.toString().split(/[\r\n]+/g),c=n.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/;let b=-1,g=-1;for(let y=0;y<u.length;y++){const v=u[y].match(d);if(v!==null&&v[2]===c){if(b!==-1){if(v[1]!=="END")break;g=y;break}if(v[1]!=="BEGIN")break;b=y}}if(b===-1||g===-1)throw new Error("PEM section not found for: "+c);const p=u.slice(b+1,g).join("");p.replace(/[^a-z0-9+/=]+/gi,"");const x=s.from(p,"base64");return o.prototype.decode.call(this,x,n)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,h,f){const l=e("inherits"),s=e("safer-buffer").Buffer,o=e("../base/node"),r=e("../constants/der");function t(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new n,this.tree._init(c.body)}function n(c){o.call(this,"der",c)}function u(c){return c<10?"0"+c:c}h.exports=t,t.prototype.encode=function(c,d){return this.tree._encode(c,d).join()},l(n,o),n.prototype._encodeComposite=function(c,d,b,g){const p=(function(v,S,N,R){let B;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),r.tagByName.hasOwnProperty(v))B=r.tagByName[v];else{if(typeof v!="number"||(0|v)!==v)return R.error("Unknown tag: "+v);B=v}return B>=31?R.error("Multi-octet tag encoding unsupported"):(S||(B|=32),B|=r.tagClassByName[N||"universal"]<<6,B)})(c,d,b,this.reporter);if(g.length<128){const v=s.alloc(2);return v[0]=p,v[1]=g.length,this._createEncoderBuffer([v,g])}let x=1;for(let v=g.length;v>=256;v>>=8)x++;const y=s.alloc(2+x);y[0]=p,y[1]=128|x;for(let v=1+x,S=g.length;S>0;v--,S>>=8)y[v]=255&S;return this._createEncoderBuffer([y,g])},n.prototype._encodeStr=function(c,d){if(d==="bitstr")return this._createEncoderBuffer([0|c.unused,c.data]);if(d==="bmpstr"){const b=s.alloc(2*c.length);for(let g=0;g<c.length;g++)b.writeUInt16BE(c.charCodeAt(g),2*g);return this._createEncoderBuffer(b)}return d==="numstr"?this._isNumstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: numstr supports only digits and space"):d==="printstr"?this._isPrintstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(d)||d==="objDesc"?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: "+d+" unsupported")},n.prototype._encodeObjid=function(c,d,b){if(typeof c=="string"){if(!d)return this.reporter.error("string objid given, but no values map found");if(!d.hasOwnProperty(c))return this.reporter.error("objid not found in values map");c=d[c].split(/[\s.]+/g);for(let y=0;y<c.length;y++)c[y]|=0}else if(Array.isArray(c)){c=c.slice();for(let y=0;y<c.length;y++)c[y]|=0}if(!Array.isArray(c))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(c));if(!b){if(c[1]>=40)return this.reporter.error("Second objid identifier OOB");c.splice(0,2,40*c[0]+c[1])}let g=0;for(let y=0;y<c.length;y++){let v=c[y];for(g++;v>=128;v>>=7)g++}const p=s.alloc(g);let x=p.length-1;for(let y=c.length-1;y>=0;y--){let v=c[y];for(p[x--]=127&v;(v>>=7)>0;)p[x--]=128|127&v}return this._createEncoderBuffer(p)},n.prototype._encodeTime=function(c,d){let b;const g=new Date(c);return d==="gentime"?b=[u(g.getUTCFullYear()),u(g.getUTCMonth()+1),u(g.getUTCDate()),u(g.getUTCHours()),u(g.getUTCMinutes()),u(g.getUTCSeconds()),"Z"].join(""):d==="utctime"?b=[u(g.getUTCFullYear()%100),u(g.getUTCMonth()+1),u(g.getUTCDate()),u(g.getUTCHours()),u(g.getUTCMinutes()),u(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+d+" time is not supported yet"),this._encodeStr(b,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(c,d){if(typeof c=="string"){if(!d)return this.reporter.error("String int or enum given, but no values map");if(!d.hasOwnProperty(c))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(c));c=d[c]}if(typeof c!="number"&&!s.isBuffer(c)){const p=c.toArray();!c.sign&&128&p[0]&&p.unshift(0),c=s.from(p)}if(s.isBuffer(c)){let p=c.length;c.length===0&&p++;const x=s.alloc(p);return c.copy(x),c.length===0&&(x[0]=0),this._createEncoderBuffer(x)}if(c<128)return this._createEncoderBuffer(c);if(c<256)return this._createEncoderBuffer([0,c]);let b=1;for(let p=c;p>=256;p>>=8)b++;const g=new Array(b);for(let p=g.length-1;p>=0;p--)g[p]=255&c,c>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(s.from(g))},n.prototype._encodeBool=function(c){return this._createEncoderBuffer(c?255:0)},n.prototype._use=function(c,d){return typeof c=="function"&&(c=c(d)),c._getEncoder("der").tree},n.prototype._skipDefault=function(c,d,b){const g=this._baseState;let p;if(g.default===null)return!1;const x=c.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,d,b).join()),x.length!==g.defaultBuffer.length)return!1;for(p=0;p<x.length;p++)if(x[p]!==g.defaultBuffer[p])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,h,f){const l=f;l.der=e("./der"),l.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,h,f){const l=e("inherits"),s=e("./der");function o(r){s.call(this,r),this.enc="pem"}l(o,s),h.exports=o,o.prototype.encode=function(r,t){const n=s.prototype.encode.call(this,r).toString("base64"),u=["-----BEGIN "+t.label+"-----"];for(let c=0;c<n.length;c+=64)u.push(n.slice(c,c+64));return u.push("-----END "+t.label+"-----"),u.join(`
`)}},{"./der":181,inherits:440}],184:[function(e,h,f){(function(l,s){function o(T,A){if(!T)throw new Error(A||"Assertion failed")}function r(T,A){T.super_=A;var C=function(){};C.prototype=A.prototype,T.prototype=new C,T.prototype.constructor=T}function t(T,A,C){if(t.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&(A!=="le"&&A!=="be"||(C=A,A=10),this._init(T||0,A||10,C||"be"))}var n;typeof l=="object"?l.exports=t:(void 0).BN=t,t.BN=t,t.wordSize=26;try{n=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function u(T,A){var C=T.charCodeAt(A);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function c(T,A,C){var w=u(T,C);return C-1>=A&&(w|=u(T,C-1)<<4),w}function d(T,A,C,w){for(var _=0,j=Math.min(T.length,C),k=A;k<j;k++){var E=T.charCodeAt(k)-48;_*=w,_+=E>=49?E-49+10:E>=17?E-17+10:E}return _}t.isBN=function(T){return T instanceof t||T!==null&&typeof T=="object"&&T.constructor.wordSize===t.wordSize&&Array.isArray(T.words)},t.max=function(T,A){return T.cmp(A)>0?T:A},t.min=function(T,A){return T.cmp(A)<0?T:A},t.prototype._init=function(T,A,C){if(typeof T=="number")return this._initNumber(T,A,C);if(typeof T=="object")return this._initArray(T,A,C);A==="hex"&&(A=16),o(A===(0|A)&&A>=2&&A<=36);var w=0;(T=T.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<T.length&&(A===16?this._parseHex(T,w,C):(this._parseBase(T,A,w),C==="le"&&this._initArray(this.toArray(),A,C)))},t.prototype._initNumber=function(T,A,C){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[67108863&T],this.length=1):T<4503599627370496?(this.words=[67108863&T,T/67108864&67108863],this.length=2):(o(T<9007199254740992),this.words=[67108863&T,T/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),A,C)},t.prototype._initArray=function(T,A,C){if(o(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,j,k=0;if(C==="be")for(w=T.length-1,_=0;w>=0;w-=3)j=T[w]|T[w-1]<<8|T[w-2]<<16,this.words[_]|=j<<k&67108863,this.words[_+1]=j>>>26-k&67108863,(k+=24)>=26&&(k-=26,_++);else if(C==="le")for(w=0,_=0;w<T.length;w+=3)j=T[w]|T[w+1]<<8|T[w+2]<<16,this.words[_]|=j<<k&67108863,this.words[_+1]=j>>>26-k&67108863,(k+=24)>=26&&(k-=26,_++);return this.strip()},t.prototype._parseHex=function(T,A,C){this.length=Math.ceil((T.length-A)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,j=0,k=0;if(C==="be")for(w=T.length-1;w>=A;w-=2)_=c(T,A,w)<<j,this.words[k]|=67108863&_,j>=18?(j-=18,k+=1,this.words[k]|=_>>>26):j+=8;else for(w=(T.length-A)%2==0?A+1:A;w<T.length;w+=2)_=c(T,A,w)<<j,this.words[k]|=67108863&_,j>=18?(j-=18,k+=1,this.words[k]|=_>>>26):j+=8;this.strip()},t.prototype._parseBase=function(T,A,C){this.words=[0],this.length=1;for(var w=0,_=1;_<=67108863;_*=A)w++;w--,_=_/A|0;for(var j=T.length-C,k=j%w,E=Math.min(j,j-k)+C,I=0,D=C;D<E;D+=w)I=d(T,D,D+w,A),this.imuln(_),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(k!==0){var X=1;for(I=d(T,D,T.length,A),D=0;D<k;D++)X*=A;this.imuln(X),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},t.prototype.copy=function(T){T.words=new Array(this.length);for(var A=0;A<this.length;A++)T.words[A]=this.words[A];T.length=this.length,T.negative=this.negative,T.red=this.red},t.prototype.clone=function(){var T=new t(null);return this.copy(T),T},t.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(T,A,C){C.negative=A.negative^T.negative;var w=T.length+A.length|0;C.length=w,w=w-1|0;var _=0|T.words[0],j=0|A.words[0],k=_*j,E=67108863&k,I=k/67108864|0;C.words[0]=E;for(var D=1;D<w;D++){for(var X=I>>>26,G=67108863&I,K=Math.min(D,A.length-1),U=Math.max(0,D-T.length+1);U<=K;U++){var J=D-U|0;X+=(k=(_=0|T.words[J])*(j=0|A.words[U])+G)/67108864|0,G=67108863&k}C.words[D]=0|G,I=0|X}return I!==0?C.words[D]=0|I:C.length--,C.strip()}t.prototype.toString=function(T,A){var C;if(A=0|A||1,(T=T||10)===16||T==="hex"){C="";for(var w=0,_=0,j=0;j<this.length;j++){var k=this.words[j],E=(16777215&(k<<w|_)).toString(16);C=(_=k>>>24-w&16777215)!==0||j!==this.length-1?b[6-E.length]+E+C:E+C,(w+=2)>=26&&(w-=26,j--)}for(_!==0&&(C=_.toString(16)+C);C.length%A!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(T===(0|T)&&T>=2&&T<=36){var I=g[T],D=p[T];C="";var X=this.clone();for(X.negative=0;!X.isZero();){var G=X.modn(D).toString(T);C=(X=X.idivn(D)).isZero()?G+C:b[I-G.length]+G+C}for(this.isZero()&&(C="0"+C);C.length%A!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}o(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=67108864*this.words[1]:this.length===3&&this.words[2]===1?T+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(T,A){return o(n!==void 0),this.toArrayLike(n,T,A)},t.prototype.toArray=function(T,A){return this.toArrayLike(Array,T,A)},t.prototype.toArrayLike=function(T,A,C){var w=this.byteLength(),_=C||Math.max(1,w);o(w<=_,"byte array longer than desired length"),o(_>0,"Requested array length <= 0"),this.strip();var j,k,E=A==="le",I=new T(_),D=this.clone();if(E){for(k=0;!D.isZero();k++)j=D.andln(255),D.iushrn(8),I[k]=j;for(;k<_;k++)I[k]=0}else{for(k=0;k<_-w;k++)I[k]=0;for(k=0;!D.isZero();k++)j=D.andln(255),D.iushrn(8),I[_-k-1]=j}return I},Math.clz32?t.prototype._countBits=function(T){return 32-Math.clz32(T)}:t.prototype._countBits=function(T){var A=T,C=0;return A>=4096&&(C+=13,A>>>=13),A>=64&&(C+=7,A>>>=7),A>=8&&(C+=4,A>>>=4),A>=2&&(C+=2,A>>>=2),C+A},t.prototype._zeroBits=function(T){if(T===0)return 26;var A=T,C=0;return(8191&A)==0&&(C+=13,A>>>=13),(127&A)==0&&(C+=7,A>>>=7),(15&A)==0&&(C+=4,A>>>=4),(3&A)==0&&(C+=2,A>>>=2),(1&A)==0&&C++,C},t.prototype.bitLength=function(){var T=this.words[this.length-1],A=this._countBits(T);return 26*(this.length-1)+A},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,A=0;A<this.length;A++){var C=this._zeroBits(this.words[A]);if(T+=C,C!==26)break}return T},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},t.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var A=0;A<T.length;A++)this.words[A]=this.words[A]|T.words[A];return this.strip()},t.prototype.ior=function(T){return o((this.negative|T.negative)==0),this.iuor(T)},t.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},t.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},t.prototype.iuand=function(T){var A;A=this.length>T.length?T:this;for(var C=0;C<A.length;C++)this.words[C]=this.words[C]&T.words[C];return this.length=A.length,this.strip()},t.prototype.iand=function(T){return o((this.negative|T.negative)==0),this.iuand(T)},t.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},t.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},t.prototype.iuxor=function(T){var A,C;this.length>T.length?(A=this,C=T):(A=T,C=this);for(var w=0;w<C.length;w++)this.words[w]=A.words[w]^C.words[w];if(this!==A)for(;w<A.length;w++)this.words[w]=A.words[w];return this.length=A.length,this.strip()},t.prototype.ixor=function(T){return o((this.negative|T.negative)==0),this.iuxor(T)},t.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},t.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},t.prototype.inotn=function(T){o(typeof T=="number"&&T>=0);var A=0|Math.ceil(T/26),C=T%26;this._expand(A),C>0&&A--;for(var w=0;w<A;w++)this.words[w]=67108863&~this.words[w];return C>0&&(this.words[w]=~this.words[w]&67108863>>26-C),this.strip()},t.prototype.notn=function(T){return this.clone().inotn(T)},t.prototype.setn=function(T,A){o(typeof T=="number"&&T>=0);var C=T/26|0,w=T%26;return this._expand(C+1),this.words[C]=A?this.words[C]|1<<w:this.words[C]&~(1<<w),this.strip()},t.prototype.iadd=function(T){var A,C,w;if(this.negative!==0&&T.negative===0)return this.negative=0,A=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,A=this.isub(T),T.negative=1,A._normSign();this.length>T.length?(C=this,w=T):(C=T,w=this);for(var _=0,j=0;j<w.length;j++)A=(0|C.words[j])+(0|w.words[j])+_,this.words[j]=67108863&A,_=A>>>26;for(;_!==0&&j<C.length;j++)A=(0|C.words[j])+_,this.words[j]=67108863&A,_=A>>>26;if(this.length=C.length,_!==0)this.words[this.length]=_,this.length++;else if(C!==this)for(;j<C.length;j++)this.words[j]=C.words[j];return this},t.prototype.add=function(T){var A;return T.negative!==0&&this.negative===0?(T.negative=0,A=this.sub(T),T.negative^=1,A):T.negative===0&&this.negative!==0?(this.negative=0,A=T.sub(this),this.negative=1,A):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},t.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var A=this.iadd(T);return T.negative=1,A._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var C,w,_=this.cmp(T);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(C=this,w=T):(C=T,w=this);for(var j=0,k=0;k<w.length;k++)j=(A=(0|C.words[k])-(0|w.words[k])+j)>>26,this.words[k]=67108863&A;for(;j!==0&&k<C.length;k++)j=(A=(0|C.words[k])+j)>>26,this.words[k]=67108863&A;if(j===0&&k<C.length&&C!==this)for(;k<C.length;k++)this.words[k]=C.words[k];return this.length=Math.max(this.length,k),C!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(T){return this.clone().isub(T)};var y=function(T,A,C){var w,_,j,k=T.words,E=A.words,I=C.words,D=0,X=0|k[0],G=8191&X,K=X>>>13,U=0|k[1],J=8191&U,$=U>>>13,L=0|k[2],W=8191&L,re=L>>>13,ne=0|k[3],se=8191&ne,H=ne>>>13,ce=0|k[4],ae=8191&ce,Y=ce>>>13,Q=0|k[5],te=8191&Q,ie=Q>>>13,le=0|k[6],ee=8191&le,oe=le>>>13,de=0|k[7],fe=8191&de,be=de>>>13,he=0|k[8],pe=8191&he,ke=he>>>13,Ce=0|k[9],Ee=8191&Ce,Oe=Ce>>>13,Te=0|E[0],ye=8191&Te,Ae=Te>>>13,Fe=0|E[1],Re=8191&Fe,ge=Fe>>>13,xe=0|E[2],we=8191&xe,je=xe>>>13,Se=0|E[3],Ie=8191&Se,He=Se>>>13,ze=0|E[4],Le=8191&ze,Ge=ze>>>13,Ke=0|E[5],Ye=8191&Ke,ut=Ke>>>13,ht=0|E[6],rt=8191&ht,me=ht>>>13,ve=0|E[7],Ne=8191&ve,$e=ve>>>13,ot=0|E[8],Ve=8191&ot,lt=ot>>>13,Ze=0|E[9],et=8191&Ze,ft=Ze>>>13;C.negative=T.negative^A.negative,C.length=19;var ct=(D+(w=Math.imul(G,ye))|0)+((8191&(_=(_=Math.imul(G,Ae))+Math.imul(K,ye)|0))<<13)|0;D=((j=Math.imul(K,Ae))+(_>>>13)|0)+(ct>>>26)|0,ct&=67108863,w=Math.imul(J,ye),_=(_=Math.imul(J,Ae))+Math.imul($,ye)|0,j=Math.imul($,Ae);var xt=(D+(w=w+Math.imul(G,Re)|0)|0)+((8191&(_=(_=_+Math.imul(G,ge)|0)+Math.imul(K,Re)|0))<<13)|0;D=((j=j+Math.imul(K,ge)|0)+(_>>>13)|0)+(xt>>>26)|0,xt&=67108863,w=Math.imul(W,ye),_=(_=Math.imul(W,Ae))+Math.imul(re,ye)|0,j=Math.imul(re,Ae),w=w+Math.imul(J,Re)|0,_=(_=_+Math.imul(J,ge)|0)+Math.imul($,Re)|0,j=j+Math.imul($,ge)|0;var Dt=(D+(w=w+Math.imul(G,we)|0)|0)+((8191&(_=(_=_+Math.imul(G,je)|0)+Math.imul(K,we)|0))<<13)|0;D=((j=j+Math.imul(K,je)|0)+(_>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,w=Math.imul(se,ye),_=(_=Math.imul(se,Ae))+Math.imul(H,ye)|0,j=Math.imul(H,Ae),w=w+Math.imul(W,Re)|0,_=(_=_+Math.imul(W,ge)|0)+Math.imul(re,Re)|0,j=j+Math.imul(re,ge)|0,w=w+Math.imul(J,we)|0,_=(_=_+Math.imul(J,je)|0)+Math.imul($,we)|0,j=j+Math.imul($,je)|0;var Tt=(D+(w=w+Math.imul(G,Ie)|0)|0)+((8191&(_=(_=_+Math.imul(G,He)|0)+Math.imul(K,Ie)|0))<<13)|0;D=((j=j+Math.imul(K,He)|0)+(_>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(ae,ye),_=(_=Math.imul(ae,Ae))+Math.imul(Y,ye)|0,j=Math.imul(Y,Ae),w=w+Math.imul(se,Re)|0,_=(_=_+Math.imul(se,ge)|0)+Math.imul(H,Re)|0,j=j+Math.imul(H,ge)|0,w=w+Math.imul(W,we)|0,_=(_=_+Math.imul(W,je)|0)+Math.imul(re,we)|0,j=j+Math.imul(re,je)|0,w=w+Math.imul(J,Ie)|0,_=(_=_+Math.imul(J,He)|0)+Math.imul($,Ie)|0,j=j+Math.imul($,He)|0;var Bt=(D+(w=w+Math.imul(G,Le)|0)|0)+((8191&(_=(_=_+Math.imul(G,Ge)|0)+Math.imul(K,Le)|0))<<13)|0;D=((j=j+Math.imul(K,Ge)|0)+(_>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,w=Math.imul(te,ye),_=(_=Math.imul(te,Ae))+Math.imul(ie,ye)|0,j=Math.imul(ie,Ae),w=w+Math.imul(ae,Re)|0,_=(_=_+Math.imul(ae,ge)|0)+Math.imul(Y,Re)|0,j=j+Math.imul(Y,ge)|0,w=w+Math.imul(se,we)|0,_=(_=_+Math.imul(se,je)|0)+Math.imul(H,we)|0,j=j+Math.imul(H,je)|0,w=w+Math.imul(W,Ie)|0,_=(_=_+Math.imul(W,He)|0)+Math.imul(re,Ie)|0,j=j+Math.imul(re,He)|0,w=w+Math.imul(J,Le)|0,_=(_=_+Math.imul(J,Ge)|0)+Math.imul($,Le)|0,j=j+Math.imul($,Ge)|0;var Vt=(D+(w=w+Math.imul(G,Ye)|0)|0)+((8191&(_=(_=_+Math.imul(G,ut)|0)+Math.imul(K,Ye)|0))<<13)|0;D=((j=j+Math.imul(K,ut)|0)+(_>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,w=Math.imul(ee,ye),_=(_=Math.imul(ee,Ae))+Math.imul(oe,ye)|0,j=Math.imul(oe,Ae),w=w+Math.imul(te,Re)|0,_=(_=_+Math.imul(te,ge)|0)+Math.imul(ie,Re)|0,j=j+Math.imul(ie,ge)|0,w=w+Math.imul(ae,we)|0,_=(_=_+Math.imul(ae,je)|0)+Math.imul(Y,we)|0,j=j+Math.imul(Y,je)|0,w=w+Math.imul(se,Ie)|0,_=(_=_+Math.imul(se,He)|0)+Math.imul(H,Ie)|0,j=j+Math.imul(H,He)|0,w=w+Math.imul(W,Le)|0,_=(_=_+Math.imul(W,Ge)|0)+Math.imul(re,Le)|0,j=j+Math.imul(re,Ge)|0,w=w+Math.imul(J,Ye)|0,_=(_=_+Math.imul(J,ut)|0)+Math.imul($,Ye)|0,j=j+Math.imul($,ut)|0;var Jt=(D+(w=w+Math.imul(G,rt)|0)|0)+((8191&(_=(_=_+Math.imul(G,me)|0)+Math.imul(K,rt)|0))<<13)|0;D=((j=j+Math.imul(K,me)|0)+(_>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,w=Math.imul(fe,ye),_=(_=Math.imul(fe,Ae))+Math.imul(be,ye)|0,j=Math.imul(be,Ae),w=w+Math.imul(ee,Re)|0,_=(_=_+Math.imul(ee,ge)|0)+Math.imul(oe,Re)|0,j=j+Math.imul(oe,ge)|0,w=w+Math.imul(te,we)|0,_=(_=_+Math.imul(te,je)|0)+Math.imul(ie,we)|0,j=j+Math.imul(ie,je)|0,w=w+Math.imul(ae,Ie)|0,_=(_=_+Math.imul(ae,He)|0)+Math.imul(Y,Ie)|0,j=j+Math.imul(Y,He)|0,w=w+Math.imul(se,Le)|0,_=(_=_+Math.imul(se,Ge)|0)+Math.imul(H,Le)|0,j=j+Math.imul(H,Ge)|0,w=w+Math.imul(W,Ye)|0,_=(_=_+Math.imul(W,ut)|0)+Math.imul(re,Ye)|0,j=j+Math.imul(re,ut)|0,w=w+Math.imul(J,rt)|0,_=(_=_+Math.imul(J,me)|0)+Math.imul($,rt)|0,j=j+Math.imul($,me)|0;var ue=(D+(w=w+Math.imul(G,Ne)|0)|0)+((8191&(_=(_=_+Math.imul(G,$e)|0)+Math.imul(K,Ne)|0))<<13)|0;D=((j=j+Math.imul(K,$e)|0)+(_>>>13)|0)+(ue>>>26)|0,ue&=67108863,w=Math.imul(pe,ye),_=(_=Math.imul(pe,Ae))+Math.imul(ke,ye)|0,j=Math.imul(ke,Ae),w=w+Math.imul(fe,Re)|0,_=(_=_+Math.imul(fe,ge)|0)+Math.imul(be,Re)|0,j=j+Math.imul(be,ge)|0,w=w+Math.imul(ee,we)|0,_=(_=_+Math.imul(ee,je)|0)+Math.imul(oe,we)|0,j=j+Math.imul(oe,je)|0,w=w+Math.imul(te,Ie)|0,_=(_=_+Math.imul(te,He)|0)+Math.imul(ie,Ie)|0,j=j+Math.imul(ie,He)|0,w=w+Math.imul(ae,Le)|0,_=(_=_+Math.imul(ae,Ge)|0)+Math.imul(Y,Le)|0,j=j+Math.imul(Y,Ge)|0,w=w+Math.imul(se,Ye)|0,_=(_=_+Math.imul(se,ut)|0)+Math.imul(H,Ye)|0,j=j+Math.imul(H,ut)|0,w=w+Math.imul(W,rt)|0,_=(_=_+Math.imul(W,me)|0)+Math.imul(re,rt)|0,j=j+Math.imul(re,me)|0,w=w+Math.imul(J,Ne)|0,_=(_=_+Math.imul(J,$e)|0)+Math.imul($,Ne)|0,j=j+Math.imul($,$e)|0;var _e=(D+(w=w+Math.imul(G,Ve)|0)|0)+((8191&(_=(_=_+Math.imul(G,lt)|0)+Math.imul(K,Ve)|0))<<13)|0;D=((j=j+Math.imul(K,lt)|0)+(_>>>13)|0)+(_e>>>26)|0,_e&=67108863,w=Math.imul(Ee,ye),_=(_=Math.imul(Ee,Ae))+Math.imul(Oe,ye)|0,j=Math.imul(Oe,Ae),w=w+Math.imul(pe,Re)|0,_=(_=_+Math.imul(pe,ge)|0)+Math.imul(ke,Re)|0,j=j+Math.imul(ke,ge)|0,w=w+Math.imul(fe,we)|0,_=(_=_+Math.imul(fe,je)|0)+Math.imul(be,we)|0,j=j+Math.imul(be,je)|0,w=w+Math.imul(ee,Ie)|0,_=(_=_+Math.imul(ee,He)|0)+Math.imul(oe,Ie)|0,j=j+Math.imul(oe,He)|0,w=w+Math.imul(te,Le)|0,_=(_=_+Math.imul(te,Ge)|0)+Math.imul(ie,Le)|0,j=j+Math.imul(ie,Ge)|0,w=w+Math.imul(ae,Ye)|0,_=(_=_+Math.imul(ae,ut)|0)+Math.imul(Y,Ye)|0,j=j+Math.imul(Y,ut)|0,w=w+Math.imul(se,rt)|0,_=(_=_+Math.imul(se,me)|0)+Math.imul(H,rt)|0,j=j+Math.imul(H,me)|0,w=w+Math.imul(W,Ne)|0,_=(_=_+Math.imul(W,$e)|0)+Math.imul(re,Ne)|0,j=j+Math.imul(re,$e)|0,w=w+Math.imul(J,Ve)|0,_=(_=_+Math.imul(J,lt)|0)+Math.imul($,Ve)|0,j=j+Math.imul($,lt)|0;var Me=(D+(w=w+Math.imul(G,et)|0)|0)+((8191&(_=(_=_+Math.imul(G,ft)|0)+Math.imul(K,et)|0))<<13)|0;D=((j=j+Math.imul(K,ft)|0)+(_>>>13)|0)+(Me>>>26)|0,Me&=67108863,w=Math.imul(Ee,Re),_=(_=Math.imul(Ee,ge))+Math.imul(Oe,Re)|0,j=Math.imul(Oe,ge),w=w+Math.imul(pe,we)|0,_=(_=_+Math.imul(pe,je)|0)+Math.imul(ke,we)|0,j=j+Math.imul(ke,je)|0,w=w+Math.imul(fe,Ie)|0,_=(_=_+Math.imul(fe,He)|0)+Math.imul(be,Ie)|0,j=j+Math.imul(be,He)|0,w=w+Math.imul(ee,Le)|0,_=(_=_+Math.imul(ee,Ge)|0)+Math.imul(oe,Le)|0,j=j+Math.imul(oe,Ge)|0,w=w+Math.imul(te,Ye)|0,_=(_=_+Math.imul(te,ut)|0)+Math.imul(ie,Ye)|0,j=j+Math.imul(ie,ut)|0,w=w+Math.imul(ae,rt)|0,_=(_=_+Math.imul(ae,me)|0)+Math.imul(Y,rt)|0,j=j+Math.imul(Y,me)|0,w=w+Math.imul(se,Ne)|0,_=(_=_+Math.imul(se,$e)|0)+Math.imul(H,Ne)|0,j=j+Math.imul(H,$e)|0,w=w+Math.imul(W,Ve)|0,_=(_=_+Math.imul(W,lt)|0)+Math.imul(re,Ve)|0,j=j+Math.imul(re,lt)|0;var Pe=(D+(w=w+Math.imul(J,et)|0)|0)+((8191&(_=(_=_+Math.imul(J,ft)|0)+Math.imul($,et)|0))<<13)|0;D=((j=j+Math.imul($,ft)|0)+(_>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,w=Math.imul(Ee,we),_=(_=Math.imul(Ee,je))+Math.imul(Oe,we)|0,j=Math.imul(Oe,je),w=w+Math.imul(pe,Ie)|0,_=(_=_+Math.imul(pe,He)|0)+Math.imul(ke,Ie)|0,j=j+Math.imul(ke,He)|0,w=w+Math.imul(fe,Le)|0,_=(_=_+Math.imul(fe,Ge)|0)+Math.imul(be,Le)|0,j=j+Math.imul(be,Ge)|0,w=w+Math.imul(ee,Ye)|0,_=(_=_+Math.imul(ee,ut)|0)+Math.imul(oe,Ye)|0,j=j+Math.imul(oe,ut)|0,w=w+Math.imul(te,rt)|0,_=(_=_+Math.imul(te,me)|0)+Math.imul(ie,rt)|0,j=j+Math.imul(ie,me)|0,w=w+Math.imul(ae,Ne)|0,_=(_=_+Math.imul(ae,$e)|0)+Math.imul(Y,Ne)|0,j=j+Math.imul(Y,$e)|0,w=w+Math.imul(se,Ve)|0,_=(_=_+Math.imul(se,lt)|0)+Math.imul(H,Ve)|0,j=j+Math.imul(H,lt)|0;var Je=(D+(w=w+Math.imul(W,et)|0)|0)+((8191&(_=(_=_+Math.imul(W,ft)|0)+Math.imul(re,et)|0))<<13)|0;D=((j=j+Math.imul(re,ft)|0)+(_>>>13)|0)+(Je>>>26)|0,Je&=67108863,w=Math.imul(Ee,Ie),_=(_=Math.imul(Ee,He))+Math.imul(Oe,Ie)|0,j=Math.imul(Oe,He),w=w+Math.imul(pe,Le)|0,_=(_=_+Math.imul(pe,Ge)|0)+Math.imul(ke,Le)|0,j=j+Math.imul(ke,Ge)|0,w=w+Math.imul(fe,Ye)|0,_=(_=_+Math.imul(fe,ut)|0)+Math.imul(be,Ye)|0,j=j+Math.imul(be,ut)|0,w=w+Math.imul(ee,rt)|0,_=(_=_+Math.imul(ee,me)|0)+Math.imul(oe,rt)|0,j=j+Math.imul(oe,me)|0,w=w+Math.imul(te,Ne)|0,_=(_=_+Math.imul(te,$e)|0)+Math.imul(ie,Ne)|0,j=j+Math.imul(ie,$e)|0,w=w+Math.imul(ae,Ve)|0,_=(_=_+Math.imul(ae,lt)|0)+Math.imul(Y,Ve)|0,j=j+Math.imul(Y,lt)|0;var Be=(D+(w=w+Math.imul(se,et)|0)|0)+((8191&(_=(_=_+Math.imul(se,ft)|0)+Math.imul(H,et)|0))<<13)|0;D=((j=j+Math.imul(H,ft)|0)+(_>>>13)|0)+(Be>>>26)|0,Be&=67108863,w=Math.imul(Ee,Le),_=(_=Math.imul(Ee,Ge))+Math.imul(Oe,Le)|0,j=Math.imul(Oe,Ge),w=w+Math.imul(pe,Ye)|0,_=(_=_+Math.imul(pe,ut)|0)+Math.imul(ke,Ye)|0,j=j+Math.imul(ke,ut)|0,w=w+Math.imul(fe,rt)|0,_=(_=_+Math.imul(fe,me)|0)+Math.imul(be,rt)|0,j=j+Math.imul(be,me)|0,w=w+Math.imul(ee,Ne)|0,_=(_=_+Math.imul(ee,$e)|0)+Math.imul(oe,Ne)|0,j=j+Math.imul(oe,$e)|0,w=w+Math.imul(te,Ve)|0,_=(_=_+Math.imul(te,lt)|0)+Math.imul(ie,Ve)|0,j=j+Math.imul(ie,lt)|0;var qe=(D+(w=w+Math.imul(ae,et)|0)|0)+((8191&(_=(_=_+Math.imul(ae,ft)|0)+Math.imul(Y,et)|0))<<13)|0;D=((j=j+Math.imul(Y,ft)|0)+(_>>>13)|0)+(qe>>>26)|0,qe&=67108863,w=Math.imul(Ee,Ye),_=(_=Math.imul(Ee,ut))+Math.imul(Oe,Ye)|0,j=Math.imul(Oe,ut),w=w+Math.imul(pe,rt)|0,_=(_=_+Math.imul(pe,me)|0)+Math.imul(ke,rt)|0,j=j+Math.imul(ke,me)|0,w=w+Math.imul(fe,Ne)|0,_=(_=_+Math.imul(fe,$e)|0)+Math.imul(be,Ne)|0,j=j+Math.imul(be,$e)|0,w=w+Math.imul(ee,Ve)|0,_=(_=_+Math.imul(ee,lt)|0)+Math.imul(oe,Ve)|0,j=j+Math.imul(oe,lt)|0;var gt=(D+(w=w+Math.imul(te,et)|0)|0)+((8191&(_=(_=_+Math.imul(te,ft)|0)+Math.imul(ie,et)|0))<<13)|0;D=((j=j+Math.imul(ie,ft)|0)+(_>>>13)|0)+(gt>>>26)|0,gt&=67108863,w=Math.imul(Ee,rt),_=(_=Math.imul(Ee,me))+Math.imul(Oe,rt)|0,j=Math.imul(Oe,me),w=w+Math.imul(pe,Ne)|0,_=(_=_+Math.imul(pe,$e)|0)+Math.imul(ke,Ne)|0,j=j+Math.imul(ke,$e)|0,w=w+Math.imul(fe,Ve)|0,_=(_=_+Math.imul(fe,lt)|0)+Math.imul(be,Ve)|0,j=j+Math.imul(be,lt)|0;var pt=(D+(w=w+Math.imul(ee,et)|0)|0)+((8191&(_=(_=_+Math.imul(ee,ft)|0)+Math.imul(oe,et)|0))<<13)|0;D=((j=j+Math.imul(oe,ft)|0)+(_>>>13)|0)+(pt>>>26)|0,pt&=67108863,w=Math.imul(Ee,Ne),_=(_=Math.imul(Ee,$e))+Math.imul(Oe,Ne)|0,j=Math.imul(Oe,$e),w=w+Math.imul(pe,Ve)|0,_=(_=_+Math.imul(pe,lt)|0)+Math.imul(ke,Ve)|0,j=j+Math.imul(ke,lt)|0;var mt=(D+(w=w+Math.imul(fe,et)|0)|0)+((8191&(_=(_=_+Math.imul(fe,ft)|0)+Math.imul(be,et)|0))<<13)|0;D=((j=j+Math.imul(be,ft)|0)+(_>>>13)|0)+(mt>>>26)|0,mt&=67108863,w=Math.imul(Ee,Ve),_=(_=Math.imul(Ee,lt))+Math.imul(Oe,Ve)|0,j=Math.imul(Oe,lt);var nt=(D+(w=w+Math.imul(pe,et)|0)|0)+((8191&(_=(_=_+Math.imul(pe,ft)|0)+Math.imul(ke,et)|0))<<13)|0;D=((j=j+Math.imul(ke,ft)|0)+(_>>>13)|0)+(nt>>>26)|0,nt&=67108863;var wt=(D+(w=Math.imul(Ee,et))|0)+((8191&(_=(_=Math.imul(Ee,ft))+Math.imul(Oe,et)|0))<<13)|0;return D=((j=Math.imul(Oe,ft))+(_>>>13)|0)+(wt>>>26)|0,wt&=67108863,I[0]=ct,I[1]=xt,I[2]=Dt,I[3]=Tt,I[4]=Bt,I[5]=Vt,I[6]=Jt,I[7]=ue,I[8]=_e,I[9]=Me,I[10]=Pe,I[11]=Je,I[12]=Be,I[13]=qe,I[14]=gt,I[15]=pt,I[16]=mt,I[17]=nt,I[18]=wt,D!==0&&(I[19]=D,C.length++),C};function v(T,A,C){return new S().mulp(T,A,C)}function S(T,A){this.x=T,this.y=A}Math.imul||(y=x),t.prototype.mulTo=function(T,A){var C=this.length+T.length;return this.length===10&&T.length===10?y(this,T,A):C<63?x(this,T,A):C<1024?(function(w,_,j){j.negative=_.negative^w.negative,j.length=w.length+_.length;for(var k=0,E=0,I=0;I<j.length-1;I++){var D=E;E=0;for(var X=67108863&k,G=Math.min(I,_.length-1),K=Math.max(0,I-w.length+1);K<=G;K++){var U=I-K,J=(0|w.words[U])*(0|_.words[K]),$=67108863&J;X=67108863&($=$+X|0),E+=(D=(D=D+(J/67108864|0)|0)+($>>>26)|0)>>>26,D&=67108863}j.words[I]=X,k=D,D=E}return k!==0?j.words[I]=k:j.length--,j.strip()})(this,T,A):v(this,T,A)},S.prototype.makeRBT=function(T){for(var A=new Array(T),C=t.prototype._countBits(T)-1,w=0;w<T;w++)A[w]=this.revBin(w,C,T);return A},S.prototype.revBin=function(T,A,C){if(T===0||T===C-1)return T;for(var w=0,_=0;_<A;_++)w|=(1&T)<<A-_-1,T>>=1;return w},S.prototype.permute=function(T,A,C,w,_,j){for(var k=0;k<j;k++)w[k]=A[T[k]],_[k]=C[T[k]]},S.prototype.transform=function(T,A,C,w,_,j){this.permute(j,T,A,C,w,_);for(var k=1;k<_;k<<=1)for(var E=k<<1,I=Math.cos(2*Math.PI/E),D=Math.sin(2*Math.PI/E),X=0;X<_;X+=E)for(var G=I,K=D,U=0;U<k;U++){var J=C[X+U],$=w[X+U],L=C[X+U+k],W=w[X+U+k],re=G*L-K*W;W=G*W+K*L,L=re,C[X+U]=J+L,w[X+U]=$+W,C[X+U+k]=J-L,w[X+U+k]=$-W,U!==E&&(re=I*G-D*K,K=I*K+D*G,G=re)}},S.prototype.guessLen13b=function(T,A){var C=1|Math.max(A,T),w=1&C,_=0;for(C=C/2|0;C;C>>>=1)_++;return 1<<_+1+w},S.prototype.conjugate=function(T,A,C){if(!(C<=1))for(var w=0;w<C/2;w++){var _=T[w];T[w]=T[C-w-1],T[C-w-1]=_,_=A[w],A[w]=-A[C-w-1],A[C-w-1]=-_}},S.prototype.normalize13b=function(T,A){for(var C=0,w=0;w<A/2;w++){var _=8192*Math.round(T[2*w+1]/A)+Math.round(T[2*w]/A)+C;T[w]=67108863&_,C=_<67108864?0:_/67108864|0}return T},S.prototype.convert13b=function(T,A,C,w){for(var _=0,j=0;j<A;j++)_+=0|T[j],C[2*j]=8191&_,_>>>=13,C[2*j+1]=8191&_,_>>>=13;for(j=2*A;j<w;++j)C[j]=0;o(_===0),o((-8192&_)==0)},S.prototype.stub=function(T){for(var A=new Array(T),C=0;C<T;C++)A[C]=0;return A},S.prototype.mulp=function(T,A,C){var w=2*this.guessLen13b(T.length,A.length),_=this.makeRBT(w),j=this.stub(w),k=new Array(w),E=new Array(w),I=new Array(w),D=new Array(w),X=new Array(w),G=new Array(w),K=C.words;K.length=w,this.convert13b(T.words,T.length,k,w),this.convert13b(A.words,A.length,D,w),this.transform(k,j,E,I,w,_),this.transform(D,j,X,G,w,_);for(var U=0;U<w;U++){var J=E[U]*X[U]-I[U]*G[U];I[U]=E[U]*G[U]+I[U]*X[U],E[U]=J}return this.conjugate(E,I,w),this.transform(E,I,K,j,w,_),this.conjugate(K,j,w),this.normalize13b(K,w),C.negative=T.negative^A.negative,C.length=T.length+A.length,C.strip()},t.prototype.mul=function(T){var A=new t(null);return A.words=new Array(this.length+T.length),this.mulTo(T,A)},t.prototype.mulf=function(T){var A=new t(null);return A.words=new Array(this.length+T.length),v(this,T,A)},t.prototype.imul=function(T){return this.clone().mulTo(T,this)},t.prototype.imuln=function(T){o(typeof T=="number"),o(T<67108864);for(var A=0,C=0;C<this.length;C++){var w=(0|this.words[C])*T,_=(67108863&w)+(67108863&A);A>>=26,A+=w/67108864|0,A+=_>>>26,this.words[C]=67108863&_}return A!==0&&(this.words[C]=A,this.length++),this},t.prototype.muln=function(T){return this.clone().imuln(T)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(T){var A=(function(j){for(var k=new Array(j.bitLength()),E=0;E<k.length;E++){var I=E/26|0,D=E%26;k[E]=(j.words[I]&1<<D)>>>D}return k})(T);if(A.length===0)return new t(1);for(var C=this,w=0;w<A.length&&A[w]===0;w++,C=C.sqr());if(++w<A.length)for(var _=C.sqr();w<A.length;w++,_=_.sqr())A[w]!==0&&(C=C.mul(_));return C},t.prototype.iushln=function(T){o(typeof T=="number"&&T>=0);var A,C=T%26,w=(T-C)/26,_=67108863>>>26-C<<26-C;if(C!==0){var j=0;for(A=0;A<this.length;A++){var k=this.words[A]&_,E=(0|this.words[A])-k<<C;this.words[A]=E|j,j=k>>>26-C}j&&(this.words[A]=j,this.length++)}if(w!==0){for(A=this.length-1;A>=0;A--)this.words[A+w]=this.words[A];for(A=0;A<w;A++)this.words[A]=0;this.length+=w}return this.strip()},t.prototype.ishln=function(T){return o(this.negative===0),this.iushln(T)},t.prototype.iushrn=function(T,A,C){var w;o(typeof T=="number"&&T>=0),w=A?(A-A%26)/26:0;var _=T%26,j=Math.min((T-_)/26,this.length),k=67108863^67108863>>>_<<_,E=C;if(w-=j,w=Math.max(0,w),E){for(var I=0;I<j;I++)E.words[I]=this.words[I];E.length=j}if(j!==0)if(this.length>j)for(this.length-=j,I=0;I<this.length;I++)this.words[I]=this.words[I+j];else this.words[0]=0,this.length=1;var D=0;for(I=this.length-1;I>=0&&(D!==0||I>=w);I--){var X=0|this.words[I];this.words[I]=D<<26-_|X>>>_,D=X&k}return E&&D!==0&&(E.words[E.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(T,A,C){return o(this.negative===0),this.iushrn(T,A,C)},t.prototype.shln=function(T){return this.clone().ishln(T)},t.prototype.ushln=function(T){return this.clone().iushln(T)},t.prototype.shrn=function(T){return this.clone().ishrn(T)},t.prototype.ushrn=function(T){return this.clone().iushrn(T)},t.prototype.testn=function(T){o(typeof T=="number"&&T>=0);var A=T%26,C=(T-A)/26,w=1<<A;return!(this.length<=C)&&!!(this.words[C]&w)},t.prototype.imaskn=function(T){o(typeof T=="number"&&T>=0);var A=T%26,C=(T-A)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(A!==0&&C++,this.length=Math.min(C,this.length),A!==0){var w=67108863^67108863>>>A<<A;this.words[this.length-1]&=w}return this.strip()},t.prototype.maskn=function(T){return this.clone().imaskn(T)},t.prototype.iaddn=function(T){return o(typeof T=="number"),o(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(0|this.words[0])<T?(this.words[0]=T-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},t.prototype._iaddn=function(T){this.words[0]+=T;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},t.prototype.isubn=function(T){if(o(typeof T=="number"),o(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this.strip()},t.prototype.addn=function(T){return this.clone().iaddn(T)},t.prototype.subn=function(T){return this.clone().isubn(T)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(T,A,C){var w,_,j=T.length+C;this._expand(j);var k=0;for(w=0;w<T.length;w++){_=(0|this.words[w+C])+k;var E=(0|T.words[w])*A;k=((_-=67108863&E)>>26)-(E/67108864|0),this.words[w+C]=67108863&_}for(;w<this.length-C;w++)k=(_=(0|this.words[w+C])+k)>>26,this.words[w+C]=67108863&_;if(k===0)return this.strip();for(o(k===-1),k=0,w=0;w<this.length;w++)k=(_=-(0|this.words[w])+k)>>26,this.words[w]=67108863&_;return this.negative=1,this.strip()},t.prototype._wordDiv=function(T,A){var C=(this.length,T.length),w=this.clone(),_=T,j=0|_.words[_.length-1];(C=26-this._countBits(j))!==0&&(_=_.ushln(C),w.iushln(C),j=0|_.words[_.length-1]);var k,E=w.length-_.length;if(A!=="mod"){(k=new t(null)).length=E+1,k.words=new Array(k.length);for(var I=0;I<k.length;I++)k.words[I]=0}var D=w.clone()._ishlnsubmul(_,1,E);D.negative===0&&(w=D,k&&(k.words[E]=1));for(var X=E-1;X>=0;X--){var G=67108864*(0|w.words[_.length+X])+(0|w.words[_.length+X-1]);for(G=Math.min(G/j|0,67108863),w._ishlnsubmul(_,G,X);w.negative!==0;)G--,w.negative=0,w._ishlnsubmul(_,1,X),w.isZero()||(w.negative^=1);k&&(k.words[X]=G)}return k&&k.strip(),w.strip(),A!=="div"&&C!==0&&w.iushrn(C),{div:k||null,mod:w}},t.prototype.divmod=function(T,A,C){return o(!T.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:this.negative!==0&&T.negative===0?(j=this.neg().divmod(T,A),A!=="mod"&&(w=j.div.neg()),A!=="div"&&(_=j.mod.neg(),C&&_.negative!==0&&_.iadd(T)),{div:w,mod:_}):this.negative===0&&T.negative!==0?(j=this.divmod(T.neg(),A),A!=="mod"&&(w=j.div.neg()),{div:w,mod:j.mod}):(this.negative&T.negative)!=0?(j=this.neg().divmod(T.neg(),A),A!=="div"&&(_=j.mod.neg(),C&&_.negative!==0&&_.isub(T)),{div:j.div,mod:_}):T.length>this.length||this.cmp(T)<0?{div:new t(0),mod:this}:T.length===1?A==="div"?{div:this.divn(T.words[0]),mod:null}:A==="mod"?{div:null,mod:new t(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new t(this.modn(T.words[0]))}:this._wordDiv(T,A);var w,_,j},t.prototype.div=function(T){return this.divmod(T,"div",!1).div},t.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},t.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},t.prototype.divRound=function(T){var A=this.divmod(T);if(A.mod.isZero())return A.div;var C=A.div.negative!==0?A.mod.isub(T):A.mod,w=T.ushrn(1),_=T.andln(1),j=C.cmp(w);return j<0||_===1&&j===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},t.prototype.modn=function(T){o(T<=67108863);for(var A=(1<<26)%T,C=0,w=this.length-1;w>=0;w--)C=(A*C+(0|this.words[w]))%T;return C},t.prototype.idivn=function(T){o(T<=67108863);for(var A=0,C=this.length-1;C>=0;C--){var w=(0|this.words[C])+67108864*A;this.words[C]=w/T|0,A=w%T}return this.strip()},t.prototype.divn=function(T){return this.clone().idivn(T)},t.prototype.egcd=function(T){o(T.negative===0),o(!T.isZero());var A=this,C=T.clone();A=A.negative!==0?A.umod(T):A.clone();for(var w=new t(1),_=new t(0),j=new t(0),k=new t(1),E=0;A.isEven()&&C.isEven();)A.iushrn(1),C.iushrn(1),++E;for(var I=C.clone(),D=A.clone();!A.isZero();){for(var X=0,G=1;(A.words[0]&G)==0&&X<26;++X,G<<=1);if(X>0)for(A.iushrn(X);X-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(I),_.isub(D)),w.iushrn(1),_.iushrn(1);for(var K=0,U=1;(C.words[0]&U)==0&&K<26;++K,U<<=1);if(K>0)for(C.iushrn(K);K-- >0;)(j.isOdd()||k.isOdd())&&(j.iadd(I),k.isub(D)),j.iushrn(1),k.iushrn(1);A.cmp(C)>=0?(A.isub(C),w.isub(j),_.isub(k)):(C.isub(A),j.isub(w),k.isub(_))}return{a:j,b:k,gcd:C.iushln(E)}},t.prototype._invmp=function(T){o(T.negative===0),o(!T.isZero());var A=this,C=T.clone();A=A.negative!==0?A.umod(T):A.clone();for(var w,_=new t(1),j=new t(0),k=C.clone();A.cmpn(1)>0&&C.cmpn(1)>0;){for(var E=0,I=1;(A.words[0]&I)==0&&E<26;++E,I<<=1);if(E>0)for(A.iushrn(E);E-- >0;)_.isOdd()&&_.iadd(k),_.iushrn(1);for(var D=0,X=1;(C.words[0]&X)==0&&D<26;++D,X<<=1);if(D>0)for(C.iushrn(D);D-- >0;)j.isOdd()&&j.iadd(k),j.iushrn(1);A.cmp(C)>=0?(A.isub(C),_.isub(j)):(C.isub(A),j.isub(_))}return(w=A.cmpn(1)===0?_:j).cmpn(0)<0&&w.iadd(T),w},t.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var A=this.clone(),C=T.clone();A.negative=0,C.negative=0;for(var w=0;A.isEven()&&C.isEven();w++)A.iushrn(1),C.iushrn(1);for(;;){for(;A.isEven();)A.iushrn(1);for(;C.isEven();)C.iushrn(1);var _=A.cmp(C);if(_<0){var j=A;A=C,C=j}else if(_===0||C.cmpn(1)===0)break;A.isub(C)}return C.iushln(w)},t.prototype.invm=function(T){return this.egcd(T).a.umod(T)},t.prototype.isEven=function(){return(1&this.words[0])==0},t.prototype.isOdd=function(){return(1&this.words[0])==1},t.prototype.andln=function(T){return this.words[0]&T},t.prototype.bincn=function(T){o(typeof T=="number");var A=T%26,C=(T-A)/26,w=1<<A;if(this.length<=C)return this._expand(C+1),this.words[C]|=w,this;for(var _=w,j=C;_!==0&&j<this.length;j++){var k=0|this.words[j];_=(k+=_)>>>26,k&=67108863,this.words[j]=k}return _!==0&&(this.words[j]=_,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(T){var A,C=T<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this.strip(),this.length>1)A=1;else{C&&(T=-T),o(T<=67108863,"Number is too big");var w=0|this.words[0];A=w===T?0:w<T?-1:1}return this.negative!==0?0|-A:A},t.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var A=this.ucmp(T);return this.negative!==0?0|-A:A},t.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var A=0,C=this.length-1;C>=0;C--){var w=0|this.words[C],_=0|T.words[C];if(w!==_){w<_?A=-1:w>_&&(A=1);break}}return A},t.prototype.gtn=function(T){return this.cmpn(T)===1},t.prototype.gt=function(T){return this.cmp(T)===1},t.prototype.gten=function(T){return this.cmpn(T)>=0},t.prototype.gte=function(T){return this.cmp(T)>=0},t.prototype.ltn=function(T){return this.cmpn(T)===-1},t.prototype.lt=function(T){return this.cmp(T)===-1},t.prototype.lten=function(T){return this.cmpn(T)<=0},t.prototype.lte=function(T){return this.cmp(T)<=0},t.prototype.eqn=function(T){return this.cmpn(T)===0},t.prototype.eq=function(T){return this.cmp(T)===0},t.red=function(T){return new V(T)},t.prototype.toRed=function(T){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},t.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(T){return this.red=T,this},t.prototype.forceRed=function(T){return o(!this.red,"Already a number in reduction context"),this._forceRed(T)},t.prototype.redAdd=function(T){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},t.prototype.redIAdd=function(T){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},t.prototype.redSub=function(T){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},t.prototype.redISub=function(T){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},t.prototype.redShl=function(T){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},t.prototype.redMul=function(T){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},t.prototype.redIMul=function(T){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},t.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(T){return o(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var N={k256:null,p224:null,p192:null,p25519:null};function R(T,A){this.name=T,this.p=new t(A,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function V(T){if(typeof T=="string"){var A=t._prime(T);this.m=A.p,this.prime=A}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}function O(T){V.call(this,T),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}R.prototype._tmp=function(){var T=new t(null);return T.words=new Array(Math.ceil(this.n/13)),T},R.prototype.ireduce=function(T){var A,C=T;do this.split(C,this.tmp),A=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(A>this.n);var w=A<this.n?-1:C.ucmp(this.p);return w===0?(C.words[0]=0,C.length=1):w>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},R.prototype.split=function(T,A){T.iushrn(this.n,0,A)},R.prototype.imulK=function(T){return T.imul(this.k)},r(B,R),B.prototype.split=function(T,A){for(var C=Math.min(T.length,9),w=0;w<C;w++)A.words[w]=T.words[w];if(A.length=C,T.length<=9)return T.words[0]=0,void(T.length=1);var _=T.words[9];for(A.words[A.length++]=4194303&_,w=10;w<T.length;w++){var j=0|T.words[w];T.words[w-10]=(4194303&j)<<4|_>>>22,_=j}_>>>=22,T.words[w-10]=_,_===0&&T.length>10?T.length-=10:T.length-=9},B.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var A=0,C=0;C<T.length;C++){var w=0|T.words[C];A+=977*w,T.words[C]=67108863&A,A=64*w+(A/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T},r(M,R),r(F,R),r(q,R),q.prototype.imulK=function(T){for(var A=0,C=0;C<T.length;C++){var w=19*(0|T.words[C])+A,_=67108863&w;w>>>=26,T.words[C]=_,A=w}return A!==0&&(T.words[T.length++]=A),T},t._prime=function(T){if(N[T])return N[T];var A;if(T==="k256")A=new B;else if(T==="p224")A=new M;else if(T==="p192")A=new F;else{if(T!=="p25519")throw new Error("Unknown prime "+T);A=new q}return N[T]=A,A},V.prototype._verify1=function(T){o(T.negative===0,"red works only with positives"),o(T.red,"red works only with red numbers")},V.prototype._verify2=function(T,A){o((T.negative|A.negative)==0,"red works only with positives"),o(T.red&&T.red===A.red,"red works only with red numbers")},V.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},V.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},V.prototype.add=function(T,A){this._verify2(T,A);var C=T.add(A);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},V.prototype.iadd=function(T,A){this._verify2(T,A);var C=T.iadd(A);return C.cmp(this.m)>=0&&C.isub(this.m),C},V.prototype.sub=function(T,A){this._verify2(T,A);var C=T.sub(A);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},V.prototype.isub=function(T,A){this._verify2(T,A);var C=T.isub(A);return C.cmpn(0)<0&&C.iadd(this.m),C},V.prototype.shl=function(T,A){return this._verify1(T),this.imod(T.ushln(A))},V.prototype.imul=function(T,A){return this._verify2(T,A),this.imod(T.imul(A))},V.prototype.mul=function(T,A){return this._verify2(T,A),this.imod(T.mul(A))},V.prototype.isqr=function(T){return this.imul(T,T.clone())},V.prototype.sqr=function(T){return this.mul(T,T)},V.prototype.sqrt=function(T){if(T.isZero())return T.clone();var A=this.m.andln(3);if(o(A%2==1),A===3){var C=this.m.add(new t(1)).iushrn(2);return this.pow(T,C)}for(var w=this.m.subn(1),_=0;!w.isZero()&&w.andln(1)===0;)_++,w.iushrn(1);o(!w.isZero());var j=new t(1).toRed(this),k=j.redNeg(),E=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new t(2*I*I).toRed(this);this.pow(I,E).cmp(k)!==0;)I.redIAdd(k);for(var D=this.pow(I,w),X=this.pow(T,w.addn(1).iushrn(1)),G=this.pow(T,w),K=_;G.cmp(j)!==0;){for(var U=G,J=0;U.cmp(j)!==0;J++)U=U.redSqr();o(J<K);var $=this.pow(D,new t(1).iushln(K-J-1));X=X.redMul($),D=$.redSqr(),G=G.redMul(D),K=J}return X},V.prototype.invm=function(T){var A=T._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},V.prototype.pow=function(T,A){if(A.isZero())return new t(1).toRed(this);if(A.cmpn(1)===0)return T.clone();var C=new Array(16);C[0]=new t(1).toRed(this),C[1]=T;for(var w=2;w<C.length;w++)C[w]=this.mul(C[w-1],T);var _=C[0],j=0,k=0,E=A.bitLength()%26;for(E===0&&(E=26),w=A.length-1;w>=0;w--){for(var I=A.words[w],D=E-1;D>=0;D--){var X=I>>D&1;_!==C[0]&&(_=this.sqr(_)),X!==0||j!==0?(j<<=1,j|=X,(++k===4||w===0&&D===0)&&(_=this.mul(_,C[j]),k=0,j=0)):k=0}E=26}return _},V.prototype.convertTo=function(T){var A=T.umod(this.m);return A===T?A.clone():A},V.prototype.convertFrom=function(T){var A=T.clone();return A.red=null,A},t.mont=function(T){return new O(T)},r(O,V),O.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},O.prototype.convertFrom=function(T){var A=this.imod(T.mul(this.rinv));return A.red=null,A},O.prototype.imul=function(T,A){if(T.isZero()||A.isZero())return T.words[0]=0,T.length=1,T;var C=T.imul(A),w=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=C.isub(w).iushrn(this.shift),j=_;return _.cmp(this.m)>=0?j=_.isub(this.m):_.cmpn(0)<0&&(j=_.iadd(this.m)),j._forceRed(this)},O.prototype.mul=function(T,A){if(T.isZero()||A.isZero())return new t(0)._forceRed(this);var C=T.mul(A),w=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=C.isub(w).iushrn(this.shift),j=_;return _.cmp(this.m)>=0?j=_.isub(this.m):_.cmpn(0)<0&&(j=_.iadd(this.m)),j._forceRed(this)},O.prototype.invm=function(T){return this.imod(T._invmp(this.m).mul(this.r2))._forceRed(this)}})(h===void 0||h)},{buffer:188}],185:[function(e,h,f){f.byteLength=function(d){var b=u(d),g=b[0],p=b[1];return 3*(g+p)/4-p},f.toByteArray=function(d){var b,g,p=u(d),x=p[0],y=p[1],v=new o((function(R,B,M){return 3*(B+M)/4-M})(0,x,y)),S=0,N=y>0?x-4:x;for(g=0;g<N;g+=4)b=s[d.charCodeAt(g)]<<18|s[d.charCodeAt(g+1)]<<12|s[d.charCodeAt(g+2)]<<6|s[d.charCodeAt(g+3)],v[S++]=b>>16&255,v[S++]=b>>8&255,v[S++]=255&b;return y===2&&(b=s[d.charCodeAt(g)]<<2|s[d.charCodeAt(g+1)]>>4,v[S++]=255&b),y===1&&(b=s[d.charCodeAt(g)]<<10|s[d.charCodeAt(g+1)]<<4|s[d.charCodeAt(g+2)]>>2,v[S++]=b>>8&255,v[S++]=255&b),v},f.fromByteArray=function(d){for(var b,g=d.length,p=g%3,x=[],y=0,v=g-p;y<v;y+=16383)x.push(c(d,y,y+16383>v?v:y+16383));return p===1?(b=d[g-1],x.push(l[b>>2]+l[b<<4&63]+"==")):p===2&&(b=(d[g-2]<<8)+d[g-1],x.push(l[b>>10]+l[b>>4&63]+l[b<<2&63]+"=")),x.join("")};for(var l=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=r.length;t<n;++t)l[t]=r[t],s[r.charCodeAt(t)]=t;function u(d){var b=d.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=d.indexOf("=");return g===-1&&(g=b),[g,g===b?0:4-g%4]}function c(d,b,g){for(var p,x,y=[],v=b;v<g;v+=3)p=(d[v]<<16&16711680)+(d[v+1]<<8&65280)+(255&d[v+2]),y.push(l[(x=p)>>18&63]+l[x>>12&63]+l[x>>6&63]+l[63&x]);return y.join("")}s[45]=62,s[95]=63},{}],186:[function(e,h,f){(function(l,s){function o(C,w){if(!C)throw new Error(w||"Assertion failed")}function r(C,w){C.super_=w;var _=function(){};_.prototype=w.prototype,C.prototype=new _,C.prototype.constructor=C}function t(C,w,_){if(t.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(w!=="le"&&w!=="be"||(_=w,w=10),this._init(C||0,w||10,_||"be"))}var n;typeof l=="object"?l.exports=t:(void 0).BN=t,t.BN=t,t.wordSize=26;try{n=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function u(C,w){var _=C.charCodeAt(w);return _>=48&&_<=57?_-48:_>=65&&_<=70?_-55:_>=97&&_<=102?_-87:void o(!1,"Invalid character in "+C)}function c(C,w,_){var j=u(C,_);return _-1>=w&&(j|=u(C,_-1)<<4),j}function d(C,w,_,j){for(var k=0,E=0,I=Math.min(C.length,_),D=w;D<I;D++){var X=C.charCodeAt(D)-48;k*=j,E=X>=49?X-49+10:X>=17?X-17+10:X,o(X>=0&&E<j,"Invalid character"),k+=E}return k}function b(C,w){C.words=w.words,C.length=w.length,C.negative=w.negative,C.red=w.red}if(t.isBN=function(C){return C instanceof t||C!==null&&typeof C=="object"&&C.constructor.wordSize===t.wordSize&&Array.isArray(C.words)},t.max=function(C,w){return C.cmp(w)>0?C:w},t.min=function(C,w){return C.cmp(w)<0?C:w},t.prototype._init=function(C,w,_){if(typeof C=="number")return this._initNumber(C,w,_);if(typeof C=="object")return this._initArray(C,w,_);w==="hex"&&(w=16),o(w===(0|w)&&w>=2&&w<=36);var j=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(j++,this.negative=1),j<C.length&&(w===16?this._parseHex(C,j,_):(this._parseBase(C,w,j),_==="le"&&this._initArray(this.toArray(),w,_)))},t.prototype._initNumber=function(C,w,_){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(o(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),w,_)},t.prototype._initArray=function(C,w,_){if(o(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var k,E,I=0;if(_==="be")for(j=C.length-1,k=0;j>=0;j-=3)E=C[j]|C[j-1]<<8|C[j-2]<<16,this.words[k]|=E<<I&67108863,this.words[k+1]=E>>>26-I&67108863,(I+=24)>=26&&(I-=26,k++);else if(_==="le")for(j=0,k=0;j<C.length;j+=3)E=C[j]|C[j+1]<<8|C[j+2]<<16,this.words[k]|=E<<I&67108863,this.words[k+1]=E>>>26-I&67108863,(I+=24)>=26&&(I-=26,k++);return this._strip()},t.prototype._parseHex=function(C,w,_){this.length=Math.ceil((C.length-w)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var k,E=0,I=0;if(_==="be")for(j=C.length-1;j>=w;j-=2)k=c(C,w,j)<<E,this.words[I]|=67108863&k,E>=18?(E-=18,I+=1,this.words[I]|=k>>>26):E+=8;else for(j=(C.length-w)%2==0?w+1:w;j<C.length;j+=2)k=c(C,w,j)<<E,this.words[I]|=67108863&k,E>=18?(E-=18,I+=1,this.words[I]|=k>>>26):E+=8;this._strip()},t.prototype._parseBase=function(C,w,_){this.words=[0],this.length=1;for(var j=0,k=1;k<=67108863;k*=w)j++;j--,k=k/w|0;for(var E=C.length-_,I=E%j,D=Math.min(E,E-I)+_,X=0,G=_;G<D;G+=j)X=d(C,G,G+j,w),this.imuln(k),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(I!==0){var K=1;for(X=d(C,G,C.length,w),G=0;G<I;G++)K*=w;this.imuln(K),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this._strip()},t.prototype.copy=function(C){C.words=new Array(this.length);for(var w=0;w<this.length;w++)C.words[w]=this.words[w];C.length=this.length,C.negative=this.negative,C.red=this.red},t.prototype._move=function(C){b(C,this)},t.prototype.clone=function(){var C=new t(null);return this.copy(C),C},t.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},t.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{t.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{t.prototype.inspect=g}else t.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(C,w){var _;if(w=0|w||1,(C=C||10)===16||C==="hex"){_="";for(var j=0,k=0,E=0;E<this.length;E++){var I=this.words[E],D=(16777215&(I<<j|k)).toString(16);k=I>>>24-j&16777215,(j+=2)>=26&&(j-=26,E--),_=k!==0||E!==this.length-1?p[6-D.length]+D+_:D+_}for(k!==0&&(_=k.toString(16)+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(C===(0|C)&&C>=2&&C<=36){var X=x[C],G=y[C];_="";var K=this.clone();for(K.negative=0;!K.isZero();){var U=K.modrn(G).toString(C);_=(K=K.idivn(G)).isZero()?U+_:p[X-U.length]+U+_}for(this.isZero()&&(_="0"+_);_.length%w!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}o(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},t.prototype.toJSON=function(){return this.toString(16,2)},n&&(t.prototype.toBuffer=function(C,w){return this.toArrayLike(n,C,w)}),t.prototype.toArray=function(C,w){return this.toArrayLike(Array,C,w)};function v(C,w,_){_.negative=w.negative^C.negative;var j=C.length+w.length|0;_.length=j,j=j-1|0;var k=0|C.words[0],E=0|w.words[0],I=k*E,D=67108863&I,X=I/67108864|0;_.words[0]=D;for(var G=1;G<j;G++){for(var K=X>>>26,U=67108863&X,J=Math.min(G,w.length-1),$=Math.max(0,G-C.length+1);$<=J;$++){var L=G-$|0;K+=(I=(k=0|C.words[L])*(E=0|w.words[$])+U)/67108864|0,U=67108863&I}_.words[G]=0|U,X=0|K}return X!==0?_.words[G]=0|X:_.length--,_._strip()}t.prototype.toArrayLike=function(C,w,_){this._strip();var j=this.byteLength(),k=_||Math.max(1,j);o(j<=k,"byte array longer than desired length"),o(k>0,"Requested array length <= 0");var E=(function(I,D){return I.allocUnsafe?I.allocUnsafe(D):new I(D)})(C,k);return this["_toArrayLike"+(w==="le"?"LE":"BE")](E,j),E},t.prototype._toArrayLikeLE=function(C,w){for(var _=0,j=0,k=0,E=0;k<this.length;k++){var I=this.words[k]<<E|j;C[_++]=255&I,_<C.length&&(C[_++]=I>>8&255),_<C.length&&(C[_++]=I>>16&255),E===6?(_<C.length&&(C[_++]=I>>24&255),j=0,E=0):(j=I>>>24,E+=2)}if(_<C.length)for(C[_++]=j;_<C.length;)C[_++]=0},t.prototype._toArrayLikeBE=function(C,w){for(var _=C.length-1,j=0,k=0,E=0;k<this.length;k++){var I=this.words[k]<<E|j;C[_--]=255&I,_>=0&&(C[_--]=I>>8&255),_>=0&&(C[_--]=I>>16&255),E===6?(_>=0&&(C[_--]=I>>24&255),j=0,E=0):(j=I>>>24,E+=2)}if(_>=0)for(C[_--]=j;_>=0;)C[_--]=0},Math.clz32?t.prototype._countBits=function(C){return 32-Math.clz32(C)}:t.prototype._countBits=function(C){var w=C,_=0;return w>=4096&&(_+=13,w>>>=13),w>=64&&(_+=7,w>>>=7),w>=8&&(_+=4,w>>>=4),w>=2&&(_+=2,w>>>=2),_+w},t.prototype._zeroBits=function(C){if(C===0)return 26;var w=C,_=0;return(8191&w)==0&&(_+=13,w>>>=13),(127&w)==0&&(_+=7,w>>>=7),(15&w)==0&&(_+=4,w>>>=4),(3&w)==0&&(_+=2,w>>>=2),(1&w)==0&&_++,_},t.prototype.bitLength=function(){var C=this.words[this.length-1],w=this._countBits(C);return 26*(this.length-1)+w},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,w=0;w<this.length;w++){var _=this._zeroBits(this.words[w]);if(C+=_,_!==26)break}return C},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},t.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var w=0;w<C.length;w++)this.words[w]=this.words[w]|C.words[w];return this._strip()},t.prototype.ior=function(C){return o((this.negative|C.negative)==0),this.iuor(C)},t.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},t.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},t.prototype.iuand=function(C){var w;w=this.length>C.length?C:this;for(var _=0;_<w.length;_++)this.words[_]=this.words[_]&C.words[_];return this.length=w.length,this._strip()},t.prototype.iand=function(C){return o((this.negative|C.negative)==0),this.iuand(C)},t.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},t.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},t.prototype.iuxor=function(C){var w,_;this.length>C.length?(w=this,_=C):(w=C,_=this);for(var j=0;j<_.length;j++)this.words[j]=w.words[j]^_.words[j];if(this!==w)for(;j<w.length;j++)this.words[j]=w.words[j];return this.length=w.length,this._strip()},t.prototype.ixor=function(C){return o((this.negative|C.negative)==0),this.iuxor(C)},t.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},t.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},t.prototype.inotn=function(C){o(typeof C=="number"&&C>=0);var w=0|Math.ceil(C/26),_=C%26;this._expand(w),_>0&&w--;for(var j=0;j<w;j++)this.words[j]=67108863&~this.words[j];return _>0&&(this.words[j]=~this.words[j]&67108863>>26-_),this._strip()},t.prototype.notn=function(C){return this.clone().inotn(C)},t.prototype.setn=function(C,w){o(typeof C=="number"&&C>=0);var _=C/26|0,j=C%26;return this._expand(_+1),this.words[_]=w?this.words[_]|1<<j:this.words[_]&~(1<<j),this._strip()},t.prototype.iadd=function(C){var w,_,j;if(this.negative!==0&&C.negative===0)return this.negative=0,w=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,w=this.isub(C),C.negative=1,w._normSign();this.length>C.length?(_=this,j=C):(_=C,j=this);for(var k=0,E=0;E<j.length;E++)w=(0|_.words[E])+(0|j.words[E])+k,this.words[E]=67108863&w,k=w>>>26;for(;k!==0&&E<_.length;E++)w=(0|_.words[E])+k,this.words[E]=67108863&w,k=w>>>26;if(this.length=_.length,k!==0)this.words[this.length]=k,this.length++;else if(_!==this)for(;E<_.length;E++)this.words[E]=_.words[E];return this},t.prototype.add=function(C){var w;return C.negative!==0&&this.negative===0?(C.negative=0,w=this.sub(C),C.negative^=1,w):C.negative===0&&this.negative!==0?(this.negative=0,w=C.sub(this),this.negative=1,w):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},t.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var w=this.iadd(C);return C.negative=1,w._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var _,j,k=this.cmp(C);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;k>0?(_=this,j=C):(_=C,j=this);for(var E=0,I=0;I<j.length;I++)E=(w=(0|_.words[I])-(0|j.words[I])+E)>>26,this.words[I]=67108863&w;for(;E!==0&&I<_.length;I++)E=(w=(0|_.words[I])+E)>>26,this.words[I]=67108863&w;if(E===0&&I<_.length&&_!==this)for(;I<_.length;I++)this.words[I]=_.words[I];return this.length=Math.max(this.length,I),_!==this&&(this.negative=1),this._strip()},t.prototype.sub=function(C){return this.clone().isub(C)};var S=function(C,w,_){var j,k,E,I=C.words,D=w.words,X=_.words,G=0,K=0|I[0],U=8191&K,J=K>>>13,$=0|I[1],L=8191&$,W=$>>>13,re=0|I[2],ne=8191&re,se=re>>>13,H=0|I[3],ce=8191&H,ae=H>>>13,Y=0|I[4],Q=8191&Y,te=Y>>>13,ie=0|I[5],le=8191&ie,ee=ie>>>13,oe=0|I[6],de=8191&oe,fe=oe>>>13,be=0|I[7],he=8191&be,pe=be>>>13,ke=0|I[8],Ce=8191&ke,Ee=ke>>>13,Oe=0|I[9],Te=8191&Oe,ye=Oe>>>13,Ae=0|D[0],Fe=8191&Ae,Re=Ae>>>13,ge=0|D[1],xe=8191&ge,we=ge>>>13,je=0|D[2],Se=8191&je,Ie=je>>>13,He=0|D[3],ze=8191&He,Le=He>>>13,Ge=0|D[4],Ke=8191&Ge,Ye=Ge>>>13,ut=0|D[5],ht=8191&ut,rt=ut>>>13,me=0|D[6],ve=8191&me,Ne=me>>>13,$e=0|D[7],ot=8191&$e,Ve=$e>>>13,lt=0|D[8],Ze=8191&lt,et=lt>>>13,ft=0|D[9],ct=8191&ft,xt=ft>>>13;_.negative=C.negative^w.negative,_.length=19;var Dt=(G+(j=Math.imul(U,Fe))|0)+((8191&(k=(k=Math.imul(U,Re))+Math.imul(J,Fe)|0))<<13)|0;G=((E=Math.imul(J,Re))+(k>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,j=Math.imul(L,Fe),k=(k=Math.imul(L,Re))+Math.imul(W,Fe)|0,E=Math.imul(W,Re);var Tt=(G+(j=j+Math.imul(U,xe)|0)|0)+((8191&(k=(k=k+Math.imul(U,we)|0)+Math.imul(J,xe)|0))<<13)|0;G=((E=E+Math.imul(J,we)|0)+(k>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,j=Math.imul(ne,Fe),k=(k=Math.imul(ne,Re))+Math.imul(se,Fe)|0,E=Math.imul(se,Re),j=j+Math.imul(L,xe)|0,k=(k=k+Math.imul(L,we)|0)+Math.imul(W,xe)|0,E=E+Math.imul(W,we)|0;var Bt=(G+(j=j+Math.imul(U,Se)|0)|0)+((8191&(k=(k=k+Math.imul(U,Ie)|0)+Math.imul(J,Se)|0))<<13)|0;G=((E=E+Math.imul(J,Ie)|0)+(k>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,j=Math.imul(ce,Fe),k=(k=Math.imul(ce,Re))+Math.imul(ae,Fe)|0,E=Math.imul(ae,Re),j=j+Math.imul(ne,xe)|0,k=(k=k+Math.imul(ne,we)|0)+Math.imul(se,xe)|0,E=E+Math.imul(se,we)|0,j=j+Math.imul(L,Se)|0,k=(k=k+Math.imul(L,Ie)|0)+Math.imul(W,Se)|0,E=E+Math.imul(W,Ie)|0;var Vt=(G+(j=j+Math.imul(U,ze)|0)|0)+((8191&(k=(k=k+Math.imul(U,Le)|0)+Math.imul(J,ze)|0))<<13)|0;G=((E=E+Math.imul(J,Le)|0)+(k>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,j=Math.imul(Q,Fe),k=(k=Math.imul(Q,Re))+Math.imul(te,Fe)|0,E=Math.imul(te,Re),j=j+Math.imul(ce,xe)|0,k=(k=k+Math.imul(ce,we)|0)+Math.imul(ae,xe)|0,E=E+Math.imul(ae,we)|0,j=j+Math.imul(ne,Se)|0,k=(k=k+Math.imul(ne,Ie)|0)+Math.imul(se,Se)|0,E=E+Math.imul(se,Ie)|0,j=j+Math.imul(L,ze)|0,k=(k=k+Math.imul(L,Le)|0)+Math.imul(W,ze)|0,E=E+Math.imul(W,Le)|0;var Jt=(G+(j=j+Math.imul(U,Ke)|0)|0)+((8191&(k=(k=k+Math.imul(U,Ye)|0)+Math.imul(J,Ke)|0))<<13)|0;G=((E=E+Math.imul(J,Ye)|0)+(k>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,j=Math.imul(le,Fe),k=(k=Math.imul(le,Re))+Math.imul(ee,Fe)|0,E=Math.imul(ee,Re),j=j+Math.imul(Q,xe)|0,k=(k=k+Math.imul(Q,we)|0)+Math.imul(te,xe)|0,E=E+Math.imul(te,we)|0,j=j+Math.imul(ce,Se)|0,k=(k=k+Math.imul(ce,Ie)|0)+Math.imul(ae,Se)|0,E=E+Math.imul(ae,Ie)|0,j=j+Math.imul(ne,ze)|0,k=(k=k+Math.imul(ne,Le)|0)+Math.imul(se,ze)|0,E=E+Math.imul(se,Le)|0,j=j+Math.imul(L,Ke)|0,k=(k=k+Math.imul(L,Ye)|0)+Math.imul(W,Ke)|0,E=E+Math.imul(W,Ye)|0;var ue=(G+(j=j+Math.imul(U,ht)|0)|0)+((8191&(k=(k=k+Math.imul(U,rt)|0)+Math.imul(J,ht)|0))<<13)|0;G=((E=E+Math.imul(J,rt)|0)+(k>>>13)|0)+(ue>>>26)|0,ue&=67108863,j=Math.imul(de,Fe),k=(k=Math.imul(de,Re))+Math.imul(fe,Fe)|0,E=Math.imul(fe,Re),j=j+Math.imul(le,xe)|0,k=(k=k+Math.imul(le,we)|0)+Math.imul(ee,xe)|0,E=E+Math.imul(ee,we)|0,j=j+Math.imul(Q,Se)|0,k=(k=k+Math.imul(Q,Ie)|0)+Math.imul(te,Se)|0,E=E+Math.imul(te,Ie)|0,j=j+Math.imul(ce,ze)|0,k=(k=k+Math.imul(ce,Le)|0)+Math.imul(ae,ze)|0,E=E+Math.imul(ae,Le)|0,j=j+Math.imul(ne,Ke)|0,k=(k=k+Math.imul(ne,Ye)|0)+Math.imul(se,Ke)|0,E=E+Math.imul(se,Ye)|0,j=j+Math.imul(L,ht)|0,k=(k=k+Math.imul(L,rt)|0)+Math.imul(W,ht)|0,E=E+Math.imul(W,rt)|0;var _e=(G+(j=j+Math.imul(U,ve)|0)|0)+((8191&(k=(k=k+Math.imul(U,Ne)|0)+Math.imul(J,ve)|0))<<13)|0;G=((E=E+Math.imul(J,Ne)|0)+(k>>>13)|0)+(_e>>>26)|0,_e&=67108863,j=Math.imul(he,Fe),k=(k=Math.imul(he,Re))+Math.imul(pe,Fe)|0,E=Math.imul(pe,Re),j=j+Math.imul(de,xe)|0,k=(k=k+Math.imul(de,we)|0)+Math.imul(fe,xe)|0,E=E+Math.imul(fe,we)|0,j=j+Math.imul(le,Se)|0,k=(k=k+Math.imul(le,Ie)|0)+Math.imul(ee,Se)|0,E=E+Math.imul(ee,Ie)|0,j=j+Math.imul(Q,ze)|0,k=(k=k+Math.imul(Q,Le)|0)+Math.imul(te,ze)|0,E=E+Math.imul(te,Le)|0,j=j+Math.imul(ce,Ke)|0,k=(k=k+Math.imul(ce,Ye)|0)+Math.imul(ae,Ke)|0,E=E+Math.imul(ae,Ye)|0,j=j+Math.imul(ne,ht)|0,k=(k=k+Math.imul(ne,rt)|0)+Math.imul(se,ht)|0,E=E+Math.imul(se,rt)|0,j=j+Math.imul(L,ve)|0,k=(k=k+Math.imul(L,Ne)|0)+Math.imul(W,ve)|0,E=E+Math.imul(W,Ne)|0;var Me=(G+(j=j+Math.imul(U,ot)|0)|0)+((8191&(k=(k=k+Math.imul(U,Ve)|0)+Math.imul(J,ot)|0))<<13)|0;G=((E=E+Math.imul(J,Ve)|0)+(k>>>13)|0)+(Me>>>26)|0,Me&=67108863,j=Math.imul(Ce,Fe),k=(k=Math.imul(Ce,Re))+Math.imul(Ee,Fe)|0,E=Math.imul(Ee,Re),j=j+Math.imul(he,xe)|0,k=(k=k+Math.imul(he,we)|0)+Math.imul(pe,xe)|0,E=E+Math.imul(pe,we)|0,j=j+Math.imul(de,Se)|0,k=(k=k+Math.imul(de,Ie)|0)+Math.imul(fe,Se)|0,E=E+Math.imul(fe,Ie)|0,j=j+Math.imul(le,ze)|0,k=(k=k+Math.imul(le,Le)|0)+Math.imul(ee,ze)|0,E=E+Math.imul(ee,Le)|0,j=j+Math.imul(Q,Ke)|0,k=(k=k+Math.imul(Q,Ye)|0)+Math.imul(te,Ke)|0,E=E+Math.imul(te,Ye)|0,j=j+Math.imul(ce,ht)|0,k=(k=k+Math.imul(ce,rt)|0)+Math.imul(ae,ht)|0,E=E+Math.imul(ae,rt)|0,j=j+Math.imul(ne,ve)|0,k=(k=k+Math.imul(ne,Ne)|0)+Math.imul(se,ve)|0,E=E+Math.imul(se,Ne)|0,j=j+Math.imul(L,ot)|0,k=(k=k+Math.imul(L,Ve)|0)+Math.imul(W,ot)|0,E=E+Math.imul(W,Ve)|0;var Pe=(G+(j=j+Math.imul(U,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(U,et)|0)+Math.imul(J,Ze)|0))<<13)|0;G=((E=E+Math.imul(J,et)|0)+(k>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,j=Math.imul(Te,Fe),k=(k=Math.imul(Te,Re))+Math.imul(ye,Fe)|0,E=Math.imul(ye,Re),j=j+Math.imul(Ce,xe)|0,k=(k=k+Math.imul(Ce,we)|0)+Math.imul(Ee,xe)|0,E=E+Math.imul(Ee,we)|0,j=j+Math.imul(he,Se)|0,k=(k=k+Math.imul(he,Ie)|0)+Math.imul(pe,Se)|0,E=E+Math.imul(pe,Ie)|0,j=j+Math.imul(de,ze)|0,k=(k=k+Math.imul(de,Le)|0)+Math.imul(fe,ze)|0,E=E+Math.imul(fe,Le)|0,j=j+Math.imul(le,Ke)|0,k=(k=k+Math.imul(le,Ye)|0)+Math.imul(ee,Ke)|0,E=E+Math.imul(ee,Ye)|0,j=j+Math.imul(Q,ht)|0,k=(k=k+Math.imul(Q,rt)|0)+Math.imul(te,ht)|0,E=E+Math.imul(te,rt)|0,j=j+Math.imul(ce,ve)|0,k=(k=k+Math.imul(ce,Ne)|0)+Math.imul(ae,ve)|0,E=E+Math.imul(ae,Ne)|0,j=j+Math.imul(ne,ot)|0,k=(k=k+Math.imul(ne,Ve)|0)+Math.imul(se,ot)|0,E=E+Math.imul(se,Ve)|0,j=j+Math.imul(L,Ze)|0,k=(k=k+Math.imul(L,et)|0)+Math.imul(W,Ze)|0,E=E+Math.imul(W,et)|0;var Je=(G+(j=j+Math.imul(U,ct)|0)|0)+((8191&(k=(k=k+Math.imul(U,xt)|0)+Math.imul(J,ct)|0))<<13)|0;G=((E=E+Math.imul(J,xt)|0)+(k>>>13)|0)+(Je>>>26)|0,Je&=67108863,j=Math.imul(Te,xe),k=(k=Math.imul(Te,we))+Math.imul(ye,xe)|0,E=Math.imul(ye,we),j=j+Math.imul(Ce,Se)|0,k=(k=k+Math.imul(Ce,Ie)|0)+Math.imul(Ee,Se)|0,E=E+Math.imul(Ee,Ie)|0,j=j+Math.imul(he,ze)|0,k=(k=k+Math.imul(he,Le)|0)+Math.imul(pe,ze)|0,E=E+Math.imul(pe,Le)|0,j=j+Math.imul(de,Ke)|0,k=(k=k+Math.imul(de,Ye)|0)+Math.imul(fe,Ke)|0,E=E+Math.imul(fe,Ye)|0,j=j+Math.imul(le,ht)|0,k=(k=k+Math.imul(le,rt)|0)+Math.imul(ee,ht)|0,E=E+Math.imul(ee,rt)|0,j=j+Math.imul(Q,ve)|0,k=(k=k+Math.imul(Q,Ne)|0)+Math.imul(te,ve)|0,E=E+Math.imul(te,Ne)|0,j=j+Math.imul(ce,ot)|0,k=(k=k+Math.imul(ce,Ve)|0)+Math.imul(ae,ot)|0,E=E+Math.imul(ae,Ve)|0,j=j+Math.imul(ne,Ze)|0,k=(k=k+Math.imul(ne,et)|0)+Math.imul(se,Ze)|0,E=E+Math.imul(se,et)|0;var Be=(G+(j=j+Math.imul(L,ct)|0)|0)+((8191&(k=(k=k+Math.imul(L,xt)|0)+Math.imul(W,ct)|0))<<13)|0;G=((E=E+Math.imul(W,xt)|0)+(k>>>13)|0)+(Be>>>26)|0,Be&=67108863,j=Math.imul(Te,Se),k=(k=Math.imul(Te,Ie))+Math.imul(ye,Se)|0,E=Math.imul(ye,Ie),j=j+Math.imul(Ce,ze)|0,k=(k=k+Math.imul(Ce,Le)|0)+Math.imul(Ee,ze)|0,E=E+Math.imul(Ee,Le)|0,j=j+Math.imul(he,Ke)|0,k=(k=k+Math.imul(he,Ye)|0)+Math.imul(pe,Ke)|0,E=E+Math.imul(pe,Ye)|0,j=j+Math.imul(de,ht)|0,k=(k=k+Math.imul(de,rt)|0)+Math.imul(fe,ht)|0,E=E+Math.imul(fe,rt)|0,j=j+Math.imul(le,ve)|0,k=(k=k+Math.imul(le,Ne)|0)+Math.imul(ee,ve)|0,E=E+Math.imul(ee,Ne)|0,j=j+Math.imul(Q,ot)|0,k=(k=k+Math.imul(Q,Ve)|0)+Math.imul(te,ot)|0,E=E+Math.imul(te,Ve)|0,j=j+Math.imul(ce,Ze)|0,k=(k=k+Math.imul(ce,et)|0)+Math.imul(ae,Ze)|0,E=E+Math.imul(ae,et)|0;var qe=(G+(j=j+Math.imul(ne,ct)|0)|0)+((8191&(k=(k=k+Math.imul(ne,xt)|0)+Math.imul(se,ct)|0))<<13)|0;G=((E=E+Math.imul(se,xt)|0)+(k>>>13)|0)+(qe>>>26)|0,qe&=67108863,j=Math.imul(Te,ze),k=(k=Math.imul(Te,Le))+Math.imul(ye,ze)|0,E=Math.imul(ye,Le),j=j+Math.imul(Ce,Ke)|0,k=(k=k+Math.imul(Ce,Ye)|0)+Math.imul(Ee,Ke)|0,E=E+Math.imul(Ee,Ye)|0,j=j+Math.imul(he,ht)|0,k=(k=k+Math.imul(he,rt)|0)+Math.imul(pe,ht)|0,E=E+Math.imul(pe,rt)|0,j=j+Math.imul(de,ve)|0,k=(k=k+Math.imul(de,Ne)|0)+Math.imul(fe,ve)|0,E=E+Math.imul(fe,Ne)|0,j=j+Math.imul(le,ot)|0,k=(k=k+Math.imul(le,Ve)|0)+Math.imul(ee,ot)|0,E=E+Math.imul(ee,Ve)|0,j=j+Math.imul(Q,Ze)|0,k=(k=k+Math.imul(Q,et)|0)+Math.imul(te,Ze)|0,E=E+Math.imul(te,et)|0;var gt=(G+(j=j+Math.imul(ce,ct)|0)|0)+((8191&(k=(k=k+Math.imul(ce,xt)|0)+Math.imul(ae,ct)|0))<<13)|0;G=((E=E+Math.imul(ae,xt)|0)+(k>>>13)|0)+(gt>>>26)|0,gt&=67108863,j=Math.imul(Te,Ke),k=(k=Math.imul(Te,Ye))+Math.imul(ye,Ke)|0,E=Math.imul(ye,Ye),j=j+Math.imul(Ce,ht)|0,k=(k=k+Math.imul(Ce,rt)|0)+Math.imul(Ee,ht)|0,E=E+Math.imul(Ee,rt)|0,j=j+Math.imul(he,ve)|0,k=(k=k+Math.imul(he,Ne)|0)+Math.imul(pe,ve)|0,E=E+Math.imul(pe,Ne)|0,j=j+Math.imul(de,ot)|0,k=(k=k+Math.imul(de,Ve)|0)+Math.imul(fe,ot)|0,E=E+Math.imul(fe,Ve)|0,j=j+Math.imul(le,Ze)|0,k=(k=k+Math.imul(le,et)|0)+Math.imul(ee,Ze)|0,E=E+Math.imul(ee,et)|0;var pt=(G+(j=j+Math.imul(Q,ct)|0)|0)+((8191&(k=(k=k+Math.imul(Q,xt)|0)+Math.imul(te,ct)|0))<<13)|0;G=((E=E+Math.imul(te,xt)|0)+(k>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul(Te,ht),k=(k=Math.imul(Te,rt))+Math.imul(ye,ht)|0,E=Math.imul(ye,rt),j=j+Math.imul(Ce,ve)|0,k=(k=k+Math.imul(Ce,Ne)|0)+Math.imul(Ee,ve)|0,E=E+Math.imul(Ee,Ne)|0,j=j+Math.imul(he,ot)|0,k=(k=k+Math.imul(he,Ve)|0)+Math.imul(pe,ot)|0,E=E+Math.imul(pe,Ve)|0,j=j+Math.imul(de,Ze)|0,k=(k=k+Math.imul(de,et)|0)+Math.imul(fe,Ze)|0,E=E+Math.imul(fe,et)|0;var mt=(G+(j=j+Math.imul(le,ct)|0)|0)+((8191&(k=(k=k+Math.imul(le,xt)|0)+Math.imul(ee,ct)|0))<<13)|0;G=((E=E+Math.imul(ee,xt)|0)+(k>>>13)|0)+(mt>>>26)|0,mt&=67108863,j=Math.imul(Te,ve),k=(k=Math.imul(Te,Ne))+Math.imul(ye,ve)|0,E=Math.imul(ye,Ne),j=j+Math.imul(Ce,ot)|0,k=(k=k+Math.imul(Ce,Ve)|0)+Math.imul(Ee,ot)|0,E=E+Math.imul(Ee,Ve)|0,j=j+Math.imul(he,Ze)|0,k=(k=k+Math.imul(he,et)|0)+Math.imul(pe,Ze)|0,E=E+Math.imul(pe,et)|0;var nt=(G+(j=j+Math.imul(de,ct)|0)|0)+((8191&(k=(k=k+Math.imul(de,xt)|0)+Math.imul(fe,ct)|0))<<13)|0;G=((E=E+Math.imul(fe,xt)|0)+(k>>>13)|0)+(nt>>>26)|0,nt&=67108863,j=Math.imul(Te,ot),k=(k=Math.imul(Te,Ve))+Math.imul(ye,ot)|0,E=Math.imul(ye,Ve),j=j+Math.imul(Ce,Ze)|0,k=(k=k+Math.imul(Ce,et)|0)+Math.imul(Ee,Ze)|0,E=E+Math.imul(Ee,et)|0;var wt=(G+(j=j+Math.imul(he,ct)|0)|0)+((8191&(k=(k=k+Math.imul(he,xt)|0)+Math.imul(pe,ct)|0))<<13)|0;G=((E=E+Math.imul(pe,xt)|0)+(k>>>13)|0)+(wt>>>26)|0,wt&=67108863,j=Math.imul(Te,Ze),k=(k=Math.imul(Te,et))+Math.imul(ye,Ze)|0,E=Math.imul(ye,et);var jt=(G+(j=j+Math.imul(Ce,ct)|0)|0)+((8191&(k=(k=k+Math.imul(Ce,xt)|0)+Math.imul(Ee,ct)|0))<<13)|0;G=((E=E+Math.imul(Ee,xt)|0)+(k>>>13)|0)+(jt>>>26)|0,jt&=67108863;var kt=(G+(j=Math.imul(Te,ct))|0)+((8191&(k=(k=Math.imul(Te,xt))+Math.imul(ye,ct)|0))<<13)|0;return G=((E=Math.imul(ye,xt))+(k>>>13)|0)+(kt>>>26)|0,kt&=67108863,X[0]=Dt,X[1]=Tt,X[2]=Bt,X[3]=Vt,X[4]=Jt,X[5]=ue,X[6]=_e,X[7]=Me,X[8]=Pe,X[9]=Je,X[10]=Be,X[11]=qe,X[12]=gt,X[13]=pt,X[14]=mt,X[15]=nt,X[16]=wt,X[17]=jt,X[18]=kt,G!==0&&(X[19]=G,_.length++),_};function N(C,w,_){_.negative=w.negative^C.negative,_.length=C.length+w.length;for(var j=0,k=0,E=0;E<_.length-1;E++){var I=k;k=0;for(var D=67108863&j,X=Math.min(E,w.length-1),G=Math.max(0,E-C.length+1);G<=X;G++){var K=E-G,U=(0|C.words[K])*(0|w.words[G]),J=67108863&U;D=67108863&(J=J+D|0),k+=(I=(I=I+(U/67108864|0)|0)+(J>>>26)|0)>>>26,I&=67108863}_.words[E]=D,j=I,I=k}return j!==0?_.words[E]=j:_.length--,_._strip()}function R(C,w,_){return N(C,w,_)}Math.imul||(S=v),t.prototype.mulTo=function(C,w){var _=this.length+C.length;return this.length===10&&C.length===10?S(this,C,w):_<63?v(this,C,w):_<1024?N(this,C,w):R(this,C,w)},t.prototype.mul=function(C){var w=new t(null);return w.words=new Array(this.length+C.length),this.mulTo(C,w)},t.prototype.mulf=function(C){var w=new t(null);return w.words=new Array(this.length+C.length),R(this,C,w)},t.prototype.imul=function(C){return this.clone().mulTo(C,this)},t.prototype.imuln=function(C){var w=C<0;w&&(C=-C),o(typeof C=="number"),o(C<67108864);for(var _=0,j=0;j<this.length;j++){var k=(0|this.words[j])*C,E=(67108863&k)+(67108863&_);_>>=26,_+=k/67108864|0,_+=E>>>26,this.words[j]=67108863&E}return _!==0&&(this.words[j]=_,this.length++),w?this.ineg():this},t.prototype.muln=function(C){return this.clone().imuln(C)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(C){var w=(function(E){for(var I=new Array(E.bitLength()),D=0;D<I.length;D++){var X=D/26|0,G=D%26;I[D]=E.words[X]>>>G&1}return I})(C);if(w.length===0)return new t(1);for(var _=this,j=0;j<w.length&&w[j]===0;j++,_=_.sqr());if(++j<w.length)for(var k=_.sqr();j<w.length;j++,k=k.sqr())w[j]!==0&&(_=_.mul(k));return _},t.prototype.iushln=function(C){o(typeof C=="number"&&C>=0);var w,_=C%26,j=(C-_)/26,k=67108863>>>26-_<<26-_;if(_!==0){var E=0;for(w=0;w<this.length;w++){var I=this.words[w]&k,D=(0|this.words[w])-I<<_;this.words[w]=D|E,E=I>>>26-_}E&&(this.words[w]=E,this.length++)}if(j!==0){for(w=this.length-1;w>=0;w--)this.words[w+j]=this.words[w];for(w=0;w<j;w++)this.words[w]=0;this.length+=j}return this._strip()},t.prototype.ishln=function(C){return o(this.negative===0),this.iushln(C)},t.prototype.iushrn=function(C,w,_){var j;o(typeof C=="number"&&C>=0),j=w?(w-w%26)/26:0;var k=C%26,E=Math.min((C-k)/26,this.length),I=67108863^67108863>>>k<<k,D=_;if(j-=E,j=Math.max(0,j),D){for(var X=0;X<E;X++)D.words[X]=this.words[X];D.length=E}if(E!==0)if(this.length>E)for(this.length-=E,X=0;X<this.length;X++)this.words[X]=this.words[X+E];else this.words[0]=0,this.length=1;var G=0;for(X=this.length-1;X>=0&&(G!==0||X>=j);X--){var K=0|this.words[X];this.words[X]=G<<26-k|K>>>k,G=K&I}return D&&G!==0&&(D.words[D.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},t.prototype.ishrn=function(C,w,_){return o(this.negative===0),this.iushrn(C,w,_)},t.prototype.shln=function(C){return this.clone().ishln(C)},t.prototype.ushln=function(C){return this.clone().iushln(C)},t.prototype.shrn=function(C){return this.clone().ishrn(C)},t.prototype.ushrn=function(C){return this.clone().iushrn(C)},t.prototype.testn=function(C){o(typeof C=="number"&&C>=0);var w=C%26,_=(C-w)/26,j=1<<w;return!(this.length<=_)&&!!(this.words[_]&j)},t.prototype.imaskn=function(C){o(typeof C=="number"&&C>=0);var w=C%26,_=(C-w)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(w!==0&&_++,this.length=Math.min(_,this.length),w!==0){var j=67108863^67108863>>>w<<w;this.words[this.length-1]&=j}return this._strip()},t.prototype.maskn=function(C){return this.clone().imaskn(C)},t.prototype.iaddn=function(C){return o(typeof C=="number"),o(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<=C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},t.prototype._iaddn=function(C){this.words[0]+=C;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},t.prototype.isubn=function(C){if(o(typeof C=="number"),o(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},t.prototype.addn=function(C){return this.clone().iaddn(C)},t.prototype.subn=function(C){return this.clone().isubn(C)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(C,w,_){var j,k,E=C.length+_;this._expand(E);var I=0;for(j=0;j<C.length;j++){k=(0|this.words[j+_])+I;var D=(0|C.words[j])*w;I=((k-=67108863&D)>>26)-(D/67108864|0),this.words[j+_]=67108863&k}for(;j<this.length-_;j++)I=(k=(0|this.words[j+_])+I)>>26,this.words[j+_]=67108863&k;if(I===0)return this._strip();for(o(I===-1),I=0,j=0;j<this.length;j++)I=(k=-(0|this.words[j])+I)>>26,this.words[j]=67108863&k;return this.negative=1,this._strip()},t.prototype._wordDiv=function(C,w){var _=(this.length,C.length),j=this.clone(),k=C,E=0|k.words[k.length-1];(_=26-this._countBits(E))!==0&&(k=k.ushln(_),j.iushln(_),E=0|k.words[k.length-1]);var I,D=j.length-k.length;if(w!=="mod"){(I=new t(null)).length=D+1,I.words=new Array(I.length);for(var X=0;X<I.length;X++)I.words[X]=0}var G=j.clone()._ishlnsubmul(k,1,D);G.negative===0&&(j=G,I&&(I.words[D]=1));for(var K=D-1;K>=0;K--){var U=67108864*(0|j.words[k.length+K])+(0|j.words[k.length+K-1]);for(U=Math.min(U/E|0,67108863),j._ishlnsubmul(k,U,K);j.negative!==0;)U--,j.negative=0,j._ishlnsubmul(k,1,K),j.isZero()||(j.negative^=1);I&&(I.words[K]=U)}return I&&I._strip(),j._strip(),w!=="div"&&_!==0&&j.iushrn(_),{div:I||null,mod:j}},t.prototype.divmod=function(C,w,_){return o(!C.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:this.negative!==0&&C.negative===0?(E=this.neg().divmod(C,w),w!=="mod"&&(j=E.div.neg()),w!=="div"&&(k=E.mod.neg(),_&&k.negative!==0&&k.iadd(C)),{div:j,mod:k}):this.negative===0&&C.negative!==0?(E=this.divmod(C.neg(),w),w!=="mod"&&(j=E.div.neg()),{div:j,mod:E.mod}):(this.negative&C.negative)!=0?(E=this.neg().divmod(C.neg(),w),w!=="div"&&(k=E.mod.neg(),_&&k.negative!==0&&k.isub(C)),{div:E.div,mod:k}):C.length>this.length||this.cmp(C)<0?{div:new t(0),mod:this}:C.length===1?w==="div"?{div:this.divn(C.words[0]),mod:null}:w==="mod"?{div:null,mod:new t(this.modrn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new t(this.modrn(C.words[0]))}:this._wordDiv(C,w);var j,k,E},t.prototype.div=function(C){return this.divmod(C,"div",!1).div},t.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},t.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},t.prototype.divRound=function(C){var w=this.divmod(C);if(w.mod.isZero())return w.div;var _=w.div.negative!==0?w.mod.isub(C):w.mod,j=C.ushrn(1),k=C.andln(1),E=_.cmp(j);return E<0||k===1&&E===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},t.prototype.modrn=function(C){var w=C<0;w&&(C=-C),o(C<=67108863);for(var _=(1<<26)%C,j=0,k=this.length-1;k>=0;k--)j=(_*j+(0|this.words[k]))%C;return w?-j:j},t.prototype.modn=function(C){return this.modrn(C)},t.prototype.idivn=function(C){var w=C<0;w&&(C=-C),o(C<=67108863);for(var _=0,j=this.length-1;j>=0;j--){var k=(0|this.words[j])+67108864*_;this.words[j]=k/C|0,_=k%C}return this._strip(),w?this.ineg():this},t.prototype.divn=function(C){return this.clone().idivn(C)},t.prototype.egcd=function(C){o(C.negative===0),o(!C.isZero());var w=this,_=C.clone();w=w.negative!==0?w.umod(C):w.clone();for(var j=new t(1),k=new t(0),E=new t(0),I=new t(1),D=0;w.isEven()&&_.isEven();)w.iushrn(1),_.iushrn(1),++D;for(var X=_.clone(),G=w.clone();!w.isZero();){for(var K=0,U=1;(w.words[0]&U)==0&&K<26;++K,U<<=1);if(K>0)for(w.iushrn(K);K-- >0;)(j.isOdd()||k.isOdd())&&(j.iadd(X),k.isub(G)),j.iushrn(1),k.iushrn(1);for(var J=0,$=1;(_.words[0]&$)==0&&J<26;++J,$<<=1);if(J>0)for(_.iushrn(J);J-- >0;)(E.isOdd()||I.isOdd())&&(E.iadd(X),I.isub(G)),E.iushrn(1),I.iushrn(1);w.cmp(_)>=0?(w.isub(_),j.isub(E),k.isub(I)):(_.isub(w),E.isub(j),I.isub(k))}return{a:E,b:I,gcd:_.iushln(D)}},t.prototype._invmp=function(C){o(C.negative===0),o(!C.isZero());var w=this,_=C.clone();w=w.negative!==0?w.umod(C):w.clone();for(var j,k=new t(1),E=new t(0),I=_.clone();w.cmpn(1)>0&&_.cmpn(1)>0;){for(var D=0,X=1;(w.words[0]&X)==0&&D<26;++D,X<<=1);if(D>0)for(w.iushrn(D);D-- >0;)k.isOdd()&&k.iadd(I),k.iushrn(1);for(var G=0,K=1;(_.words[0]&K)==0&&G<26;++G,K<<=1);if(G>0)for(_.iushrn(G);G-- >0;)E.isOdd()&&E.iadd(I),E.iushrn(1);w.cmp(_)>=0?(w.isub(_),k.isub(E)):(_.isub(w),E.isub(k))}return(j=w.cmpn(1)===0?k:E).cmpn(0)<0&&j.iadd(C),j},t.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var w=this.clone(),_=C.clone();w.negative=0,_.negative=0;for(var j=0;w.isEven()&&_.isEven();j++)w.iushrn(1),_.iushrn(1);for(;;){for(;w.isEven();)w.iushrn(1);for(;_.isEven();)_.iushrn(1);var k=w.cmp(_);if(k<0){var E=w;w=_,_=E}else if(k===0||_.cmpn(1)===0)break;w.isub(_)}return _.iushln(j)},t.prototype.invm=function(C){return this.egcd(C).a.umod(C)},t.prototype.isEven=function(){return(1&this.words[0])==0},t.prototype.isOdd=function(){return(1&this.words[0])==1},t.prototype.andln=function(C){return this.words[0]&C},t.prototype.bincn=function(C){o(typeof C=="number");var w=C%26,_=(C-w)/26,j=1<<w;if(this.length<=_)return this._expand(_+1),this.words[_]|=j,this;for(var k=j,E=_;k!==0&&E<this.length;E++){var I=0|this.words[E];k=(I+=k)>>>26,I&=67108863,this.words[E]=I}return k!==0&&(this.words[E]=k,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(C){var w,_=C<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;if(this._strip(),this.length>1)w=1;else{_&&(C=-C),o(C<=67108863,"Number is too big");var j=0|this.words[0];w=j===C?0:j<C?-1:1}return this.negative!==0?0|-w:w},t.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var w=this.ucmp(C);return this.negative!==0?0|-w:w},t.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var w=0,_=this.length-1;_>=0;_--){var j=0|this.words[_],k=0|C.words[_];if(j!==k){j<k?w=-1:j>k&&(w=1);break}}return w},t.prototype.gtn=function(C){return this.cmpn(C)===1},t.prototype.gt=function(C){return this.cmp(C)===1},t.prototype.gten=function(C){return this.cmpn(C)>=0},t.prototype.gte=function(C){return this.cmp(C)>=0},t.prototype.ltn=function(C){return this.cmpn(C)===-1},t.prototype.lt=function(C){return this.cmp(C)===-1},t.prototype.lten=function(C){return this.cmpn(C)<=0},t.prototype.lte=function(C){return this.cmp(C)<=0},t.prototype.eqn=function(C){return this.cmpn(C)===0},t.prototype.eq=function(C){return this.cmp(C)===0},t.red=function(C){return new T(C)},t.prototype.toRed=function(C){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},t.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(C){return this.red=C,this},t.prototype.forceRed=function(C){return o(!this.red,"Already a number in reduction context"),this._forceRed(C)},t.prototype.redAdd=function(C){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},t.prototype.redIAdd=function(C){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},t.prototype.redSub=function(C){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},t.prototype.redISub=function(C){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},t.prototype.redShl=function(C){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},t.prototype.redMul=function(C){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},t.prototype.redIMul=function(C){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},t.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(C){return o(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var B={k256:null,p224:null,p192:null,p25519:null};function M(C,w){this.name=C,this.p=new t(w,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function F(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function V(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(C){if(typeof C=="string"){var w=t._prime(C);this.m=w.p,this.prime=w}else o(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function A(C){T.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var C=new t(null);return C.words=new Array(Math.ceil(this.n/13)),C},M.prototype.ireduce=function(C){var w,_=C;do this.split(_,this.tmp),w=(_=(_=this.imulK(_)).iadd(this.tmp)).bitLength();while(w>this.n);var j=w<this.n?-1:_.ucmp(this.p);return j===0?(_.words[0]=0,_.length=1):j>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},M.prototype.split=function(C,w){C.iushrn(this.n,0,w)},M.prototype.imulK=function(C){return C.imul(this.k)},r(F,M),F.prototype.split=function(C,w){for(var _=Math.min(C.length,9),j=0;j<_;j++)w.words[j]=C.words[j];if(w.length=_,C.length<=9)return C.words[0]=0,void(C.length=1);var k=C.words[9];for(w.words[w.length++]=4194303&k,j=10;j<C.length;j++){var E=0|C.words[j];C.words[j-10]=(4194303&E)<<4|k>>>22,k=E}k>>>=22,C.words[j-10]=k,k===0&&C.length>10?C.length-=10:C.length-=9},F.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var w=0,_=0;_<C.length;_++){var j=0|C.words[_];w+=977*j,C.words[_]=67108863&w,w=64*j+(w/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},r(q,M),r(V,M),r(O,M),O.prototype.imulK=function(C){for(var w=0,_=0;_<C.length;_++){var j=19*(0|C.words[_])+w,k=67108863&j;j>>>=26,C.words[_]=k,w=j}return w!==0&&(C.words[C.length++]=w),C},t._prime=function(C){if(B[C])return B[C];var w;if(C==="k256")w=new F;else if(C==="p224")w=new q;else if(C==="p192")w=new V;else{if(C!=="p25519")throw new Error("Unknown prime "+C);w=new O}return B[C]=w,w},T.prototype._verify1=function(C){o(C.negative===0,"red works only with positives"),o(C.red,"red works only with red numbers")},T.prototype._verify2=function(C,w){o((C.negative|w.negative)==0,"red works only with positives"),o(C.red&&C.red===w.red,"red works only with red numbers")},T.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):(b(C,C.umod(this.m)._forceRed(this)),C)},T.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},T.prototype.add=function(C,w){this._verify2(C,w);var _=C.add(w);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},T.prototype.iadd=function(C,w){this._verify2(C,w);var _=C.iadd(w);return _.cmp(this.m)>=0&&_.isub(this.m),_},T.prototype.sub=function(C,w){this._verify2(C,w);var _=C.sub(w);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},T.prototype.isub=function(C,w){this._verify2(C,w);var _=C.isub(w);return _.cmpn(0)<0&&_.iadd(this.m),_},T.prototype.shl=function(C,w){return this._verify1(C),this.imod(C.ushln(w))},T.prototype.imul=function(C,w){return this._verify2(C,w),this.imod(C.imul(w))},T.prototype.mul=function(C,w){return this._verify2(C,w),this.imod(C.mul(w))},T.prototype.isqr=function(C){return this.imul(C,C.clone())},T.prototype.sqr=function(C){return this.mul(C,C)},T.prototype.sqrt=function(C){if(C.isZero())return C.clone();var w=this.m.andln(3);if(o(w%2==1),w===3){var _=this.m.add(new t(1)).iushrn(2);return this.pow(C,_)}for(var j=this.m.subn(1),k=0;!j.isZero()&&j.andln(1)===0;)k++,j.iushrn(1);o(!j.isZero());var E=new t(1).toRed(this),I=E.redNeg(),D=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new t(2*X*X).toRed(this);this.pow(X,D).cmp(I)!==0;)X.redIAdd(I);for(var G=this.pow(X,j),K=this.pow(C,j.addn(1).iushrn(1)),U=this.pow(C,j),J=k;U.cmp(E)!==0;){for(var $=U,L=0;$.cmp(E)!==0;L++)$=$.redSqr();o(L<J);var W=this.pow(G,new t(1).iushln(J-L-1));K=K.redMul(W),G=W.redSqr(),U=U.redMul(G),J=L}return K},T.prototype.invm=function(C){var w=C._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},T.prototype.pow=function(C,w){if(w.isZero())return new t(1).toRed(this);if(w.cmpn(1)===0)return C.clone();var _=new Array(16);_[0]=new t(1).toRed(this),_[1]=C;for(var j=2;j<_.length;j++)_[j]=this.mul(_[j-1],C);var k=_[0],E=0,I=0,D=w.bitLength()%26;for(D===0&&(D=26),j=w.length-1;j>=0;j--){for(var X=w.words[j],G=D-1;G>=0;G--){var K=X>>G&1;k!==_[0]&&(k=this.sqr(k)),K!==0||E!==0?(E<<=1,E|=K,(++I===4||j===0&&G===0)&&(k=this.mul(k,_[E]),I=0,E=0)):I=0}D=26}return k},T.prototype.convertTo=function(C){var w=C.umod(this.m);return w===C?w.clone():w},T.prototype.convertFrom=function(C){var w=C.clone();return w.red=null,w},t.mont=function(C){return new A(C)},r(A,T),A.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},A.prototype.convertFrom=function(C){var w=this.imod(C.mul(this.rinv));return w.red=null,w},A.prototype.imul=function(C,w){if(C.isZero()||w.isZero())return C.words[0]=0,C.length=1,C;var _=C.imul(w),j=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=_.isub(j).iushrn(this.shift),E=k;return k.cmp(this.m)>=0?E=k.isub(this.m):k.cmpn(0)<0&&(E=k.iadd(this.m)),E._forceRed(this)},A.prototype.mul=function(C,w){if(C.isZero()||w.isZero())return new t(0)._forceRed(this);var _=C.mul(w),j=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=_.isub(j).iushrn(this.shift),E=k;return k.cmp(this.m)>=0?E=k.isub(this.m):k.cmpn(0)<0&&(E=k.iadd(this.m)),E._forceRed(this)},A.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(h===void 0||h)},{buffer:188}],187:[function(e,h,f){var l;function s(r){this.rand=r}if(h.exports=function(r){return l||(l=new s(null)),l.generate(r)},h.exports.Rand=s,s.prototype.generate=function(r){return this._rand(r)},s.prototype._rand=function(r){if(this.rand.getBytes)return this.rand.getBytes(r);for(var t=new Uint8Array(r),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},typeof self=="object")self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(r){var t=new Uint8Array(r);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(r){var t=new Uint8Array(r);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if(typeof o.randomBytes!="function")throw new Error("Not supported");s.prototype._rand=function(r){return o.randomBytes(r)}}catch{}},{crypto:188}],188:[function(e,h,f){},{}],189:[function(e,h,f){var l=e("safe-buffer").Buffer;function s(c){l.isBuffer(c)||(c=l.from(c));for(var d=c.length/4|0,b=new Array(d),g=0;g<d;g++)b[g]=c.readUInt32BE(4*g);return b}function o(c){for(;0<c.length;c++)c[0]=0}function r(c,d,b,g,p){for(var x,y,v,S,N=b[0],R=b[1],B=b[2],M=b[3],F=c[0]^d[0],q=c[1]^d[1],V=c[2]^d[2],O=c[3]^d[3],T=4,A=1;A<p;A++)x=N[F>>>24]^R[q>>>16&255]^B[V>>>8&255]^M[255&O]^d[T++],y=N[q>>>24]^R[V>>>16&255]^B[O>>>8&255]^M[255&F]^d[T++],v=N[V>>>24]^R[O>>>16&255]^B[F>>>8&255]^M[255&q]^d[T++],S=N[O>>>24]^R[F>>>16&255]^B[q>>>8&255]^M[255&V]^d[T++],F=x,q=y,V=v,O=S;return x=(g[F>>>24]<<24|g[q>>>16&255]<<16|g[V>>>8&255]<<8|g[255&O])^d[T++],y=(g[q>>>24]<<24|g[V>>>16&255]<<16|g[O>>>8&255]<<8|g[255&F])^d[T++],v=(g[V>>>24]<<24|g[O>>>16&255]<<16|g[F>>>8&255]<<8|g[255&q])^d[T++],S=(g[O>>>24]<<24|g[F>>>16&255]<<16|g[q>>>8&255]<<8|g[255&V])^d[T++],[x>>>=0,y>>>=0,v>>>=0,S>>>=0]}var t=[0,1,2,4,8,16,32,64,128,27,54],n=(function(){for(var c=new Array(256),d=0;d<256;d++)c[d]=d<128?d<<1:d<<1^283;for(var b=[],g=[],p=[[],[],[],[]],x=[[],[],[],[]],y=0,v=0,S=0;S<256;++S){var N=v^v<<1^v<<2^v<<3^v<<4;N=N>>>8^255&N^99,b[y]=N,g[N]=y;var R=c[y],B=c[R],M=c[B],F=257*c[N]^16843008*N;p[0][y]=F<<24|F>>>8,p[1][y]=F<<16|F>>>16,p[2][y]=F<<8|F>>>24,p[3][y]=F,F=16843009*M^65537*B^257*R^16843008*y,x[0][N]=F<<24|F>>>8,x[1][N]=F<<16|F>>>16,x[2][N]=F<<8|F>>>24,x[3][N]=F,y===0?y=v=1:(y=R^c[c[c[M^R]]],v^=c[c[v]])}return{SBOX:b,INV_SBOX:g,SUB_MIX:p,INV_SUB_MIX:x}})();function u(c){this._key=s(c),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var c=this._key,d=c.length,b=d+6,g=4*(b+1),p=[],x=0;x<d;x++)p[x]=c[x];for(x=d;x<g;x++){var y=p[x-1];x%d==0?(y=y<<8|y>>>24,y=n.SBOX[y>>>24]<<24|n.SBOX[y>>>16&255]<<16|n.SBOX[y>>>8&255]<<8|n.SBOX[255&y],y^=t[x/d|0]<<24):d>6&&x%d==4&&(y=n.SBOX[y>>>24]<<24|n.SBOX[y>>>16&255]<<16|n.SBOX[y>>>8&255]<<8|n.SBOX[255&y]),p[x]=p[x-d]^y}for(var v=[],S=0;S<g;S++){var N=g-S,R=p[N-(S%4?0:4)];v[S]=S<4||N<=4?R:n.INV_SUB_MIX[0][n.SBOX[R>>>24]]^n.INV_SUB_MIX[1][n.SBOX[R>>>16&255]]^n.INV_SUB_MIX[2][n.SBOX[R>>>8&255]]^n.INV_SUB_MIX[3][n.SBOX[255&R]]}this._nRounds=b,this._keySchedule=p,this._invKeySchedule=v},u.prototype.encryptBlockRaw=function(c){return r(c=s(c),this._keySchedule,n.SUB_MIX,n.SBOX,this._nRounds)},u.prototype.encryptBlock=function(c){var d=this.encryptBlockRaw(c),b=l.allocUnsafe(16);return b.writeUInt32BE(d[0],0),b.writeUInt32BE(d[1],4),b.writeUInt32BE(d[2],8),b.writeUInt32BE(d[3],12),b},u.prototype.decryptBlock=function(c){var d=(c=s(c))[1];c[1]=c[3],c[3]=d;var b=r(c,this._invKeySchedule,n.INV_SUB_MIX,n.INV_SBOX,this._nRounds),g=l.allocUnsafe(16);return g.writeUInt32BE(b[0],0),g.writeUInt32BE(b[3],4),g.writeUInt32BE(b[2],8),g.writeUInt32BE(b[1],12),g},u.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},h.exports.AES=u},{"safe-buffer":494}],190:[function(e,h,f){var l=e("./aes"),s=e("safe-buffer").Buffer,o=e("cipher-base"),r=e("inherits"),t=e("./ghash"),n=e("buffer-xor"),u=e("./incr32");function c(d,b,g,p){o.call(this);var x=s.alloc(4,0);this._cipher=new l.AES(b);var y=this._cipher.encryptBlock(x);this._ghash=new t(y),g=(function(v,S,N){if(S.length===12)return v._finID=s.concat([S,s.from([0,0,0,1])]),s.concat([S,s.from([0,0,0,2])]);var R=new t(N),B=S.length,M=B%16;R.update(S),M&&(M=16-M,R.update(s.alloc(M,0))),R.update(s.alloc(8,0));var F=8*B,q=s.alloc(8);q.writeUIntBE(F,0,8),R.update(q),v._finID=R.state;var V=s.from(v._finID);return u(V),V})(this,g,y),this._prev=s.from(g),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=p,this._alen=0,this._len=0,this._mode=d,this._authTag=null,this._called=!1}r(c,o),c.prototype._update=function(d){if(!this._called&&this._alen){var b=16-this._alen%16;b<16&&(b=s.alloc(b,0),this._ghash.update(b))}this._called=!0;var g=this._mode.encrypt(this,d);return this._decrypt?this._ghash.update(d):this._ghash.update(g),this._len+=d.length,g},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var d=n(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&(function(b,g){var p=0;b.length!==g.length&&p++;for(var x=Math.min(b.length,g.length),y=0;y<x;++y)p+=b[y]^g[y];return p})(d,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=d,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(d){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=d},c.prototype.setAAD=function(d){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(d),this._alen+=d.length},h.exports=c},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,h,f){var l=e("./encrypter"),s=e("./decrypter"),o=e("./modes/list.json");f.createCipher=f.Cipher=l.createCipher,f.createCipheriv=f.Cipheriv=l.createCipheriv,f.createDecipher=f.Decipher=s.createDecipher,f.createDecipheriv=f.Decipheriv=s.createDecipheriv,f.listCiphers=f.getCiphers=function(){return Object.keys(o)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,h,f){var l=e("./authCipher"),s=e("safe-buffer").Buffer,o=e("./modes"),r=e("./streamCipher"),t=e("cipher-base"),n=e("./aes"),u=e("evp_bytestokey");function c(g,p,x){t.call(this),this._cache=new d,this._last=void 0,this._cipher=new n.AES(p),this._prev=s.from(x),this._mode=g,this._autopadding=!0}function d(){this.cache=s.allocUnsafe(0)}function b(g,p,x){var y=o[g.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=s.from(x)),y.mode!=="GCM"&&x.length!==y.iv)throw new TypeError("invalid iv length "+x.length);if(typeof p=="string"&&(p=s.from(p)),p.length!==y.key/8)throw new TypeError("invalid key length "+p.length);return y.type==="stream"?new r(y.module,p,x,!0):y.type==="auth"?new l(y.module,p,x,!0):new c(y.module,p,x)}e("inherits")(c,t),c.prototype._update=function(g){var p,x;this._cache.add(g);for(var y=[];p=this._cache.get(this._autopadding);)x=this._mode.decrypt(this,p),y.push(x);return s.concat(y)},c.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return(function(p){var x=p[15];if(x<1||x>16)throw new Error("unable to decrypt data");for(var y=-1;++y<x;)if(p[y+(16-x)]!==x)throw new Error("unable to decrypt data");if(x!==16)return p.slice(0,16-x)})(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},d.prototype.add=function(g){this.cache=s.concat([this.cache,g])},d.prototype.get=function(g){var p;if(g){if(this.cache.length>16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p}else if(this.cache.length>=16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},f.createDecipher=function(g,p){var x=o[g.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var y=u(p,!1,x.key,x.iv);return b(g,y.key,y.iv)},f.createDecipheriv=b},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,h,f){var l=e("./modes"),s=e("./authCipher"),o=e("safe-buffer").Buffer,r=e("./streamCipher"),t=e("cipher-base"),n=e("./aes"),u=e("evp_bytestokey");function c(p,x,y){t.call(this),this._cache=new b,this._cipher=new n.AES(x),this._prev=o.from(y),this._mode=p,this._autopadding=!0}e("inherits")(c,t),c.prototype._update=function(p){var x,y;this._cache.add(p);for(var v=[];x=this._cache.get();)y=this._mode.encrypt(this,x),v.push(y);return o.concat(v)};var d=o.alloc(16,16);function b(){this.cache=o.allocUnsafe(0)}function g(p,x,y){var v=l[p.toLowerCase()];if(!v)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=o.from(x)),x.length!==v.key/8)throw new TypeError("invalid key length "+x.length);if(typeof y=="string"&&(y=o.from(y)),v.mode!=="GCM"&&y.length!==v.iv)throw new TypeError("invalid iv length "+y.length);return v.type==="stream"?new r(v.module,x,y):v.type==="auth"?new s(v.module,x,y):new c(v.module,x,y)}c.prototype._final=function(){var p=this._cache.flush();if(this._autopadding)return p=this._mode.encrypt(this,p),this._cipher.scrub(),p;if(!p.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(p){return this._autopadding=!!p,this},b.prototype.add=function(p){this.cache=o.concat([this.cache,p])},b.prototype.get=function(){if(this.cache.length>15){var p=this.cache.slice(0,16);return this.cache=this.cache.slice(16),p}return null},b.prototype.flush=function(){for(var p=16-this.cache.length,x=o.allocUnsafe(p),y=-1;++y<p;)x.writeUInt8(p,y);return o.concat([this.cache,x])},f.createCipheriv=g,f.createCipher=function(p,x){var y=l[p.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var v=u(x,!1,y.key,y.iv);return g(p,v.key,v.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,h,f){var l=e("safe-buffer").Buffer,s=l.alloc(16,0);function o(t){var n=l.allocUnsafe(16);return n.writeUInt32BE(t[0]>>>0,0),n.writeUInt32BE(t[1]>>>0,4),n.writeUInt32BE(t[2]>>>0,8),n.writeUInt32BE(t[3]>>>0,12),n}function r(t){this.h=t,this.state=l.alloc(16,0),this.cache=l.allocUnsafe(0)}r.prototype.ghash=function(t){for(var n=-1;++n<t.length;)this.state[n]^=t[n];this._multiply()},r.prototype._multiply=function(){for(var t,n,u,c=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],d=[0,0,0,0],b=-1;++b<128;){for((this.state[~~(b/8)]&1<<7-b%8)!=0&&(d[0]^=c[0],d[1]^=c[1],d[2]^=c[2],d[3]^=c[3]),u=(1&c[3])!=0,n=3;n>0;n--)c[n]=c[n]>>>1|(1&c[n-1])<<31;c[0]=c[0]>>>1,u&&(c[0]=c[0]^225<<24)}this.state=o(d)},r.prototype.update=function(t){var n;for(this.cache=l.concat([this.cache,t]);this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},r.prototype.final=function(t,n){return this.cache.length&&this.ghash(l.concat([this.cache,s],16)),this.ghash(o([0,t,0,n])),this.state},h.exports=r},{"safe-buffer":494}],195:[function(e,h,f){h.exports=function(l){for(var s,o=l.length;o--;){if((s=l.readUInt8(o))!==255){s++,l.writeUInt8(s,o);break}l.writeUInt8(0,o)}}},{}],196:[function(e,h,f){var l=e("buffer-xor");f.encrypt=function(s,o){var r=l(o,s._prev);return s._prev=s._cipher.encryptBlock(r),s._prev},f.decrypt=function(s,o){var r=s._prev;s._prev=o;var t=s._cipher.decryptBlock(o);return l(t,r)}},{"buffer-xor":219}],197:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("buffer-xor");function o(r,t,n){var u=t.length,c=s(t,r._cache);return r._cache=r._cache.slice(u),r._prev=l.concat([r._prev,n?t:c]),c}f.encrypt=function(r,t,n){for(var u,c=l.allocUnsafe(0);t.length;){if(r._cache.length===0&&(r._cache=r._cipher.encryptBlock(r._prev),r._prev=l.allocUnsafe(0)),!(r._cache.length<=t.length)){c=l.concat([c,o(r,t,n)]);break}u=r._cache.length,c=l.concat([c,o(r,t.slice(0,u),n)]),t=t.slice(u)}return c}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,h,f){var l=e("safe-buffer").Buffer;function s(r,t,n){for(var u,c,d=-1,b=0;++d<8;)u=t&1<<7-d?128:0,b+=(128&(c=r._cipher.encryptBlock(r._prev)[0]^u))>>d%8,r._prev=o(r._prev,n?u:c);return b}function o(r,t){var n=r.length,u=-1,c=l.allocUnsafe(r.length);for(r=l.concat([r,l.from([t])]);++u<n;)c[u]=r[u]<<1|r[u+1]>>7;return c}f.encrypt=function(r,t,n){for(var u=t.length,c=l.allocUnsafe(u),d=-1;++d<u;)c[d]=s(r,t[d],n);return c}},{"safe-buffer":494}],199:[function(e,h,f){var l=e("safe-buffer").Buffer;function s(o,r,t){var n=o._cipher.encryptBlock(o._prev)[0]^r;return o._prev=l.concat([o._prev.slice(1),l.from([t?r:n])]),n}f.encrypt=function(o,r,t){for(var n=r.length,u=l.allocUnsafe(n),c=-1;++c<n;)u[c]=s(o,r[c],t);return u}},{"safe-buffer":494}],200:[function(e,h,f){var l=e("buffer-xor"),s=e("safe-buffer").Buffer,o=e("../incr32");function r(t){var n=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),n}f.encrypt=function(t,n){var u=Math.ceil(n.length/16),c=t._cache.length;t._cache=s.concat([t._cache,s.allocUnsafe(16*u)]);for(var d=0;d<u;d++){var b=r(t),g=c+16*d;t._cache.writeUInt32BE(b[0],g+0),t._cache.writeUInt32BE(b[1],g+4),t._cache.writeUInt32BE(b[2],g+8),t._cache.writeUInt32BE(b[3],g+12)}var p=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),l(n,p)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,h,f){f.encrypt=function(l,s){return l._cipher.encryptBlock(s)},f.decrypt=function(l,s){return l._cipher.decryptBlock(s)}},{}],202:[function(e,h,f){var l={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},s=e("./list.json");for(var o in s)s[o].module=l[s[o].mode];h.exports=s},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,h,f){h.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,h,f){(function(l){(function(){var s=e("buffer-xor");function o(r){return r._prev=r._cipher.encryptBlock(r._prev),r._prev}f.encrypt=function(r,t){for(;r._cache.length<t.length;)r._cache=l.concat([r._cache,o(r)]);var n=r._cache.slice(0,t.length);return r._cache=r._cache.slice(t.length),s(t,n)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,h,f){var l=e("./aes"),s=e("safe-buffer").Buffer,o=e("cipher-base");function r(t,n,u,c){o.call(this),this._cipher=new l.AES(n),this._prev=s.from(u),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=c,this._mode=t}e("inherits")(r,o),r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},h.exports=r},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,h,f){var l=e("browserify-des"),s=e("browserify-aes/browser"),o=e("browserify-aes/modes"),r=e("browserify-des/modes"),t=e("evp_bytestokey");function n(c,d,b){if(c=c.toLowerCase(),o[c])return s.createCipheriv(c,d,b);if(r[c])return new l({key:d,iv:b,mode:c});throw new TypeError("invalid suite type")}function u(c,d,b){if(c=c.toLowerCase(),o[c])return s.createDecipheriv(c,d,b);if(r[c])return new l({key:d,iv:b,mode:c,decrypt:!0});throw new TypeError("invalid suite type")}f.createCipher=f.Cipher=function(c,d){var b,g;if(c=c.toLowerCase(),o[c])b=o[c].key,g=o[c].iv;else{if(!r[c])throw new TypeError("invalid suite type");b=8*r[c].key,g=r[c].iv}var p=t(d,!1,b,g);return n(c,p.key,p.iv)},f.createCipheriv=f.Cipheriv=n,f.createDecipher=f.Decipher=function(c,d){var b,g;if(c=c.toLowerCase(),o[c])b=o[c].key,g=o[c].iv;else{if(!r[c])throw new TypeError("invalid suite type");b=8*r[c].key,g=r[c].iv}var p=t(d,!1,b,g);return u(c,p.key,p.iv)},f.createDecipheriv=f.Decipheriv=u,f.listCiphers=f.getCiphers=function(){return Object.keys(r).concat(s.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,h,f){var l=e("cipher-base"),s=e("des.js"),o=e("inherits"),r=e("safe-buffer").Buffer,t={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function n(u){l.call(this);var c,d=u.mode.toLowerCase(),b=t[d];c=u.decrypt?"decrypt":"encrypt";var g=u.key;r.isBuffer(g)||(g=r.from(g)),d!=="des-ede"&&d!=="des-ede-cbc"||(g=r.concat([g,g.slice(0,8)]));var p=u.iv;r.isBuffer(p)||(p=r.from(p)),this._des=b.create({key:g,iv:p,type:c})}t.des=t["des-cbc"],t.des3=t["des-ede3-cbc"],h.exports=n,o(n,l),n.prototype._update=function(u){return r.from(this._des.update(u))},n.prototype._final=function(){return r.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,h,f){f["des-ecb"]={key:8,iv:0},f["des-cbc"]=f.des={key:8,iv:8},f["des-ede3-cbc"]=f.des3={key:24,iv:8},f["des-ede3"]={key:24,iv:0},f["des-ede-cbc"]={key:16,iv:8},f["des-ede"]={key:16,iv:0}},{}],209:[function(e,h,f){(function(l){(function(){var s=e("bn.js"),o=e("randombytes");function r(n){var u,c=n.modulus.byteLength();do u=new s(o(c));while(u.cmp(n.modulus)>=0||!u.umod(n.prime1)||!u.umod(n.prime2));return u}function t(n,u){var c=(function(B){var M=r(B);return{blinder:M.toRed(s.mont(B.modulus)).redPow(new s(B.publicExponent)).fromRed(),unblinder:M.invm(B.modulus)}})(u),d=u.modulus.byteLength(),b=new s(n).mul(c.blinder).umod(u.modulus),g=b.toRed(s.mont(u.prime1)),p=b.toRed(s.mont(u.prime2)),x=u.coefficient,y=u.prime1,v=u.prime2,S=g.redPow(u.exponent1).fromRed(),N=p.redPow(u.exponent2).fromRed(),R=S.isub(N).imul(x).umod(y).imul(v);return N.iadd(R).imul(c.unblinder).umod(u.modulus).toArrayLike(l,"be",d)}t.getr=r,h.exports=t}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,h,f){h.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,h,f){h.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,h,f){h.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("create-hash"),o=e("readable-stream"),r=e("inherits"),t=e("./sign"),n=e("./verify"),u=e("./algorithms.json");function c(p){o.Writable.call(this);var x=u[p];if(!x)throw new Error("Unknown message digest");this._hashType=x.hash,this._hash=s(x.hash),this._tag=x.id,this._signType=x.sign}function d(p){o.Writable.call(this);var x=u[p];if(!x)throw new Error("Unknown message digest");this._hash=s(x.hash),this._tag=x.id,this._signType=x.sign}function b(p){return new c(p)}function g(p){return new d(p)}Object.keys(u).forEach((function(p){u[p].id=l.from(u[p].id,"hex"),u[p.toLowerCase()]=u[p]})),r(c,o.Writable),c.prototype._write=function(p,x,y){this._hash.update(p),y()},c.prototype.update=function(p,x){return typeof p=="string"&&(p=l.from(p,x)),this._hash.update(p),this},c.prototype.sign=function(p,x){this.end();var y=this._hash.digest(),v=t(y,p,this._hashType,this._signType,this._tag);return x?v.toString(x):v},r(d,o.Writable),d.prototype._write=function(p,x,y){this._hash.update(p),y()},d.prototype.update=function(p,x){return typeof p=="string"&&(p=l.from(p,x)),this._hash.update(p),this},d.prototype.verify=function(p,x,y){typeof x=="string"&&(x=l.from(x,y)),this.end();var v=this._hash.digest();return n(x,v,p,this._signType,this._tag)},h.exports={Sign:b,Verify:g,createSign:b,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("create-hmac"),o=e("browserify-rsa"),r=e("elliptic").ec,t=e("bn.js"),n=e("parse-asn1"),u=e("./curves.json");function c(p,x,y,v){if((p=l.from(p.toArray())).length<x.byteLength()){var S=l.alloc(x.byteLength()-p.length);p=l.concat([S,p])}var N=y.length,R=(function(F,q){F=(F=d(F,q)).mod(q);var V=l.from(F.toArray());if(V.length<q.byteLength()){var O=l.alloc(q.byteLength()-V.length);V=l.concat([O,V])}return V})(y,x),B=l.alloc(N);B.fill(1);var M=l.alloc(N);return M=s(v,M).update(B).update(l.from([0])).update(p).update(R).digest(),B=s(v,M).update(B).digest(),{k:M=s(v,M).update(B).update(l.from([1])).update(p).update(R).digest(),v:B=s(v,M).update(B).digest()}}function d(p,x){var y=new t(p),v=(p.length<<3)-x.bitLength();return v>0&&y.ishrn(v),y}function b(p,x,y){var v,S;do{for(v=l.alloc(0);8*v.length<p.bitLength();)x.v=s(y,x.k).update(x.v).digest(),v=l.concat([v,x.v]);S=d(v,p),x.k=s(y,x.k).update(x.v).update(l.from([0])).digest(),x.v=s(y,x.k).update(x.v).digest()}while(S.cmp(p)!==-1);return S}function g(p,x,y,v){return p.toRed(t.mont(y)).redPow(x).fromRed().mod(v)}h.exports=function(p,x,y,v,S){var N=n(x);if(N.curve){if(v!=="ecdsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");return(function(F,q){var V=u[q.curve.join(".")];if(!V)throw new Error("unknown curve "+q.curve.join("."));var O=new r(V).keyFromPrivate(q.privateKey).sign(F);return l.from(O.toDER())})(p,N)}if(N.type==="dsa"){if(v!=="dsa")throw new Error("wrong private key type");return(function(F,q,V){for(var O,T=q.params.priv_key,A=q.params.p,C=q.params.q,w=q.params.g,_=new t(0),j=d(F,C).mod(C),k=!1,E=c(T,C,F,V);k===!1;)O=b(C,E,V),_=g(w,O,A,C),(k=O.invm(C).imul(j.add(T.mul(_))).mod(C)).cmpn(0)===0&&(k=!1,_=new t(0));return(function(I,D){I=I.toArray(),D=D.toArray(),128&I[0]&&(I=[0].concat(I)),128&D[0]&&(D=[0].concat(D));var X=[48,I.length+D.length+4,2,I.length];return X=X.concat(I,[2,D.length],D),l.from(X)})(_,k)})(p,N,y)}if(v!=="rsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");p=l.concat([S,p]);for(var R=N.modulus.byteLength(),B=[0,1];p.length+B.length+1<R;)B.push(255);B.push(0);for(var M=-1;++M<p.length;)B.push(p[M]);return o(B,N)},h.exports.getKey=c,h.exports.makeKey=b},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("bn.js"),o=e("elliptic").ec,r=e("parse-asn1"),t=e("./curves.json");function n(u,c){if(u.cmpn(0)<=0)throw new Error("invalid sig");if(u.cmp(c)>=c)throw new Error("invalid sig")}h.exports=function(u,c,d,b,g){var p=r(d);if(p.type==="ec"){if(b!=="ecdsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");return(function(B,M,F){var q=t[F.data.algorithm.curve.join(".")];if(!q)throw new Error("unknown curve "+F.data.algorithm.curve.join("."));var V=new o(q),O=F.data.subjectPrivateKey.data;return V.verify(M,B,O)})(u,c,p)}if(p.type==="dsa"){if(b!=="dsa")throw new Error("wrong public key type");return(function(B,M,F){var q=F.data.p,V=F.data.q,O=F.data.g,T=F.data.pub_key,A=r.signature.decode(B,"der"),C=A.s,w=A.r;n(C,V),n(w,V);var _=s.mont(q),j=C.invm(V);return O.toRed(_).redPow(new s(M).mul(j).mod(V)).fromRed().mul(T.toRed(_).redPow(w.mul(j).mod(V)).fromRed()).mod(q).mod(V).cmp(w)===0})(u,c,p)}if(b!=="rsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");c=l.concat([g,c]);for(var x=p.modulus.byteLength(),y=[1],v=0;c.length+y.length+2<x;)y.push(255),v++;y.push(0);for(var S=-1;++S<c.length;)y.push(c[S]);y=l.from(y);var N=s.mont(p.modulus);u=(u=new s(u).toRed(N)).redPow(new s(p.publicExponent)),u=l.from(u.fromRed().toArray());var R=v<8?1:0;for(x=Math.min(u.length,y.length),u.length!==y.length&&(R=1),S=-1;++S<x;)R|=u[S]^y[S];return R===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,h,f){},{}],217:[function(e,h,f){var l=e("buffer"),s=l.Buffer;function o(t,n){for(var u in t)n[u]=t[u]}function r(t,n,u){return s(t,n,u)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?h.exports=l:(o(l,f),f.Buffer=r),o(s,r),r.from=function(t,n,u){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,n,u)},r.alloc=function(t,n,u){if(typeof t!="number")throw new TypeError("Argument must be a number");var c=s(t);return n!==void 0?typeof u=="string"?c.fill(n,u):c.fill(n):c.fill(0),c},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return l.SlowBuffer(t)}},{buffer:220}],218:[function(e,h,f){var l=e("safe-buffer").Buffer,s=l.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(p){var x;switch(this.encoding=(function(y){var v=(function(S){if(!S)return"utf8";for(var N;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(N)return;S=(""+S).toLowerCase(),N=!0}})(y);if(typeof v!="string"&&(l.isEncoding===s||!s(y)))throw new Error("Unknown encoding: "+y);return v||y})(p),this.encoding){case"utf16le":this.text=n,this.end=u,x=4;break;case"utf8":this.fillLast=t,x=4;break;case"base64":this.text=c,this.end=d,x=3;break;default:return this.write=b,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(x)}function r(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function t(p){var x=this.lastTotal-this.lastNeed,y=(function(v,S,N){if((192&S[0])!=128)return v.lastNeed=0,"�";if(v.lastNeed>1&&S.length>1){if((192&S[1])!=128)return v.lastNeed=1,"�";if(v.lastNeed>2&&S.length>2&&(192&S[2])!=128)return v.lastNeed=2,"�"}})(this,p);return y!==void 0?y:this.lastNeed<=p.length?(p.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,x,0,p.length),void(this.lastNeed-=p.length))}function n(p,x){if((p.length-x)%2==0){var y=p.toString("utf16le",x);if(y){var v=y.charCodeAt(y.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",x,p.length-1)}function u(p){var x=p&&p.length?this.write(p):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,y)}return x}function c(p,x){var y=(p.length-x)%3;return y===0?p.toString("base64",x):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",x,p.length-y))}function d(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function b(p){return p.toString(this.encoding)}function g(p){return p&&p.length?this.write(p):""}f.StringDecoder=o,o.prototype.write=function(p){if(p.length===0)return"";var x,y;if(this.lastNeed){if((x=this.fillLast(p))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<p.length?x?x+this.text(p,y):this.text(p,y):x||""},o.prototype.end=function(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+"�":x},o.prototype.text=function(p,x){var y=(function(S,N,R){var B=N.length-1;if(B<R)return 0;var M=r(N[B]);return M>=0?(M>0&&(S.lastNeed=M-1),M):--B<R||M===-2?0:(M=r(N[B]))>=0?(M>0&&(S.lastNeed=M-2),M):--B<R||M===-2?0:(M=r(N[B]))>=0?(M>0&&(M===2?M=0:S.lastNeed=M-3),M):0})(this,p,x);if(!this.lastNeed)return p.toString("utf8",x);this.lastTotal=y;var v=p.length-(y-this.lastNeed);return p.copy(this.lastChar,0,v),p.toString("utf8",x,v)},o.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":217}],219:[function(e,h,f){(function(l){(function(){h.exports=function(s,o){for(var r=Math.min(s.length,o.length),t=new l(r),n=0;n<r;++n)t[n]=s[n]^o[n];return t}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,h,f){(function(l){(function(){var s=e("base64-js"),o=e("ieee754");f.Buffer=t,f.SlowBuffer=function($){return+$!=$&&($=0),t.alloc(+$)},f.INSPECT_MAX_BYTES=50;function r($){if($>2147483647)throw new RangeError('The value "'+$+'" is invalid for option "size"');var L=new Uint8Array($);return L.__proto__=t.prototype,L}function t($,L,W){if(typeof $=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c($)}return n($,L,W)}function n($,L,W){if(typeof $=="string")return(function(se,H){if(typeof H=="string"&&H!==""||(H="utf8"),!t.isEncoding(H))throw new TypeError("Unknown encoding: "+H);var ce=0|g(se,H),ae=r(ce),Y=ae.write(se,H);return Y!==ce&&(ae=ae.slice(0,Y)),ae})($,L);if(ArrayBuffer.isView($))return d($);if($==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(U($,ArrayBuffer)||$&&U($.buffer,ArrayBuffer))return(function(se,H,ce){if(H<0||se.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<H+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var ae;return ae=H===void 0&&ce===void 0?new Uint8Array(se):ce===void 0?new Uint8Array(se,H):new Uint8Array(se,H,ce),ae.__proto__=t.prototype,ae})($,L,W);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var re=$.valueOf&&$.valueOf();if(re!=null&&re!==$)return t.from(re,L,W);var ne=(function(se){if(t.isBuffer(se)){var H=0|b(se.length),ce=r(H);return ce.length===0||se.copy(ce,0,0,H),ce}if(se.length!==void 0)return typeof se.length!="number"||J(se.length)?r(0):d(se);if(se.type==="Buffer"&&Array.isArray(se.data))return d(se.data)})($);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return t.from($[Symbol.toPrimitive]("string"),L,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function u($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function c($){return u($),r($<0?0:0|b($))}function d($){for(var L=$.length<0?0:0|b($.length),W=r(L),re=0;re<L;re+=1)W[re]=255&$[re];return W}function b($){if($>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|$}function g($,L){if(t.isBuffer($))return $.length;if(ArrayBuffer.isView($)||U($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var W=$.length,re=arguments.length>2&&arguments[2]===!0;if(!re&&W===0)return 0;for(var ne=!1;;)switch(L){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return X($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return G($).length;default:if(ne)return re?-1:X($).length;L=(""+L).toLowerCase(),ne=!0}}function p($,L,W){var re=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(L>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return A(this,L,W);case"utf8":case"utf-8":return V(this,L,W);case"ascii":return O(this,L,W);case"latin1":case"binary":return T(this,L,W);case"base64":return q(this,L,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,L,W);default:if(re)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),re=!0}}function x($,L,W){var re=$[L];$[L]=$[W],$[W]=re}function y($,L,W,re,ne){if($.length===0)return-1;if(typeof W=="string"?(re=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),J(W=+W)&&(W=ne?0:$.length-1),W<0&&(W=$.length+W),W>=$.length){if(ne)return-1;W=$.length-1}else if(W<0){if(!ne)return-1;W=0}if(typeof L=="string"&&(L=t.from(L,re)),t.isBuffer(L))return L.length===0?-1:v($,L,W,re,ne);if(typeof L=="number")return L&=255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call($,L,W):Uint8Array.prototype.lastIndexOf.call($,L,W):v($,[L],W,re,ne);throw new TypeError("val must be string, number or Buffer")}function v($,L,W,re,ne){var se,H=1,ce=$.length,ae=L.length;if(re!==void 0&&((re=String(re).toLowerCase())==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if($.length<2||L.length<2)return-1;H=2,ce/=2,ae/=2,W/=2}function Y(le,ee){return H===1?le[ee]:le.readUInt16BE(ee*H)}if(ne){var Q=-1;for(se=W;se<ce;se++)if(Y($,se)===Y(L,Q===-1?0:se-Q)){if(Q===-1&&(Q=se),se-Q+1===ae)return Q*H}else Q!==-1&&(se-=se-Q),Q=-1}else for(W+ae>ce&&(W=ce-ae),se=W;se>=0;se--){for(var te=!0,ie=0;ie<ae;ie++)if(Y($,se+ie)!==Y(L,ie)){te=!1;break}if(te)return se}return-1}function S($,L,W,re){W=Number(W)||0;var ne=$.length-W;re?(re=Number(re))>ne&&(re=ne):re=ne;var se=L.length;re>se/2&&(re=se/2);for(var H=0;H<re;++H){var ce=parseInt(L.substr(2*H,2),16);if(J(ce))return H;$[W+H]=ce}return H}function N($,L,W,re){return K(X(L,$.length-W),$,W,re)}function R($,L,W,re){return K((function(ne){for(var se=[],H=0;H<ne.length;++H)se.push(255&ne.charCodeAt(H));return se})(L),$,W,re)}function B($,L,W,re){return R($,L,W,re)}function M($,L,W,re){return K(G(L),$,W,re)}function F($,L,W,re){return K((function(ne,se){for(var H,ce,ae,Y=[],Q=0;Q<ne.length&&!((se-=2)<0);++Q)H=ne.charCodeAt(Q),ce=H>>8,ae=H%256,Y.push(ae),Y.push(ce);return Y})(L,$.length-W),$,W,re)}function q($,L,W){return L===0&&W===$.length?s.fromByteArray($):s.fromByteArray($.slice(L,W))}function V($,L,W){W=Math.min($.length,W);for(var re=[],ne=L;ne<W;){var se,H,ce,ae,Y=$[ne],Q=null,te=Y>239?4:Y>223?3:Y>191?2:1;if(ne+te<=W)switch(te){case 1:Y<128&&(Q=Y);break;case 2:(192&(se=$[ne+1]))==128&&(ae=(31&Y)<<6|63&se)>127&&(Q=ae);break;case 3:se=$[ne+1],H=$[ne+2],(192&se)==128&&(192&H)==128&&(ae=(15&Y)<<12|(63&se)<<6|63&H)>2047&&(ae<55296||ae>57343)&&(Q=ae);break;case 4:se=$[ne+1],H=$[ne+2],ce=$[ne+3],(192&se)==128&&(192&H)==128&&(192&ce)==128&&(ae=(15&Y)<<18|(63&se)<<12|(63&H)<<6|63&ce)>65535&&ae<1114112&&(Q=ae)}Q===null?(Q=65533,te=1):Q>65535&&(Q-=65536,re.push(Q>>>10&1023|55296),Q=56320|1023&Q),re.push(Q),ne+=te}return(function(ie){var le=ie.length;if(le<=4096)return String.fromCharCode.apply(String,ie);for(var ee="",oe=0;oe<le;)ee+=String.fromCharCode.apply(String,ie.slice(oe,oe+=4096));return ee})(re)}f.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=(function(){try{var $=new Uint8Array(1);return $.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},$.foo()===42}catch{return!1}})(),t.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function($,L,W){return n($,L,W)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function($,L,W){return(function(re,ne,se){return u(re),re<=0?r(re):ne!==void 0?typeof se=="string"?r(re).fill(ne,se):r(re).fill(ne):r(re)})($,L,W)},t.allocUnsafe=function($){return c($)},t.allocUnsafeSlow=function($){return c($)},t.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==t.prototype},t.compare=function($,L){if(U($,Uint8Array)&&($=t.from($,$.offset,$.byteLength)),U(L,Uint8Array)&&(L=t.from(L,L.offset,L.byteLength)),!t.isBuffer($)||!t.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===L)return 0;for(var W=$.length,re=L.length,ne=0,se=Math.min(W,re);ne<se;++ne)if($[ne]!==L[ne]){W=$[ne],re=L[ne];break}return W<re?-1:re<W?1:0},t.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function($,L){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return t.alloc(0);var W;if(L===void 0)for(L=0,W=0;W<$.length;++W)L+=$[W].length;var re=t.allocUnsafe(L),ne=0;for(W=0;W<$.length;++W){var se=$[W];if(U(se,Uint8Array)&&(se=t.from(se)),!t.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(re,ne),ne+=se.length}return re},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<$;L+=2)x(this,L,L+1);return this},t.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<$;L+=4)x(this,L,L+3),x(this,L+1,L+2);return this},t.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<$;L+=8)x(this,L,L+7),x(this,L+1,L+6),x(this,L+2,L+5),x(this,L+3,L+4);return this},t.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?V(this,0,$):p.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function($){if(!t.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||t.compare(this,$)===0},t.prototype.inspect=function(){var $="",L=f.INSPECT_MAX_BYTES;return $=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&($+=" ... "),"<Buffer "+$+">"},t.prototype.compare=function($,L,W,re,ne){if(U($,Uint8Array)&&($=t.from($,$.offset,$.byteLength)),!t.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(L===void 0&&(L=0),W===void 0&&(W=$?$.length:0),re===void 0&&(re=0),ne===void 0&&(ne=this.length),L<0||W>$.length||re<0||ne>this.length)throw new RangeError("out of range index");if(re>=ne&&L>=W)return 0;if(re>=ne)return-1;if(L>=W)return 1;if(this===$)return 0;for(var se=(ne>>>=0)-(re>>>=0),H=(W>>>=0)-(L>>>=0),ce=Math.min(se,H),ae=this.slice(re,ne),Y=$.slice(L,W),Q=0;Q<ce;++Q)if(ae[Q]!==Y[Q]){se=ae[Q],H=Y[Q];break}return se<H?-1:H<se?1:0},t.prototype.includes=function($,L,W){return this.indexOf($,L,W)!==-1},t.prototype.indexOf=function($,L,W){return y(this,$,L,W,!0)},t.prototype.lastIndexOf=function($,L,W){return y(this,$,L,W,!1)},t.prototype.write=function($,L,W,re){if(L===void 0)re="utf8",W=this.length,L=0;else if(W===void 0&&typeof L=="string")re=L,W=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(W)?(W>>>=0,re===void 0&&(re="utf8")):(re=W,W=void 0)}var ne=this.length-L;if((W===void 0||W>ne)&&(W=ne),$.length>0&&(W<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var se=!1;;)switch(re){case"hex":return S(this,$,L,W);case"utf8":case"utf-8":return N(this,$,L,W);case"ascii":return R(this,$,L,W);case"latin1":case"binary":return B(this,$,L,W);case"base64":return M(this,$,L,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,$,L,W);default:if(se)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),se=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O($,L,W){var re="";W=Math.min($.length,W);for(var ne=L;ne<W;++ne)re+=String.fromCharCode(127&$[ne]);return re}function T($,L,W){var re="";W=Math.min($.length,W);for(var ne=L;ne<W;++ne)re+=String.fromCharCode($[ne]);return re}function A($,L,W){var re=$.length;(!L||L<0)&&(L=0),(!W||W<0||W>re)&&(W=re);for(var ne="",se=L;se<W;++se)ne+=D($[se]);return ne}function C($,L,W){for(var re=$.slice(L,W),ne="",se=0;se<re.length;se+=2)ne+=String.fromCharCode(re[se]+256*re[se+1]);return ne}function w($,L,W){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+L>W)throw new RangeError("Trying to access beyond buffer length")}function _($,L,W,re,ne,se){if(!t.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ne||L<se)throw new RangeError('"value" argument is out of bounds');if(W+re>$.length)throw new RangeError("Index out of range")}function j($,L,W,re,ne,se){if(W+re>$.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function k($,L,W,re,ne){return L=+L,W>>>=0,ne||j($,0,W,4),o.write($,L,W,re,23,4),W+4}function E($,L,W,re,ne){return L=+L,W>>>=0,ne||j($,0,W,8),o.write($,L,W,re,52,8),W+8}t.prototype.slice=function($,L){var W=this.length;($=~~$)<0?($+=W)<0&&($=0):$>W&&($=W),(L=L===void 0?W:~~L)<0?(L+=W)<0&&(L=0):L>W&&(L=W),L<$&&(L=$);var re=this.subarray($,L);return re.__proto__=t.prototype,re},t.prototype.readUIntLE=function($,L,W){$>>>=0,L>>>=0,W||w($,L,this.length);for(var re=this[$],ne=1,se=0;++se<L&&(ne*=256);)re+=this[$+se]*ne;return re},t.prototype.readUIntBE=function($,L,W){$>>>=0,L>>>=0,W||w($,L,this.length);for(var re=this[$+--L],ne=1;L>0&&(ne*=256);)re+=this[$+--L]*ne;return re},t.prototype.readUInt8=function($,L){return $>>>=0,L||w($,1,this.length),this[$]},t.prototype.readUInt16LE=function($,L){return $>>>=0,L||w($,2,this.length),this[$]|this[$+1]<<8},t.prototype.readUInt16BE=function($,L){return $>>>=0,L||w($,2,this.length),this[$]<<8|this[$+1]},t.prototype.readUInt32LE=function($,L){return $>>>=0,L||w($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},t.prototype.readUInt32BE=function($,L){return $>>>=0,L||w($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},t.prototype.readIntLE=function($,L,W){$>>>=0,L>>>=0,W||w($,L,this.length);for(var re=this[$],ne=1,se=0;++se<L&&(ne*=256);)re+=this[$+se]*ne;return re>=(ne*=128)&&(re-=Math.pow(2,8*L)),re},t.prototype.readIntBE=function($,L,W){$>>>=0,L>>>=0,W||w($,L,this.length);for(var re=L,ne=1,se=this[$+--re];re>0&&(ne*=256);)se+=this[$+--re]*ne;return se>=(ne*=128)&&(se-=Math.pow(2,8*L)),se},t.prototype.readInt8=function($,L){return $>>>=0,L||w($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},t.prototype.readInt16LE=function($,L){$>>>=0,L||w($,2,this.length);var W=this[$]|this[$+1]<<8;return 32768&W?4294901760|W:W},t.prototype.readInt16BE=function($,L){$>>>=0,L||w($,2,this.length);var W=this[$+1]|this[$]<<8;return 32768&W?4294901760|W:W},t.prototype.readInt32LE=function($,L){return $>>>=0,L||w($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},t.prototype.readInt32BE=function($,L){return $>>>=0,L||w($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},t.prototype.readFloatLE=function($,L){return $>>>=0,L||w($,4,this.length),o.read(this,$,!0,23,4)},t.prototype.readFloatBE=function($,L){return $>>>=0,L||w($,4,this.length),o.read(this,$,!1,23,4)},t.prototype.readDoubleLE=function($,L){return $>>>=0,L||w($,8,this.length),o.read(this,$,!0,52,8)},t.prototype.readDoubleBE=function($,L){return $>>>=0,L||w($,8,this.length),o.read(this,$,!1,52,8)},t.prototype.writeUIntLE=function($,L,W,re){$=+$,L>>>=0,W>>>=0,re||_(this,$,L,W,Math.pow(2,8*W)-1,0);var ne=1,se=0;for(this[L]=255&$;++se<W&&(ne*=256);)this[L+se]=$/ne&255;return L+W},t.prototype.writeUIntBE=function($,L,W,re){$=+$,L>>>=0,W>>>=0,re||_(this,$,L,W,Math.pow(2,8*W)-1,0);var ne=W-1,se=1;for(this[L+ne]=255&$;--ne>=0&&(se*=256);)this[L+ne]=$/se&255;return L+W},t.prototype.writeUInt8=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,1,255,0),this[L]=255&$,L+1},t.prototype.writeUInt16LE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,2,65535,0),this[L]=255&$,this[L+1]=$>>>8,L+2},t.prototype.writeUInt16BE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,2,65535,0),this[L]=$>>>8,this[L+1]=255&$,L+2},t.prototype.writeUInt32LE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,4,4294967295,0),this[L+3]=$>>>24,this[L+2]=$>>>16,this[L+1]=$>>>8,this[L]=255&$,L+4},t.prototype.writeUInt32BE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,4,4294967295,0),this[L]=$>>>24,this[L+1]=$>>>16,this[L+2]=$>>>8,this[L+3]=255&$,L+4},t.prototype.writeIntLE=function($,L,W,re){if($=+$,L>>>=0,!re){var ne=Math.pow(2,8*W-1);_(this,$,L,W,ne-1,-ne)}var se=0,H=1,ce=0;for(this[L]=255&$;++se<W&&(H*=256);)$<0&&ce===0&&this[L+se-1]!==0&&(ce=1),this[L+se]=($/H>>0)-ce&255;return L+W},t.prototype.writeIntBE=function($,L,W,re){if($=+$,L>>>=0,!re){var ne=Math.pow(2,8*W-1);_(this,$,L,W,ne-1,-ne)}var se=W-1,H=1,ce=0;for(this[L+se]=255&$;--se>=0&&(H*=256);)$<0&&ce===0&&this[L+se+1]!==0&&(ce=1),this[L+se]=($/H>>0)-ce&255;return L+W},t.prototype.writeInt8=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,1,127,-128),$<0&&($=255+$+1),this[L]=255&$,L+1},t.prototype.writeInt16LE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,2,32767,-32768),this[L]=255&$,this[L+1]=$>>>8,L+2},t.prototype.writeInt16BE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,2,32767,-32768),this[L]=$>>>8,this[L+1]=255&$,L+2},t.prototype.writeInt32LE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,4,2147483647,-2147483648),this[L]=255&$,this[L+1]=$>>>8,this[L+2]=$>>>16,this[L+3]=$>>>24,L+4},t.prototype.writeInt32BE=function($,L,W){return $=+$,L>>>=0,W||_(this,$,L,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[L]=$>>>24,this[L+1]=$>>>16,this[L+2]=$>>>8,this[L+3]=255&$,L+4},t.prototype.writeFloatLE=function($,L,W){return k(this,$,L,!0,W)},t.prototype.writeFloatBE=function($,L,W){return k(this,$,L,!1,W)},t.prototype.writeDoubleLE=function($,L,W){return E(this,$,L,!0,W)},t.prototype.writeDoubleBE=function($,L,W){return E(this,$,L,!1,W)},t.prototype.copy=function($,L,W,re){if(!t.isBuffer($))throw new TypeError("argument should be a Buffer");if(W||(W=0),re||re===0||(re=this.length),L>=$.length&&(L=$.length),L||(L=0),re>0&&re<W&&(re=W),re===W||$.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),$.length-L<re-W&&(re=$.length-L+W);var ne=re-W;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(L,W,re);else if(this===$&&W<L&&L<re)for(var se=ne-1;se>=0;--se)$[se+L]=this[se+W];else Uint8Array.prototype.set.call($,this.subarray(W,re),L);return ne},t.prototype.fill=function($,L,W,re){if(typeof $=="string"){if(typeof L=="string"?(re=L,L=0,W=this.length):typeof W=="string"&&(re=W,W=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!t.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if($.length===1){var ne=$.charCodeAt(0);(re==="utf8"&&ne<128||re==="latin1")&&($=ne)}}else typeof $=="number"&&($&=255);if(L<0||this.length<L||this.length<W)throw new RangeError("Out of range index");if(W<=L)return this;var se;if(L>>>=0,W=W===void 0?this.length:W>>>0,$||($=0),typeof $=="number")for(se=L;se<W;++se)this[se]=$;else{var H=t.isBuffer($)?$:t.from($,re),ce=H.length;if(ce===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(se=0;se<W-L;++se)this[se+L]=H[se%ce]}return this};var I=/[^+/0-9A-Za-z-_]/g;function D($){return $<16?"0"+$.toString(16):$.toString(16)}function X($,L){var W;L=L||1/0;for(var re=$.length,ne=null,se=[],H=0;H<re;++H){if((W=$.charCodeAt(H))>55295&&W<57344){if(!ne){if(W>56319){(L-=3)>-1&&se.push(239,191,189);continue}if(H+1===re){(L-=3)>-1&&se.push(239,191,189);continue}ne=W;continue}if(W<56320){(L-=3)>-1&&se.push(239,191,189),ne=W;continue}W=65536+(ne-55296<<10|W-56320)}else ne&&(L-=3)>-1&&se.push(239,191,189);if(ne=null,W<128){if((L-=1)<0)break;se.push(W)}else if(W<2048){if((L-=2)<0)break;se.push(W>>6|192,63&W|128)}else if(W<65536){if((L-=3)<0)break;se.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;se.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return se}function G($){return s.toByteArray((function(L){if((L=(L=L.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L})($))}function K($,L,W,re){for(var ne=0;ne<re&&!(ne+W>=L.length||ne>=$.length);++ne)L[ne+W]=$[ne];return ne}function U($,L){return $ instanceof L||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===L.name}function J($){return $!=$}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("stream").Transform,o=e("string_decoder").StringDecoder;function r(t){s.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(r,s),r.prototype.update=function(t,n,u){typeof t=="string"&&(t=l.from(t,n));var c=this._update(t);return this.hashMode?this:(u&&(c=this._toString(c,u)),c)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(t,n,u){var c;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(d){c=d}finally{u(c)}},r.prototype._flush=function(t){var n;try{this.push(this.__final())}catch(u){n=u}t(n)},r.prototype._finalOrDigest=function(t){var n=this.__final()||l.alloc(0);return t&&(n=this._toString(n,t,!0)),n},r.prototype._toString=function(t,n,u){if(this._decoder||(this._decoder=new o(n),this._encoding=n),this._encoding!==n)throw new Error("can't switch encodings");var c=this._decoder.write(t);return u&&(c+=this._decoder.end()),c},h.exports=r},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,h,f){var l=e("../internals/is-callable"),s=e("../internals/try-to-string"),o=TypeError;h.exports=function(r){if(l(r))return r;throw new o(s(r)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,h,f){var l=e("../internals/is-constructor"),s=e("../internals/try-to-string"),o=TypeError;h.exports=function(r){if(l(r))return r;throw new o(s(r)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,h,f){var l=e("../internals/is-callable"),s=String,o=TypeError;h.exports=function(r){if(typeof r=="object"||l(r))return r;throw new o("Can't set "+s(r)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,h,f){var l=e("../internals/well-known-symbol"),s=e("../internals/object-create"),o=e("../internals/object-define-property").f,r=l("unscopables"),t=Array.prototype;t[r]===void 0&&o(t,r,{configurable:!0,value:s(null)}),h.exports=function(n){t[r][n]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,h,f){var l=e("../internals/object-is-prototype-of"),s=TypeError;h.exports=function(o,r){if(l(r,o))return o;throw new s("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,h,f){var l=e("../internals/is-object"),s=String,o=TypeError;h.exports=function(r){if(l(r))return r;throw new o(s(r)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,h,f){var l=e("../internals/to-indexed-object"),s=e("../internals/to-absolute-index"),o=e("../internals/length-of-array-like"),r=function(t){return function(n,u,c){var d,b=l(n),g=o(b),p=s(c,g);if(t&&u!=u){for(;g>p;)if((d=b[p++])!=d)return!0}else for(;g>p;p++)if((t||p in b)&&b[p]===u)return t||p||0;return!t&&-1}};h.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,h,f){var l=e("../internals/function-bind-context"),s=e("../internals/function-uncurry-this"),o=e("../internals/indexed-object"),r=e("../internals/to-object"),t=e("../internals/length-of-array-like"),n=e("../internals/array-species-create"),u=s([].push),c=function(d){var b=d===1,g=d===2,p=d===3,x=d===4,y=d===6,v=d===7,S=d===5||y;return function(N,R,B,M){for(var F,q,V=r(N),O=o(V),T=l(R,B),A=t(O),C=0,w=M||n,_=b?w(N,A):g||v?w(N,0):void 0;A>C;C++)if((S||C in O)&&(q=T(F=O[C],C,V),d))if(b)_[C]=q;else if(q)switch(d){case 3:return!0;case 5:return F;case 6:return C;case 2:u(_,F)}else switch(d){case 4:return!1;case 7:u(_,F)}return y?-1:p||x?x:_}};h.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,h,f){var l=e("../internals/to-absolute-index"),s=e("../internals/length-of-array-like"),o=e("../internals/create-property"),r=Array,t=Math.max;h.exports=function(n,u,c){for(var d=s(n),b=l(u,d),g=l(c===void 0?d:c,d),p=r(t(g-b,0)),x=0;b<g;b++,x++)o(p,x,n[b]);return p.length=x,p}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,h,f){var l=e("../internals/function-uncurry-this");h.exports=l([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,h,f){var l=e("../internals/is-array"),s=e("../internals/is-constructor"),o=e("../internals/is-object"),r=e("../internals/well-known-symbol")("species"),t=Array;h.exports=function(n){var u;return l(n)&&(u=n.constructor,(s(u)&&(u===t||l(u.prototype))||o(u)&&(u=u[r])===null)&&(u=void 0)),u===void 0?t:u}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,h,f){var l=e("../internals/array-species-constructor");h.exports=function(s,o){return new(l(s))(o===0?0:o)}},{"../internals/array-species-constructor":232}],234:[function(e,h,f){var l=e("../internals/well-known-symbol")("iterator"),s=!1;try{var o=0,r={next:function(){return{done:!!o++}},return:function(){s=!0}};r[l]=function(){return this},Array.from(r,(function(){throw 2}))}catch{}h.exports=function(t,n){try{if(!n&&!s)return!1}catch{return!1}var u=!1;try{var c={};c[l]=function(){return{next:function(){return{done:u=!0}}}},t(c)}catch{}return u}},{"../internals/well-known-symbol":357}],235:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=l({}.toString),o=l("".slice);h.exports=function(r){return o(s(r),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,h,f){var l=e("../internals/to-string-tag-support"),s=e("../internals/is-callable"),o=e("../internals/classof-raw"),r=e("../internals/well-known-symbol")("toStringTag"),t=Object,n=o((function(){return arguments})())==="Arguments";h.exports=l?o:function(u){var c,d,b;return u===void 0?"Undefined":u===null?"Null":typeof(d=(function(g,p){try{return g[p]}catch{}})(c=t(u),r))=="string"?d:n?o(c):(b=o(c))==="Object"&&s(c.callee)?"Arguments":b}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,h,f){var l=e("../internals/has-own-property"),s=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),r=e("../internals/object-define-property");h.exports=function(t,n,u){for(var c=s(n),d=r.f,b=o.f,g=0;g<c.length;g++){var p=c[g];l(t,p)||u&&l(u,p)||d(t,p,b(n,p))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,h,f){var l=e("../internals/well-known-symbol")("match");h.exports=function(s){var o=/./;try{"/./"[s](o)}catch{try{return o[l]=!1,"/./"[s](o)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,h,f){var l=e("../internals/fails");h.exports=!l((function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}))},{"../internals/fails":260}],240:[function(e,h,f){h.exports=function(l,s){return{value:l,done:s}}},{}],241:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");h.exports=l?function(r,t,n){return s.f(r,t,o(1,n))}:function(r,t,n){return r[t]=n,r}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,h,f){h.exports=function(l,s){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:s}}},{}],243:[function(e,h,f){var l=e("../internals/to-property-key"),s=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");h.exports=function(r,t,n){var u=l(t);u in r?s.f(r,u,o(0,n)):r[u]=n}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,h,f){var l=e("../internals/make-built-in"),s=e("../internals/object-define-property");h.exports=function(o,r,t){return t.get&&l(t.get,r,{getter:!0}),t.set&&l(t.set,r,{setter:!0}),s.f(o,r,t)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,h,f){var l=e("../internals/is-callable"),s=e("../internals/object-define-property"),o=e("../internals/make-built-in"),r=e("../internals/define-global-property");h.exports=function(t,n,u,c){c||(c={});var d=c.enumerable,b=c.name!==void 0?c.name:n;if(l(u)&&o(u,b,c),c.global)d?t[n]=u:r(n,u);else{try{c.unsafe?t[n]&&(d=!0):delete t[n]}catch{}d?t[n]=u:s.f(t,n,{value:u,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,h,f){var l=e("../internals/global"),s=Object.defineProperty;h.exports=function(o,r){try{s(l,o,{value:r,configurable:!0,writable:!0})}catch{l[o]=r}return r}},{"../internals/global":274}],247:[function(e,h,f){var l=e("../internals/fails");h.exports=!l((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},{"../internals/fails":260}],248:[function(e,h,f){var l=typeof document=="object"&&document.all,s=l===void 0&&l!==void 0;h.exports={all:l,IS_HTMLDDA:s}},{}],249:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/is-object"),o=l.document,r=s(o)&&s(o.createElement);h.exports=function(t){return r?o.createElement(t):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,h,f){var l=e("../internals/engine-is-deno"),s=e("../internals/engine-is-node");h.exports=!l&&!s&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,h,f){h.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(e,h,f){var l=e("../internals/engine-user-agent");h.exports=/ipad|iphone|ipod/i.test(l)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(e,h,f){var l=e("../internals/engine-user-agent");h.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},{"../internals/engine-user-agent":256}],254:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/classof-raw");h.exports=s(l.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,h,f){var l=e("../internals/engine-user-agent");h.exports=/web0s(?!.*chrome)/i.test(l)},{"../internals/engine-user-agent":256}],256:[function(e,h,f){h.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(e,h,f){var l,s,o=e("../internals/global"),r=e("../internals/engine-user-agent"),t=o.process,n=o.Deno,u=t&&t.versions||n&&n.version,c=u&&u.v8;c&&(s=(l=c.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!s&&r&&(!(l=r.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=r.match(/Chrome\/(\d+)/))&&(s=+l[1]),h.exports=s},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,h,f){h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),r=e("../internals/define-built-in"),t=e("../internals/define-global-property"),n=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");h.exports=function(c,d){var b,g,p,x,y,v=c.target,S=c.global,N=c.stat;if(b=S?l:N?l[v]||t(v,{}):(l[v]||{}).prototype)for(g in d){if(x=d[g],p=c.dontCallGetSet?(y=s(b,g))&&y.value:b[g],!u(S?g:v+(N?".":"#")+g,c.forced)&&p!==void 0){if(typeof x==typeof p)continue;n(x,p)}(c.sham||p&&p.sham)&&o(x,"sham",!0),r(b,g,x,c)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,h,f){h.exports=function(l){try{return!!l()}catch{return!0}}},{}],261:[function(e,h,f){var l=e("../internals/function-bind-native"),s=Function.prototype,o=s.apply,r=s.call;h.exports=typeof Reflect=="object"&&Reflect.apply||(l?r.bind(o):function(){return r.apply(o,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,h,f){var l=e("../internals/function-uncurry-this-clause"),s=e("../internals/a-callable"),o=e("../internals/function-bind-native"),r=l(l.bind);h.exports=function(t,n){return s(t),n===void 0?t:o?r(t,n):function(){return t.apply(n,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,h,f){var l=e("../internals/fails");h.exports=!l((function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")}))},{"../internals/fails":260}],264:[function(e,h,f){var l=e("../internals/function-bind-native"),s=Function.prototype.call;h.exports=l?s.bind(s):function(){return s.apply(s,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/has-own-property"),o=Function.prototype,r=l&&Object.getOwnPropertyDescriptor,t=s(o,"name"),n=t&&(function(){}).name==="something",u=t&&(!l||l&&r(o,"name").configurable);h.exports={EXISTS:t,PROPER:n,CONFIGURABLE:u}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/a-callable");h.exports=function(o,r,t){try{return l(s(Object.getOwnPropertyDescriptor(o,r)[t]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,h,f){var l=e("../internals/classof-raw"),s=e("../internals/function-uncurry-this");h.exports=function(o){if(l(o)==="Function")return s(o)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,h,f){var l=e("../internals/function-bind-native"),s=Function.prototype,o=s.call,r=l&&s.bind.bind(o,o);h.exports=l?r:function(t){return function(){return o.apply(t,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/is-callable"),o=function(r){return s(r)?r:void 0};h.exports=function(r,t){return arguments.length<2?o(l[r]):l[r]&&l[r][t]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,h,f){var l=e("../internals/classof"),s=e("../internals/get-method"),o=e("../internals/is-null-or-undefined"),r=e("../internals/iterators"),t=e("../internals/well-known-symbol")("iterator");h.exports=function(n){if(!o(n))return s(n,t)||s(n,"@@iterator")||r[l(n)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,h,f){var l=e("../internals/function-call"),s=e("../internals/a-callable"),o=e("../internals/an-object"),r=e("../internals/try-to-string"),t=e("../internals/get-iterator-method"),n=TypeError;h.exports=function(u,c){var d=arguments.length<2?t(u):c;if(s(d))return o(l(d,u));throw new n(r(u)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/is-array"),o=e("../internals/is-callable"),r=e("../internals/classof-raw"),t=e("../internals/to-string"),n=l([].push);h.exports=function(u){if(o(u))return u;if(s(u)){for(var c=u.length,d=[],b=0;b<c;b++){var g=u[b];typeof g=="string"?n(d,g):typeof g!="number"&&r(g)!=="Number"&&r(g)!=="String"||n(d,t(g))}var p=d.length,x=!0;return function(y,v){if(x)return x=!1,v;if(s(this))return v;for(var S=0;S<p;S++)if(d[S]===y)return v}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,h,f){var l=e("../internals/a-callable"),s=e("../internals/is-null-or-undefined");h.exports=function(o,r){var t=o[r];return s(t)?void 0:l(t)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,h,f){(function(l){(function(){var s=function(o){return o&&o.Math===Math&&o};h.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof l=="object"&&l)||(function(){return this})()||this||Function("return this")()}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/to-object"),o=l({}.hasOwnProperty);h.exports=Object.hasOwn||function(r,t){return o(s(r),t)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,h,f){h.exports={}},{}],277:[function(e,h,f){h.exports=function(l,s){try{arguments.length===1?console.error(l):console.error(l,s)}catch{}}},{}],278:[function(e,h,f){var l=e("../internals/get-built-in");h.exports=l("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/fails"),o=e("../internals/document-create-element");h.exports=!l&&!s((function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!==7}))},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/classof-raw"),r=Object,t=l("".split);h.exports=s((function(){return!r("z").propertyIsEnumerable(0)}))?function(n){return o(n)==="String"?t(n,""):r(n)}:r},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/is-callable"),o=e("../internals/shared-store"),r=l(Function.toString);s(o.inspectSource)||(o.inspectSource=function(t){return r(t)}),h.exports=o.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,h,f){var l,s,o,r=e("../internals/weak-map-basic-detection"),t=e("../internals/global"),n=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),c=e("../internals/has-own-property"),d=e("../internals/shared-store"),b=e("../internals/shared-key"),g=e("../internals/hidden-keys"),p=t.TypeError,x=t.WeakMap;if(r||d.state){var y=d.state||(d.state=new x);y.get=y.get,y.has=y.has,y.set=y.set,l=function(S,N){if(y.has(S))throw new p("Object already initialized");return N.facade=S,y.set(S,N),N},s=function(S){return y.get(S)||{}},o=function(S){return y.has(S)}}else{var v=b("state");g[v]=!0,l=function(S,N){if(c(S,v))throw new p("Object already initialized");return N.facade=S,u(S,v,N),N},s=function(S){return c(S,v)?S[v]:{}},o=function(S){return c(S,v)}}h.exports={set:l,get:s,has:o,enforce:function(S){return o(S)?s(S):l(S,{})},getterFor:function(S){return function(N){var R;if(!n(N)||(R=s(N)).type!==S)throw new p("Incompatible receiver, "+S+" required");return R}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,h,f){var l=e("../internals/well-known-symbol"),s=e("../internals/iterators"),o=l("iterator"),r=Array.prototype;h.exports=function(t){return t!==void 0&&(s.Array===t||r[o]===t)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,h,f){var l=e("../internals/classof-raw");h.exports=Array.isArray||function(s){return l(s)==="Array"}},{"../internals/classof-raw":235}],285:[function(e,h,f){var l=e("../internals/document-all"),s=l.all;h.exports=l.IS_HTMLDDA?function(o){return typeof o=="function"||o===s}:function(o){return typeof o=="function"}},{"../internals/document-all":248}],286:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/is-callable"),r=e("../internals/classof"),t=e("../internals/get-built-in"),n=e("../internals/inspect-source"),u=function(){},c=[],d=t("Reflect","construct"),b=/^\s*(?:class|function)\b/,g=l(b.exec),p=!b.test(u),x=function(v){if(!o(v))return!1;try{return d(u,c,v),!0}catch{return!1}},y=function(v){if(!o(v))return!1;switch(r(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!g(b,n(v))}catch{return!0}};y.sham=!0,h.exports=!d||s((function(){var v;return x(x.call)||!x(Object)||!x((function(){v=!0}))||v}))?y:x},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,h,f){var l=e("../internals/fails"),s=e("../internals/is-callable"),o=/#|\.prototype\./,r=function(d,b){var g=n[t(d)];return g===c||g!==u&&(s(b)?l(b):!!b)},t=r.normalize=function(d){return String(d).replace(o,".").toLowerCase()},n=r.data={},u=r.NATIVE="N",c=r.POLYFILL="P";h.exports=r},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,h,f){h.exports=function(l){return l==null}},{}],289:[function(e,h,f){var l=e("../internals/is-callable"),s=e("../internals/document-all"),o=s.all;h.exports=s.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:l(r)||r===o}:function(r){return typeof r=="object"?r!==null:l(r)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,h,f){h.exports=!1},{}],291:[function(e,h,f){var l=e("../internals/is-object"),s=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");h.exports=function(r){var t;return l(r)&&((t=r[o])!==void 0?!!t:s(r)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,h,f){var l=e("../internals/get-built-in"),s=e("../internals/is-callable"),o=e("../internals/object-is-prototype-of"),r=e("../internals/use-symbol-as-uid"),t=Object;h.exports=r?function(n){return typeof n=="symbol"}:function(n){var u=l("Symbol");return s(u)&&o(u.prototype,t(n))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,h,f){var l=e("../internals/function-bind-context"),s=e("../internals/function-call"),o=e("../internals/an-object"),r=e("../internals/try-to-string"),t=e("../internals/is-array-iterator-method"),n=e("../internals/length-of-array-like"),u=e("../internals/object-is-prototype-of"),c=e("../internals/get-iterator"),d=e("../internals/get-iterator-method"),b=e("../internals/iterator-close"),g=TypeError,p=function(y,v){this.stopped=y,this.result=v},x=p.prototype;h.exports=function(y,v,S){var N,R,B,M,F,q,V,O=S&&S.that,T=!(!S||!S.AS_ENTRIES),A=!(!S||!S.IS_RECORD),C=!(!S||!S.IS_ITERATOR),w=!(!S||!S.INTERRUPTED),_=l(v,O),j=function(E){return N&&b(N,"normal",E),new p(!0,E)},k=function(E){return T?(o(E),w?_(E[0],E[1],j):_(E[0],E[1])):w?_(E,j):_(E)};if(A)N=y.iterator;else if(C)N=y;else{if(!(R=d(y)))throw new g(r(y)+" is not iterable");if(t(R)){for(B=0,M=n(y);M>B;B++)if((F=k(y[B]))&&u(x,F))return F;return new p(!1)}N=c(y,R)}for(q=A?y.next:N.next;!(V=s(q,N)).done;){try{F=k(V.value)}catch(E){b(N,"throw",E)}if(typeof F=="object"&&F&&u(x,F))return F}return new p(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,h,f){var l=e("../internals/function-call"),s=e("../internals/an-object"),o=e("../internals/get-method");h.exports=function(r,t,n){var u,c;s(r);try{if(!(u=o(r,"return"))){if(t==="throw")throw n;return n}u=l(u,r)}catch(d){c=!0,u=d}if(t==="throw")throw n;if(c)throw u;return s(u),n}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,h,f){var l=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),r=e("../internals/set-to-string-tag"),t=e("../internals/iterators"),n=function(){return this};h.exports=function(u,c,d,b){var g=c+" Iterator";return u.prototype=s(l,{next:o(+!b,d)}),r(u,g,!1,!0),t[g]=n,u}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/is-pure"),r=e("../internals/function-name"),t=e("../internals/is-callable"),n=e("../internals/iterator-create-constructor"),u=e("../internals/object-get-prototype-of"),c=e("../internals/object-set-prototype-of"),d=e("../internals/set-to-string-tag"),b=e("../internals/create-non-enumerable-property"),g=e("../internals/define-built-in"),p=e("../internals/well-known-symbol"),x=e("../internals/iterators"),y=e("../internals/iterators-core"),v=r.PROPER,S=r.CONFIGURABLE,N=y.IteratorPrototype,R=y.BUGGY_SAFARI_ITERATORS,B=p("iterator"),M=function(){return this};h.exports=function(F,q,V,O,T,A,C){n(V,q,O);var w,_,j,k=function(U){if(U===T&&G)return G;if(!R&&U&&U in D)return D[U];switch(U){case"keys":case"values":case"entries":return function(){return new V(this,U)}}return function(){return new V(this)}},E=q+" Iterator",I=!1,D=F.prototype,X=D[B]||D["@@iterator"]||T&&D[T],G=!R&&X||k(T),K=q==="Array"&&D.entries||X;if(K&&(w=u(K.call(new F)))!==Object.prototype&&w.next&&(o||u(w)===N||(c?c(w,N):t(w[B])||g(w,B,M)),d(w,E,!0,!0),o&&(x[E]=M)),v&&T==="values"&&X&&X.name!=="values"&&(!o&&S?b(D,"name","values"):(I=!0,G=function(){return s(X,this)})),T)if(_={values:k("values"),keys:A?G:k("keys"),entries:k("entries")},C)for(j in _)(R||I||!(j in D))&&g(D,j,_[j]);else l({target:q,proto:!0,forced:R||I},_);return o&&!C||D[B]===G||g(D,B,G,{name:T}),x[q]=G,_}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,h,f){var l,s,o,r=e("../internals/fails"),t=e("../internals/is-callable"),n=e("../internals/is-object"),u=e("../internals/object-create"),c=e("../internals/object-get-prototype-of"),d=e("../internals/define-built-in"),b=e("../internals/well-known-symbol"),g=e("../internals/is-pure"),p=b("iterator"),x=!1;[].keys&&("next"in(o=[].keys())?(s=c(c(o)))!==Object.prototype&&(l=s):x=!0),!n(l)||r((function(){var y={};return l[p].call(y)!==y}))?l={}:g&&(l=u(l)),t(l[p])||d(l,p,(function(){return this})),h.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:x}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,h,f){arguments[4][276][0].apply(f,arguments)},{dup:276}],299:[function(e,h,f){var l=e("../internals/to-length");h.exports=function(s){return l(s.length)}},{"../internals/to-length":343}],300:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/fails"),o=e("../internals/is-callable"),r=e("../internals/has-own-property"),t=e("../internals/descriptors"),n=e("../internals/function-name").CONFIGURABLE,u=e("../internals/inspect-source"),c=e("../internals/internal-state"),d=c.enforce,b=c.get,g=String,p=Object.defineProperty,x=l("".slice),y=l("".replace),v=l([].join),S=t&&!s((function(){return p((function(){}),"length",{value:8}).length!==8})),N=String(String).split("String"),R=h.exports=function(B,M,F){x(g(M),0,7)==="Symbol("&&(M="["+y(g(M),/^Symbol\(([^)]*)\)/,"$1")+"]"),F&&F.getter&&(M="get "+M),F&&F.setter&&(M="set "+M),(!r(B,"name")||n&&B.name!==M)&&(t?p(B,"name",{value:M,configurable:!0}):B.name=M),S&&F&&r(F,"arity")&&B.length!==F.arity&&p(B,"length",{value:F.arity});try{F&&r(F,"constructor")&&F.constructor?t&&p(B,"prototype",{writable:!1}):B.prototype&&(B.prototype=void 0)}catch{}var q=d(B);return r(q,"source")||(q.source=v(N,typeof M=="string"?M:"")),B};Function.prototype.toString=R((function(){return o(this)&&b(this).source||u(this)}),"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,h,f){var l=Math.ceil,s=Math.floor;h.exports=Math.trunc||function(o){var r=+o;return(r>0?s:l)(r)}},{}],302:[function(e,h,f){var l,s,o,r,t,n=e("../internals/global"),u=e("../internals/function-bind-context"),c=e("../internals/object-get-own-property-descriptor").f,d=e("../internals/task").set,b=e("../internals/queue"),g=e("../internals/engine-is-ios"),p=e("../internals/engine-is-ios-pebble"),x=e("../internals/engine-is-webos-webkit"),y=e("../internals/engine-is-node"),v=n.MutationObserver||n.WebKitMutationObserver,S=n.document,N=n.process,R=n.Promise,B=c(n,"queueMicrotask"),M=B&&B.value;if(!M){var F=new b,q=function(){var V,O;for(y&&(V=N.domain)&&V.exit();O=F.get();)try{O()}catch(T){throw F.head&&l(),T}V&&V.enter()};g||y||x||!v||!S?!p&&R&&R.resolve?((r=R.resolve(void 0)).constructor=R,t=u(r.then,r),l=function(){t(q)}):y?l=function(){N.nextTick(q)}:(d=u(d,n),l=function(){d(q)}):(s=!0,o=S.createTextNode(""),new v(q).observe(o,{characterData:!0}),l=function(){o.data=s=!s}),M=function(V){F.head||l(),F.add(V)}}h.exports=M},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,h,f){var l=e("../internals/a-callable"),s=TypeError,o=function(r){var t,n;this.promise=new r((function(u,c){if(t!==void 0||n!==void 0)throw new s("Bad Promise constructor");t=u,n=c})),this.resolve=l(t),this.reject=l(n)};h.exports.f=function(r){return new o(r)}},{"../internals/a-callable":222}],304:[function(e,h,f){var l=e("../internals/is-regexp"),s=TypeError;h.exports=function(o){if(l(o))throw new s("The method doesn't accept regular expressions");return o}},{"../internals/is-regexp":291}],305:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/function-uncurry-this"),o=e("../internals/function-call"),r=e("../internals/fails"),t=e("../internals/object-keys"),n=e("../internals/object-get-own-property-symbols"),u=e("../internals/object-property-is-enumerable"),c=e("../internals/to-object"),d=e("../internals/indexed-object"),b=Object.assign,g=Object.defineProperty,p=s([].concat);h.exports=!b||r((function(){if(l&&b({b:1},b(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var x={},y={},v=Symbol("assign detection");return x[v]=7,"abcdefghijklmnopqrst".split("").forEach((function(S){y[S]=S})),b({},x)[v]!==7||t(b({},y)).join("")!=="abcdefghijklmnopqrst"}))?function(x,y){for(var v=c(x),S=arguments.length,N=1,R=n.f,B=u.f;S>N;)for(var M,F=d(arguments[N++]),q=R?p(t(F),R(F)):t(F),V=q.length,O=0;V>O;)M=q[O++],l&&!o(B,F,M)||(v[M]=F[M]);return v}:b},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,h,f){var l,s=e("../internals/an-object"),o=e("../internals/object-define-properties"),r=e("../internals/enum-bug-keys"),t=e("../internals/hidden-keys"),n=e("../internals/html"),u=e("../internals/document-create-element"),c=e("../internals/shared-key"),d=c("IE_PROTO"),b=function(){},g=function(y){return"<script>"+y+"<\/script>"},p=function(y){y.write(g("")),y.close();var v=y.parentWindow.Object;return y=null,v},x=function(){try{l=new ActiveXObject("htmlfile")}catch{}var y,v;x=typeof document<"u"?document.domain&&l?p(l):((v=u("iframe")).style.display="none",n.appendChild(v),v.src="javascript:",(y=v.contentWindow.document).open(),y.write(g("document.F=Object")),y.close(),y.F):p(l);for(var S=r.length;S--;)delete x.prototype[r[S]];return x()};t[d]=!0,h.exports=Object.create||function(y,v){var S;return y!==null?(b.prototype=s(y),S=new b,b.prototype=null,S[d]=y):S=x(),v===void 0?S:o.f(S,v)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/v8-prototype-define-bug"),o=e("../internals/object-define-property"),r=e("../internals/an-object"),t=e("../internals/to-indexed-object"),n=e("../internals/object-keys");f.f=l&&!s?Object.defineProperties:function(u,c){r(u);for(var d,b=t(c),g=n(c),p=g.length,x=0;p>x;)o.f(u,d=g[x++],b[d]);return u}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),o=e("../internals/v8-prototype-define-bug"),r=e("../internals/an-object"),t=e("../internals/to-property-key"),n=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;f.f=l?o?function(d,b,g){if(r(d),b=t(b),r(g),typeof d=="function"&&b==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var p=c(d,b);p&&p.writable&&(d[b]=g.value,g={configurable:"configurable"in g?g.configurable:p.configurable,enumerable:"enumerable"in g?g.enumerable:p.enumerable,writable:!1})}return u(d,b,g)}:u:function(d,b,g){if(r(d),b=t(b),r(g),s)try{return u(d,b,g)}catch{}if("get"in g||"set"in g)throw new n("Accessors not supported");return"value"in g&&(d[b]=g.value),d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/function-call"),o=e("../internals/object-property-is-enumerable"),r=e("../internals/create-property-descriptor"),t=e("../internals/to-indexed-object"),n=e("../internals/to-property-key"),u=e("../internals/has-own-property"),c=e("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;f.f=l?d:function(b,g){if(b=t(b),g=n(g),c)try{return d(b,g)}catch{}if(u(b,g))return r(!s(o.f,b,g),b[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,h,f){var l=e("../internals/classof-raw"),s=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,r=e("../internals/array-slice-simple"),t=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];h.exports.f=function(n){return t&&l(n)==="Window"?(function(u){try{return o(u)}catch{return r(t)}})(n):o(s(n))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,h,f){var l=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");f.f=Object.getOwnPropertyNames||function(o){return l(o,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,h,f){f.f=Object.getOwnPropertySymbols},{}],313:[function(e,h,f){var l=e("../internals/has-own-property"),s=e("../internals/is-callable"),o=e("../internals/to-object"),r=e("../internals/shared-key"),t=e("../internals/correct-prototype-getter"),n=r("IE_PROTO"),u=Object,c=u.prototype;h.exports=t?u.getPrototypeOf:function(d){var b=o(d);if(l(b,n))return b[n];var g=b.constructor;return s(g)&&b instanceof g?g.prototype:b instanceof u?c:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,h,f){var l=e("../internals/function-uncurry-this");h.exports=l({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=e("../internals/has-own-property"),o=e("../internals/to-indexed-object"),r=e("../internals/array-includes").indexOf,t=e("../internals/hidden-keys"),n=l([].push);h.exports=function(u,c){var d,b=o(u),g=0,p=[];for(d in b)!s(t,d)&&s(b,d)&&n(p,d);for(;c.length>g;)s(b,d=c[g++])&&(~r(p,d)||n(p,d));return p}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,h,f){var l=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");h.exports=Object.keys||function(o){return l(o,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,h,f){var l={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!l.call({1:2},1);f.f=o?function(r){var t=s(this,r);return!!t&&t.enumerable}:l},{}],318:[function(e,h,f){var l=e("../internals/function-uncurry-this-accessor"),s=e("../internals/an-object"),o=e("../internals/a-possible-prototype");h.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var r,t=!1,n={};try{(r=l(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch{}return function(u,c){return s(u),o(c),t?r(u,c):u.__proto__=c,u}})():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/fails"),o=e("../internals/function-uncurry-this"),r=e("../internals/object-get-prototype-of"),t=e("../internals/object-keys"),n=e("../internals/to-indexed-object"),u=o(e("../internals/object-property-is-enumerable").f),c=o([].push),d=l&&s((function(){var g=Object.create(null);return g[2]=2,!u(g,2)})),b=function(g){return function(p){for(var x,y=n(p),v=t(y),S=d&&r(y)===null,N=v.length,R=0,B=[];N>R;)x=v[R++],l&&!(S?x in y:u(y,x))||c(B,g?[x,y[x]]:y[x]);return B}};h.exports={entries:b(!0),values:b(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,h,f){var l=e("../internals/function-call"),s=e("../internals/is-callable"),o=e("../internals/is-object"),r=TypeError;h.exports=function(t,n){var u,c;if(n==="string"&&s(u=t.toString)&&!o(c=l(u,t))||s(u=t.valueOf)&&!o(c=l(u,t))||n!=="string"&&s(u=t.toString)&&!o(c=l(u,t)))return c;throw new r("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,h,f){var l=e("../internals/get-built-in"),s=e("../internals/function-uncurry-this"),o=e("../internals/object-get-own-property-names"),r=e("../internals/object-get-own-property-symbols"),t=e("../internals/an-object"),n=s([].concat);h.exports=l("Reflect","ownKeys")||function(u){var c=o.f(t(u)),d=r.f;return d?n(c,d(u)):c}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,h,f){var l=e("../internals/global");h.exports=l},{"../internals/global":274}],323:[function(e,h,f){h.exports=function(l){try{return{error:!1,value:l()}}catch(s){return{error:!0,value:s}}}},{}],324:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/promise-native-constructor"),o=e("../internals/is-callable"),r=e("../internals/is-forced"),t=e("../internals/inspect-source"),n=e("../internals/well-known-symbol"),u=e("../internals/engine-is-browser"),c=e("../internals/engine-is-deno"),d=e("../internals/is-pure"),b=e("../internals/engine-v8-version"),g=s&&s.prototype,p=n("species"),x=!1,y=o(l.PromiseRejectionEvent),v=r("Promise",(function(){var S=t(s),N=S!==String(s);if(!N&&b===66||d&&(!g.catch||!g.finally))return!0;if(!b||b<51||!/native code/.test(S)){var R=new s((function(M){M(1)})),B=function(M){M((function(){}),(function(){}))};if((R.constructor={})[p]=B,!(x=R.then((function(){}))instanceof B))return!0}return!N&&(u||c)&&!y}));h.exports={CONSTRUCTOR:v,REJECTION_EVENT:y,SUBCLASSING:x}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,h,f){var l=e("../internals/global");h.exports=l.Promise},{"../internals/global":274}],326:[function(e,h,f){var l=e("../internals/an-object"),s=e("../internals/is-object"),o=e("../internals/new-promise-capability");h.exports=function(r,t){if(l(r),s(t)&&t.constructor===r)return t;var n=o.f(r);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,h,f){var l=e("../internals/promise-native-constructor"),s=e("../internals/check-correctness-of-iteration"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR;h.exports=o||!s((function(r){l.all(r).then(void 0,(function(){}))}))},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,h,f){var l=function(){this.head=null,this.tail=null};l.prototype={add:function(s){var o={item:s,next:null},r=this.tail;r?r.next=o:this.head=o,this.tail=o},get:function(){var s=this.head;if(s)return(this.head=s.next)===null&&(this.tail=null),s.item}},h.exports=l},{}],329:[function(e,h,f){var l=e("../internals/is-null-or-undefined"),s=TypeError;h.exports=function(o){if(l(o))throw new s("Can't call method on "+o);return o}},{"../internals/is-null-or-undefined":288}],330:[function(e,h,f){var l=e("../internals/get-built-in"),s=e("../internals/define-built-in-accessor"),o=e("../internals/well-known-symbol"),r=e("../internals/descriptors"),t=o("species");h.exports=function(n){var u=l(n);r&&u&&!u[t]&&s(u,t,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,h,f){var l=e("../internals/object-define-property").f,s=e("../internals/has-own-property"),o=e("../internals/well-known-symbol")("toStringTag");h.exports=function(r,t,n){r&&!n&&(r=r.prototype),r&&!s(r,o)&&l(r,o,{configurable:!0,value:t})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,h,f){var l=e("../internals/shared"),s=e("../internals/uid"),o=l("keys");h.exports=function(r){return o[r]||(o[r]=s(r))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/define-global-property"),o=l["__core-js_shared__"]||s("__core-js_shared__",{});h.exports=o},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,h,f){var l=e("../internals/is-pure"),s=e("../internals/shared-store");(h.exports=function(o,r){return s[o]||(s[o]=r!==void 0?r:{})})("versions",[]).push({version:"3.33.0",mode:l?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,h,f){var l=e("../internals/an-object"),s=e("../internals/a-constructor"),o=e("../internals/is-null-or-undefined"),r=e("../internals/well-known-symbol")("species");h.exports=function(t,n){var u,c=l(t).constructor;return c===void 0||o(u=l(c)[r])?n:s(u)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,h,f){var l=e("../internals/engine-v8-version"),s=e("../internals/fails"),o=e("../internals/global").String;h.exports=!!Object.getOwnPropertySymbols&&!s((function(){var r=Symbol("symbol detection");return!o(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&l&&l<41}))},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,h,f){var l=e("../internals/function-call"),s=e("../internals/get-built-in"),o=e("../internals/well-known-symbol"),r=e("../internals/define-built-in");h.exports=function(){var t=s("Symbol"),n=t&&t.prototype,u=n&&n.valueOf,c=o("toPrimitive");n&&!n[c]&&r(n,c,(function(d){return l(u,this)}),{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,h,f){var l=e("../internals/symbol-constructor-detection");h.exports=l&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,h,f){var l,s,o,r,t=e("../internals/global"),n=e("../internals/function-apply"),u=e("../internals/function-bind-context"),c=e("../internals/is-callable"),d=e("../internals/has-own-property"),b=e("../internals/fails"),g=e("../internals/html"),p=e("../internals/array-slice"),x=e("../internals/document-create-element"),y=e("../internals/validate-arguments-length"),v=e("../internals/engine-is-ios"),S=e("../internals/engine-is-node"),N=t.setImmediate,R=t.clearImmediate,B=t.process,M=t.Dispatch,F=t.Function,q=t.MessageChannel,V=t.String,O=0,T={};b((function(){l=t.location}));var A=function(j){if(d(T,j)){var k=T[j];delete T[j],k()}},C=function(j){return function(){A(j)}},w=function(j){A(j.data)},_=function(j){t.postMessage(V(j),l.protocol+"//"+l.host)};N&&R||(N=function(j){y(arguments.length,1);var k=c(j)?j:F(j),E=p(arguments,1);return T[++O]=function(){n(k,void 0,E)},s(O),O},R=function(j){delete T[j]},S?s=function(j){B.nextTick(C(j))}:M&&M.now?s=function(j){M.now(C(j))}:q&&!v?(r=(o=new q).port2,o.port1.onmessage=w,s=u(r.postMessage,r)):t.addEventListener&&c(t.postMessage)&&!t.importScripts&&l&&l.protocol!=="file:"&&!b(_)?(s=_,t.addEventListener("message",w,!1)):s="onreadystatechange"in x("script")?function(j){g.appendChild(x("script")).onreadystatechange=function(){g.removeChild(this),A(j)}}:function(j){setTimeout(C(j),0)}),h.exports={set:N,clear:R}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,h,f){var l=e("../internals/to-integer-or-infinity"),s=Math.max,o=Math.min;h.exports=function(r,t){var n=l(r);return n<0?s(n+t,0):o(n,t)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,h,f){var l=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");h.exports=function(o){return l(s(o))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,h,f){var l=e("../internals/math-trunc");h.exports=function(s){var o=+s;return o!=o||o===0?0:l(o)}},{"../internals/math-trunc":301}],343:[function(e,h,f){var l=e("../internals/to-integer-or-infinity"),s=Math.min;h.exports=function(o){return o>0?s(l(o),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,h,f){var l=e("../internals/require-object-coercible"),s=Object;h.exports=function(o){return s(l(o))}},{"../internals/require-object-coercible":329}],345:[function(e,h,f){var l=e("../internals/function-call"),s=e("../internals/is-object"),o=e("../internals/is-symbol"),r=e("../internals/get-method"),t=e("../internals/ordinary-to-primitive"),n=e("../internals/well-known-symbol"),u=TypeError,c=n("toPrimitive");h.exports=function(d,b){if(!s(d)||o(d))return d;var g,p=r(d,c);if(p){if(b===void 0&&(b="default"),g=l(p,d,b),!s(g)||o(g))return g;throw new u("Can't convert object to primitive value")}return b===void 0&&(b="number"),t(d,b)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,h,f){var l=e("../internals/to-primitive"),s=e("../internals/is-symbol");h.exports=function(o){var r=l(o,"string");return s(r)?r:r+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,h,f){var l={};l[e("../internals/well-known-symbol")("toStringTag")]="z",h.exports=String(l)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(e,h,f){var l=e("../internals/classof"),s=String;h.exports=function(o){if(l(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return s(o)}},{"../internals/classof":236}],349:[function(e,h,f){var l=String;h.exports=function(s){try{return l(s)}catch{return"Object"}}},{}],350:[function(e,h,f){var l=e("../internals/function-uncurry-this"),s=0,o=Math.random(),r=l(1 .toString);h.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+r(++s+o,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,h,f){var l=e("../internals/symbol-constructor-detection");h.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(e,h,f){var l=e("../internals/descriptors"),s=e("../internals/fails");h.exports=l&&s((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,h,f){var l=TypeError;h.exports=function(s,o){if(s<o)throw new l("Not enough arguments");return s}},{}],354:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/is-callable"),o=l.WeakMap;h.exports=s(o)&&/native code/.test(String(o))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,h,f){var l=e("../internals/path"),s=e("../internals/has-own-property"),o=e("../internals/well-known-symbol-wrapped"),r=e("../internals/object-define-property").f;h.exports=function(t){var n=l.Symbol||(l.Symbol={});s(n,t)||r(n,t,{value:o.f(t)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,h,f){var l=e("../internals/well-known-symbol");f.f=l},{"../internals/well-known-symbol":357}],357:[function(e,h,f){var l=e("../internals/global"),s=e("../internals/shared"),o=e("../internals/has-own-property"),r=e("../internals/uid"),t=e("../internals/symbol-constructor-detection"),n=e("../internals/use-symbol-as-uid"),u=l.Symbol,c=s("wks"),d=n?u.for||u:u&&u.withoutSetter||r;h.exports=function(b){return o(c,b)||(c[b]=t&&o(u,b)?u[b]:d("Symbol."+b)),c[b]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/array-iteration").findIndex,o=e("../internals/add-to-unscopables"),r=!0;"findIndex"in[]&&Array(1).findIndex((function(){r=!1})),l({target:"Array",proto:!0,forced:r},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/array-iteration").find,o=e("../internals/add-to-unscopables"),r=!0;"find"in[]&&Array(1).find((function(){r=!1})),l({target:"Array",proto:!0,forced:r},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/array-includes").includes,o=e("../internals/fails"),r=e("../internals/add-to-unscopables");l({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,h,f){var l=e("../internals/to-indexed-object"),s=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),r=e("../internals/internal-state"),t=e("../internals/object-define-property").f,n=e("../internals/iterator-define"),u=e("../internals/create-iter-result-object"),c=e("../internals/is-pure"),d=e("../internals/descriptors"),b=r.set,g=r.getterFor("Array Iterator");h.exports=n(Array,"Array",(function(x,y){b(this,{type:"Array Iterator",target:l(x),index:0,kind:y})}),(function(){var x=g(this),y=x.target,v=x.kind,S=x.index++;if(!y||S>=y.length)return x.target=void 0,u(void 0,!0);switch(v){case"keys":return u(S,!1);case"values":return u(y[S],!1)}return u([S,y[S]],!1)}),"values");var p=o.Arguments=o.Array;if(s("keys"),s("values"),s("entries"),!c&&d&&p.name!=="values")try{t(p,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/function-apply"),r=e("../internals/function-call"),t=e("../internals/function-uncurry-this"),n=e("../internals/fails"),u=e("../internals/is-callable"),c=e("../internals/is-symbol"),d=e("../internals/array-slice"),b=e("../internals/get-json-replacer-function"),g=e("../internals/symbol-constructor-detection"),p=String,x=s("JSON","stringify"),y=t(/./.exec),v=t("".charAt),S=t("".charCodeAt),N=t("".replace),R=t(1 .toString),B=/[\uD800-\uDFFF]/g,M=/^[\uD800-\uDBFF]$/,F=/^[\uDC00-\uDFFF]$/,q=!g||n((function(){var A=s("Symbol")("stringify detection");return x([A])!=="[null]"||x({a:A})!=="{}"||x(Object(A))!=="{}"})),V=n((function(){return x("\uDF06\uD834")!=='"\\udf06\\ud834"'||x("\uDEAD")!=='"\\udead"'})),O=function(A,C){var w=d(arguments),_=b(C);if(u(_)||A!==void 0&&!c(A))return w[1]=function(j,k){if(u(_)&&(k=r(_,this,p(j),k)),!c(k))return k},o(x,null,w)},T=function(A,C,w){var _=v(w,C-1),j=v(w,C+1);return y(M,A)&&!y(F,j)||y(F,A)&&!y(M,_)?"\\u"+R(S(A,0),16):A};x&&l({target:"JSON",stat:!0,arity:3,forced:q||V},{stringify:function(A,C,w){var _=d(arguments),j=o(q?O:x,null,_);return V&&typeof j=="string"?N(j,B,T):j}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,h,f){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(l){return l!=l}})},{"../internals/export":259}],364:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/object-assign");l({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/symbol-constructor-detection"),o=e("../internals/fails"),r=e("../internals/object-get-own-property-symbols"),t=e("../internals/to-object");l({target:"Object",stat:!0,forced:!s||o((function(){r.f(1)}))},{getOwnPropertySymbols:function(n){var u=r.f;return u?u(t(n)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/to-object"),o=e("../internals/object-keys");l({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(r){return o(s(r))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/object-to-array").values;l({target:"Object",stat:!0},{values:function(o){return s(o)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/a-callable"),r=e("../internals/new-promise-capability"),t=e("../internals/perform"),n=e("../internals/iterate");l({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(u){var c=this,d=r.f(c),b=d.resolve,g=d.reject,p=t((function(){var x=o(c.resolve),y=[],v=0,S=1;n(u,(function(N){var R=v++,B=!1;S++,s(x,c,N).then((function(M){B||(B=!0,y[R]=M,--S||b(y))}),g)})),--S||b(y)}));return p.error&&g(p.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/is-pure"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR,r=e("../internals/promise-native-constructor"),t=e("../internals/get-built-in"),n=e("../internals/is-callable"),u=e("../internals/define-built-in"),c=r&&r.prototype;if(l({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(b){return this.then(void 0,b)}}),!s&&n(r)){var d=t("Promise").prototype.catch;c.catch!==d&&u(c,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,h,f){var l,s,o,r=e("../internals/export"),t=e("../internals/is-pure"),n=e("../internals/engine-is-node"),u=e("../internals/global"),c=e("../internals/function-call"),d=e("../internals/define-built-in"),b=e("../internals/object-set-prototype-of"),g=e("../internals/set-to-string-tag"),p=e("../internals/set-species"),x=e("../internals/a-callable"),y=e("../internals/is-callable"),v=e("../internals/is-object"),S=e("../internals/an-instance"),N=e("../internals/species-constructor"),R=e("../internals/task").set,B=e("../internals/microtask"),M=e("../internals/host-report-errors"),F=e("../internals/perform"),q=e("../internals/queue"),V=e("../internals/internal-state"),O=e("../internals/promise-native-constructor"),T=e("../internals/promise-constructor-detection"),A=e("../internals/new-promise-capability"),C=T.CONSTRUCTOR,w=T.REJECTION_EVENT,_=T.SUBCLASSING,j=V.getterFor("Promise"),k=V.set,E=O&&O.prototype,I=O,D=E,X=u.TypeError,G=u.document,K=u.process,U=A.f,J=U,$=!!(G&&G.createEvent&&u.dispatchEvent),L=function(te){var ie;return!(!v(te)||!y(ie=te.then))&&ie},W=function(te,ie){var le,ee,oe,de=ie.value,fe=ie.state===1,be=fe?te.ok:te.fail,he=te.resolve,pe=te.reject,ke=te.domain;try{be?(fe||(ie.rejection===2&&ce(ie),ie.rejection=1),be===!0?le=de:(ke&&ke.enter(),le=be(de),ke&&(ke.exit(),oe=!0)),le===te.promise?pe(new X("Promise-chain cycle")):(ee=L(le))?c(ee,le,he,pe):he(le)):pe(de)}catch(Ce){ke&&!oe&&ke.exit(),pe(Ce)}},re=function(te,ie){te.notified||(te.notified=!0,B((function(){for(var le,ee=te.reactions;le=ee.get();)W(le,te);te.notified=!1,ie&&!te.rejection&&se(te)})))},ne=function(te,ie,le){var ee,oe;$?((ee=G.createEvent("Event")).promise=ie,ee.reason=le,ee.initEvent(te,!1,!0),u.dispatchEvent(ee)):ee={promise:ie,reason:le},!w&&(oe=u["on"+te])?oe(ee):te==="unhandledrejection"&&M("Unhandled promise rejection",le)},se=function(te){c(R,u,(function(){var ie,le=te.facade,ee=te.value;if(H(te)&&(ie=F((function(){n?K.emit("unhandledRejection",ee,le):ne("unhandledrejection",le,ee)})),te.rejection=n||H(te)?2:1,ie.error))throw ie.value}))},H=function(te){return te.rejection!==1&&!te.parent},ce=function(te){c(R,u,(function(){var ie=te.facade;n?K.emit("rejectionHandled",ie):ne("rejectionhandled",ie,te.value)}))},ae=function(te,ie,le){return function(ee){te(ie,ee,le)}},Y=function(te,ie,le){te.done||(te.done=!0,le&&(te=le),te.value=ie,te.state=2,re(te,!0))},Q=function(te,ie,le){if(!te.done){te.done=!0,le&&(te=le);try{if(te.facade===ie)throw new X("Promise can't be resolved itself");var ee=L(ie);ee?B((function(){var oe={done:!1};try{c(ee,ie,ae(Q,oe,te),ae(Y,oe,te))}catch(de){Y(oe,de,te)}})):(te.value=ie,te.state=1,re(te,!1))}catch(oe){Y({done:!1},oe,te)}}};if(C&&(D=(I=function(te){S(this,D),x(te),c(l,this);var ie=j(this);try{te(ae(Q,ie),ae(Y,ie))}catch(le){Y(ie,le)}}).prototype,(l=function(te){k(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new q,rejection:!1,state:0,value:void 0})}).prototype=d(D,"then",(function(te,ie){var le=j(this),ee=U(N(this,I));return le.parent=!0,ee.ok=!y(te)||te,ee.fail=y(ie)&&ie,ee.domain=n?K.domain:void 0,le.state===0?le.reactions.add(ee):B((function(){W(ee,le)})),ee.promise})),s=function(){var te=new l,ie=j(te);this.promise=te,this.resolve=ae(Q,ie),this.reject=ae(Y,ie)},A.f=U=function(te){return te===I||te===void 0?new s(te):J(te)},!t&&y(O)&&E!==Object.prototype)){o=E.then,_||d(E,"then",(function(te,ie){var le=this;return new I((function(ee,oe){c(o,le,ee,oe)})).then(te,ie)}),{unsafe:!0});try{delete E.constructor}catch{}b&&b(E,D)}r({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:I}),g(I,"Promise",!1,!0),p("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/is-pure"),o=e("../internals/promise-native-constructor"),r=e("../internals/fails"),t=e("../internals/get-built-in"),n=e("../internals/is-callable"),u=e("../internals/species-constructor"),c=e("../internals/promise-resolve"),d=e("../internals/define-built-in"),b=o&&o.prototype;if(l({target:"Promise",proto:!0,real:!0,forced:!!o&&r((function(){b.finally.call({then:function(){}},(function(){}))}))},{finally:function(p){var x=u(this,t("Promise")),y=n(p);return this.then(y?function(v){return c(x,p()).then((function(){return v}))}:p,y?function(v){return c(x,p()).then((function(){throw v}))}:p)}}),!s&&n(o)){var g=t("Promise").prototype.finally;b.finally!==g&&d(b,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,h,f){e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/a-callable"),r=e("../internals/new-promise-capability"),t=e("../internals/perform"),n=e("../internals/iterate");l({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(u){var c=this,d=r.f(c),b=d.reject,g=t((function(){var p=o(c.resolve);n(u,(function(x){s(p,c,x).then(d.resolve,b)}))}));return g.error&&b(g.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-call"),o=e("../internals/new-promise-capability");l({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(r){var t=o.f(this);return s(t.reject,void 0,r),t.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/is-pure"),r=e("../internals/promise-native-constructor"),t=e("../internals/promise-constructor-detection").CONSTRUCTOR,n=e("../internals/promise-resolve"),u=s("Promise"),c=o&&!t;l({target:"Promise",stat:!0,forced:o||t},{resolve:function(d){return n(c&&this===u?r:this,d)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-uncurry-this"),o=e("../internals/to-absolute-index"),r=RangeError,t=String.fromCharCode,n=String.fromCodePoint,u=s([].join);l({target:"String",stat:!0,arity:1,forced:!!n&&n.length!==1},{fromCodePoint:function(c){for(var d,b=[],g=arguments.length,p=0;g>p;){if(d=+arguments[p++],o(d,1114111)!==d)throw new r(d+" is not a valid code point");b[p]=d<65536?t(d):t(55296+((d-=65536)>>10),d%1024+56320)}return u(b,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/function-uncurry-this"),o=e("../internals/not-a-regexp"),r=e("../internals/require-object-coercible"),t=e("../internals/to-string"),n=e("../internals/correct-is-regexp-logic"),u=s("".indexOf);l({target:"String",proto:!0,forced:!n("includes")},{includes:function(c){return!!~u(t(r(this)),t(o(c)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,h,f){e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/global"),o=e("../internals/function-call"),r=e("../internals/function-uncurry-this"),t=e("../internals/is-pure"),n=e("../internals/descriptors"),u=e("../internals/symbol-constructor-detection"),c=e("../internals/fails"),d=e("../internals/has-own-property"),b=e("../internals/object-is-prototype-of"),g=e("../internals/an-object"),p=e("../internals/to-indexed-object"),x=e("../internals/to-property-key"),y=e("../internals/to-string"),v=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),N=e("../internals/object-keys"),R=e("../internals/object-get-own-property-names"),B=e("../internals/object-get-own-property-names-external"),M=e("../internals/object-get-own-property-symbols"),F=e("../internals/object-get-own-property-descriptor"),q=e("../internals/object-define-property"),V=e("../internals/object-define-properties"),O=e("../internals/object-property-is-enumerable"),T=e("../internals/define-built-in"),A=e("../internals/define-built-in-accessor"),C=e("../internals/shared"),w=e("../internals/shared-key"),_=e("../internals/hidden-keys"),j=e("../internals/uid"),k=e("../internals/well-known-symbol"),E=e("../internals/well-known-symbol-wrapped"),I=e("../internals/well-known-symbol-define"),D=e("../internals/symbol-define-to-primitive"),X=e("../internals/set-to-string-tag"),G=e("../internals/internal-state"),K=e("../internals/array-iteration").forEach,U=w("hidden"),J=G.set,$=G.getterFor("Symbol"),L=Object.prototype,W=s.Symbol,re=W&&W.prototype,ne=s.RangeError,se=s.TypeError,H=s.QObject,ce=F.f,ae=q.f,Y=B.f,Q=O.f,te=r([].push),ie=C("symbols"),le=C("op-symbols"),ee=C("wks"),oe=!H||!H.prototype||!H.prototype.findChild,de=function(Te,ye,Ae){var Fe=ce(L,ye);Fe&&delete L[ye],ae(Te,ye,Ae),Fe&&Te!==L&&ae(L,ye,Fe)},fe=n&&c((function(){return S(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a!==7}))?de:ae,be=function(Te,ye){var Ae=ie[Te]=S(re);return J(Ae,{type:"Symbol",tag:Te,description:ye}),n||(Ae.description=ye),Ae},he=function(Te,ye,Ae){Te===L&&he(le,ye,Ae),g(Te);var Fe=x(ye);return g(Ae),d(ie,Fe)?(Ae.enumerable?(d(Te,U)&&Te[U][Fe]&&(Te[U][Fe]=!1),Ae=S(Ae,{enumerable:v(0,!1)})):(d(Te,U)||ae(Te,U,v(1,{})),Te[U][Fe]=!0),fe(Te,Fe,Ae)):ae(Te,Fe,Ae)},pe=function(Te,ye){g(Te);var Ae=p(ye),Fe=N(Ae).concat(Oe(Ae));return K(Fe,(function(Re){n&&!o(ke,Ae,Re)||he(Te,Re,Ae[Re])})),Te},ke=function(Te){var ye=x(Te),Ae=o(Q,this,ye);return!(this===L&&d(ie,ye)&&!d(le,ye))&&(!(Ae||!d(this,ye)||!d(ie,ye)||d(this,U)&&this[U][ye])||Ae)},Ce=function(Te,ye){var Ae=p(Te),Fe=x(ye);if(Ae!==L||!d(ie,Fe)||d(le,Fe)){var Re=ce(Ae,Fe);return!Re||!d(ie,Fe)||d(Ae,U)&&Ae[U][Fe]||(Re.enumerable=!0),Re}},Ee=function(Te){var ye=Y(p(Te)),Ae=[];return K(ye,(function(Fe){d(ie,Fe)||d(_,Fe)||te(Ae,Fe)})),Ae},Oe=function(Te){var ye=Te===L,Ae=Y(ye?le:p(Te)),Fe=[];return K(Ae,(function(Re){!d(ie,Re)||ye&&!d(L,Re)||te(Fe,ie[Re])})),Fe};u||(T(re=(W=function(){if(b(re,this))throw new se("Symbol is not a constructor");var Te=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,ye=j(Te),Ae=function(Fe){this===L&&o(Ae,le,Fe),d(this,U)&&d(this[U],ye)&&(this[U][ye]=!1);var Re=v(1,Fe);try{fe(this,ye,Re)}catch(ge){if(!(ge instanceof ne))throw ge;de(this,ye,Re)}};return n&&oe&&fe(L,ye,{configurable:!0,set:Ae}),be(ye,Te)}).prototype,"toString",(function(){return $(this).tag})),T(W,"withoutSetter",(function(Te){return be(j(Te),Te)})),O.f=ke,q.f=he,V.f=pe,F.f=Ce,R.f=B.f=Ee,M.f=Oe,E.f=function(Te){return be(k(Te),Te)},n&&(A(re,"description",{configurable:!0,get:function(){return $(this).description}}),t||T(L,"propertyIsEnumerable",ke,{unsafe:!0}))),l({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),K(N(ee),(function(Te){I(Te)})),l({target:"Symbol",stat:!0,forced:!u},{useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),l({target:"Object",stat:!0,forced:!u,sham:!n},{create:function(Te,ye){return ye===void 0?S(Te):pe(S(Te),ye)},defineProperty:he,defineProperties:pe,getOwnPropertyDescriptor:Ce}),l({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Ee}),D(),X(W,"Symbol"),_[U]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/get-built-in"),o=e("../internals/has-own-property"),r=e("../internals/to-string"),t=e("../internals/shared"),n=e("../internals/symbol-registry-detection"),u=t("string-to-symbol-registry"),c=t("symbol-to-string-registry");l({target:"Symbol",stat:!0,forced:!n},{for:function(d){var b=r(d);if(o(u,b))return u[b];var g=s("Symbol")(b);return u[b]=g,c[g]=b,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,h,f){e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,h,f){var l=e("../internals/export"),s=e("../internals/has-own-property"),o=e("../internals/is-symbol"),r=e("../internals/try-to-string"),t=e("../internals/shared"),n=e("../internals/symbol-registry-detection"),u=t("symbol-to-string-registry");l({target:"Symbol",stat:!0,forced:!n},{keyFor:function(c){if(!o(c))throw new TypeError(r(c)+" is not a symbol");if(s(u,c))return u[c]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,h,f){function l(s){return Object.prototype.toString.call(s)}f.isArray=function(s){return Array.isArray?Array.isArray(s):l(s)==="[object Array]"},f.isBoolean=function(s){return typeof s=="boolean"},f.isNull=function(s){return s===null},f.isNullOrUndefined=function(s){return s==null},f.isNumber=function(s){return typeof s=="number"},f.isString=function(s){return typeof s=="string"},f.isSymbol=function(s){return typeof s=="symbol"},f.isUndefined=function(s){return s===void 0},f.isRegExp=function(s){return l(s)==="[object RegExp]"},f.isObject=function(s){return typeof s=="object"&&s!==null},f.isDate=function(s){return l(s)==="[object Date]"},f.isError=function(s){return l(s)==="[object Error]"||s instanceof Error},f.isFunction=function(s){return typeof s=="function"},f.isPrimitive=function(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||s===void 0},f.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,h,f){(function(l){(function(){var s=e("elliptic"),o=e("bn.js");h.exports=function(u){return new t(u)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function t(u){this.curveType=r[u],this.curveType||(this.curveType={name:u}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function n(u,c,d){Array.isArray(u)||(u=u.toArray());var b=new l(u);if(d&&b.length<d){var g=new l(d-b.length);g.fill(0),b=l.concat([g,b])}return c?b.toString(c):b}r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,t.prototype.generateKeys=function(u,c){return this.keys=this.curve.genKeyPair(),this.getPublicKey(u,c)},t.prototype.computeSecret=function(u,c,d){return c=c||"utf8",l.isBuffer(u)||(u=new l(u,c)),n(this.curve.keyFromPublic(u).getPublic().mul(this.keys.getPrivate()).getX(),d,this.curveType.byteLength)},t.prototype.getPublicKey=function(u,c){var d=this.keys.getPublic(c==="compressed",!0);return c==="hybrid"&&(d[d.length-1]%2?d[0]=7:d[0]=6),n(d,u)},t.prototype.getPrivateKey=function(u){return n(this.keys.getPrivate(),u)},t.prototype.setPublicKey=function(u,c){return c=c||"utf8",l.isBuffer(u)||(u=new l(u,c)),this.keys._importPublic(u),this},t.prototype.setPrivateKey=function(u,c){c=c||"utf8",l.isBuffer(u)||(u=new l(u,c));var d=new o(u);return d=d.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(d),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,h,f){arguments[4][184][0].apply(f,arguments)},{buffer:188,dup:184}],386:[function(e,h,f){var l=e("inherits"),s=e("md5.js"),o=e("ripemd160"),r=e("sha.js"),t=e("cipher-base");function n(u){t.call(this,"digest"),this._hash=u}l(n,t),n.prototype._update=function(u){this._hash.update(u)},n.prototype._final=function(){return this._hash.digest()},h.exports=function(u){return(u=u.toLowerCase())==="md5"?new s:u==="rmd160"||u==="ripemd160"?new o:new n(r(u))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,h,f){var l=e("md5.js");h.exports=function(s){return new l().update(s).digest()}},{"md5.js":450}],388:[function(e,h,f){var l=e("inherits"),s=e("./legacy"),o=e("cipher-base"),r=e("safe-buffer").Buffer,t=e("create-hash/md5"),n=e("ripemd160"),u=e("sha.js"),c=r.alloc(128);function d(b,g){o.call(this,"digest"),typeof g=="string"&&(g=r.from(g));var p=b==="sha512"||b==="sha384"?128:64;this._alg=b,this._key=g,g.length>p?g=(b==="rmd160"?new n:u(b)).update(g).digest():g.length<p&&(g=r.concat([g,c],p));for(var x=this._ipad=r.allocUnsafe(p),y=this._opad=r.allocUnsafe(p),v=0;v<p;v++)x[v]=54^g[v],y[v]=92^g[v];this._hash=b==="rmd160"?new n:u(b),this._hash.update(x)}l(d,o),d.prototype._update=function(b){this._hash.update(b)},d.prototype._final=function(){var b=this._hash.digest();return(this._alg==="rmd160"?new n:u(this._alg)).update(this._opad).update(b).digest()},h.exports=function(b,g){return(b=b.toLowerCase())==="rmd160"||b==="ripemd160"?new d("rmd160",g):b==="md5"?new s(t,g):new d(b,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,h,f){var l=e("inherits"),s=e("safe-buffer").Buffer,o=e("cipher-base"),r=s.alloc(128);function t(n,u){o.call(this,"digest"),typeof u=="string"&&(u=s.from(u)),this._alg=n,this._key=u,u.length>64?u=n(u):u.length<64&&(u=s.concat([u,r],64));for(var c=this._ipad=s.allocUnsafe(64),d=this._opad=s.allocUnsafe(64),b=0;b<64;b++)c[b]=54^u[b],d[b]=92^u[b];this._hash=[c]}l(t,o),t.prototype._update=function(n){this._hash.push(n)},t.prototype._final=function(){var n=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,n]))},h.exports=t},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,h,f){f.randomBytes=f.rng=f.pseudoRandomBytes=f.prng=e("randombytes"),f.createHash=f.Hash=e("create-hash"),f.createHmac=f.Hmac=e("create-hmac");var l=e("browserify-sign/algos"),s=Object.keys(l),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);f.getHashes=function(){return o};var r=e("pbkdf2");f.pbkdf2=r.pbkdf2,f.pbkdf2Sync=r.pbkdf2Sync;var t=e("browserify-cipher");f.Cipher=t.Cipher,f.createCipher=t.createCipher,f.Cipheriv=t.Cipheriv,f.createCipheriv=t.createCipheriv,f.Decipher=t.Decipher,f.createDecipher=t.createDecipher,f.Decipheriv=t.Decipheriv,f.createDecipheriv=t.createDecipheriv,f.getCiphers=t.getCiphers,f.listCiphers=t.listCiphers;var n=e("diffie-hellman");f.DiffieHellmanGroup=n.DiffieHellmanGroup,f.createDiffieHellmanGroup=n.createDiffieHellmanGroup,f.getDiffieHellman=n.getDiffieHellman,f.createDiffieHellman=n.createDiffieHellman,f.DiffieHellman=n.DiffieHellman;var u=e("browserify-sign");f.createSign=u.createSign,f.Sign=u.Sign,f.createVerify=u.createVerify,f.Verify=u.Verify,f.createECDH=e("create-ecdh");var c=e("public-encrypt");f.publicEncrypt=c.publicEncrypt,f.privateEncrypt=c.privateEncrypt,f.publicDecrypt=c.publicDecrypt,f.privateDecrypt=c.privateDecrypt;var d=e("randomfill");f.randomFill=d.randomFill,f.randomFillSync=d.randomFillSync,f.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},f.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,h,f){(function(l,s){typeof f=="object"&&h!==void 0?h.exports=s():(l=typeof globalThis<"u"?globalThis:l||self).dayjs=s()})(void 0,(function(){var l=6e4,s=36e5,o="millisecond",r="second",t="minute",n="hour",u="day",c="week",d="month",b="quarter",g="year",p="date",x="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var _=["th","st","nd","rd"],j=w%100;return"["+w+(_[(j-20)%10]||_[j]||_[0])+"]"}},N=function(w,_,j){var k=String(w);return!k||k.length>=_?w:""+Array(_+1-k.length).join(j)+w},R={s:N,z:function(w){var _=-w.utcOffset(),j=Math.abs(_),k=Math.floor(j/60),E=j%60;return(_<=0?"+":"-")+N(k,2,"0")+":"+N(E,2,"0")},m:function w(_,j){if(_.date()<j.date())return-w(j,_);var k=12*(j.year()-_.year())+(j.month()-_.month()),E=_.clone().add(k,d),I=j-E<0,D=_.clone().add(k+(I?-1:1),d);return+(-(k+(j-E)/(I?E-D:D-E))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:g,w:c,d:u,D:p,h:n,m:t,s:r,ms:o,Q:b}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},B="en",M={};M[B]=S;var F="$isDayjsObject",q=function(w){return w instanceof A||!(!w||!w[F])},V=function w(_,j,k){var E;if(!_)return B;if(typeof _=="string"){var I=_.toLowerCase();M[I]&&(E=I),j&&(M[I]=j,E=I);var D=_.split("-");if(!E&&D.length>1)return w(D[0])}else{var X=_.name;M[X]=_,E=X}return!k&&E&&(B=E),E||!k&&B},O=function(w,_){if(q(w))return w.clone();var j=typeof _=="object"?_:{};return j.date=w,j.args=arguments,new A(j)},T=R;T.l=V,T.i=q,T.w=function(w,_){return O(w,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var A=(function(){function w(j){this.$L=V(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[F]=!0}var _=w.prototype;return _.parse=function(j){this.$d=(function(k){var E=k.date,I=k.utc;if(E===null)return new Date(NaN);if(T.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var D=E.match(y);if(D){var X=D[2]-1||0,G=(D[7]||"0").substring(0,3);return I?new Date(Date.UTC(D[1],X,D[3]||1,D[4]||0,D[5]||0,D[6]||0,G)):new Date(D[1],X,D[3]||1,D[4]||0,D[5]||0,D[6]||0,G)}}return new Date(E)})(j),this.init()},_.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},_.$utils=function(){return T},_.isValid=function(){return this.$d.toString()!==x},_.isSame=function(j,k){var E=O(j);return this.startOf(k)<=E&&E<=this.endOf(k)},_.isAfter=function(j,k){return O(j)<this.startOf(k)},_.isBefore=function(j,k){return this.endOf(k)<O(j)},_.$g=function(j,k,E){return T.u(j)?this[k]:this.set(E,j)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(j,k){var E=this,I=!!T.u(k)||k,D=T.p(j),X=function(re,ne){var se=T.w(E.$u?Date.UTC(E.$y,ne,re):new Date(E.$y,ne,re),E);return I?se:se.endOf(u)},G=function(re,ne){return T.w(E.toDate()[re].apply(E.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(ne)),E)},K=this.$W,U=this.$M,J=this.$D,$="set"+(this.$u?"UTC":"");switch(D){case g:return I?X(1,0):X(31,11);case d:return I?X(1,U):X(0,U+1);case c:var L=this.$locale().weekStart||0,W=(K<L?K+7:K)-L;return X(I?J-W:J+(6-W),U);case u:case p:return G($+"Hours",0);case n:return G($+"Minutes",1);case t:return G($+"Seconds",2);case r:return G($+"Milliseconds",3);default:return this.clone()}},_.endOf=function(j){return this.startOf(j,!1)},_.$set=function(j,k){var E,I=T.p(j),D="set"+(this.$u?"UTC":""),X=(E={},E[u]=D+"Date",E[p]=D+"Date",E[d]=D+"Month",E[g]=D+"FullYear",E[n]=D+"Hours",E[t]=D+"Minutes",E[r]=D+"Seconds",E[o]=D+"Milliseconds",E)[I],G=I===u?this.$D+(k-this.$W):k;if(I===d||I===g){var K=this.clone().set(p,1);K.$d[X](G),K.init(),this.$d=K.set(p,Math.min(this.$D,K.daysInMonth())).$d}else X&&this.$d[X](G);return this.init(),this},_.set=function(j,k){return this.clone().$set(j,k)},_.get=function(j){return this[T.p(j)]()},_.add=function(j,k){var E,I=this;j=Number(j);var D=T.p(k),X=function(U){var J=O(I);return T.w(J.date(J.date()+Math.round(U*j)),I)};if(D===d)return this.set(d,this.$M+j);if(D===g)return this.set(g,this.$y+j);if(D===u)return X(1);if(D===c)return X(7);var G=(E={},E[t]=l,E[n]=s,E[r]=1e3,E)[D]||1,K=this.$d.getTime()+j*G;return T.w(K,this)},_.subtract=function(j,k){return this.add(-1*j,k)},_.format=function(j){var k=this,E=this.$locale();if(!this.isValid())return E.invalidDate||x;var I=j||"YYYY-MM-DDTHH:mm:ssZ",D=T.z(this),X=this.$H,G=this.$m,K=this.$M,U=E.weekdays,J=E.months,$=E.meridiem,L=function(ne,se,H,ce){return ne&&(ne[se]||ne(k,I))||H[se].slice(0,ce)},W=function(ne){return T.s(X%12||12,ne,"0")},re=$||function(ne,se,H){var ce=ne<12?"AM":"PM";return H?ce.toLowerCase():ce};return I.replace(v,(function(ne,se){return se||(function(H){switch(H){case"YY":return String(k.$y).slice(-2);case"YYYY":return T.s(k.$y,4,"0");case"M":return K+1;case"MM":return T.s(K+1,2,"0");case"MMM":return L(E.monthsShort,K,J,3);case"MMMM":return L(J,K);case"D":return k.$D;case"DD":return T.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return L(E.weekdaysMin,k.$W,U,2);case"ddd":return L(E.weekdaysShort,k.$W,U,3);case"dddd":return U[k.$W];case"H":return String(X);case"HH":return T.s(X,2,"0");case"h":return W(1);case"hh":return W(2);case"a":return re(X,G,!0);case"A":return re(X,G,!1);case"m":return String(G);case"mm":return T.s(G,2,"0");case"s":return String(k.$s);case"ss":return T.s(k.$s,2,"0");case"SSS":return T.s(k.$ms,3,"0");case"Z":return D}return null})(ne)||D.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(j,k,E){var I,D=this,X=T.p(k),G=O(j),K=(G.utcOffset()-this.utcOffset())*l,U=this-G,J=function(){return T.m(D,G)};switch(X){case g:I=J()/12;break;case d:I=J();break;case b:I=J()/3;break;case c:I=(U-K)/6048e5;break;case u:I=(U-K)/864e5;break;case n:I=U/s;break;case t:I=U/l;break;case r:I=U/1e3;break;default:I=U}return E?I:T.a(I)},_.daysInMonth=function(){return this.endOf(d).$D},_.$locale=function(){return M[this.$L]},_.locale=function(j,k){if(!j)return this.$L;var E=this.clone(),I=V(j,k,!0);return I&&(E.$L=I),E},_.clone=function(){return T.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},w})(),C=A.prototype;return O.prototype=C,[["$ms",o],["$s",r],["$m",t],["$H",n],["$W",u],["$M",d],["$y",g],["$D",p]].forEach((function(w){C[w[1]]=function(_){return this.$g(_,w[0],w[1])}})),O.extend=function(w,_){return w.$i||(w(_,A,O),w.$i=!0),O},O.locale=V,O.isDayjs=q,O.unix=function(w){return O(1e3*w)},O.en=M[B],O.Ls=M,O.p={},O}))},{}],392:[function(e,h,f){(function(l,s){typeof f=="object"&&h!==void 0?h.exports=s():(l=typeof globalThis<"u"?globalThis:l||self).dayjs_plugin_customParseFormat=s()})(void 0,(function(){var l={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,r=/\d\d?/,t=/\d*[^-_:/,()\s\d]+/,n={},u=function(y){return(y=+y)+(y>68?1900:2e3)},c=function(y){return function(v){this[y]=+v}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=(function(v){if(!v||v==="Z")return 0;var S=v.match(/([+-]|\d\d)/g),N=60*S[1]+(+S[2]||0);return N===0?0:S[0]==="+"?-N:N})(y)}],b=function(y){var v=n[y];return v&&(v.indexOf?v:v.s.concat(v.f))},g=function(y,v){var S,N=n.meridiem;if(N){for(var R=1;R<=24;R+=1)if(y.indexOf(N(R,0,v))>-1){S=R>12;break}}else S=y===(v?"pm":"PM");return S},p={A:[t,function(y){this.afternoon=g(y,!1)}],a:[t,function(y){this.afternoon=g(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[r,c("seconds")],ss:[r,c("seconds")],m:[r,c("minutes")],mm:[r,c("minutes")],H:[r,c("hours")],h:[r,c("hours")],HH:[r,c("hours")],hh:[r,c("hours")],D:[r,c("day")],DD:[o,c("day")],Do:[t,function(y){var v=n.ordinal,S=y.match(/\d+/);if(this.day=S[0],v)for(var N=1;N<=31;N+=1)v(N).replace(/\[|\]/g,"")===y&&(this.day=N)}],M:[r,c("month")],MM:[o,c("month")],MMM:[t,function(y){var v=b("months"),S=(b("monthsShort")||v.map((function(N){return N.slice(0,3)}))).indexOf(y)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[t,function(y){var v=b("months").indexOf(y)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,c("year")],YY:[o,function(y){this.year=u(y)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function x(y){var v,S;v=y,S=n&&n.formats;for(var N=(y=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(O,T,A){var C=A&&A.toUpperCase();return T||S[A]||l[A]||S[C].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(w,_,j){return _||j.slice(1)}))}))).match(s),R=N.length,B=0;B<R;B+=1){var M=N[B],F=p[M],q=F&&F[0],V=F&&F[1];N[B]=V?{regex:q,parser:V}:M.replace(/^\[|\]$/g,"")}return function(O){for(var T={},A=0,C=0;A<R;A+=1){var w=N[A];if(typeof w=="string")C+=w.length;else{var _=w.regex,j=w.parser,k=O.slice(C),E=_.exec(k)[0];j.call(T,E),O=O.replace(E,"")}}return(function(I){var D=I.afternoon;if(D!==void 0){var X=I.hours;D?X<12&&(I.hours+=12):X===12&&(I.hours=0),delete I.afternoon}})(T),T}}return function(y,v,S){S.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(u=y.parseTwoDigitYear);var N=v.prototype,R=N.parse;N.parse=function(B){var M=B.date,F=B.utc,q=B.args;this.$u=F;var V=q[1];if(typeof V=="string"){var O=q[2]===!0,T=q[3]===!0,A=O||T,C=q[2];T&&(C=q[2]),n=this.$locale(),!O&&C&&(n=S.Ls[C]),this.$d=(function(k,E,I){try{if(["x","X"].indexOf(E)>-1)return new Date((E==="X"?1e3:1)*k);var D=x(E)(k),X=D.year,G=D.month,K=D.day,U=D.hours,J=D.minutes,$=D.seconds,L=D.milliseconds,W=D.zone,re=new Date,ne=K||(X||G?1:re.getDate()),se=X||re.getFullYear(),H=0;X&&!G||(H=G>0?G-1:re.getMonth());var ce=U||0,ae=J||0,Y=$||0,Q=L||0;return W?new Date(Date.UTC(se,H,ne,ce,ae,Y,Q+60*W.offset*1e3)):I?new Date(Date.UTC(se,H,ne,ce,ae,Y,Q)):new Date(se,H,ne,ce,ae,Y,Q)}catch{return new Date("")}})(M,V,F),this.init(),C&&C!==!0&&(this.$L=this.locale(C).$L),A&&M!=this.format(V)&&(this.$d=new Date("")),n={}}else if(V instanceof Array)for(var w=V.length,_=1;_<=w;_+=1){q[1]=V[_-1];var j=S.apply(this,q);if(j.isValid()){this.$d=j.$d,this.$L=j.$L,this.init();break}_===w&&(this.$d=new Date(""))}else R.call(this,B)}}}))},{}],393:[function(e,h,f){(function(l,s){typeof f=="object"&&h!==void 0?h.exports=s():(l=typeof globalThis<"u"?globalThis:l||self).dayjs_plugin_utc=s()})(void 0,(function(){var l="minute",s=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(r,t,n){var u=t.prototype;n.utc=function(y){var v={date:y,utc:!0,args:arguments};return new t(v)},u.utc=function(y){var v=n(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),l):v},u.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var c=u.parse;u.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),c.call(this,y)};var d=u.init;u.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else d.call(this)};var b=u.utcOffset;u.utcOffset=function(y,v){var S=this.$utils().u;if(S(y))return this.$u?0:S(this.$offset)?b.call(this):this.$offset;if(typeof y=="string"&&(y=(function(M){M===void 0&&(M="");var F=M.match(s);if(!F)return null;var q=(""+F[0]).match(o)||["-",0,0],V=q[0],O=60*+q[1]+ +q[2];return O===0?0:V==="+"?O:-O})(y))===null)return this;var N=Math.abs(y)<=16?60*y:y,R=this;if(v)return R.$offset=N,R.$u=y===0,R;if(y!==0){var B=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(N+B,l)).$offset=N,R.$x.$localOffset=B}else R=this.utc();return R};var g=u.format;u.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,v)},u.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var p=u.toDate;u.toDate=function(y){return y==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var x=u.diff;u.diff=function(y,v,S){if(y&&this.$u===y.$u)return x.call(this,y,v,S);var N=this.local(),R=n(y).local();return x.call(N,R,v,S)}}}))},{}],394:[function(e,h,f){f.utils=e("./des/utils"),f.Cipher=e("./des/cipher"),f.DES=e("./des/des"),f.CBC=e("./des/cbc"),f.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,h,f){var l=e("minimalistic-assert"),s=e("inherits"),o={};function r(t){l.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var n=0;n<this.iv.length;n++)this.iv[n]=t[n]}f.instantiate=function(t){function n(b){t.call(this,b),this._cbcInit()}s(n,t);for(var u=Object.keys(o),c=0;c<u.length;c++){var d=u[c];n.prototype[d]=o[d]}return n.create=function(b){return new n(b)},n},o._cbcInit=function(){var t=new r(this.options.iv);this._cbcState=t},o._update=function(t,n,u,c){var d=this._cbcState,b=this.constructor.super_.prototype,g=d.iv;if(this.type==="encrypt"){for(var p=0;p<this.blockSize;p++)g[p]^=t[n+p];for(b._update.call(this,g,0,u,c),p=0;p<this.blockSize;p++)g[p]=u[c+p]}else{for(b._update.call(this,t,n,u,c),p=0;p<this.blockSize;p++)u[c+p]^=g[p];for(p=0;p<this.blockSize;p++)g[p]=t[n+p]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,h,f){var l=e("minimalistic-assert");function s(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=o.padding!==!1}h.exports=s,s.prototype._init=function(){},s.prototype.update=function(o){return o.length===0?[]:this.type==="decrypt"?this._updateDecrypt(o):this._updateEncrypt(o)},s.prototype._buffer=function(o,r){for(var t=Math.min(this.buffer.length-this.bufferOff,o.length-r),n=0;n<t;n++)this.buffer[this.bufferOff+n]=o[r+n];return this.bufferOff+=t,t},s.prototype._flushBuffer=function(o,r){return this._update(this.buffer,0,o,r),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(o){var r=0,t=0,n=(this.bufferOff+o.length)/this.blockSize|0,u=new Array(n*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(o,r),this.bufferOff===this.buffer.length&&(t+=this._flushBuffer(u,t)));for(var c=o.length-(o.length-r)%this.blockSize;r<c;r+=this.blockSize)this._update(o,r,u,t),t+=this.blockSize;for(;r<o.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=o[r];return u},s.prototype._updateDecrypt=function(o){for(var r=0,t=0,n=Math.ceil((this.bufferOff+o.length)/this.blockSize)-1,u=new Array(n*this.blockSize);n>0;n--)r+=this._buffer(o,r),t+=this._flushBuffer(u,t);return r+=this._buffer(o,r),u},s.prototype.final=function(o){var r,t;return o&&(r=this.update(o)),t=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),r?r.concat(t):t},s.prototype._pad=function(o,r){if(r===0)return!1;for(;r<o.length;)o[r++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var o=new Array(this.blockSize);return this._update(this.buffer,0,o,0),o},s.prototype._unpad=function(o){return o},s.prototype._finalDecrypt=function(){l.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var o=new Array(this.blockSize);return this._flushBuffer(o,0),this._unpad(o)}},{"minimalistic-assert":453}],397:[function(e,h,f){var l=e("minimalistic-assert"),s=e("inherits"),o=e("./utils"),r=e("./cipher");function t(){this.tmp=new Array(2),this.keys=null}function n(c){r.call(this,c);var d=new t;this._desState=d,this.deriveKeys(d,c.key)}s(n,r),h.exports=n,n.create=function(c){return new n(c)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];n.prototype.deriveKeys=function(c,d){c.keys=new Array(32),l.equal(d.length,this.blockSize,"Invalid key length");var b=o.readUInt32BE(d,0),g=o.readUInt32BE(d,4);o.pc1(b,g,c.tmp,0),b=c.tmp[0],g=c.tmp[1];for(var p=0;p<c.keys.length;p+=2){var x=u[p>>>1];b=o.r28shl(b,x),g=o.r28shl(g,x),o.pc2(b,g,c.keys,p)}},n.prototype._update=function(c,d,b,g){var p=this._desState,x=o.readUInt32BE(c,d),y=o.readUInt32BE(c,d+4);o.ip(x,y,p.tmp,0),x=p.tmp[0],y=p.tmp[1],this.type==="encrypt"?this._encrypt(p,x,y,p.tmp,0):this._decrypt(p,x,y,p.tmp,0),x=p.tmp[0],y=p.tmp[1],o.writeUInt32BE(b,x,g),o.writeUInt32BE(b,y,g+4)},n.prototype._pad=function(c,d){if(this.padding===!1)return!1;for(var b=c.length-d,g=d;g<c.length;g++)c[g]=b;return!0},n.prototype._unpad=function(c){if(this.padding===!1)return c;for(var d=c[c.length-1],b=c.length-d;b<c.length;b++)l.equal(c[b],d);return c.slice(0,c.length-d)},n.prototype._encrypt=function(c,d,b,g,p){for(var x=d,y=b,v=0;v<c.keys.length;v+=2){var S=c.keys[v],N=c.keys[v+1];o.expand(y,c.tmp,0),S^=c.tmp[0],N^=c.tmp[1];var R=o.substitute(S,N),B=y;y=(x^o.permute(R))>>>0,x=B}o.rip(y,x,g,p)},n.prototype._decrypt=function(c,d,b,g,p){for(var x=b,y=d,v=c.keys.length-2;v>=0;v-=2){var S=c.keys[v],N=c.keys[v+1];o.expand(x,c.tmp,0),S^=c.tmp[0],N^=c.tmp[1];var R=o.substitute(S,N),B=x;x=(y^o.permute(R))>>>0,y=B}o.rip(x,y,g,p)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,h,f){var l=e("minimalistic-assert"),s=e("inherits"),o=e("./cipher"),r=e("./des");function t(u,c){l.equal(c.length,24,"Invalid key length");var d=c.slice(0,8),b=c.slice(8,16),g=c.slice(16,24);this.ciphers=u==="encrypt"?[r.create({type:"encrypt",key:d}),r.create({type:"decrypt",key:b}),r.create({type:"encrypt",key:g})]:[r.create({type:"decrypt",key:g}),r.create({type:"encrypt",key:b}),r.create({type:"decrypt",key:d})]}function n(u){o.call(this,u);var c=new t(this.type,this.options.key);this._edeState=c}s(n,o),h.exports=n,n.create=function(u){return new n(u)},n.prototype._update=function(u,c,d,b){var g=this._edeState;g.ciphers[0]._update(u,c,d,b),g.ciphers[1]._update(d,b,d,b),g.ciphers[2]._update(d,b,d,b)},n.prototype._pad=r.prototype._pad,n.prototype._unpad=r.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,h,f){f.readUInt32BE=function(r,t){return(r[0+t]<<24|r[1+t]<<16|r[2+t]<<8|r[3+t])>>>0},f.writeUInt32BE=function(r,t,n){r[0+n]=t>>>24,r[1+n]=t>>>16&255,r[2+n]=t>>>8&255,r[3+n]=255&t},f.ip=function(r,t,n,u){for(var c=0,d=0,b=6;b>=0;b-=2){for(var g=0;g<=24;g+=8)c<<=1,c|=t>>>g+b&1;for(g=0;g<=24;g+=8)c<<=1,c|=r>>>g+b&1}for(b=6;b>=0;b-=2){for(g=1;g<=25;g+=8)d<<=1,d|=t>>>g+b&1;for(g=1;g<=25;g+=8)d<<=1,d|=r>>>g+b&1}n[u+0]=c>>>0,n[u+1]=d>>>0},f.rip=function(r,t,n,u){for(var c=0,d=0,b=0;b<4;b++)for(var g=24;g>=0;g-=8)c<<=1,c|=t>>>g+b&1,c<<=1,c|=r>>>g+b&1;for(b=4;b<8;b++)for(g=24;g>=0;g-=8)d<<=1,d|=t>>>g+b&1,d<<=1,d|=r>>>g+b&1;n[u+0]=c>>>0,n[u+1]=d>>>0},f.pc1=function(r,t,n,u){for(var c=0,d=0,b=7;b>=5;b--){for(var g=0;g<=24;g+=8)c<<=1,c|=t>>g+b&1;for(g=0;g<=24;g+=8)c<<=1,c|=r>>g+b&1}for(g=0;g<=24;g+=8)c<<=1,c|=t>>g+b&1;for(b=1;b<=3;b++){for(g=0;g<=24;g+=8)d<<=1,d|=t>>g+b&1;for(g=0;g<=24;g+=8)d<<=1,d|=r>>g+b&1}for(g=0;g<=24;g+=8)d<<=1,d|=r>>g+b&1;n[u+0]=c>>>0,n[u+1]=d>>>0},f.r28shl=function(r,t){return r<<t&268435455|r>>>28-t};var l=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];f.pc2=function(r,t,n,u){for(var c=0,d=0,b=l.length>>>1,g=0;g<b;g++)c<<=1,c|=r>>>l[g]&1;for(g=b;g<l.length;g++)d<<=1,d|=t>>>l[g]&1;n[u+0]=c>>>0,n[u+1]=d>>>0},f.expand=function(r,t,n){var u=0,c=0;u=(1&r)<<5|r>>>27;for(var d=23;d>=15;d-=4)u<<=6,u|=r>>>d&63;for(d=11;d>=3;d-=4)c|=r>>>d&63,c<<=6;c|=(31&r)<<1|r>>>31,t[n+0]=u>>>0,t[n+1]=c>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];f.substitute=function(r,t){for(var n=0,u=0;u<4;u++)n<<=4,n|=s[64*u+(r>>>18-6*u&63)];for(u=0;u<4;u++)n<<=4,n|=s[256+64*u+(t>>>18-6*u&63)];return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];f.permute=function(r){for(var t=0,n=0;n<o.length;n++)t<<=1,t|=r>>>o[n]&1;return t>>>0},f.padSplit=function(r,t,n){for(var u=r.toString(2);u.length<t;)u="0"+u;for(var c=[],d=0;d<t;d+=n)c.push(u.slice(d,d+n));return c.join(" ")}},{}],400:[function(e,h,f){(function(l){(function(){var s=e("./lib/generatePrime"),o=e("./lib/primes.json"),r=e("./lib/dh"),t={binary:!0,hex:!0,base64:!0};f.DiffieHellmanGroup=f.createDiffieHellmanGroup=f.getDiffieHellman=function(n){var u=new l(o[n].prime,"hex"),c=new l(o[n].gen,"hex");return new r(u,c)},f.createDiffieHellman=f.DiffieHellman=function n(u,c,d,b){return l.isBuffer(c)||t[c]===void 0?n(u,"binary",c,d):(c=c||"binary",b=b||"binary",d=d||new l([2]),l.isBuffer(d)||(d=new l(d,b)),typeof u=="number"?new r(s(u,d),d,!0):(l.isBuffer(u)||(u=new l(u,c)),new r(u,d,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,h,f){(function(l){(function(){var s=e("bn.js"),o=new(e("miller-rabin")),r=new s(24),t=new s(11),n=new s(10),u=new s(3),c=new s(7),d=e("./generatePrime"),b=e("randombytes");function g(S,N){return N=N||"utf8",l.isBuffer(S)||(S=new l(S,N)),this._pub=new s(S),this}function p(S,N){return N=N||"utf8",l.isBuffer(S)||(S=new l(S,N)),this._priv=new s(S),this}h.exports=y;var x={};function y(S,N,R){this.setGenerator(N),this.__prime=new s(S),this._prime=s.mont(this.__prime),this._primeLen=S.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,R?(this.setPublicKey=g,this.setPrivateKey=p):this._primeCode=8}function v(S,N){var R=new l(S.toArray());return N?R.toString(N):R}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=(function(S,N){var R=N.toString("hex"),B=[R,S.toString(16)].join("_");if(B in x)return x[B];var M,F=0;if(S.isEven()||!d.simpleSieve||!d.fermatTest(S)||!o.test(S))return F+=1,F+=R==="02"||R==="05"?8:4,x[B]=F,F;switch(o.test(S.shrn(1))||(F+=2),R){case"02":S.mod(r).cmp(t)&&(F+=8);break;case"05":(M=S.mod(n)).cmp(u)&&M.cmp(c)&&(F+=8);break;default:F+=4}return x[B]=F,F})(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new s(b(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(S){var N=(S=(S=new s(S)).toRed(this._prime)).redPow(this._priv).fromRed(),R=new l(N.toArray()),B=this.getPrime();if(R.length<B.length){var M=new l(B.length-R.length);M.fill(0),R=l.concat([M,R])}return R},y.prototype.getPublicKey=function(S){return v(this._pub,S)},y.prototype.getPrivateKey=function(S){return v(this._priv,S)},y.prototype.getPrime=function(S){return v(this.__prime,S)},y.prototype.getGenerator=function(S){return v(this._gen,S)},y.prototype.setGenerator=function(S,N){return N=N||"utf8",l.isBuffer(S)||(S=new l(S,N)),this.__gen=S,this._gen=new s(S),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,h,f){var l=e("randombytes");h.exports=S,S.simpleSieve=y,S.fermatTest=v;var s=e("bn.js"),o=new s(24),r=new(e("miller-rabin")),t=new s(1),n=new s(2),u=new s(5),c=(new s(16),new s(8),new s(10)),d=new s(3),b=(new s(7),new s(11)),g=new s(4),p=(new s(12),null);function x(){if(p!==null)return p;var N=[];N[0]=2;for(var R=1,B=3;B<1048576;B+=2){for(var M=Math.ceil(Math.sqrt(B)),F=0;F<R&&N[F]<=M&&B%N[F]!=0;F++);R!==F&&N[F]<=M||(N[R++]=B)}return p=N,N}function y(N){for(var R=x(),B=0;B<R.length;B++)if(N.modn(R[B])===0)return N.cmpn(R[B])===0;return!0}function v(N){var R=s.mont(N);return n.toRed(R).redPow(N.subn(1)).fromRed().cmpn(1)===0}function S(N,R){if(N<16)return new s(R===2||R===5?[140,123]:[140,39]);var B,M;for(R=new s(R);;){for(B=new s(l(Math.ceil(N/8)));B.bitLength()>N;)B.ishrn(1);if(B.isEven()&&B.iadd(t),B.testn(1)||B.iadd(n),R.cmp(n)){if(!R.cmp(u))for(;B.mod(c).cmp(d);)B.iadd(g)}else for(;B.mod(o).cmp(b);)B.iadd(g);if(y(M=B.shrn(1))&&y(B)&&v(M)&&v(B)&&r.test(M)&&r.test(B))return B}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,h,f){h.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,h,f){arguments[4][184][0].apply(f,arguments)},{buffer:188,dup:184}],405:[function(e,h,f){var l=f;l.version=e("../package.json").version,l.utils=e("./elliptic/utils"),l.rand=e("brorand"),l.curve=e("./elliptic/curve"),l.curves=e("./elliptic/curves"),l.ec=e("./elliptic/ec"),l.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,h,f){var l=e("bn.js"),s=e("../utils"),o=s.getNAF,r=s.getJSF,t=s.assert;function n(c,d){this.type=c,this.p=new l(d.p,16),this.red=d.prime?l.red(d.prime):l.mont(this.p),this.zero=new l(0).toRed(this.red),this.one=new l(1).toRed(this.red),this.two=new l(2).toRed(this.red),this.n=d.n&&new l(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(c,d){this.curve=c,this.type=d,this.precomputed=null}h.exports=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(c,d){t(c.precomputed);var b=c._getDoubles(),g=o(d,1,this._bitLength),p=(1<<b.step+1)-(b.step%2==0?2:1);p/=3;var x,y,v=[];for(x=0;x<g.length;x+=b.step){y=0;for(var S=x+b.step-1;S>=x;S--)y=(y<<1)+g[S];v.push(y)}for(var N=this.jpoint(null,null,null),R=this.jpoint(null,null,null),B=p;B>0;B--){for(x=0;x<v.length;x++)(y=v[x])===B?R=R.mixedAdd(b.points[x]):y===-B&&(R=R.mixedAdd(b.points[x].neg()));N=N.add(R)}return N.toP()},n.prototype._wnafMul=function(c,d){var b=4,g=c._getNAFPoints(b);b=g.wnd;for(var p=g.points,x=o(d,b,this._bitLength),y=this.jpoint(null,null,null),v=x.length-1;v>=0;v--){for(var S=0;v>=0&&x[v]===0;v--)S++;if(v>=0&&S++,y=y.dblp(S),v<0)break;var N=x[v];t(N!==0),y=c.type==="affine"?N>0?y.mixedAdd(p[N-1>>1]):y.mixedAdd(p[-N-1>>1].neg()):N>0?y.add(p[N-1>>1]):y.add(p[-N-1>>1].neg())}return c.type==="affine"?y.toP():y},n.prototype._wnafMulAdd=function(c,d,b,g,p){var x,y,v,S=this._wnafT1,N=this._wnafT2,R=this._wnafT3,B=0;for(x=0;x<g;x++){var M=(v=d[x])._getNAFPoints(c);S[x]=M.wnd,N[x]=M.points}for(x=g-1;x>=1;x-=2){var F=x-1,q=x;if(S[F]===1&&S[q]===1){var V=[d[F],null,null,d[q]];d[F].y.cmp(d[q].y)===0?(V[1]=d[F].add(d[q]),V[2]=d[F].toJ().mixedAdd(d[q].neg())):d[F].y.cmp(d[q].y.redNeg())===0?(V[1]=d[F].toJ().mixedAdd(d[q]),V[2]=d[F].add(d[q].neg())):(V[1]=d[F].toJ().mixedAdd(d[q]),V[2]=d[F].toJ().mixedAdd(d[q].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],T=r(b[F],b[q]);for(B=Math.max(T[0].length,B),R[F]=new Array(B),R[q]=new Array(B),y=0;y<B;y++){var A=0|T[0][y],C=0|T[1][y];R[F][y]=O[3*(A+1)+(C+1)],R[q][y]=0,N[F]=V}}else R[F]=o(b[F],S[F],this._bitLength),R[q]=o(b[q],S[q],this._bitLength),B=Math.max(R[F].length,B),B=Math.max(R[q].length,B)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(x=B;x>=0;x--){for(var j=0;x>=0;){var k=!0;for(y=0;y<g;y++)_[y]=0|R[y][x],_[y]!==0&&(k=!1);if(!k)break;j++,x--}if(x>=0&&j++,w=w.dblp(j),x<0)break;for(y=0;y<g;y++){var E=_[y];E!==0&&(E>0?v=N[y][E-1>>1]:E<0&&(v=N[y][-E-1>>1].neg()),w=v.type==="affine"?w.mixedAdd(v):w.add(v))}}for(x=0;x<g;x++)N[x]=null;return p?w:w.toP()},n.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(c,d){c=s.toArray(c,d);var b=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1==2*b)return c[0]===6?t(c[c.length-1]%2==0):c[0]===7&&t(c[c.length-1]%2==1),this.point(c.slice(1,1+b),c.slice(1+b,1+2*b));if((c[0]===2||c[0]===3)&&c.length-1===b)return this.pointFromX(c.slice(1,1+b),c[0]===3);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(c){return this.encode(c,!0)},u.prototype._encode=function(c){var d=this.curve.p.byteLength(),b=this.getX().toArray("be",d);return c?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",d))},u.prototype.encode=function(c,d){return s.encode(this._encode(d),c)},u.prototype.precompute=function(c){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,c),d.beta=this._getBeta(),this.precomputed=d,this},u.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((c.bitLength()+1)/d.step)},u.prototype._getDoubles=function(c,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],g=this,p=0;p<d;p+=c){for(var x=0;x<c;x++)g=g.dbl();b.push(g)}return{step:c,points:b}},u.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],b=(1<<c)-1,g=b===1?null:this.dbl(),p=1;p<b;p++)d[p]=d[p-1].add(g);return{wnd:c,points:d}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(c){for(var d=this,b=0;b<c;b++)d=d.dbl();return d}},{"../utils":419,"bn.js":420}],407:[function(e,h,f){var l=e("../utils"),s=e("bn.js"),o=e("inherits"),r=e("./base"),t=l.assert;function n(c){this.twisted=(0|c.a)!=1,this.mOneA=this.twisted&&(0|c.a)==-1,this.extended=this.mOneA,r.call(this,"edwards",c),this.a=new s(c.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(c.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(c.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),t(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|c.c)==1}function u(c,d,b,g,p){r.BasePoint.call(this,c,"projective"),d===null&&b===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(d,16),this.y=new s(b,16),this.z=g?new s(g,16):this.curve.one,this.t=p&&new s(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(n,r),h.exports=n,n.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},n.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},n.prototype.jpoint=function(c,d,b,g){return this.point(c,d,b,g)},n.prototype.pointFromX=function(c,d){(c=new s(c,16)).red||(c=c.toRed(this.red));var b=c.redSqr(),g=this.c2.redSub(this.a.redMul(b)),p=this.one.redSub(this.c2.redMul(this.d).redMul(b)),x=g.redMul(p.redInvm()),y=x.redSqrt();if(y.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var v=y.fromRed().isOdd();return(d&&!v||!d&&v)&&(y=y.redNeg()),this.point(c,y)},n.prototype.pointFromY=function(c,d){(c=new s(c,16)).red||(c=c.toRed(this.red));var b=c.redSqr(),g=b.redSub(this.c2),p=b.redMul(this.d).redMul(this.c2).redSub(this.a),x=g.redMul(p.redInvm());if(x.cmp(this.zero)===0){if(d)throw new Error("invalid point");return this.point(this.zero,c)}var y=x.redSqrt();if(y.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==d&&(y=y.redNeg()),this.point(y,c)},n.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var d=c.x.redSqr(),b=c.y.redSqr(),g=d.redMul(this.a).redAdd(b),p=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(b)));return g.cmp(p)===0},o(u,r.BasePoint),n.prototype.pointFromJSON=function(c){return u.fromJSON(this,c)},n.prototype.point=function(c,d,b,g){return new u(this,c,d,b,g)},u.fromJSON=function(c,d){return new u(c,d[0],d[1],d[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},u.prototype._extDbl=function(){var c=this.x.redSqr(),d=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var g=this.curve._mulA(c),p=this.x.redAdd(this.y).redSqr().redISub(c).redISub(d),x=g.redAdd(d),y=x.redSub(b),v=g.redSub(d),S=p.redMul(y),N=x.redMul(v),R=p.redMul(v),B=y.redMul(x);return this.curve.point(S,N,B,R)},u.prototype._projDbl=function(){var c,d,b,g,p,x,y=this.x.redAdd(this.y).redSqr(),v=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var N=(g=this.curve._mulA(v)).redAdd(S);this.zOne?(c=y.redSub(v).redSub(S).redMul(N.redSub(this.curve.two)),d=N.redMul(g.redSub(S)),b=N.redSqr().redSub(N).redSub(N)):(p=this.z.redSqr(),x=N.redSub(p).redISub(p),c=y.redSub(v).redISub(S).redMul(x),d=N.redMul(g.redSub(S)),b=N.redMul(x))}else g=v.redAdd(S),p=this.curve._mulC(this.z).redSqr(),x=g.redSub(p).redSub(p),c=this.curve._mulC(y.redISub(g)).redMul(x),d=this.curve._mulC(g).redMul(v.redISub(S)),b=g.redMul(x);return this.curve.point(c,d,b)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(c){var d=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),b=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),g=this.t.redMul(this.curve.dd).redMul(c.t),p=this.z.redMul(c.z.redAdd(c.z)),x=b.redSub(d),y=p.redSub(g),v=p.redAdd(g),S=b.redAdd(d),N=x.redMul(y),R=v.redMul(S),B=x.redMul(S),M=y.redMul(v);return this.curve.point(N,R,M,B)},u.prototype._projAdd=function(c){var d,b,g=this.z.redMul(c.z),p=g.redSqr(),x=this.x.redMul(c.x),y=this.y.redMul(c.y),v=this.curve.d.redMul(x).redMul(y),S=p.redSub(v),N=p.redAdd(v),R=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(x).redISub(y),B=g.redMul(S).redMul(R);return this.curve.twisted?(d=g.redMul(N).redMul(y.redSub(this.curve._mulA(x))),b=S.redMul(N)):(d=g.redMul(N).redMul(y.redSub(x)),b=this.curve._mulC(S).redMul(N)),this.curve.point(B,d,b)},u.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},u.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},u.prototype.mulAdd=function(c,d,b){return this.curve._wnafMulAdd(1,[this,d],[c,b],2,!1)},u.prototype.jmulAdd=function(c,d,b){return this.curve._wnafMulAdd(1,[this,d],[c,b],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},u.prototype.eqXToP=function(c){var d=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(d)===0)return!0;for(var b=c.clone(),g=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(d.redIAdd(g),this.x.cmp(d)===0)return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,h,f){var l=f;l.base=e("./base"),l.short=e("./short"),l.mont=e("./mont"),l.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,h,f){var l=e("bn.js"),s=e("inherits"),o=e("./base"),r=e("../utils");function t(u){o.call(this,"mont",u),this.a=new l(u.a,16).toRed(this.red),this.b=new l(u.b,16).toRed(this.red),this.i4=new l(4).toRed(this.red).redInvm(),this.two=new l(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(u,c,d){o.BasePoint.call(this,u,"projective"),c===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new l(c,16),this.z=new l(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(t,o),h.exports=t,t.prototype.validate=function(u){var c=u.normalize().x,d=c.redSqr(),b=d.redMul(c).redAdd(d.redMul(this.a)).redAdd(c);return b.redSqrt().redSqr().cmp(b)===0},s(n,o.BasePoint),t.prototype.decodePoint=function(u,c){return this.point(r.toArray(u,c),1)},t.prototype.point=function(u,c){return new n(this,u,c)},t.prototype.pointFromJSON=function(u){return n.fromJSON(this,u)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(u,c){return new n(u,c[0],c[1]||u.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.z.cmpn(0)===0},n.prototype.dbl=function(){var u=this.x.redAdd(this.z).redSqr(),c=this.x.redSub(this.z).redSqr(),d=u.redSub(c),b=u.redMul(c),g=d.redMul(c.redAdd(this.curve.a24.redMul(d)));return this.curve.point(b,g)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(u,c){var d=this.x.redAdd(this.z),b=this.x.redSub(this.z),g=u.x.redAdd(u.z),p=u.x.redSub(u.z).redMul(d),x=g.redMul(b),y=c.z.redMul(p.redAdd(x).redSqr()),v=c.x.redMul(p.redISub(x).redSqr());return this.curve.point(y,v)},n.prototype.mul=function(u){for(var c=u.clone(),d=this,b=this.curve.point(null,null),g=[];c.cmpn(0)!==0;c.iushrn(1))g.push(c.andln(1));for(var p=g.length-1;p>=0;p--)g[p]===0?(d=d.diffAdd(b,this),b=b.dbl()):(b=d.diffAdd(b,this),d=d.dbl());return b},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(u){return this.getX().cmp(u.getX())===0},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,h,f){var l=e("../utils"),s=e("bn.js"),o=e("inherits"),r=e("./base"),t=l.assert;function n(d){r.call(this,"short",d),this.a=new s(d.a,16).toRed(this.red),this.b=new s(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(d,b,g,p){r.BasePoint.call(this,d,"affine"),b===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(b,16),this.y=new s(g,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(d,b,g,p){r.BasePoint.call(this,d,"jacobian"),b===null&&g===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(b,16),this.y=new s(g,16),this.z=new s(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(n,r),h.exports=n,n.prototype._getEndomorphism=function(d){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var b,g;if(d.beta)b=new s(d.beta,16).toRed(this.red);else{var p=this._getEndoRoots(this.p);b=(b=p[0].cmp(p[1])<0?p[0]:p[1]).toRed(this.red)}if(d.lambda)g=new s(d.lambda,16);else{var x=this._getEndoRoots(this.n);this.g.mul(x[0]).x.cmp(this.g.x.redMul(b))===0?g=x[0]:(g=x[1],t(this.g.mul(g).x.cmp(this.g.x.redMul(b))===0))}return{beta:b,lambda:g,basis:d.basis?d.basis.map((function(y){return{a:new s(y.a,16),b:new s(y.b,16)}})):this._getEndoBasis(g)}}},n.prototype._getEndoRoots=function(d){var b=d===this.p?this.red:s.mont(d),g=new s(2).toRed(b).redInvm(),p=g.redNeg(),x=new s(3).toRed(b).redNeg().redSqrt().redMul(g);return[p.redAdd(x).fromRed(),p.redSub(x).fromRed()]},n.prototype._getEndoBasis=function(d){for(var b,g,p,x,y,v,S,N,R,B=this.n.ushrn(Math.floor(this.n.bitLength()/2)),M=d,F=this.n.clone(),q=new s(1),V=new s(0),O=new s(0),T=new s(1),A=0;M.cmpn(0)!==0;){var C=F.div(M);N=F.sub(C.mul(M)),R=O.sub(C.mul(q));var w=T.sub(C.mul(V));if(!p&&N.cmp(B)<0)b=S.neg(),g=q,p=N.neg(),x=R;else if(p&&++A==2)break;S=N,F=M,M=N,O=q,q=R,T=V,V=w}y=N.neg(),v=R;var _=p.sqr().add(x.sqr());return y.sqr().add(v.sqr()).cmp(_)>=0&&(y=b,v=g),p.negative&&(p=p.neg(),x=x.neg()),y.negative&&(y=y.neg(),v=v.neg()),[{a:p,b:x},{a:y,b:v}]},n.prototype._endoSplit=function(d){var b=this.endo.basis,g=b[0],p=b[1],x=p.b.mul(d).divRound(this.n),y=g.b.neg().mul(d).divRound(this.n),v=x.mul(g.a),S=y.mul(p.a),N=x.mul(g.b),R=y.mul(p.b);return{k1:d.sub(v).sub(S),k2:N.add(R).neg()}},n.prototype.pointFromX=function(d,b){(d=new s(d,16)).red||(d=d.toRed(this.red));var g=d.redSqr().redMul(d).redIAdd(d.redMul(this.a)).redIAdd(this.b),p=g.redSqrt();if(p.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var x=p.fromRed().isOdd();return(b&&!x||!b&&x)&&(p=p.redNeg()),this.point(d,p)},n.prototype.validate=function(d){if(d.inf)return!0;var b=d.x,g=d.y,p=this.a.redMul(b),x=b.redSqr().redMul(b).redIAdd(p).redIAdd(this.b);return g.redSqr().redISub(x).cmpn(0)===0},n.prototype._endoWnafMulAdd=function(d,b,g){for(var p=this._endoWnafT1,x=this._endoWnafT2,y=0;y<d.length;y++){var v=this._endoSplit(b[y]),S=d[y],N=S._getBeta();v.k1.negative&&(v.k1.ineg(),S=S.neg(!0)),v.k2.negative&&(v.k2.ineg(),N=N.neg(!0)),p[2*y]=S,p[2*y+1]=N,x[2*y]=v.k1,x[2*y+1]=v.k2}for(var R=this._wnafMulAdd(1,p,x,2*y,g),B=0;B<2*y;B++)p[B]=null,x[B]=null;return R},o(u,r.BasePoint),n.prototype.point=function(d,b,g){return new u(this,d,b,g)},n.prototype.pointFromJSON=function(d,b){return u.fromJSON(this,d,b)},u.prototype._getBeta=function(){if(this.curve.endo){var d=this.precomputed;if(d&&d.beta)return d.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(d){var g=this.curve,p=function(x){return g.point(x.x.redMul(g.endo.beta),x.y)};d.beta=b,b.precomputed={beta:null,naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(p)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(p)}}}return b}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(d,b,g){typeof b=="string"&&(b=JSON.parse(b));var p=d.point(b[0],b[1],g);if(!b[2])return p;function x(v){return d.point(v[0],v[1],g)}var y=b[2];return p.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[p].concat(y.doubles.points.map(x))},naf:y.naf&&{wnd:y.naf.wnd,points:[p].concat(y.naf.points.map(x))}},p},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(d){if(this.inf)return d;if(d.inf)return this;if(this.eq(d))return this.dbl();if(this.neg().eq(d))return this.curve.point(null,null);if(this.x.cmp(d.x)===0)return this.curve.point(null,null);var b=this.y.redSub(d.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(d.x).redInvm()));var g=b.redSqr().redISub(this.x).redISub(d.x),p=b.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,p)},u.prototype.dbl=function(){if(this.inf)return this;var d=this.y.redAdd(this.y);if(d.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,g=this.x.redSqr(),p=d.redInvm(),x=g.redAdd(g).redIAdd(g).redIAdd(b).redMul(p),y=x.redSqr().redISub(this.x.redAdd(this.x)),v=x.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,v)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(d){return d=new s(d,16),this.isInfinity()?this:this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve.endo?this.curve._endoWnafMulAdd([this],[d]):this.curve._wnafMul(this,d)},u.prototype.mulAdd=function(d,b,g){var p=[this,b],x=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(p,x):this.curve._wnafMulAdd(1,p,x,2)},u.prototype.jmulAdd=function(d,b,g){var p=[this,b],x=[d,g];return this.curve.endo?this.curve._endoWnafMulAdd(p,x,!0):this.curve._wnafMulAdd(1,p,x,2,!0)},u.prototype.eq=function(d){return this===d||this.inf===d.inf&&(this.inf||this.x.cmp(d.x)===0&&this.y.cmp(d.y)===0)},u.prototype.neg=function(d){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(d&&this.precomputed){var g=this.precomputed,p=function(x){return x.neg()};b.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(p)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(p)}}}return b},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,r.BasePoint),n.prototype.jpoint=function(d,b,g){return new c(this,d,b,g)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var d=this.z.redInvm(),b=d.redSqr(),g=this.x.redMul(b),p=this.y.redMul(b).redMul(d);return this.curve.point(g,p)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(d){if(this.isInfinity())return d;if(d.isInfinity())return this;var b=d.z.redSqr(),g=this.z.redSqr(),p=this.x.redMul(b),x=d.x.redMul(g),y=this.y.redMul(b.redMul(d.z)),v=d.y.redMul(g.redMul(this.z)),S=p.redSub(x),N=y.redSub(v);if(S.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var R=S.redSqr(),B=R.redMul(S),M=p.redMul(R),F=N.redSqr().redIAdd(B).redISub(M).redISub(M),q=N.redMul(M.redISub(F)).redISub(y.redMul(B)),V=this.z.redMul(d.z).redMul(S);return this.curve.jpoint(F,q,V)},c.prototype.mixedAdd=function(d){if(this.isInfinity())return d.toJ();if(d.isInfinity())return this;var b=this.z.redSqr(),g=this.x,p=d.x.redMul(b),x=this.y,y=d.y.redMul(b).redMul(this.z),v=g.redSub(p),S=x.redSub(y);if(v.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var N=v.redSqr(),R=N.redMul(v),B=g.redMul(N),M=S.redSqr().redIAdd(R).redISub(B).redISub(B),F=S.redMul(B.redISub(M)).redISub(x.redMul(R)),q=this.z.redMul(v);return this.curve.jpoint(M,F,q)},c.prototype.dblp=function(d){if(d===0)return this;if(this.isInfinity())return this;if(!d)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var g=this;for(b=0;b<d;b++)g=g.dbl();return g}var p=this.curve.a,x=this.curve.tinv,y=this.x,v=this.y,S=this.z,N=S.redSqr().redSqr(),R=v.redAdd(v);for(b=0;b<d;b++){var B=y.redSqr(),M=R.redSqr(),F=M.redSqr(),q=B.redAdd(B).redIAdd(B).redIAdd(p.redMul(N)),V=y.redMul(M),O=q.redSqr().redISub(V.redAdd(V)),T=V.redISub(O),A=q.redMul(T);A=A.redIAdd(A).redISub(F);var C=R.redMul(S);b+1<d&&(N=N.redMul(F)),y=O,S=C,R=A}return this.curve.jpoint(y,R.redMul(x),S)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var d,b,g;if(this.zOne){var p=this.x.redSqr(),x=this.y.redSqr(),y=x.redSqr(),v=this.x.redAdd(x).redSqr().redISub(p).redISub(y);v=v.redIAdd(v);var S=p.redAdd(p).redIAdd(p),N=S.redSqr().redISub(v).redISub(v),R=y.redIAdd(y);R=(R=R.redIAdd(R)).redIAdd(R),d=N,b=S.redMul(v.redISub(N)).redISub(R),g=this.y.redAdd(this.y)}else{var B=this.x.redSqr(),M=this.y.redSqr(),F=M.redSqr(),q=this.x.redAdd(M).redSqr().redISub(B).redISub(F);q=q.redIAdd(q);var V=B.redAdd(B).redIAdd(B),O=V.redSqr(),T=F.redIAdd(F);T=(T=T.redIAdd(T)).redIAdd(T),d=O.redISub(q).redISub(q),b=V.redMul(q.redISub(d)).redISub(T),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(d,b,g)},c.prototype._threeDbl=function(){var d,b,g;if(this.zOne){var p=this.x.redSqr(),x=this.y.redSqr(),y=x.redSqr(),v=this.x.redAdd(x).redSqr().redISub(p).redISub(y);v=v.redIAdd(v);var S=p.redAdd(p).redIAdd(p).redIAdd(this.curve.a),N=S.redSqr().redISub(v).redISub(v);d=N;var R=y.redIAdd(y);R=(R=R.redIAdd(R)).redIAdd(R),b=S.redMul(v.redISub(N)).redISub(R),g=this.y.redAdd(this.y)}else{var B=this.z.redSqr(),M=this.y.redSqr(),F=this.x.redMul(M),q=this.x.redSub(B).redMul(this.x.redAdd(B));q=q.redAdd(q).redIAdd(q);var V=F.redIAdd(F),O=(V=V.redIAdd(V)).redAdd(V);d=q.redSqr().redISub(O),g=this.y.redAdd(this.z).redSqr().redISub(M).redISub(B);var T=M.redSqr();T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T),b=q.redMul(V.redISub(d)).redISub(T)}return this.curve.jpoint(d,b,g)},c.prototype._dbl=function(){var d=this.curve.a,b=this.x,g=this.y,p=this.z,x=p.redSqr().redSqr(),y=b.redSqr(),v=g.redSqr(),S=y.redAdd(y).redIAdd(y).redIAdd(d.redMul(x)),N=b.redAdd(b),R=(N=N.redIAdd(N)).redMul(v),B=S.redSqr().redISub(R.redAdd(R)),M=R.redISub(B),F=v.redSqr();F=(F=(F=F.redIAdd(F)).redIAdd(F)).redIAdd(F);var q=S.redMul(M).redISub(F),V=g.redAdd(g).redMul(p);return this.curve.jpoint(B,q,V)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var d=this.x.redSqr(),b=this.y.redSqr(),g=this.z.redSqr(),p=b.redSqr(),x=d.redAdd(d).redIAdd(d),y=x.redSqr(),v=this.x.redAdd(b).redSqr().redISub(d).redISub(p),S=(v=(v=(v=v.redIAdd(v)).redAdd(v).redIAdd(v)).redISub(y)).redSqr(),N=p.redIAdd(p);N=(N=(N=N.redIAdd(N)).redIAdd(N)).redIAdd(N);var R=x.redIAdd(v).redSqr().redISub(y).redISub(S).redISub(N),B=b.redMul(R);B=(B=B.redIAdd(B)).redIAdd(B);var M=this.x.redMul(S).redISub(B);M=(M=M.redIAdd(M)).redIAdd(M);var F=this.y.redMul(R.redMul(N.redISub(R)).redISub(v.redMul(S)));F=(F=(F=F.redIAdd(F)).redIAdd(F)).redIAdd(F);var q=this.z.redAdd(v).redSqr().redISub(g).redISub(S);return this.curve.jpoint(M,F,q)},c.prototype.mul=function(d,b){return d=new s(d,b),this.curve._wnafMul(this,d)},c.prototype.eq=function(d){if(d.type==="affine")return this.eq(d.toJ());if(this===d)return!0;var b=this.z.redSqr(),g=d.z.redSqr();if(this.x.redMul(g).redISub(d.x.redMul(b)).cmpn(0)!==0)return!1;var p=b.redMul(this.z),x=g.redMul(d.z);return this.y.redMul(x).redISub(d.y.redMul(p)).cmpn(0)===0},c.prototype.eqXToP=function(d){var b=this.z.redSqr(),g=d.toRed(this.curve.red).redMul(b);if(this.x.cmp(g)===0)return!0;for(var p=d.clone(),x=this.curve.redN.redMul(b);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(x),this.x.cmp(g)===0)return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,h,f){var l,s=f,o=e("hash.js"),r=e("./curve"),t=e("./utils").assert;function n(c){c.type==="short"?this.curve=new r.short(c):c.type==="edwards"?this.curve=new r.edwards(c):this.curve=new r.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,t(this.g.validate(),"Invalid curve"),t(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(c,d){Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:function(){var b=new n(d);return Object.defineProperty(s,c,{configurable:!0,enumerable:!0,value:b}),b}})}s.PresetCurve=n,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{l=e("./precomputed/secp256k1")}catch{l=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",l]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,h,f){var l=e("bn.js"),s=e("hmac-drbg"),o=e("../utils"),r=e("../curves"),t=e("brorand"),n=o.assert,u=e("./key"),c=e("./signature");function d(b){if(!(this instanceof d))return new d(b);typeof b=="string"&&(n(Object.prototype.hasOwnProperty.call(r,b),"Unknown curve "+b),b=r[b]),b instanceof r.PresetCurve&&(b={curve:b}),this.curve=b.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=b.curve.g,this.g.precompute(b.curve.n.bitLength()+1),this.hash=b.hash||b.curve.hash}h.exports=d,d.prototype.keyPair=function(b){return new u(this,b)},d.prototype.keyFromPrivate=function(b,g){return u.fromPrivate(this,b,g)},d.prototype.keyFromPublic=function(b,g){return u.fromPublic(this,b,g)},d.prototype.genKeyPair=function(b){b||(b={});for(var g=new s({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||t(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),p=this.n.byteLength(),x=this.n.sub(new l(2));;){var y=new l(g.generate(p));if(!(y.cmp(x)>0))return y.iaddn(1),this.keyFromPrivate(y)}},d.prototype._truncateToN=function(b,g){var p=8*b.byteLength()-this.n.bitLength();return p>0&&(b=b.ushrn(p)),!g&&b.cmp(this.n)>=0?b.sub(this.n):b},d.prototype.sign=function(b,g,p,x){typeof p=="object"&&(x=p,p=null),x||(x={}),g=this.keyFromPrivate(g,p),b=this._truncateToN(new l(b,16));for(var y=this.n.byteLength(),v=g.getPrivate().toArray("be",y),S=b.toArray("be",y),N=new s({hash:this.hash,entropy:v,nonce:S,pers:x.pers,persEnc:x.persEnc||"utf8"}),R=this.n.sub(new l(1)),B=0;;B++){var M=x.k?x.k(B):new l(N.generate(this.n.byteLength()));if(!((M=this._truncateToN(M,!0)).cmpn(1)<=0||M.cmp(R)>=0)){var F=this.g.mul(M);if(!F.isInfinity()){var q=F.getX(),V=q.umod(this.n);if(V.cmpn(0)!==0){var O=M.invm(this.n).mul(V.mul(g.getPrivate()).iadd(b));if((O=O.umod(this.n)).cmpn(0)!==0){var T=(F.getY().isOdd()?1:0)|(q.cmp(V)!==0?2:0);return x.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),T^=1),new c({r:V,s:O,recoveryParam:T})}}}}}},d.prototype.verify=function(b,g,p,x){b=this._truncateToN(new l(b,16)),p=this.keyFromPublic(p,x);var y=(g=new c(g,"hex")).r,v=g.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||v.cmpn(1)<0||v.cmp(this.n)>=0)return!1;var S,N=v.invm(this.n),R=N.mul(b).umod(this.n),B=N.mul(y).umod(this.n);return this.curve._maxwellTrick?!(S=this.g.jmulAdd(R,p.getPublic(),B)).isInfinity()&&S.eqXToP(y):!(S=this.g.mulAdd(R,p.getPublic(),B)).isInfinity()&&S.getX().umod(this.n).cmp(y)===0},d.prototype.recoverPubKey=function(b,g,p,x){n((3&p)===p,"The recovery param is more than two bits"),g=new c(g,x);var y=this.n,v=new l(b),S=g.r,N=g.s,R=1&p,B=p>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&B)throw new Error("Unable to find sencond key candinate");S=B?this.curve.pointFromX(S.add(this.curve.n),R):this.curve.pointFromX(S,R);var M=g.r.invm(y),F=y.sub(v).mul(M).umod(y),q=N.mul(M).umod(y);return this.g.mulAdd(F,S,q)},d.prototype.getKeyRecoveryParam=function(b,g,p,x){if((g=new c(g,x)).recoveryParam!==null)return g.recoveryParam;for(var y=0;y<4;y++){var v;try{v=this.recoverPubKey(b,g,y)}catch{continue}if(v.eq(p))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,h,f){var l=e("bn.js"),s=e("../utils").assert;function o(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}h.exports=o,o.fromPublic=function(r,t,n){return t instanceof o?t:new o(r,{pub:t,pubEnc:n})},o.fromPrivate=function(r,t,n){return t instanceof o?t:new o(r,{priv:t,privEnc:n})},o.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(r,t){return typeof r=="string"&&(t=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,r):this.pub},o.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(r,t){this.priv=new l(r,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(r,t){if(r.x||r.y)return this.ec.curve.type==="mont"?s(r.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||s(r.x&&r.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(r.x,r.y));this.pub=this.ec.curve.decodePoint(r,t)},o.prototype.derive=function(r){return r.validate()||s(r.validate(),"public point not validated"),r.mul(this.priv).getX()},o.prototype.sign=function(r,t,n){return this.ec.sign(r,this,t,n)},o.prototype.verify=function(r,t){return this.ec.verify(r,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,h,f){var l=e("bn.js"),s=e("../utils"),o=s.assert;function r(d,b){if(d instanceof r)return d;this._importDER(d,b)||(o(d.r&&d.s,"Signature without r or s"),this.r=new l(d.r,16),this.s=new l(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function t(){this.place=0}function n(d,b){var g=d[b.place++];if(!(128&g))return g;var p=15&g;if(p===0||p>4)return!1;for(var x=0,y=0,v=b.place;y<p;y++,v++)x<<=8,x|=d[v],x>>>=0;return!(x<=127)&&(b.place=v,x)}function u(d){for(var b=0,g=d.length-1;!d[b]&&!(128&d[b+1])&&b<g;)b++;return b===0?d:d.slice(b)}function c(d,b){if(b<128)d.push(b);else{var g=1+(Math.log(b)/Math.LN2>>>3);for(d.push(128|g);--g;)d.push(b>>>(g<<3)&255);d.push(b)}}h.exports=r,r.prototype._importDER=function(d,b){d=s.toArray(d,b);var g=new t;if(d[g.place++]!==48)return!1;var p=n(d,g);if(p===!1||p+g.place!==d.length||d[g.place++]!==2)return!1;var x=n(d,g);if(x===!1)return!1;var y=d.slice(g.place,x+g.place);if(g.place+=x,d[g.place++]!==2)return!1;var v=n(d,g);if(v===!1||d.length!==v+g.place)return!1;var S=d.slice(g.place,v+g.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}return this.r=new l(y),this.s=new l(S),this.recoveryParam=null,!0},r.prototype.toDER=function(d){var b=this.r.toArray(),g=this.s.toArray();for(128&b[0]&&(b=[0].concat(b)),128&g[0]&&(g=[0].concat(g)),b=u(b),g=u(g);!(g[0]||128&g[1]);)g=g.slice(1);var p=[2];c(p,b.length),(p=p.concat(b)).push(2),c(p,g.length);var x=p.concat(g),y=[48];return c(y,x.length),y=y.concat(x),s.encode(y,d)}},{"../utils":419,"bn.js":420}],415:[function(e,h,f){var l=e("hash.js"),s=e("../curves"),o=e("../utils"),r=o.assert,t=o.parseBytes,n=e("./key"),u=e("./signature");function c(d){if(r(d==="ed25519","only tested with ed25519 so far"),!(this instanceof c))return new c(d);d=s[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=l.sha512}h.exports=c,c.prototype.sign=function(d,b){d=t(d);var g=this.keyFromSecret(b),p=this.hashInt(g.messagePrefix(),d),x=this.g.mul(p),y=this.encodePoint(x),v=this.hashInt(y,g.pubBytes(),d).mul(g.priv()),S=p.add(v).umod(this.curve.n);return this.makeSignature({R:x,S,Rencoded:y})},c.prototype.verify=function(d,b,g){d=t(d),b=this.makeSignature(b);var p=this.keyFromPublic(g),x=this.hashInt(b.Rencoded(),p.pubBytes(),d),y=this.g.mul(b.S());return b.R().add(p.pub().mul(x)).eq(y)},c.prototype.hashInt=function(){for(var d=this.hash(),b=0;b<arguments.length;b++)d.update(arguments[b]);return o.intFromLE(d.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(d){return n.fromPublic(this,d)},c.prototype.keyFromSecret=function(d){return n.fromSecret(this,d)},c.prototype.makeSignature=function(d){return d instanceof u?d:new u(this,d)},c.prototype.encodePoint=function(d){var b=d.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=d.getX().isOdd()?128:0,b},c.prototype.decodePoint=function(d){var b=(d=o.parseBytes(d)).length-1,g=d.slice(0,b).concat(-129&d[b]),p=(128&d[b])!=0,x=o.intFromLE(g);return this.curve.pointFromY(x,p)},c.prototype.encodeInt=function(d){return d.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(d){return o.intFromLE(d)},c.prototype.isPoint=function(d){return d instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,h,f){var l=e("../utils"),s=l.assert,o=l.parseBytes,r=l.cachedProperty;function t(n,u){this.eddsa=n,this._secret=o(u.secret),n.isPoint(u.pub)?this._pub=u.pub:this._pubBytes=o(u.pub)}t.fromPublic=function(n,u){return u instanceof t?u:new t(n,{pub:u})},t.fromSecret=function(n,u){return u instanceof t?u:new t(n,{secret:u})},t.prototype.secret=function(){return this._secret},r(t,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),r(t,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),r(t,"privBytes",(function(){var n=this.eddsa,u=this.hash(),c=n.encodingLength-1,d=u.slice(0,n.encodingLength);return d[0]&=248,d[c]&=127,d[c]|=64,d})),r(t,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),r(t,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),r(t,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),t.prototype.sign=function(n){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(n,this)},t.prototype.verify=function(n,u){return this.eddsa.verify(n,u,this)},t.prototype.getSecret=function(n){return s(this._secret,"KeyPair is public only"),l.encode(this.secret(),n)},t.prototype.getPublic=function(n){return l.encode(this.pubBytes(),n)},h.exports=t},{"../utils":419}],417:[function(e,h,f){var l=e("bn.js"),s=e("../utils"),o=s.assert,r=s.cachedProperty,t=s.parseBytes;function n(u,c){this.eddsa=u,typeof c!="object"&&(c=t(c)),Array.isArray(c)&&(c={R:c.slice(0,u.encodingLength),S:c.slice(u.encodingLength)}),o(c.R&&c.S,"Signature without R or S"),u.isPoint(c.R)&&(this._R=c.R),c.S instanceof l&&(this._S=c.S),this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded,this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}r(n,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),r(n,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),r(n,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),r(n,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},h.exports=n},{"../utils":419,"bn.js":420}],418:[function(e,h,f){h.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,h,f){var l=f,s=e("bn.js"),o=e("minimalistic-assert"),r=e("minimalistic-crypto-utils");l.assert=o,l.toArray=r.toArray,l.zero2=r.zero2,l.toHex=r.toHex,l.encode=r.encode,l.getNAF=function(t,n,u){var c=new Array(Math.max(t.bitLength(),u)+1);c.fill(0);for(var d=1<<n+1,b=t.clone(),g=0;g<c.length;g++){var p,x=b.andln(d-1);b.isOdd()?(p=x>(d>>1)-1?(d>>1)-x:x,b.isubn(p)):p=0,c[g]=p,b.iushrn(1)}return c},l.getJSF=function(t,n){var u=[[],[]];t=t.clone(),n=n.clone();for(var c,d=0,b=0;t.cmpn(-d)>0||n.cmpn(-b)>0;){var g,p,x=t.andln(3)+d&3,y=n.andln(3)+b&3;x===3&&(x=-1),y===3&&(y=-1),g=(1&x)==0?0:(c=t.andln(7)+d&7)!==3&&c!==5||y!==2?x:-x,u[0].push(g),p=(1&y)==0?0:(c=n.andln(7)+b&7)!==3&&c!==5||x!==2?y:-y,u[1].push(p),2*d===g+1&&(d=1-d),2*b===p+1&&(b=1-b),t.iushrn(1),n.iushrn(1)}return u},l.cachedProperty=function(t,n,u){var c="_"+n;t.prototype[n]=function(){return this[c]!==void 0?this[c]:this[c]=u.call(this)}},l.parseBytes=function(t){return typeof t=="string"?l.toArray(t,"hex"):t},l.intFromLE=function(t){return new s(t,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,h,f){arguments[4][184][0].apply(f,arguments)},{buffer:188,dup:184}],421:[function(e,h,f){h.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,h,f){var l=Object.create||function(M){var F=function(){};return F.prototype=M,new F},s=Object.keys||function(M){var F=[];for(var q in M)Object.prototype.hasOwnProperty.call(M,q)&&F.push(q);return q},o=Function.prototype.bind||function(M){var F=this;return function(){return F.apply(M,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}h.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var t,n=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),t=u.x===0}catch{t=!1}function c(M){return M._maxListeners===void 0?r.defaultMaxListeners:M._maxListeners}function d(M,F,q){if(F)M.call(q);else for(var V=M.length,O=B(M,V),T=0;T<V;++T)O[T].call(q)}function b(M,F,q,V){if(F)M.call(q,V);else for(var O=M.length,T=B(M,O),A=0;A<O;++A)T[A].call(q,V)}function g(M,F,q,V,O){if(F)M.call(q,V,O);else for(var T=M.length,A=B(M,T),C=0;C<T;++C)A[C].call(q,V,O)}function p(M,F,q,V,O,T){if(F)M.call(q,V,O,T);else for(var A=M.length,C=B(M,A),w=0;w<A;++w)C[w].call(q,V,O,T)}function x(M,F,q,V){if(F)M.apply(q,V);else for(var O=M.length,T=B(M,O),A=0;A<O;++A)T[A].apply(q,V)}function y(M,F,q,V){var O,T,A;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if((T=M._events)?(T.newListener&&(M.emit("newListener",F,q.listener?q.listener:q),T=M._events),A=T[F]):(T=M._events=l(null),M._eventsCount=0),A){if(typeof A=="function"?A=T[F]=V?[q,A]:[A,q]:V?A.unshift(q):A.push(q),!A.warned&&(O=c(M))&&O>0&&A.length>O){A.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+A.length+' "'+String(F)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');C.name="MaxListenersExceededWarning",C.emitter=M,C.type=F,C.count=A.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",C.name,C.message)}}else A=T[F]=q,++M._eventsCount;return M}function v(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var M=new Array(arguments.length),F=0;F<M.length;++F)M[F]=arguments[F];this.listener.apply(this.target,M)}}function S(M,F,q){var V={fired:!1,wrapFn:void 0,target:M,type:F,listener:q},O=o.call(v,V);return O.listener=q,V.wrapFn=O,O}function N(M,F,q){var V=M._events;if(!V)return[];var O=V[F];return O?typeof O=="function"?q?[O.listener||O]:[O]:q?(function(T){for(var A=new Array(T.length),C=0;C<A.length;++C)A[C]=T[C].listener||T[C];return A})(O):B(O,O.length):[]}function R(M){var F=this._events;if(F){var q=F[M];if(typeof q=="function")return 1;if(q)return q.length}return 0}function B(M,F){for(var q=new Array(F),V=0;V<F;++V)q[V]=M[V];return q}t?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(M){if(typeof M!="number"||M<0||M!=M)throw new TypeError('"defaultMaxListeners" must be a positive number');n=M}}):r.defaultMaxListeners=n,r.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||isNaN(M))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=M,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(M){var F,q,V,O,T,A,C=M==="error";if(A=this._events)C=C&&A.error==null;else if(!C)return!1;if(C){if(arguments.length>1&&(F=arguments[1]),F instanceof Error)throw F;var w=new Error('Unhandled "error" event. ('+F+")");throw w.context=F,w}if(!(q=A[M]))return!1;var _=typeof q=="function";switch(V=arguments.length){case 1:d(q,_,this);break;case 2:b(q,_,this,arguments[1]);break;case 3:g(q,_,this,arguments[1],arguments[2]);break;case 4:p(q,_,this,arguments[1],arguments[2],arguments[3]);break;default:for(O=new Array(V-1),T=1;T<V;T++)O[T-1]=arguments[T];x(q,_,this,O)}return!0},r.prototype.addListener=function(M,F){return y(this,M,F,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(M,F){return y(this,M,F,!0)},r.prototype.once=function(M,F){if(typeof F!="function")throw new TypeError('"listener" argument must be a function');return this.on(M,S(this,M,F)),this},r.prototype.prependOnceListener=function(M,F){if(typeof F!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(M,S(this,M,F)),this},r.prototype.removeListener=function(M,F){var q,V,O,T,A;if(typeof F!="function")throw new TypeError('"listener" argument must be a function');if(!(V=this._events))return this;if(!(q=V[M]))return this;if(q===F||q.listener===F)--this._eventsCount==0?this._events=l(null):(delete V[M],V.removeListener&&this.emit("removeListener",M,q.listener||F));else if(typeof q!="function"){for(O=-1,T=q.length-1;T>=0;T--)if(q[T]===F||q[T].listener===F){A=q[T].listener,O=T;break}if(O<0)return this;O===0?q.shift():(function(C,w){for(var _=w,j=_+1,k=C.length;j<k;_+=1,j+=1)C[_]=C[j];C.pop()})(q,O),q.length===1&&(V[M]=q[0]),V.removeListener&&this.emit("removeListener",M,A||F)}return this},r.prototype.removeAllListeners=function(M){var F,q,V;if(!(q=this._events))return this;if(!q.removeListener)return arguments.length===0?(this._events=l(null),this._eventsCount=0):q[M]&&(--this._eventsCount==0?this._events=l(null):delete q[M]),this;if(arguments.length===0){var O,T=s(q);for(V=0;V<T.length;++V)(O=T[V])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if(typeof(F=q[M])=="function")this.removeListener(M,F);else if(F)for(V=F.length-1;V>=0;V--)this.removeListener(M,F[V]);return this},r.prototype.listeners=function(M){return N(this,M,!0)},r.prototype.rawListeners=function(M){return N(this,M,!1)},r.listenerCount=function(M,F){return typeof M.listenerCount=="function"?M.listenerCount(F):R.call(M,F)},r.prototype.listenerCount=R,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("md5.js");h.exports=function(o,r,t,n){if(l.isBuffer(o)||(o=l.from(o,"binary")),r&&(l.isBuffer(r)||(r=l.from(r,"binary")),r.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var u=t/8,c=l.alloc(u),d=l.alloc(n||0),b=l.alloc(0);u>0||n>0;){var g=new s;g.update(b),g.update(o),r&&g.update(r),b=g.digest();var p=0;if(u>0){var x=c.length-u;p=Math.min(u,b.length),b.copy(c,x,0,p),u-=p}if(p<b.length&&n>0){var y=d.length-n,v=Math.min(n,b.length-p);b.copy(d,y,p,p+v),n-=v}}return b.fill(0),{key:c,iv:d}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.CsvParserStream=f.ParserOptions=f.parseFile=f.parseStream=f.parseString=f.parse=f.FormatterOptions=f.CsvFormatterStream=f.writeToPath=f.writeToString=f.writeToBuffer=f.writeToStream=f.write=f.format=void 0;var l=e("@fast-csv/format");Object.defineProperty(f,"format",{enumerable:!0,get:function(){return l.format}}),Object.defineProperty(f,"write",{enumerable:!0,get:function(){return l.write}}),Object.defineProperty(f,"writeToStream",{enumerable:!0,get:function(){return l.writeToStream}}),Object.defineProperty(f,"writeToBuffer",{enumerable:!0,get:function(){return l.writeToBuffer}}),Object.defineProperty(f,"writeToString",{enumerable:!0,get:function(){return l.writeToString}}),Object.defineProperty(f,"writeToPath",{enumerable:!0,get:function(){return l.writeToPath}}),Object.defineProperty(f,"CsvFormatterStream",{enumerable:!0,get:function(){return l.CsvFormatterStream}}),Object.defineProperty(f,"FormatterOptions",{enumerable:!0,get:function(){return l.FormatterOptions}});var s=e("@fast-csv/parse");Object.defineProperty(f,"parse",{enumerable:!0,get:function(){return s.parse}}),Object.defineProperty(f,"parseString",{enumerable:!0,get:function(){return s.parseString}}),Object.defineProperty(f,"parseStream",{enumerable:!0,get:function(){return s.parseStream}}),Object.defineProperty(f,"parseFile",{enumerable:!0,get:function(){return s.parseFile}}),Object.defineProperty(f,"ParserOptions",{enumerable:!0,get:function(){return s.ParserOptions}}),Object.defineProperty(f,"CsvParserStream",{enumerable:!0,get:function(){return s.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("readable-stream").Transform;function o(r){s.call(this),this._block=l.allocUnsafe(r),this._blockSize=r,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(o,s),o.prototype._transform=function(r,t,n){var u=null;try{this.update(r,t)}catch(c){u=c}n(u)},o.prototype._flush=function(r){var t=null;try{this.push(this.digest())}catch(n){t=n}r(t)},o.prototype.update=function(r,t){if((function(g,p){if(!l.isBuffer(g)&&typeof g!="string")throw new TypeError(p+" must be a string or a buffer")})(r,"Data"),this._finalized)throw new Error("Digest already called");l.isBuffer(r)||(r=l.from(r,t));for(var n=this._block,u=0;this._blockOffset+r.length-u>=this._blockSize;){for(var c=this._blockOffset;c<this._blockSize;)n[c++]=r[u++];this._update(),this._blockOffset=0}for(;u<r.length;)n[this._blockOffset++]=r[u++];for(var d=0,b=8*r.length;b>0;++d)this._length[d]+=b,(b=this._length[d]/4294967296|0)>0&&(this._length[d]-=4294967296*b);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();r!==void 0&&(t=t.toString(r)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},h.exports=o},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,h,f){var l=f;l.utils=e("./hash/utils"),l.common=e("./hash/common"),l.sha=e("./hash/sha"),l.ripemd=e("./hash/ripemd"),l.hmac=e("./hash/hmac"),l.sha1=l.sha.sha1,l.sha256=l.sha.sha256,l.sha224=l.sha.sha224,l.sha384=l.sha.sha384,l.sha512=l.sha.sha512,l.ripemd160=l.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,h,f){var l=e("./utils"),s=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}f.BlockHash=o,o.prototype.update=function(r,t){if(r=l.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){var n=(r=this.pending).length%this._delta8;this.pending=r.slice(r.length-n,r.length),this.pending.length===0&&(this.pending=null),r=l.join32(r,0,r.length-n,this.endian);for(var u=0;u<r.length;u+=this._delta32)this._update(r,u,u+this._delta32)}return this},o.prototype.digest=function(r){return this.update(this._pad()),s(this.pending===null),this._digest(r)},o.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,n=t-(r+this.padLength)%t,u=new Array(n+this.padLength);u[0]=128;for(var c=1;c<n;c++)u[c]=0;if(r<<=3,this.endian==="big"){for(var d=8;d<this.padLength;d++)u[c++]=0;u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=r>>>24&255,u[c++]=r>>>16&255,u[c++]=r>>>8&255,u[c++]=255&r}else for(u[c++]=255&r,u[c++]=r>>>8&255,u[c++]=r>>>16&255,u[c++]=r>>>24&255,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,d=8;d<this.padLength;d++)u[c++]=0;return u}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,h,f){var l=e("./utils"),s=e("minimalistic-assert");function o(r,t,n){if(!(this instanceof o))return new o(r,t,n);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(l.toArray(t,n))}h.exports=o,o.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),s(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},o.prototype.update=function(r,t){return this.inner.update(r,t),this},o.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,h,f){var l=e("./utils"),s=e("./common"),o=l.rotl32,r=l.sum32,t=l.sum32_3,n=l.sum32_4,u=s.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(S,N,R,B){return S<=15?N^R^B:S<=31?N&R|~N&B:S<=47?(N|~R)^B:S<=63?N&B|R&~B:N^(R|~B)}function b(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function g(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}l.inherits(c,u),f.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(S,N){for(var R=this.h[0],B=this.h[1],M=this.h[2],F=this.h[3],q=this.h[4],V=R,O=B,T=M,A=F,C=q,w=0;w<80;w++){var _=r(o(n(R,d(w,B,M,F),S[p[w]+N],b(w)),y[w]),q);R=q,q=F,F=o(M,10),M=B,B=_,_=r(o(n(V,d(79-w,O,T,A),S[x[w]+N],g(w)),v[w]),C),V=C,C=A,A=o(T,10),T=O,O=_}_=t(this.h[1],M,A),this.h[1]=t(this.h[2],F,C),this.h[2]=t(this.h[3],q,V),this.h[3]=t(this.h[4],R,O),this.h[4]=t(this.h[0],B,T),this.h[0]=_},c.prototype._digest=function(S){return S==="hex"?l.toHex32(this.h,"little"):l.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],x=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,h,f){f.sha1=e("./sha/1"),f.sha224=e("./sha/224"),f.sha256=e("./sha/256"),f.sha384=e("./sha/384"),f.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,h,f){var l=e("../utils"),s=e("../common"),o=e("./common"),r=l.rotl32,t=l.sum32,n=l.sum32_5,u=o.ft_1,c=s.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function b(){if(!(this instanceof b))return new b;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}l.inherits(b,c),h.exports=b,b.blockSize=512,b.outSize=160,b.hmacStrength=80,b.padLength=64,b.prototype._update=function(g,p){for(var x=this.W,y=0;y<16;y++)x[y]=g[p+y];for(;y<x.length;y++)x[y]=r(x[y-3]^x[y-8]^x[y-14]^x[y-16],1);var v=this.h[0],S=this.h[1],N=this.h[2],R=this.h[3],B=this.h[4];for(y=0;y<x.length;y++){var M=~~(y/20),F=n(r(v,5),u(M,S,N,R),B,x[y],d[M]);B=R,R=N,N=r(S,30),S=v,v=F}this.h[0]=t(this.h[0],v),this.h[1]=t(this.h[1],S),this.h[2]=t(this.h[2],N),this.h[3]=t(this.h[3],R),this.h[4]=t(this.h[4],B)},b.prototype._digest=function(g){return g==="hex"?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,h,f){var l=e("../utils"),s=e("./256");function o(){if(!(this instanceof o))return new o;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}l.inherits(o,s),h.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(r){return r==="hex"?l.toHex32(this.h.slice(0,7),"big"):l.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,h,f){var l=e("../utils"),s=e("../common"),o=e("./common"),r=e("minimalistic-assert"),t=l.sum32,n=l.sum32_4,u=l.sum32_5,c=o.ch32,d=o.maj32,b=o.s0_256,g=o.s1_256,p=o.g0_256,x=o.g1_256,y=s.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function S(){if(!(this instanceof S))return new S;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}l.inherits(S,y),h.exports=S,S.blockSize=512,S.outSize=256,S.hmacStrength=192,S.padLength=64,S.prototype._update=function(N,R){for(var B=this.W,M=0;M<16;M++)B[M]=N[R+M];for(;M<B.length;M++)B[M]=n(x(B[M-2]),B[M-7],p(B[M-15]),B[M-16]);var F=this.h[0],q=this.h[1],V=this.h[2],O=this.h[3],T=this.h[4],A=this.h[5],C=this.h[6],w=this.h[7];for(r(this.k.length===B.length),M=0;M<B.length;M++){var _=u(w,g(T),c(T,A,C),this.k[M],B[M]),j=t(b(F),d(F,q,V));w=C,C=A,A=T,T=t(O,_),O=V,V=q,q=F,F=t(_,j)}this.h[0]=t(this.h[0],F),this.h[1]=t(this.h[1],q),this.h[2]=t(this.h[2],V),this.h[3]=t(this.h[3],O),this.h[4]=t(this.h[4],T),this.h[5]=t(this.h[5],A),this.h[6]=t(this.h[6],C),this.h[7]=t(this.h[7],w)},S.prototype._digest=function(N){return N==="hex"?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,h,f){var l=e("../utils"),s=e("./512");function o(){if(!(this instanceof o))return new o;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}l.inherits(o,s),h.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(r){return r==="hex"?l.toHex32(this.h.slice(0,12),"big"):l.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,h,f){var l=e("../utils"),s=e("../common"),o=e("minimalistic-assert"),r=l.rotr64_hi,t=l.rotr64_lo,n=l.shr64_hi,u=l.shr64_lo,c=l.sum64,d=l.sum64_hi,b=l.sum64_lo,g=l.sum64_4_hi,p=l.sum64_4_lo,x=l.sum64_5_hi,y=l.sum64_5_lo,v=s.BlockHash,S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function N(){if(!(this instanceof N))return new N;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=S,this.W=new Array(160)}function R(j,k,E,I,D){var X=j&E^~j&D;return X<0&&(X+=4294967296),X}function B(j,k,E,I,D,X){var G=k&I^~k&X;return G<0&&(G+=4294967296),G}function M(j,k,E,I,D){var X=j&E^j&D^E&D;return X<0&&(X+=4294967296),X}function F(j,k,E,I,D,X){var G=k&I^k&X^I&X;return G<0&&(G+=4294967296),G}function q(j,k){var E=r(j,k,28)^r(k,j,2)^r(k,j,7);return E<0&&(E+=4294967296),E}function V(j,k){var E=t(j,k,28)^t(k,j,2)^t(k,j,7);return E<0&&(E+=4294967296),E}function O(j,k){var E=r(j,k,14)^r(j,k,18)^r(k,j,9);return E<0&&(E+=4294967296),E}function T(j,k){var E=t(j,k,14)^t(j,k,18)^t(k,j,9);return E<0&&(E+=4294967296),E}function A(j,k){var E=r(j,k,1)^r(j,k,8)^n(j,k,7);return E<0&&(E+=4294967296),E}function C(j,k){var E=t(j,k,1)^t(j,k,8)^u(j,k,7);return E<0&&(E+=4294967296),E}function w(j,k){var E=r(j,k,19)^r(k,j,29)^n(j,k,6);return E<0&&(E+=4294967296),E}function _(j,k){var E=t(j,k,19)^t(k,j,29)^u(j,k,6);return E<0&&(E+=4294967296),E}l.inherits(N,v),h.exports=N,N.blockSize=1024,N.outSize=512,N.hmacStrength=192,N.padLength=128,N.prototype._prepareBlock=function(j,k){for(var E=this.W,I=0;I<32;I++)E[I]=j[k+I];for(;I<E.length;I+=2){var D=w(E[I-4],E[I-3]),X=_(E[I-4],E[I-3]),G=E[I-14],K=E[I-13],U=A(E[I-30],E[I-29]),J=C(E[I-30],E[I-29]),$=E[I-32],L=E[I-31];E[I]=g(D,X,G,K,U,J,$,L),E[I+1]=p(D,X,G,K,U,J,$,L)}},N.prototype._update=function(j,k){this._prepareBlock(j,k);var E=this.W,I=this.h[0],D=this.h[1],X=this.h[2],G=this.h[3],K=this.h[4],U=this.h[5],J=this.h[6],$=this.h[7],L=this.h[8],W=this.h[9],re=this.h[10],ne=this.h[11],se=this.h[12],H=this.h[13],ce=this.h[14],ae=this.h[15];o(this.k.length===E.length);for(var Y=0;Y<E.length;Y+=2){var Q=ce,te=ae,ie=O(L,W),le=T(L,W),ee=R(L,W,re,ne,se),oe=B(L,W,re,ne,se,H),de=this.k[Y],fe=this.k[Y+1],be=E[Y],he=E[Y+1],pe=x(Q,te,ie,le,ee,oe,de,fe,be,he),ke=y(Q,te,ie,le,ee,oe,de,fe,be,he);Q=q(I,D),te=V(I,D),ie=M(I,D,X,G,K),le=F(I,D,X,G,K,U);var Ce=d(Q,te,ie,le),Ee=b(Q,te,ie,le);ce=se,ae=H,se=re,H=ne,re=L,ne=W,L=d(J,$,pe,ke),W=b($,$,pe,ke),J=K,$=U,K=X,U=G,X=I,G=D,I=d(pe,ke,Ce,Ee),D=b(pe,ke,Ce,Ee)}c(this.h,0,I,D),c(this.h,2,X,G),c(this.h,4,K,U),c(this.h,6,J,$),c(this.h,8,L,W),c(this.h,10,re,ne),c(this.h,12,se,H),c(this.h,14,ce,ae)},N.prototype._digest=function(j){return j==="hex"?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,h,f){var l=e("../utils").rotr32;function s(t,n,u){return t&n^~t&u}function o(t,n,u){return t&n^t&u^n&u}function r(t,n,u){return t^n^u}f.ft_1=function(t,n,u,c){return t===0?s(n,u,c):t===1||t===3?r(n,u,c):t===2?o(n,u,c):void 0},f.ch32=s,f.maj32=o,f.p32=r,f.s0_256=function(t){return l(t,2)^l(t,13)^l(t,22)},f.s1_256=function(t){return l(t,6)^l(t,11)^l(t,25)},f.g0_256=function(t){return l(t,7)^l(t,18)^t>>>3},f.g1_256=function(t){return l(t,17)^l(t,19)^t>>>10}},{"../utils":437}],437:[function(e,h,f){var l=e("minimalistic-assert"),s=e("inherits");function o(u,c){return(64512&u.charCodeAt(c))==55296&&!(c<0||c+1>=u.length)&&(64512&u.charCodeAt(c+1))==56320}function r(u){return(u>>>24|u>>>8&65280|u<<8&16711680|(255&u)<<24)>>>0}function t(u){return u.length===1?"0"+u:u}function n(u){return u.length===7?"0"+u:u.length===6?"00"+u:u.length===5?"000"+u:u.length===4?"0000"+u:u.length===3?"00000"+u:u.length===2?"000000"+u:u.length===1?"0000000"+u:u}f.inherits=s,f.toArray=function(u,c){if(Array.isArray(u))return u.slice();if(!u)return[];var d=[];if(typeof u=="string")if(c){if(c==="hex")for((u=u.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(u="0"+u),g=0;g<u.length;g+=2)d.push(parseInt(u[g]+u[g+1],16))}else for(var b=0,g=0;g<u.length;g++){var p=u.charCodeAt(g);p<128?d[b++]=p:p<2048?(d[b++]=p>>6|192,d[b++]=63&p|128):o(u,g)?(p=65536+((1023&p)<<10)+(1023&u.charCodeAt(++g)),d[b++]=p>>18|240,d[b++]=p>>12&63|128,d[b++]=p>>6&63|128,d[b++]=63&p|128):(d[b++]=p>>12|224,d[b++]=p>>6&63|128,d[b++]=63&p|128)}else for(g=0;g<u.length;g++)d[g]=0|u[g];return d},f.toHex=function(u){for(var c="",d=0;d<u.length;d++)c+=t(u[d].toString(16));return c},f.htonl=r,f.toHex32=function(u,c){for(var d="",b=0;b<u.length;b++){var g=u[b];c==="little"&&(g=r(g)),d+=n(g.toString(16))}return d},f.zero2=t,f.zero8=n,f.join32=function(u,c,d,b){var g=d-c;l(g%4==0);for(var p=new Array(g/4),x=0,y=c;x<p.length;x++,y+=4){var v;v=b==="big"?u[y]<<24|u[y+1]<<16|u[y+2]<<8|u[y+3]:u[y+3]<<24|u[y+2]<<16|u[y+1]<<8|u[y],p[x]=v>>>0}return p},f.split32=function(u,c){for(var d=new Array(4*u.length),b=0,g=0;b<u.length;b++,g+=4){var p=u[b];c==="big"?(d[g]=p>>>24,d[g+1]=p>>>16&255,d[g+2]=p>>>8&255,d[g+3]=255&p):(d[g+3]=p>>>24,d[g+2]=p>>>16&255,d[g+1]=p>>>8&255,d[g]=255&p)}return d},f.rotr32=function(u,c){return u>>>c|u<<32-c},f.rotl32=function(u,c){return u<<c|u>>>32-c},f.sum32=function(u,c){return u+c>>>0},f.sum32_3=function(u,c,d){return u+c+d>>>0},f.sum32_4=function(u,c,d,b){return u+c+d+b>>>0},f.sum32_5=function(u,c,d,b,g){return u+c+d+b+g>>>0},f.sum64=function(u,c,d,b){var g=u[c],p=b+u[c+1]>>>0,x=(p<b?1:0)+d+g;u[c]=x>>>0,u[c+1]=p},f.sum64_hi=function(u,c,d,b){return(c+b>>>0<c?1:0)+u+d>>>0},f.sum64_lo=function(u,c,d,b){return c+b>>>0},f.sum64_4_hi=function(u,c,d,b,g,p,x,y){var v=0,S=c;return v+=(S=S+b>>>0)<c?1:0,v+=(S=S+p>>>0)<p?1:0,u+d+g+x+(v+=(S=S+y>>>0)<y?1:0)>>>0},f.sum64_4_lo=function(u,c,d,b,g,p,x,y){return c+b+p+y>>>0},f.sum64_5_hi=function(u,c,d,b,g,p,x,y,v,S){var N=0,R=c;return N+=(R=R+b>>>0)<c?1:0,N+=(R=R+p>>>0)<p?1:0,N+=(R=R+y>>>0)<y?1:0,u+d+g+x+v+(N+=(R=R+S>>>0)<S?1:0)>>>0},f.sum64_5_lo=function(u,c,d,b,g,p,x,y,v,S){return c+b+p+y+S>>>0},f.rotr64_hi=function(u,c,d){return(c<<32-d|u>>>d)>>>0},f.rotr64_lo=function(u,c,d){return(u<<32-d|c>>>d)>>>0},f.shr64_hi=function(u,c,d){return u>>>d},f.shr64_lo=function(u,c,d){return(u<<32-d|c>>>d)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,h,f){var l=e("hash.js"),s=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=s.toArray(t.entropy,t.entropyEnc||"hex"),u=s.toArray(t.nonce,t.nonceEnc||"hex"),c=s.toArray(t.pers,t.persEnc||"hex");o(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,u,c)}h.exports=r,r.prototype._init=function(t,n,u){var c=t.concat(n).concat(u);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new l.hmac(this.hash,this.K)},r.prototype._update=function(t){var n=this._hmac().update(this.V).update([0]);t&&(n=n.update(t)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,n,u,c){typeof n!="string"&&(c=u,u=n,n=null),t=s.toArray(t,n),u=s.toArray(u,c),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(u||[])),this._reseed=1},r.prototype.generate=function(t,n,u,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(c=u,u=n,n=null),u&&(u=s.toArray(u,c||"hex"),this._update(u));for(var d=[];d.length<t;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var b=d.slice(0,t);return this._update(u),this._reseed++,s.encode(b,n)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,h,f){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */f.read=function(l,s,o,r,t){var n,u,c=8*t-r-1,d=(1<<c)-1,b=d>>1,g=-7,p=o?t-1:0,x=o?-1:1,y=l[s+p];for(p+=x,n=y&(1<<-g)-1,y>>=-g,g+=c;g>0;n=256*n+l[s+p],p+=x,g-=8);for(u=n&(1<<-g)-1,n>>=-g,g+=r;g>0;u=256*u+l[s+p],p+=x,g-=8);if(n===0)n=1-b;else{if(n===d)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,r),n-=b}return(y?-1:1)*u*Math.pow(2,n-r)},f.write=function(l,s,o,r,t,n){var u,c,d,b=8*n-t-1,g=(1<<b)-1,p=g>>1,x=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:n-1,v=r?1:-1,S=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(c=isNaN(s)?1:0,u=g):(u=Math.floor(Math.log(s)/Math.LN2),s*(d=Math.pow(2,-u))<1&&(u--,d*=2),(s+=u+p>=1?x/d:x*Math.pow(2,1-p))*d>=2&&(u++,d/=2),u+p>=g?(c=0,u=g):u+p>=1?(c=(s*d-1)*Math.pow(2,t),u+=p):(c=s*Math.pow(2,p-1)*Math.pow(2,t),u=0));t>=8;l[o+y]=255&c,y+=v,c/=256,t-=8);for(u=u<<t|c,b+=t;b>0;l[o+y]=255&u,y+=v,u/=256,b-=8);l[o+y-v]|=128*S}},{}],440:[function(e,h,f){typeof Object.create=="function"?h.exports=function(l,s){s&&(l.super_=s,l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(l,s){if(s){l.super_=s;var o=function(){};o.prototype=s.prototype,l.prototype=new o,l.prototype.constructor=l}}},{}],441:[function(e,h,f){(function(l,s,o,r,t,n,u,c){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(d){typeof f=="object"&&h!==void 0?h.exports=d():(typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:this).JSZip=d()})((function(){return(function d(b,g,p){function x(S,N){if(!g[S]){if(!b[S]){var R=typeof e=="function"&&e;if(!N&&R)return R(S,!0);if(y)return y(S,!0);var B=new Error("Cannot find module '"+S+"'");throw B.code="MODULE_NOT_FOUND",B}var M=g[S]={exports:{}};b[S][0].call(M.exports,(function(F){return x(b[S][1][F]||F)}),M,M.exports,d,b,g,p)}return g[S].exports}for(var y=typeof e=="function"&&e,v=0;v<p.length;v++)x(p[v]);return x})({1:[function(d,b,g){var p=d("./utils"),x=d("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(v){for(var S,N,R,B,M,F,q,V=[],O=0,T=v.length,A=T,C=p.getTypeOf(v)!=="string";O<v.length;)A=T-O,R=C?(S=v[O++],N=O<T?v[O++]:0,O<T?v[O++]:0):(S=v.charCodeAt(O++),N=O<T?v.charCodeAt(O++):0,O<T?v.charCodeAt(O++):0),B=S>>2,M=(3&S)<<4|N>>4,F=1<A?(15&N)<<2|R>>6:64,q=2<A?63&R:64,V.push(y.charAt(B)+y.charAt(M)+y.charAt(F)+y.charAt(q));return V.join("")},g.decode=function(v){var S,N,R,B,M,F,q=0,V=0,O="data:";if(v.substr(0,O.length)===O)throw new Error("Invalid base64 input, it looks like a data url.");var T,A=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===y.charAt(64)&&A--,v.charAt(v.length-2)===y.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=x.uint8array?new Uint8Array(0|A):new Array(0|A);q<v.length;)S=y.indexOf(v.charAt(q++))<<2|(B=y.indexOf(v.charAt(q++)))>>4,N=(15&B)<<4|(M=y.indexOf(v.charAt(q++)))>>2,R=(3&M)<<6|(F=y.indexOf(v.charAt(q++))),T[V++]=S,M!==64&&(T[V++]=N),F!==64&&(T[V++]=R);return T}},{"./support":30,"./utils":32}],2:[function(d,b,g){var p=d("./external"),x=d("./stream/DataWorker"),y=d("./stream/Crc32Probe"),v=d("./stream/DataLengthProbe");function S(N,R,B,M,F){this.compressedSize=N,this.uncompressedSize=R,this.crc32=B,this.compression=M,this.compressedContent=F}S.prototype={getContentWorker:function(){var N=new x(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),R=this;return N.on("end",(function(){if(this.streamInfo.data_length!==R.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),N},getCompressedWorker:function(){return new x(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(N,R,B){return N.pipe(new y).pipe(new v("uncompressedSize")).pipe(R.compressWorker(B)).pipe(new v("compressedSize")).withStreamInfo("compression",R)},b.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,b,g){var p=d("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},g.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,b,g){var p=d("./utils"),x=(function(){for(var y,v=[],S=0;S<256;S++){y=S;for(var N=0;N<8;N++)y=1&y?3988292384^y>>>1:y>>>1;v[S]=y}return v})();b.exports=function(y,v){return y!==void 0&&y.length?p.getTypeOf(y)!=="string"?(function(S,N,R,B){var M=x,F=0+R;S^=-1;for(var q=0;q<F;q++)S=S>>>8^M[255&(S^N[q])];return-1^S})(0|v,y,y.length):(function(S,N,R,B){var M=x,F=0+R;S^=-1;for(var q=0;q<F;q++)S=S>>>8^M[255&(S^N.charCodeAt(q))];return-1^S})(0|v,y,y.length):0}},{"./utils":32}],5:[function(d,b,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(d,b,g){var p;p=typeof Promise<"u"?Promise:d("lie"),b.exports={Promise:p}},{lie:37}],7:[function(d,b,g){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",x=d("pako"),y=d("./utils"),v=d("./stream/GenericWorker"),S=p?"uint8array":"array";function N(R,B){v.call(this,"FlateWorker/"+R),this._pako=null,this._pakoAction=R,this._pakoOptions=B,this.meta={}}g.magic="\b\0",y.inherits(N,v),N.prototype.processChunk=function(R){this.meta=R.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,R.data),!1)},N.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},N.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},N.prototype._createPako=function(){this._pako=new x[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var R=this;this._pako.onData=function(B){R.push({data:B,meta:R.meta})}},g.compressWorker=function(R){return new N("Deflate",R)},g.uncompressWorker=function(){return new N("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,b,g){function p(M,F){var q,V="";for(q=0;q<F;q++)V+=String.fromCharCode(255&M),M>>>=8;return V}function x(M,F,q,V,O,T){var A,C,w=M.file,_=M.compression,j=T!==S.utf8encode,k=y.transformTo("string",T(w.name)),E=y.transformTo("string",S.utf8encode(w.name)),I=w.comment,D=y.transformTo("string",T(I)),X=y.transformTo("string",S.utf8encode(I)),G=E.length!==w.name.length,K=X.length!==I.length,U="",J="",$="",L=w.dir,W=w.date,re={crc32:0,compressedSize:0,uncompressedSize:0};F&&!q||(re.crc32=M.crc32,re.compressedSize=M.compressedSize,re.uncompressedSize=M.uncompressedSize);var ne=0;F&&(ne|=8),j||!G&&!K||(ne|=2048);var se=0,H=0;L&&(se|=16),O==="UNIX"?(H=798,se|=(function(ae,Y){var Q=ae;return ae||(Q=Y?16893:33204),(65535&Q)<<16})(w.unixPermissions,L)):(H=20,se|=(function(ae){return 63&(ae||0)})(w.dosPermissions)),A=W.getUTCHours(),A<<=6,A|=W.getUTCMinutes(),A<<=5,A|=W.getUTCSeconds()/2,C=W.getUTCFullYear()-1980,C<<=4,C|=W.getUTCMonth()+1,C<<=5,C|=W.getUTCDate(),G&&(J=p(1,1)+p(N(k),4)+E,U+="up"+p(J.length,2)+J),K&&($=p(1,1)+p(N(D),4)+X,U+="uc"+p($.length,2)+$);var ce="";return ce+=`
\0`,ce+=p(ne,2),ce+=_.magic,ce+=p(A,2),ce+=p(C,2),ce+=p(re.crc32,4),ce+=p(re.compressedSize,4),ce+=p(re.uncompressedSize,4),ce+=p(k.length,2),ce+=p(U.length,2),{fileRecord:R.LOCAL_FILE_HEADER+ce+k+U,dirRecord:R.CENTRAL_FILE_HEADER+p(H,2)+ce+p(D.length,2)+"\0\0\0\0"+p(se,4)+p(V,4)+k+U+D}}var y=d("../utils"),v=d("../stream/GenericWorker"),S=d("../utf8"),N=d("../crc32"),R=d("../signature");function B(M,F,q,V){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=F,this.zipPlatform=q,this.encodeFileName=V,this.streamFiles=M,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(B,v),B.prototype.push=function(M){var F=M.meta.percent||0,q=this.entriesCount,V=this._sources.length;this.accumulate?this.contentBuffer.push(M):(this.bytesWritten+=M.data.length,v.prototype.push.call(this,{data:M.data,meta:{currentFile:this.currentFile,percent:q?(F+100*(q-V-1))/q:100}}))},B.prototype.openedSource=function(M){this.currentSourceOffset=this.bytesWritten,this.currentFile=M.file.name;var F=this.streamFiles&&!M.file.dir;if(F){var q=x(M,F,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:q.fileRecord,meta:{percent:0}})}else this.accumulate=!0},B.prototype.closedSource=function(M){this.accumulate=!1;var F=this.streamFiles&&!M.file.dir,q=x(M,F,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(q.dirRecord),F)this.push({data:(function(V){return R.DATA_DESCRIPTOR+p(V.crc32,4)+p(V.compressedSize,4)+p(V.uncompressedSize,4)})(M),meta:{percent:100}});else for(this.push({data:q.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},B.prototype.flush=function(){for(var M=this.bytesWritten,F=0;F<this.dirRecords.length;F++)this.push({data:this.dirRecords[F],meta:{percent:100}});var q=this.bytesWritten-M,V=(function(O,T,A,C,w){var _=y.transformTo("string",w(C));return R.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(O,2)+p(O,2)+p(T,4)+p(A,4)+p(_.length,2)+_})(this.dirRecords.length,q,M,this.zipComment,this.encodeFileName);this.push({data:V,meta:{percent:100}})},B.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},B.prototype.registerPrevious=function(M){this._sources.push(M);var F=this;return M.on("data",(function(q){F.processChunk(q)})),M.on("end",(function(){F.closedSource(F.previous.streamInfo),F._sources.length?F.prepareNextSource():F.end()})),M.on("error",(function(q){F.error(q)})),this},B.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},B.prototype.error=function(M){var F=this._sources;if(!v.prototype.error.call(this,M))return!1;for(var q=0;q<F.length;q++)try{F[q].error(M)}catch{}return!0},B.prototype.lock=function(){v.prototype.lock.call(this);for(var M=this._sources,F=0;F<M.length;F++)M[F].lock()},b.exports=B},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,b,g){var p=d("../compressions"),x=d("./ZipFileWorker");g.generateWorker=function(y,v,S){var N=new x(v.streamFiles,S,v.platform,v.encodeFileName),R=0;try{y.forEach((function(B,M){R++;var F=(function(T,A){var C=T||A,w=p[C];if(!w)throw new Error(C+" is not a valid compression method !");return w})(M.options.compression,v.compression),q=M.options.compressionOptions||v.compressionOptions||{},V=M.dir,O=M.date;M._compressWorker(F,q).withStreamInfo("file",{name:B,dir:V,date:O,comment:M.comment||"",unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions}).pipe(N)})),N.entriesCount=R}catch(B){N.error(B)}return N}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,b,g){function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var x=new p;for(var y in this)typeof this[y]!="function"&&(x[y]=this[y]);return x}}(p.prototype=d("./object")).loadAsync=d("./load"),p.support=d("./support"),p.defaults=d("./defaults"),p.version="3.10.1",p.loadAsync=function(x,y){return new p().loadAsync(x,y)},p.external=d("./external"),b.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,b,g){var p=d("./utils"),x=d("./external"),y=d("./utf8"),v=d("./zipEntries"),S=d("./stream/Crc32Probe"),N=d("./nodejsUtils");function R(B){return new x.Promise((function(M,F){var q=B.decompressed.getContentWorker().pipe(new S);q.on("error",(function(V){F(V)})).on("end",(function(){q.streamInfo.crc32!==B.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):M()})).resume()}))}b.exports=function(B,M){var F=this;return M=p.extend(M||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),N.isNode&&N.isStream(B)?x.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",B,!0,M.optimizedBinaryString,M.base64).then((function(q){var V=new v(M);return V.load(q),V})).then((function(q){var V=[x.Promise.resolve(q)],O=q.files;if(M.checkCRC32)for(var T=0;T<O.length;T++)V.push(R(O[T]));return x.Promise.all(V)})).then((function(q){for(var V=q.shift(),O=V.files,T=0;T<O.length;T++){var A=O[T],C=A.fileNameStr,w=p.resolve(A.fileNameStr);F.file(w,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:M.createFolders}),A.dir||(F.file(w).unsafeOriginalName=C)}return V.zipComment.length&&(F.comment=V.zipComment),F}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,b,g){var p=d("../utils"),x=d("../stream/GenericWorker");function y(v,S){x.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(S)}p.inherits(y,x),y.prototype._bindStream=function(v){var S=this;(this._stream=v).pause(),v.on("data",(function(N){S.push({data:N,meta:{percent:0}})})).on("error",(function(N){S.isPaused?this.generatedError=N:S.error(N)})).on("end",(function(){S.isPaused?S._upstreamEnded=!0:S.end()}))},y.prototype.pause=function(){return!!x.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,b,g){var p=d("readable-stream").Readable;function x(y,v,S){p.call(this,v),this._helper=y;var N=this;y.on("data",(function(R,B){N.push(R)||N._helper.pause(),S&&S(B)})).on("error",(function(R){N.emit("error",R)})).on("end",(function(){N.push(null)}))}d("../utils").inherits(x,p),x.prototype._read=function(){this._helper.resume()},b.exports=x},{"../utils":32,"readable-stream":16}],14:[function(d,b,g){b.exports={isNode:o!==void 0,newBufferFrom:function(p,x){if(o.from&&o.from!==Uint8Array.from)return o.from(p,x);if(typeof p=="number")throw new Error('The "data" argument must not be a number');return new o(p,x)},allocBuffer:function(p){if(o.alloc)return o.alloc(p);var x=new o(p);return x.fill(0),x},isBuffer:function(p){return o.isBuffer(p)},isStream:function(p){return p&&typeof p.on=="function"&&typeof p.pause=="function"&&typeof p.resume=="function"}}},{}],15:[function(d,b,g){function p(w,_,j){var k,E=y.getTypeOf(_),I=y.extend(j||{},N);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(w=O(w)),I.createFolders&&(k=V(w))&&T.call(this,k,!0);var D=E==="string"&&I.binary===!1&&I.base64===!1;j&&j.binary!==void 0||(I.binary=!D),(_ instanceof R&&_.uncompressedSize===0||I.dir||!_||_.length===0)&&(I.base64=!1,I.binary=!0,_="",I.compression="STORE",E="string");var X;X=_ instanceof R||_ instanceof v?_:F.isNode&&F.isStream(_)?new q(w,_):y.prepareContent(w,_,I.binary,I.optimizedBinaryString,I.base64);var G=new B(w,X,I);this.files[w]=G}var x=d("./utf8"),y=d("./utils"),v=d("./stream/GenericWorker"),S=d("./stream/StreamHelper"),N=d("./defaults"),R=d("./compressedObject"),B=d("./zipObject"),M=d("./generate"),F=d("./nodejsUtils"),q=d("./nodejs/NodejsStreamInputAdapter"),V=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var _=w.lastIndexOf("/");return 0<_?w.substring(0,_):""},O=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},T=function(w,_){return _=_!==void 0?_:N.createFolders,w=O(w),this.files[w]||p.call(this,w,null,{dir:!0,createFolders:_}),this.files[w]};function A(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var _,j,k;for(_ in this.files)k=this.files[_],(j=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&w(j,k)},filter:function(w){var _=[];return this.forEach((function(j,k){w(j,k)&&_.push(k)})),_},file:function(w,_,j){if(arguments.length!==1)return w=this.root+w,p.call(this,w,_,j),this;if(A(w)){var k=w;return this.filter((function(I,D){return!D.dir&&k.test(I)}))}var E=this.files[this.root+w];return E&&!E.dir?E:null},folder:function(w){if(!w)return this;if(A(w))return this.filter((function(E,I){return I.dir&&w.test(E)}));var _=this.root+w,j=T.call(this,_),k=this.clone();return k.root=j.name,k},remove:function(w){w=this.root+w;var _=this.files[w];if(_||(w.slice(-1)!=="/"&&(w+="/"),_=this.files[w]),_&&!_.dir)delete this.files[w];else for(var j=this.filter((function(E,I){return I.name.slice(0,w.length)===w})),k=0;k<j.length;k++)delete this.files[j[k].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var _,j={};try{if((j=y.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:x.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");y.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var k=j.comment||this.comment||"";_=M.generateWorker(this,j,k)}catch(E){(_=new v("error")).error(E)}return new S(_,j.type||"string",j.mimeType)},generateAsync:function(w,_){return this.generateInternalStream(w).accumulate(_)},generateNodeStream:function(w,_){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(_)}};b.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,b,g){b.exports=d("stream")},{stream:void 0}],17:[function(d,b,g){var p=d("./DataReader");function x(y){p.call(this,y);for(var v=0;v<this.data.length;v++)y[v]=255&y[v]}d("../utils").inherits(x,p),x.prototype.byteAt=function(y){return this.data[this.zero+y]},x.prototype.lastIndexOfSignature=function(y){for(var v=y.charCodeAt(0),S=y.charCodeAt(1),N=y.charCodeAt(2),R=y.charCodeAt(3),B=this.length-4;0<=B;--B)if(this.data[B]===v&&this.data[B+1]===S&&this.data[B+2]===N&&this.data[B+3]===R)return B-this.zero;return-1},x.prototype.readAndCheckSignature=function(y){var v=y.charCodeAt(0),S=y.charCodeAt(1),N=y.charCodeAt(2),R=y.charCodeAt(3),B=this.readData(4);return v===B[0]&&S===B[1]&&N===B[2]&&R===B[3]},x.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,v},b.exports=x},{"../utils":32,"./DataReader":18}],18:[function(d,b,g){var p=d("../utils");function x(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}x.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var v,S=0;for(this.checkOffset(y),v=this.index+y-1;v>=this.index;v--)S=(S<<8)+this.byteAt(v);return this.index+=y,S},readString:function(y){return p.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},b.exports=x},{"../utils":32}],19:[function(d,b,g){var p=d("./Uint8ArrayReader");function x(y){p.call(this,y)}d("../utils").inherits(x,p),x.prototype.readData=function(y){this.checkOffset(y);var v=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,v},b.exports=x},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,b,g){var p=d("./DataReader");function x(y){p.call(this,y)}d("../utils").inherits(x,p),x.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},x.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},x.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},x.prototype.readData=function(y){this.checkOffset(y);var v=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,v},b.exports=x},{"../utils":32,"./DataReader":18}],21:[function(d,b,g){var p=d("./ArrayReader");function x(y){p.call(this,y)}d("../utils").inherits(x,p),x.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,v},b.exports=x},{"../utils":32,"./ArrayReader":17}],22:[function(d,b,g){var p=d("../utils"),x=d("../support"),y=d("./ArrayReader"),v=d("./StringReader"),S=d("./NodeBufferReader"),N=d("./Uint8ArrayReader");b.exports=function(R){var B=p.getTypeOf(R);return p.checkSupport(B),B!=="string"||x.uint8array?B==="nodebuffer"?new S(R):x.uint8array?new N(p.transformTo("uint8array",R)):new y(p.transformTo("array",R)):new v(R)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,b,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,b,g){var p=d("./GenericWorker"),x=d("../utils");function y(v){p.call(this,"ConvertWorker to "+v),this.destType=v}x.inherits(y,p),y.prototype.processChunk=function(v){this.push({data:x.transformTo(this.destType,v.data),meta:v.meta})},b.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(d,b,g){var p=d("./GenericWorker"),x=d("../crc32");function y(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(y,p),y.prototype.processChunk=function(v){this.streamInfo.crc32=x(v.data,this.streamInfo.crc32||0),this.push(v)},b.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,b,g){var p=d("../utils"),x=d("./GenericWorker");function y(v){x.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}p.inherits(y,x),y.prototype.processChunk=function(v){if(v){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+v.data.length}x.prototype.processChunk.call(this,v)},b.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(d,b,g){var p=d("../utils"),x=d("./GenericWorker");function y(v){x.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then((function(N){S.dataIsReady=!0,S.data=N,S.max=N&&N.length||0,S.type=p.getTypeOf(N),S.isPaused||S._tickAndRepeat()}),(function(N){S.error(N)}))}p.inherits(y,x),y.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,S);break;case"uint8array":v=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":v=this.data.slice(this.index,S)}return this.index=S,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(d,b,g){function p(x){this.name=x||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(x){this.emit("data",x)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(x){this.emit("error",x)}return!0},error:function(x){return!this.isFinished&&(this.isPaused?this.generatedError=x:(this.isFinished=!0,this.emit("error",x),this.previous&&this.previous.error(x),this.cleanUp()),!0)},on:function(x,y){return this._listeners[x].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(x,y){if(this._listeners[x])for(var v=0;v<this._listeners[x].length;v++)this._listeners[x][v].call(this,y)},pipe:function(x){return x.registerPrevious(this)},registerPrevious:function(x){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=x.streamInfo,this.mergeStreamInfo(),this.previous=x;var y=this;return x.on("data",(function(v){y.processChunk(v)})),x.on("end",(function(){y.end()})),x.on("error",(function(v){y.error(v)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var x=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),x=!0),this.previous&&this.previous.resume(),!x},flush:function(){},processChunk:function(x){this.push(x)},withStreamInfo:function(x,y){return this.extraStreamInfo[x]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var x in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,x)&&(this.streamInfo[x]=this.extraStreamInfo[x])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var x="Worker "+this.name;return this.previous?this.previous+" -> "+x:x}},b.exports=p},{}],29:[function(d,b,g){var p=d("../utils"),x=d("./ConvertWorker"),y=d("./GenericWorker"),v=d("../base64"),S=d("../support"),N=d("../external"),R=null;if(S.nodestream)try{R=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function B(M,F,q){var V=F;switch(F){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=F,this._mimeType=q,p.checkSupport(V),this._worker=M.pipe(new x(V)),M.lock()}catch(O){this._worker=new y("error"),this._worker.error(O)}}B.prototype={accumulate:function(M){return(function(F,q){return new N.Promise((function(V,O){var T=[],A=F._internalType,C=F._outputType,w=F._mimeType;F.on("data",(function(_,j){T.push(_),q&&q(j)})).on("error",(function(_){T=[],O(_)})).on("end",(function(){try{var _=(function(j,k,E){switch(j){case"blob":return p.newBlob(p.transformTo("arraybuffer",k),E);case"base64":return v.encode(k);default:return p.transformTo(j,k)}})(C,(function(j,k){var E,I=0,D=null,X=0;for(E=0;E<k.length;E++)X+=k[E].length;switch(j){case"string":return k.join("");case"array":return Array.prototype.concat.apply([],k);case"uint8array":for(D=new Uint8Array(X),E=0;E<k.length;E++)D.set(k[E],I),I+=k[E].length;return D;case"nodebuffer":return o.concat(k);default:throw new Error("concat : unsupported type '"+j+"'")}})(A,T),w);V(_)}catch(j){O(j)}T=[]})).resume()}))})(this,M)},on:function(M,F){var q=this;return M==="data"?this._worker.on(M,(function(V){F.call(q,V.data,V.meta)})):this._worker.on(M,(function(){p.delay(F,arguments,q)})),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(M){if(p.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new R(this,{objectMode:this._outputType!=="nodebuffer"},M)}},b.exports=B},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,b,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=o!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var p=new ArrayBuffer(0);try{g.blob=new Blob([p],{type:"application/zip"}).size===0}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);x.append(p),g.blob=x.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!d("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(d,b,g){for(var p=d("./utils"),x=d("./support"),y=d("./nodejsUtils"),v=d("./stream/GenericWorker"),S=new Array(256),N=0;N<256;N++)S[N]=252<=N?6:248<=N?5:240<=N?4:224<=N?3:192<=N?2:1;function R(){v.call(this,"utf-8 decode"),this.leftOver=null}function B(){v.call(this,"utf-8 encode")}S[254]=S[254]=1,g.utf8encode=function(M){return x.nodebuffer?y.newBufferFrom(M,"utf-8"):(function(F){var q,V,O,T,A,C=F.length,w=0;for(T=0;T<C;T++)(64512&(V=F.charCodeAt(T)))==55296&&T+1<C&&(64512&(O=F.charCodeAt(T+1)))==56320&&(V=65536+(V-55296<<10)+(O-56320),T++),w+=V<128?1:V<2048?2:V<65536?3:4;for(q=x.uint8array?new Uint8Array(w):new Array(w),T=A=0;A<w;T++)(64512&(V=F.charCodeAt(T)))==55296&&T+1<C&&(64512&(O=F.charCodeAt(T+1)))==56320&&(V=65536+(V-55296<<10)+(O-56320),T++),V<128?q[A++]=V:(V<2048?q[A++]=192|V>>>6:(V<65536?q[A++]=224|V>>>12:(q[A++]=240|V>>>18,q[A++]=128|V>>>12&63),q[A++]=128|V>>>6&63),q[A++]=128|63&V);return q})(M)},g.utf8decode=function(M){return x.nodebuffer?p.transformTo("nodebuffer",M).toString("utf-8"):(function(F){var q,V,O,T,A=F.length,C=new Array(2*A);for(q=V=0;q<A;)if((O=F[q++])<128)C[V++]=O;else if(4<(T=S[O]))C[V++]=65533,q+=T-1;else{for(O&=T===2?31:T===3?15:7;1<T&&q<A;)O=O<<6|63&F[q++],T--;1<T?C[V++]=65533:O<65536?C[V++]=O:(O-=65536,C[V++]=55296|O>>10&1023,C[V++]=56320|1023&O)}return C.length!==V&&(C.subarray?C=C.subarray(0,V):C.length=V),p.applyFromCharCode(C)})(M=p.transformTo(x.uint8array?"uint8array":"array",M))},p.inherits(R,v),R.prototype.processChunk=function(M){var F=p.transformTo(x.uint8array?"uint8array":"array",M.data);if(this.leftOver&&this.leftOver.length){if(x.uint8array){var q=F;(F=new Uint8Array(q.length+this.leftOver.length)).set(this.leftOver,0),F.set(q,this.leftOver.length)}else F=this.leftOver.concat(F);this.leftOver=null}var V=(function(T,A){var C;for((A=A||T.length)>T.length&&(A=T.length),C=A-1;0<=C&&(192&T[C])==128;)C--;return C<0||C===0?A:C+S[T[C]]>A?C:A})(F),O=F;V!==F.length&&(x.uint8array?(O=F.subarray(0,V),this.leftOver=F.subarray(V,F.length)):(O=F.slice(0,V),this.leftOver=F.slice(V,F.length))),this.push({data:g.utf8decode(O),meta:M.meta})},R.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=R,p.inherits(B,v),B.prototype.processChunk=function(M){this.push({data:g.utf8encode(M.data),meta:M.meta})},g.Utf8EncodeWorker=B},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,b,g){var p=d("./support"),x=d("./base64"),y=d("./nodejsUtils"),v=d("./external");function S(q){return q}function N(q,V){for(var O=0;O<q.length;++O)V[O]=255&q.charCodeAt(O);return V}d("setimmediate"),g.newBlob=function(q,V){g.checkSupport("blob");try{return new Blob([q],{type:V})}catch{try{var O=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return O.append(q),O.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var R={stringifyByChunk:function(q,V,O){var T=[],A=0,C=q.length;if(C<=O)return String.fromCharCode.apply(null,q);for(;A<C;)V==="array"||V==="nodebuffer"?T.push(String.fromCharCode.apply(null,q.slice(A,Math.min(A+O,C)))):T.push(String.fromCharCode.apply(null,q.subarray(A,Math.min(A+O,C)))),A+=O;return T.join("")},stringifyByChar:function(q){for(var V="",O=0;O<q.length;O++)V+=String.fromCharCode(q[O]);return V},applyCanBeUsed:{uint8array:(function(){try{return p.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return p.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}})()}};function B(q){var V=65536,O=g.getTypeOf(q),T=!0;if(O==="uint8array"?T=R.applyCanBeUsed.uint8array:O==="nodebuffer"&&(T=R.applyCanBeUsed.nodebuffer),T)for(;1<V;)try{return R.stringifyByChunk(q,O,V)}catch{V=Math.floor(V/2)}return R.stringifyByChar(q)}function M(q,V){for(var O=0;O<q.length;O++)V[O]=q[O];return V}g.applyFromCharCode=B;var F={};F.string={string:S,array:function(q){return N(q,new Array(q.length))},arraybuffer:function(q){return F.string.uint8array(q).buffer},uint8array:function(q){return N(q,new Uint8Array(q.length))},nodebuffer:function(q){return N(q,y.allocBuffer(q.length))}},F.array={string:B,array:S,arraybuffer:function(q){return new Uint8Array(q).buffer},uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return y.newBufferFrom(q)}},F.arraybuffer={string:function(q){return B(new Uint8Array(q))},array:function(q){return M(new Uint8Array(q),new Array(q.byteLength))},arraybuffer:S,uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return y.newBufferFrom(new Uint8Array(q))}},F.uint8array={string:B,array:function(q){return M(q,new Array(q.length))},arraybuffer:function(q){return q.buffer},uint8array:S,nodebuffer:function(q){return y.newBufferFrom(q)}},F.nodebuffer={string:B,array:function(q){return M(q,new Array(q.length))},arraybuffer:function(q){return F.nodebuffer.uint8array(q).buffer},uint8array:function(q){return M(q,new Uint8Array(q.length))},nodebuffer:S},g.transformTo=function(q,V){if(V=V||"",!q)return V;g.checkSupport(q);var O=g.getTypeOf(V);return F[O][q](V)},g.resolve=function(q){for(var V=q.split("/"),O=[],T=0;T<V.length;T++){var A=V[T];A==="."||A===""&&T!==0&&T!==V.length-1||(A===".."?O.pop():O.push(A))}return O.join("/")},g.getTypeOf=function(q){return typeof q=="string"?"string":Object.prototype.toString.call(q)==="[object Array]"?"array":p.nodebuffer&&y.isBuffer(q)?"nodebuffer":p.uint8array&&q instanceof Uint8Array?"uint8array":p.arraybuffer&&q instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(q){if(!p[q.toLowerCase()])throw new Error(q+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(q){var V,O,T="";for(O=0;O<(q||"").length;O++)T+="\\x"+((V=q.charCodeAt(O))<16?"0":"")+V.toString(16).toUpperCase();return T},g.delay=function(q,V,O){c((function(){q.apply(O||null,V||[])}))},g.inherits=function(q,V){function O(){}O.prototype=V.prototype,q.prototype=new O},g.extend=function(){var q,V,O={};for(q=0;q<arguments.length;q++)for(V in arguments[q])Object.prototype.hasOwnProperty.call(arguments[q],V)&&O[V]===void 0&&(O[V]=arguments[q][V]);return O},g.prepareContent=function(q,V,O,T,A){return v.Promise.resolve(V).then((function(C){return p.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new v.Promise((function(w,_){var j=new FileReader;j.onload=function(k){w(k.target.result)},j.onerror=function(k){_(k.target.error)},j.readAsArrayBuffer(C)})):C})).then((function(C){var w=g.getTypeOf(C);return w?(w==="arraybuffer"?C=g.transformTo("uint8array",C):w==="string"&&(A?C=x.decode(C):O&&T!==!0&&(C=(function(_){return N(_,p.uint8array?new Uint8Array(_.length):new Array(_.length))})(C))),C):v.Promise.reject(new Error("Can't read the data of '"+q+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,b,g){var p=d("./reader/readerFor"),x=d("./utils"),y=d("./signature"),v=d("./zipEntry"),S=d("./support");function N(R){this.files=[],this.loadOptions=R}N.prototype={checkSignature:function(R){if(!this.reader.readAndCheckSignature(R)){this.reader.index-=4;var B=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+x.pretty(B)+", expected "+x.pretty(R)+")")}},isSignature:function(R,B){var M=this.reader.index;this.reader.setIndex(R);var F=this.reader.readString(4)===B;return this.reader.setIndex(M),F},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var R=this.reader.readData(this.zipCommentLength),B=S.uint8array?"uint8array":"array",M=x.transformTo(B,R);this.zipComment=this.loadOptions.decodeFileName(M)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var R,B,M,F=this.zip64EndOfCentralSize-44;0<F;)R=this.reader.readInt(2),B=this.reader.readInt(4),M=this.reader.readData(B),this.zip64ExtensibleData[R]={id:R,length:B,value:M}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var R,B;for(R=0;R<this.files.length;R++)B=this.files[R],this.reader.setIndex(B.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),B.readLocalPart(this.reader),B.handleUTF8(),B.processAttributes()},readCentralDir:function(){var R;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(R=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(R);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var R=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(R<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(R);var B=R;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===x.MAX_VALUE_16BITS||this.diskWithCentralDirStart===x.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===x.MAX_VALUE_16BITS||this.centralDirRecords===x.MAX_VALUE_16BITS||this.centralDirSize===x.MAX_VALUE_32BITS||this.centralDirOffset===x.MAX_VALUE_32BITS){if(this.zip64=!0,(R=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(R),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var M=this.centralDirOffset+this.centralDirSize;this.zip64&&(M+=20,M+=12+this.zip64EndOfCentralSize);var F=B-M;if(0<F)this.isSignature(B,y.CENTRAL_FILE_HEADER)||(this.reader.zero=F);else if(F<0)throw new Error("Corrupted zip: missing "+Math.abs(F)+" bytes.")},prepareReader:function(R){this.reader=p(R)},load:function(R){this.prepareReader(R),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=N},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,b,g){var p=d("./reader/readerFor"),x=d("./utils"),y=d("./compressedObject"),v=d("./crc32"),S=d("./utf8"),N=d("./compressions"),R=d("./support");function B(M,F){this.options=M,this.loadOptions=F}B.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(M){var F,q;if(M.skip(22),this.fileNameLength=M.readInt(2),q=M.readInt(2),this.fileName=M.readData(this.fileNameLength),M.skip(q),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((F=(function(V){for(var O in N)if(Object.prototype.hasOwnProperty.call(N,O)&&N[O].magic===V)return N[O];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+x.pretty(this.compressionMethod)+" unknown (inner file : "+x.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,F,M.readData(this.compressedSize))},readCentralPart:function(M){this.versionMadeBy=M.readInt(2),M.skip(2),this.bitFlag=M.readInt(2),this.compressionMethod=M.readString(2),this.date=M.readDate(),this.crc32=M.readInt(4),this.compressedSize=M.readInt(4),this.uncompressedSize=M.readInt(4);var F=M.readInt(2);if(this.extraFieldsLength=M.readInt(2),this.fileCommentLength=M.readInt(2),this.diskNumberStart=M.readInt(2),this.internalFileAttributes=M.readInt(2),this.externalFileAttributes=M.readInt(4),this.localHeaderOffset=M.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");M.skip(F),this.readExtraFields(M),this.parseZIP64ExtraField(M),this.fileComment=M.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var M=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),M==0&&(this.dosPermissions=63&this.externalFileAttributes),M==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var M=p(this.extraFields[1].value);this.uncompressedSize===x.MAX_VALUE_32BITS&&(this.uncompressedSize=M.readInt(8)),this.compressedSize===x.MAX_VALUE_32BITS&&(this.compressedSize=M.readInt(8)),this.localHeaderOffset===x.MAX_VALUE_32BITS&&(this.localHeaderOffset=M.readInt(8)),this.diskNumberStart===x.MAX_VALUE_32BITS&&(this.diskNumberStart=M.readInt(4))}},readExtraFields:function(M){var F,q,V,O=M.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});M.index+4<O;)F=M.readInt(2),q=M.readInt(2),V=M.readData(q),this.extraFields[F]={id:F,length:q,value:V};M.setIndex(O)},handleUTF8:function(){var M=R.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var F=this.findExtraFieldUnicodePath();if(F!==null)this.fileNameStr=F;else{var q=x.transformTo(M,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(q)}var V=this.findExtraFieldUnicodeComment();if(V!==null)this.fileCommentStr=V;else{var O=x.transformTo(M,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(O)}}},findExtraFieldUnicodePath:function(){var M=this.extraFields[28789];if(M){var F=p(M.value);return F.readInt(1)!==1||v(this.fileName)!==F.readInt(4)?null:S.utf8decode(F.readData(M.length-5))}return null},findExtraFieldUnicodeComment:function(){var M=this.extraFields[25461];if(M){var F=p(M.value);return F.readInt(1)!==1||v(this.fileComment)!==F.readInt(4)?null:S.utf8decode(F.readData(M.length-5))}return null}},b.exports=B},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,b,g){function p(F,q,V){this.name=F,this.dir=V.dir,this.date=V.date,this.comment=V.comment,this.unixPermissions=V.unixPermissions,this.dosPermissions=V.dosPermissions,this._data=q,this._dataBinary=V.binary,this.options={compression:V.compression,compressionOptions:V.compressionOptions}}var x=d("./stream/StreamHelper"),y=d("./stream/DataWorker"),v=d("./utf8"),S=d("./compressedObject"),N=d("./stream/GenericWorker");p.prototype={internalStream:function(F){var q=null,V="string";try{if(!F)throw new Error("No output type specified.");var O=(V=F.toLowerCase())==="string"||V==="text";V!=="binarystring"&&V!=="text"||(V="string"),q=this._decompressWorker();var T=!this._dataBinary;T&&!O&&(q=q.pipe(new v.Utf8EncodeWorker)),!T&&O&&(q=q.pipe(new v.Utf8DecodeWorker))}catch(A){(q=new N("error")).error(A)}return new x(q,V,"")},async:function(F,q){return this.internalStream(F).accumulate(q)},nodeStream:function(F,q){return this.internalStream(F||"nodebuffer").toNodejsStream(q)},_compressWorker:function(F,q){if(this._data instanceof S&&this._data.compression.magic===F.magic)return this._data.getCompressedWorker();var V=this._decompressWorker();return this._dataBinary||(V=V.pipe(new v.Utf8EncodeWorker)),S.createWorkerFrom(V,F,q)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof N?this._data:new y(this._data)}};for(var R=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],B=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},M=0;M<R.length;M++)p.prototype[R[M]]=B;b.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,b,g){(function(p){var x,y,v=p.MutationObserver||p.WebKitMutationObserver;if(v){var S=0,N=new v(F),R=p.document.createTextNode("");N.observe(R,{characterData:!0}),x=function(){R.data=S=++S%2}}else if(p.setImmediate||p.MessageChannel===void 0)x="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var q=p.document.createElement("script");q.onreadystatechange=function(){F(),q.onreadystatechange=null,q.parentNode.removeChild(q),q=null},p.document.documentElement.appendChild(q)}:function(){setTimeout(F,0)};else{var B=new p.MessageChannel;B.port1.onmessage=F,x=function(){B.port2.postMessage(0)}}var M=[];function F(){var q,V;y=!0;for(var O=M.length;O;){for(V=M,M=[],q=-1;++q<O;)V[q]();O=M.length}y=!1}b.exports=function(q){M.push(q)!==1||y||x()}}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,b,g){var p=d("immediate");function x(){}var y={},v=["REJECTED"],S=["FULFILLED"],N=["PENDING"];function R(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,O!==x&&q(this,O)}function B(O,T,A){this.promise=O,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function M(O,T,A){p((function(){var C;try{C=T(A)}catch(w){return y.reject(O,w)}C===O?y.reject(O,new TypeError("Cannot resolve promise with itself")):y.resolve(O,C)}))}function F(O){var T=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof T=="function")return function(){T.apply(O,arguments)}}function q(O,T){var A=!1;function C(j){A||(A=!0,y.reject(O,j))}function w(j){A||(A=!0,y.resolve(O,j))}var _=V((function(){T(w,C)}));_.status==="error"&&C(_.value)}function V(O,T){var A={};try{A.value=O(T),A.status="success"}catch(C){A.status="error",A.value=C}return A}(b.exports=R).prototype.finally=function(O){if(typeof O!="function")return this;var T=this.constructor;return this.then((function(A){return T.resolve(O()).then((function(){return A}))}),(function(A){return T.resolve(O()).then((function(){throw A}))}))},R.prototype.catch=function(O){return this.then(null,O)},R.prototype.then=function(O,T){if(typeof O!="function"&&this.state===S||typeof T!="function"&&this.state===v)return this;var A=new this.constructor(x);return this.state!==N?M(A,this.state===S?O:T,this.outcome):this.queue.push(new B(A,O,T)),A},B.prototype.callFulfilled=function(O){y.resolve(this.promise,O)},B.prototype.otherCallFulfilled=function(O){M(this.promise,this.onFulfilled,O)},B.prototype.callRejected=function(O){y.reject(this.promise,O)},B.prototype.otherCallRejected=function(O){M(this.promise,this.onRejected,O)},y.resolve=function(O,T){var A=V(F,T);if(A.status==="error")return y.reject(O,A.value);var C=A.value;if(C)q(O,C);else{O.state=S,O.outcome=T;for(var w=-1,_=O.queue.length;++w<_;)O.queue[w].callFulfilled(T)}return O},y.reject=function(O,T){O.state=v,O.outcome=T;for(var A=-1,C=O.queue.length;++A<C;)O.queue[A].callRejected(T);return O},R.resolve=function(O){return O instanceof this?O:y.resolve(new this(x),O)},R.reject=function(O){var T=new this(x);return y.reject(T,O)},R.all=function(O){var T=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=O.length,C=!1;if(!A)return this.resolve([]);for(var w=new Array(A),_=0,j=-1,k=new this(x);++j<A;)E(O[j],j);return k;function E(I,D){T.resolve(I).then((function(X){w[D]=X,++_!==A||C||(C=!0,y.resolve(k,w))}),(function(X){C||(C=!0,y.reject(k,X))}))}},R.race=function(O){if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=O.length,A=!1;if(!T)return this.resolve([]);for(var C,w=-1,_=new this(x);++w<T;)C=O[w],this.resolve(C).then((function(j){A||(A=!0,y.resolve(_,j))}),(function(j){A||(A=!0,y.reject(_,j))}));return _}},{immediate:36}],38:[function(d,b,g){var p={};(0,d("./lib/utils/common").assign)(p,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),b.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,b,g){var p=d("./zlib/deflate"),x=d("./utils/common"),y=d("./utils/strings"),v=d("./zlib/messages"),S=d("./zlib/zstream"),N=Object.prototype.toString;function R(M){if(!(this instanceof R))return new R(M);this.options=x.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},M||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var q=p.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(q!==0)throw new Error(v[q]);if(F.header&&p.deflateSetHeader(this.strm,F.header),F.dictionary){var V;if(V=typeof F.dictionary=="string"?y.string2buf(F.dictionary):N.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(q=p.deflateSetDictionary(this.strm,V))!==0)throw new Error(v[q]);this._dict_set=!0}}function B(M,F){var q=new R(F);if(q.push(M,!0),q.err)throw q.msg||v[q.err];return q.result}R.prototype.push=function(M,F){var q,V,O=this.strm,T=this.options.chunkSize;if(this.ended)return!1;V=F===~~F?F:F===!0?4:0,typeof M=="string"?O.input=y.string2buf(M):N.call(M)==="[object ArrayBuffer]"?O.input=new Uint8Array(M):O.input=M,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new x.Buf8(T),O.next_out=0,O.avail_out=T),(q=p.deflate(O,V))!==1&&q!==0)return this.onEnd(q),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||V!==4&&V!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(x.shrinkBuf(O.output,O.next_out))):this.onData(x.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&q!==1);return V===4?(q=p.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===0):V!==2||(this.onEnd(0),!(O.avail_out=0))},R.prototype.onData=function(M){this.chunks.push(M)},R.prototype.onEnd=function(M){M===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},g.Deflate=R,g.deflate=B,g.deflateRaw=function(M,F){return(F=F||{}).raw=!0,B(M,F)},g.gzip=function(M,F){return(F=F||{}).gzip=!0,B(M,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,b,g){var p=d("./zlib/inflate"),x=d("./utils/common"),y=d("./utils/strings"),v=d("./zlib/constants"),S=d("./zlib/messages"),N=d("./zlib/zstream"),R=d("./zlib/gzheader"),B=Object.prototype.toString;function M(q){if(!(this instanceof M))return new M(q);this.options=x.assign({chunkSize:16384,windowBits:0,to:""},q||{});var V=this.options;V.raw&&0<=V.windowBits&&V.windowBits<16&&(V.windowBits=-V.windowBits,V.windowBits===0&&(V.windowBits=-15)),!(0<=V.windowBits&&V.windowBits<16)||q&&q.windowBits||(V.windowBits+=32),15<V.windowBits&&V.windowBits<48&&(15&V.windowBits)==0&&(V.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new N,this.strm.avail_out=0;var O=p.inflateInit2(this.strm,V.windowBits);if(O!==v.Z_OK)throw new Error(S[O]);this.header=new R,p.inflateGetHeader(this.strm,this.header)}function F(q,V){var O=new M(V);if(O.push(q,!0),O.err)throw O.msg||S[O.err];return O.result}M.prototype.push=function(q,V){var O,T,A,C,w,_,j=this.strm,k=this.options.chunkSize,E=this.options.dictionary,I=!1;if(this.ended)return!1;T=V===~~V?V:V===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof q=="string"?j.input=y.binstring2buf(q):B.call(q)==="[object ArrayBuffer]"?j.input=new Uint8Array(q):j.input=q,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new x.Buf8(k),j.next_out=0,j.avail_out=k),(O=p.inflate(j,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&E&&(_=typeof E=="string"?y.string2buf(E):B.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,O=p.inflateSetDictionary(this.strm,_)),O===v.Z_BUF_ERROR&&I===!0&&(O=v.Z_OK,I=!1),O!==v.Z_STREAM_END&&O!==v.Z_OK)return this.onEnd(O),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&O!==v.Z_STREAM_END&&(j.avail_in!==0||T!==v.Z_FINISH&&T!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=y.utf8border(j.output,j.next_out),C=j.next_out-A,w=y.buf2string(j.output,A),j.next_out=C,j.avail_out=k-C,C&&x.arraySet(j.output,j.output,A,C,0),this.onData(w)):this.onData(x.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(I=!0)}while((0<j.avail_in||j.avail_out===0)&&O!==v.Z_STREAM_END);return O===v.Z_STREAM_END&&(T=v.Z_FINISH),T===v.Z_FINISH?(O=p.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===v.Z_OK):T!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(j.avail_out=0))},M.prototype.onData=function(q){this.chunks.push(q)},M.prototype.onEnd=function(q){q===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=q,this.msg=this.strm.msg},g.Inflate=M,g.inflate=F,g.inflateRaw=function(q,V){return(V=V||{}).raw=!0,F(q,V)},g.ungzip=F},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,b,g){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(v){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var N=S.shift();if(N){if(typeof N!="object")throw new TypeError(N+"must be non-object");for(var R in N)N.hasOwnProperty(R)&&(v[R]=N[R])}}return v},g.shrinkBuf=function(v,S){return v.length===S?v:v.subarray?v.subarray(0,S):(v.length=S,v)};var x={arraySet:function(v,S,N,R,B){if(S.subarray&&v.subarray)v.set(S.subarray(N,N+R),B);else for(var M=0;M<R;M++)v[B+M]=S[N+M]},flattenChunks:function(v){var S,N,R,B,M,F;for(S=R=0,N=v.length;S<N;S++)R+=v[S].length;for(F=new Uint8Array(R),S=B=0,N=v.length;S<N;S++)M=v[S],F.set(M,B),B+=M.length;return F}},y={arraySet:function(v,S,N,R,B){for(var M=0;M<R;M++)v[B+M]=S[N+M]},flattenChunks:function(v){return[].concat.apply([],v)}};g.setTyped=function(v){v?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,x)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,y))},g.setTyped(p)},{}],42:[function(d,b,g){var p=d("./common"),x=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var v=new p.Buf8(256),S=0;S<256;S++)v[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function N(R,B){if(B<65537&&(R.subarray&&y||!R.subarray&&x))return String.fromCharCode.apply(null,p.shrinkBuf(R,B));for(var M="",F=0;F<B;F++)M+=String.fromCharCode(R[F]);return M}v[254]=v[254]=1,g.string2buf=function(R){var B,M,F,q,V,O=R.length,T=0;for(q=0;q<O;q++)(64512&(M=R.charCodeAt(q)))==55296&&q+1<O&&(64512&(F=R.charCodeAt(q+1)))==56320&&(M=65536+(M-55296<<10)+(F-56320),q++),T+=M<128?1:M<2048?2:M<65536?3:4;for(B=new p.Buf8(T),q=V=0;V<T;q++)(64512&(M=R.charCodeAt(q)))==55296&&q+1<O&&(64512&(F=R.charCodeAt(q+1)))==56320&&(M=65536+(M-55296<<10)+(F-56320),q++),M<128?B[V++]=M:(M<2048?B[V++]=192|M>>>6:(M<65536?B[V++]=224|M>>>12:(B[V++]=240|M>>>18,B[V++]=128|M>>>12&63),B[V++]=128|M>>>6&63),B[V++]=128|63&M);return B},g.buf2binstring=function(R){return N(R,R.length)},g.binstring2buf=function(R){for(var B=new p.Buf8(R.length),M=0,F=B.length;M<F;M++)B[M]=R.charCodeAt(M);return B},g.buf2string=function(R,B){var M,F,q,V,O=B||R.length,T=new Array(2*O);for(M=F=0;M<O;)if((q=R[M++])<128)T[F++]=q;else if(4<(V=v[q]))T[F++]=65533,M+=V-1;else{for(q&=V===2?31:V===3?15:7;1<V&&M<O;)q=q<<6|63&R[M++],V--;1<V?T[F++]=65533:q<65536?T[F++]=q:(q-=65536,T[F++]=55296|q>>10&1023,T[F++]=56320|1023&q)}return N(T,F)},g.utf8border=function(R,B){var M;for((B=B||R.length)>R.length&&(B=R.length),M=B-1;0<=M&&(192&R[M])==128;)M--;return M<0||M===0?B:M+v[R[M]]>B?M:B}},{"./common":41}],43:[function(d,b,g){b.exports=function(p,x,y,v){for(var S=65535&p|0,N=p>>>16&65535|0,R=0;y!==0;){for(y-=R=2e3<y?2e3:y;N=N+(S=S+x[v++]|0)|0,--R;);S%=65521,N%=65521}return S|N<<16|0}},{}],44:[function(d,b,g){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,b,g){var p=(function(){for(var x,y=[],v=0;v<256;v++){x=v;for(var S=0;S<8;S++)x=1&x?3988292384^x>>>1:x>>>1;y[v]=x}return y})();b.exports=function(x,y,v,S){var N=p,R=S+v;x^=-1;for(var B=S;B<R;B++)x=x>>>8^N[255&(x^y[B])];return-1^x}},{}],46:[function(d,b,g){var p,x=d("../utils/common"),y=d("./trees"),v=d("./adler32"),S=d("./crc32"),N=d("./messages"),R=-2,B=258,M=262,F=113;function q(U,J){return U.msg=N[J],J}function V(U){return(U<<1)-(4<U?9:0)}function O(U){for(var J=U.length;0<=--J;)U[J]=0}function T(U){var J=U.state,$=J.pending;$>U.avail_out&&($=U.avail_out),$!==0&&(x.arraySet(U.output,J.pending_buf,J.pending_out,$,U.next_out),U.next_out+=$,J.pending_out+=$,U.total_out+=$,U.avail_out-=$,J.pending-=$,J.pending===0&&(J.pending_out=0))}function A(U,J){y._tr_flush_block(U,0<=U.block_start?U.block_start:-1,U.strstart-U.block_start,J),U.block_start=U.strstart,T(U.strm)}function C(U,J){U.pending_buf[U.pending++]=J}function w(U,J){U.pending_buf[U.pending++]=J>>>8&255,U.pending_buf[U.pending++]=255&J}function _(U,J){var $,L,W=U.max_chain_length,re=U.strstart,ne=U.prev_length,se=U.nice_match,H=U.strstart>U.w_size-M?U.strstart-(U.w_size-M):0,ce=U.window,ae=U.w_mask,Y=U.prev,Q=U.strstart+B,te=ce[re+ne-1],ie=ce[re+ne];U.prev_length>=U.good_match&&(W>>=2),se>U.lookahead&&(se=U.lookahead);do if(ce[($=J)+ne]===ie&&ce[$+ne-1]===te&&ce[$]===ce[re]&&ce[++$]===ce[re+1]){re+=2,$++;do;while(ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&ce[++re]===ce[++$]&&re<Q);if(L=B-(Q-re),re=Q-B,ne<L){if(U.match_start=J,se<=(ne=L))break;te=ce[re+ne-1],ie=ce[re+ne]}}while((J=Y[J&ae])>H&&--W!=0);return ne<=U.lookahead?ne:U.lookahead}function j(U){var J,$,L,W,re,ne,se,H,ce,ae,Y=U.w_size;do{if(W=U.window_size-U.lookahead-U.strstart,U.strstart>=Y+(Y-M)){for(x.arraySet(U.window,U.window,Y,Y,0),U.match_start-=Y,U.strstart-=Y,U.block_start-=Y,J=$=U.hash_size;L=U.head[--J],U.head[J]=Y<=L?L-Y:0,--$;);for(J=$=Y;L=U.prev[--J],U.prev[J]=Y<=L?L-Y:0,--$;);W+=Y}if(U.strm.avail_in===0)break;if(ne=U.strm,se=U.window,H=U.strstart+U.lookahead,ae=void 0,(ce=W)<(ae=ne.avail_in)&&(ae=ce),$=ae===0?0:(ne.avail_in-=ae,x.arraySet(se,ne.input,ne.next_in,ae,H),ne.state.wrap===1?ne.adler=v(ne.adler,se,ae,H):ne.state.wrap===2&&(ne.adler=S(ne.adler,se,ae,H)),ne.next_in+=ae,ne.total_in+=ae,ae),U.lookahead+=$,U.lookahead+U.insert>=3)for(re=U.strstart-U.insert,U.ins_h=U.window[re],U.ins_h=(U.ins_h<<U.hash_shift^U.window[re+1])&U.hash_mask;U.insert&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[re+3-1])&U.hash_mask,U.prev[re&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=re,re++,U.insert--,!(U.lookahead+U.insert<3)););}while(U.lookahead<M&&U.strm.avail_in!==0)}function k(U,J){for(var $,L;;){if(U.lookahead<M){if(j(U),U.lookahead<M&&J===0)return 1;if(U.lookahead===0)break}if($=0,U.lookahead>=3&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+3-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),$!==0&&U.strstart-$<=U.w_size-M&&(U.match_length=_(U,$)),U.match_length>=3)if(L=y._tr_tally(U,U.strstart-U.match_start,U.match_length-3),U.lookahead-=U.match_length,U.match_length<=U.max_lazy_match&&U.lookahead>=3){for(U.match_length--;U.strstart++,U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+3-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart,--U.match_length!=0;);U.strstart++}else U.strstart+=U.match_length,U.match_length=0,U.ins_h=U.window[U.strstart],U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+1])&U.hash_mask;else L=y._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++;if(L&&(A(U,!1),U.strm.avail_out===0))return 1}return U.insert=U.strstart<2?U.strstart:2,J===4?(A(U,!0),U.strm.avail_out===0?3:4):U.last_lit&&(A(U,!1),U.strm.avail_out===0)?1:2}function E(U,J){for(var $,L,W;;){if(U.lookahead<M){if(j(U),U.lookahead<M&&J===0)return 1;if(U.lookahead===0)break}if($=0,U.lookahead>=3&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+3-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),U.prev_length=U.match_length,U.prev_match=U.match_start,U.match_length=2,$!==0&&U.prev_length<U.max_lazy_match&&U.strstart-$<=U.w_size-M&&(U.match_length=_(U,$),U.match_length<=5&&(U.strategy===1||U.match_length===3&&4096<U.strstart-U.match_start)&&(U.match_length=2)),U.prev_length>=3&&U.match_length<=U.prev_length){for(W=U.strstart+U.lookahead-3,L=y._tr_tally(U,U.strstart-1-U.prev_match,U.prev_length-3),U.lookahead-=U.prev_length-1,U.prev_length-=2;++U.strstart<=W&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+3-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),--U.prev_length!=0;);if(U.match_available=0,U.match_length=2,U.strstart++,L&&(A(U,!1),U.strm.avail_out===0))return 1}else if(U.match_available){if((L=y._tr_tally(U,0,U.window[U.strstart-1]))&&A(U,!1),U.strstart++,U.lookahead--,U.strm.avail_out===0)return 1}else U.match_available=1,U.strstart++,U.lookahead--}return U.match_available&&(L=y._tr_tally(U,0,U.window[U.strstart-1]),U.match_available=0),U.insert=U.strstart<2?U.strstart:2,J===4?(A(U,!0),U.strm.avail_out===0?3:4):U.last_lit&&(A(U,!1),U.strm.avail_out===0)?1:2}function I(U,J,$,L,W){this.good_length=U,this.max_lazy=J,this.nice_length=$,this.max_chain=L,this.func=W}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(1146),this.dyn_dtree=new x.Buf16(122),this.bl_tree=new x.Buf16(78),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(16),this.heap=new x.Buf16(573),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(573),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function X(U){var J;return U&&U.state?(U.total_in=U.total_out=0,U.data_type=2,(J=U.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?42:F,U.adler=J.wrap===2?0:1,J.last_flush=0,y._tr_init(J),0):q(U,R)}function G(U){var J=X(U);return J===0&&(function($){$.window_size=2*$.w_size,O($.head),$.max_lazy_match=p[$.level].max_lazy,$.good_match=p[$.level].good_length,$.nice_match=p[$.level].nice_length,$.max_chain_length=p[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=2,$.match_available=0,$.ins_h=0})(U.state),J}function K(U,J,$,L,W,re){if(!U)return R;var ne=1;if(J===-1&&(J=6),L<0?(ne=0,L=-L):15<L&&(ne=2,L-=16),W<1||9<W||$!==8||L<8||15<L||J<0||9<J||re<0||4<re)return q(U,R);L===8&&(L=9);var se=new D;return(U.state=se).strm=U,se.wrap=ne,se.gzhead=null,se.w_bits=L,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=W+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+3-1)/3),se.window=new x.Buf8(2*se.w_size),se.head=new x.Buf16(se.hash_size),se.prev=new x.Buf16(se.w_size),se.lit_bufsize=1<<W+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new x.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=J,se.strategy=re,se.method=$,G(U)}p=[new I(0,0,0,0,(function(U,J){var $=65535;for($>U.pending_buf_size-5&&($=U.pending_buf_size-5);;){if(U.lookahead<=1){if(j(U),U.lookahead===0&&J===0)return 1;if(U.lookahead===0)break}U.strstart+=U.lookahead,U.lookahead=0;var L=U.block_start+$;if((U.strstart===0||U.strstart>=L)&&(U.lookahead=U.strstart-L,U.strstart=L,A(U,!1),U.strm.avail_out===0)||U.strstart-U.block_start>=U.w_size-M&&(A(U,!1),U.strm.avail_out===0))return 1}return U.insert=0,J===4?(A(U,!0),U.strm.avail_out===0?3:4):(U.strstart>U.block_start&&(A(U,!1),U.strm.avail_out),1)})),new I(4,4,8,4,k),new I(4,5,16,8,k),new I(4,6,32,32,k),new I(4,4,16,16,E),new I(8,16,32,32,E),new I(8,16,128,128,E),new I(8,32,128,256,E),new I(32,128,258,1024,E),new I(32,258,258,4096,E)],g.deflateInit=function(U,J){return K(U,J,8,15,8,0)},g.deflateInit2=K,g.deflateReset=G,g.deflateResetKeep=X,g.deflateSetHeader=function(U,J){return U&&U.state?U.state.wrap!==2?R:(U.state.gzhead=J,0):R},g.deflate=function(U,J){var $,L,W,re;if(!U||!U.state||5<J||J<0)return U?q(U,R):R;if(L=U.state,!U.output||!U.input&&U.avail_in!==0||L.status===666&&J!==4)return q(U,U.avail_out===0?-5:R);if(L.strm=U,$=L.last_flush,L.last_flush=J,L.status===42)if(L.wrap===2)U.adler=0,C(L,31),C(L,139),C(L,8),L.gzhead?(C(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),C(L,255&L.gzhead.time),C(L,L.gzhead.time>>8&255),C(L,L.gzhead.time>>16&255),C(L,L.gzhead.time>>24&255),C(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),C(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(C(L,255&L.gzhead.extra.length),C(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(U.adler=S(U.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(C(L,0),C(L,0),C(L,0),C(L,0),C(L,0),C(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),C(L,3),L.status=F);else{var ne=8+(L.w_bits-8<<4)<<8;ne|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(ne|=32),ne+=31-ne%31,L.status=F,w(L,ne),L.strstart!==0&&(w(L,U.adler>>>16),w(L,65535&U.adler)),U.adler=1}if(L.status===69)if(L.gzhead.extra){for(W=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),T(U),W=L.pending,L.pending!==L.pending_buf_size));)C(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){W=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),T(U),W=L.pending,L.pending===L.pending_buf_size)){re=1;break}re=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,C(L,re)}while(re!==0);L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),re===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){W=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),T(U),W=L.pending,L.pending===L.pending_buf_size)){re=1;break}re=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,C(L,re)}while(re!==0);L.gzhead.hcrc&&L.pending>W&&(U.adler=S(U.adler,L.pending_buf,L.pending-W,W)),re===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&T(U),L.pending+2<=L.pending_buf_size&&(C(L,255&U.adler),C(L,U.adler>>8&255),U.adler=0,L.status=F)):L.status=F),L.pending!==0){if(T(U),U.avail_out===0)return L.last_flush=-1,0}else if(U.avail_in===0&&V(J)<=V($)&&J!==4)return q(U,-5);if(L.status===666&&U.avail_in!==0)return q(U,-5);if(U.avail_in!==0||L.lookahead!==0||J!==0&&L.status!==666){var se=L.strategy===2?(function(H,ce){for(var ae;;){if(H.lookahead===0&&(j(H),H.lookahead===0)){if(ce===0)return 1;break}if(H.match_length=0,ae=y._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,ae&&(A(H,!1),H.strm.avail_out===0))return 1}return H.insert=0,ce===4?(A(H,!0),H.strm.avail_out===0?3:4):H.last_lit&&(A(H,!1),H.strm.avail_out===0)?1:2})(L,J):L.strategy===3?(function(H,ce){for(var ae,Y,Q,te,ie=H.window;;){if(H.lookahead<=B){if(j(H),H.lookahead<=B&&ce===0)return 1;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=3&&0<H.strstart&&(Y=ie[Q=H.strstart-1])===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]){te=H.strstart+B;do;while(Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Y===ie[++Q]&&Q<te);H.match_length=B-(te-Q),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=3?(ae=y._tr_tally(H,1,H.match_length-3),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(ae=y._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),ae&&(A(H,!1),H.strm.avail_out===0))return 1}return H.insert=0,ce===4?(A(H,!0),H.strm.avail_out===0?3:4):H.last_lit&&(A(H,!1),H.strm.avail_out===0)?1:2})(L,J):p[L.level].func(L,J);if(se!==3&&se!==4||(L.status=666),se===1||se===3)return U.avail_out===0&&(L.last_flush=-1),0;if(se===2&&(J===1?y._tr_align(L):J!==5&&(y._tr_stored_block(L,0,0,!1),J===3&&(O(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),T(U),U.avail_out===0))return L.last_flush=-1,0}return J!==4?0:L.wrap<=0?1:(L.wrap===2?(C(L,255&U.adler),C(L,U.adler>>8&255),C(L,U.adler>>16&255),C(L,U.adler>>24&255),C(L,255&U.total_in),C(L,U.total_in>>8&255),C(L,U.total_in>>16&255),C(L,U.total_in>>24&255)):(w(L,U.adler>>>16),w(L,65535&U.adler)),T(U),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?0:1)},g.deflateEnd=function(U){var J;return U&&U.state?(J=U.state.status)!==42&&J!==69&&J!==73&&J!==91&&J!==103&&J!==F&&J!==666?q(U,R):(U.state=null,J===F?q(U,-3):0):R},g.deflateSetDictionary=function(U,J){var $,L,W,re,ne,se,H,ce,ae=J.length;if(!U||!U.state||(re=($=U.state).wrap)===2||re===1&&$.status!==42||$.lookahead)return R;for(re===1&&(U.adler=v(U.adler,J,ae,0)),$.wrap=0,ae>=$.w_size&&(re===0&&(O($.head),$.strstart=0,$.block_start=0,$.insert=0),ce=new x.Buf8($.w_size),x.arraySet(ce,J,ae-$.w_size,$.w_size,0),J=ce,ae=$.w_size),ne=U.avail_in,se=U.next_in,H=U.input,U.avail_in=ae,U.next_in=0,U.input=J,j($);$.lookahead>=3;){for(L=$.strstart,W=$.lookahead-2;$.ins_h=($.ins_h<<$.hash_shift^$.window[L+3-1])&$.hash_mask,$.prev[L&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=L,L++,--W;);$.strstart=L,$.lookahead=2,j($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=2,$.match_available=0,U.next_in=se,U.input=H,U.avail_in=ne,$.wrap=re,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,b,g){b.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,b,g){b.exports=function(p,x){var y,v,S,N,R,B,M,F,q,V,O,T,A,C,w,_,j,k,E,I,D,X,G,K,U;y=p.state,v=p.next_in,K=p.input,S=v+(p.avail_in-5),N=p.next_out,U=p.output,R=N-(x-p.avail_out),B=N+(p.avail_out-257),M=y.dmax,F=y.wsize,q=y.whave,V=y.wnext,O=y.window,T=y.hold,A=y.bits,C=y.lencode,w=y.distcode,_=(1<<y.lenbits)-1,j=(1<<y.distbits)-1;e:do{A<15&&(T+=K[v++]<<A,A+=8,T+=K[v++]<<A,A+=8),k=C[T&_];t:for(;;){if(T>>>=E=k>>>24,A-=E,(E=k>>>16&255)==0)U[N++]=65535&k;else{if(!(16&E)){if((64&E)==0){k=C[(65535&k)+(T&(1<<E)-1)];continue t}if(32&E){y.mode=12;break e}p.msg="invalid literal/length code",y.mode=30;break e}I=65535&k,(E&=15)&&(A<E&&(T+=K[v++]<<A,A+=8),I+=T&(1<<E)-1,T>>>=E,A-=E),A<15&&(T+=K[v++]<<A,A+=8,T+=K[v++]<<A,A+=8),k=w[T&j];r:for(;;){if(T>>>=E=k>>>24,A-=E,!(16&(E=k>>>16&255))){if((64&E)==0){k=w[(65535&k)+(T&(1<<E)-1)];continue r}p.msg="invalid distance code",y.mode=30;break e}if(D=65535&k,A<(E&=15)&&(T+=K[v++]<<A,(A+=8)<E&&(T+=K[v++]<<A,A+=8)),M<(D+=T&(1<<E)-1)){p.msg="invalid distance too far back",y.mode=30;break e}if(T>>>=E,A-=E,(E=N-R)<D){if(q<(E=D-E)&&y.sane){p.msg="invalid distance too far back",y.mode=30;break e}if(G=O,(X=0)===V){if(X+=F-E,E<I){for(I-=E;U[N++]=O[X++],--E;);X=N-D,G=U}}else if(V<E){if(X+=F+V-E,(E-=V)<I){for(I-=E;U[N++]=O[X++],--E;);if(X=0,V<I){for(I-=E=V;U[N++]=O[X++],--E;);X=N-D,G=U}}}else if(X+=V-E,E<I){for(I-=E;U[N++]=O[X++],--E;);X=N-D,G=U}for(;2<I;)U[N++]=G[X++],U[N++]=G[X++],U[N++]=G[X++],I-=3;I&&(U[N++]=G[X++],1<I&&(U[N++]=G[X++]))}else{for(X=N-D;U[N++]=U[X++],U[N++]=U[X++],U[N++]=U[X++],2<(I-=3););I&&(U[N++]=U[X++],1<I&&(U[N++]=U[X++]))}break}}break}}while(v<S&&N<B);v-=I=A>>3,T&=(1<<(A-=I<<3))-1,p.next_in=v,p.next_out=N,p.avail_in=v<S?S-v+5:5-(v-S),p.avail_out=N<B?B-N+257:257-(N-B),y.hold=T,y.bits=A}},{}],49:[function(d,b,g){var p=d("../utils/common"),x=d("./adler32"),y=d("./crc32"),v=d("./inffast"),S=d("./inftrees"),N=-2;function R(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(_){var j;return _&&_.state?(j=_.state,_.total_in=_.total_out=j.total=0,_.msg="",j.wrap&&(_.adler=1&j.wrap),j.mode=1,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new p.Buf32(852),j.distcode=j.distdyn=new p.Buf32(592),j.sane=1,j.back=-1,0):N}function F(_){var j;return _&&_.state?((j=_.state).wsize=0,j.whave=0,j.wnext=0,M(_)):N}function q(_,j){var k,E;return _&&_.state?(E=_.state,j<0?(k=0,j=-j):(k=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?N:(E.window!==null&&E.wbits!==j&&(E.window=null),E.wrap=k,E.wbits=j,F(_))):N}function V(_,j){var k,E;return _?(E=new B,(_.state=E).window=null,(k=q(_,j))!==0&&(_.state=null),k):N}var O,T,A=!0;function C(_){if(A){var j;for(O=new p.Buf32(512),T=new p.Buf32(32),j=0;j<144;)_.lens[j++]=8;for(;j<256;)_.lens[j++]=9;for(;j<280;)_.lens[j++]=7;for(;j<288;)_.lens[j++]=8;for(S(1,_.lens,0,288,O,0,_.work,{bits:9}),j=0;j<32;)_.lens[j++]=5;S(2,_.lens,0,32,T,0,_.work,{bits:5}),A=!1}_.lencode=O,_.lenbits=9,_.distcode=T,_.distbits=5}function w(_,j,k,E){var I,D=_.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new p.Buf8(D.wsize)),E>=D.wsize?(p.arraySet(D.window,j,k-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(E<(I=D.wsize-D.wnext)&&(I=E),p.arraySet(D.window,j,k-E,I,D.wnext),(E-=I)?(p.arraySet(D.window,j,k-E,E,0),D.wnext=E,D.whave=D.wsize):(D.wnext+=I,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=I))),0}g.inflateReset=F,g.inflateReset2=q,g.inflateResetKeep=M,g.inflateInit=function(_){return V(_,15)},g.inflateInit2=V,g.inflate=function(_,j){var k,E,I,D,X,G,K,U,J,$,L,W,re,ne,se,H,ce,ae,Y,Q,te,ie,le,ee,oe=0,de=new p.Buf8(4),fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return N;(k=_.state).mode===12&&(k.mode=13),X=_.next_out,I=_.output,K=_.avail_out,D=_.next_in,E=_.input,G=_.avail_in,U=k.hold,J=k.bits,$=G,L=K,ie=0;e:for(;;)switch(k.mode){case 1:if(k.wrap===0){k.mode=13;break}for(;J<16;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(2&k.wrap&&U===35615){de[k.check=0]=255&U,de[1]=U>>>8&255,k.check=y(k.check,de,2,0),J=U=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&U)<<8)+(U>>8))%31){_.msg="incorrect header check",k.mode=30;break}if((15&U)!=8){_.msg="unknown compression method",k.mode=30;break}if(J-=4,te=8+(15&(U>>>=4)),k.wbits===0)k.wbits=te;else if(te>k.wbits){_.msg="invalid window size",k.mode=30;break}k.dmax=1<<te,_.adler=k.check=1,k.mode=512&U?10:12,J=U=0;break;case 2:for(;J<16;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(k.flags=U,(255&k.flags)!=8){_.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){_.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=U>>8&1),512&k.flags&&(de[0]=255&U,de[1]=U>>>8&255,k.check=y(k.check,de,2,0)),J=U=0,k.mode=3;case 3:for(;J<32;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.head&&(k.head.time=U),512&k.flags&&(de[0]=255&U,de[1]=U>>>8&255,de[2]=U>>>16&255,de[3]=U>>>24&255,k.check=y(k.check,de,4,0)),J=U=0,k.mode=4;case 4:for(;J<16;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.head&&(k.head.xflags=255&U,k.head.os=U>>8),512&k.flags&&(de[0]=255&U,de[1]=U>>>8&255,k.check=y(k.check,de,2,0)),J=U=0,k.mode=5;case 5:if(1024&k.flags){for(;J<16;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.length=U,k.head&&(k.head.extra_len=U),512&k.flags&&(de[0]=255&U,de[1]=U>>>8&255,k.check=y(k.check,de,2,0)),J=U=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(G<(W=k.length)&&(W=G),W&&(k.head&&(te=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),p.arraySet(k.head.extra,E,D,W,te)),512&k.flags&&(k.check=y(k.check,E,W,D)),G-=W,D+=W,k.length-=W),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(G===0)break e;for(W=0;te=E[D+W++],k.head&&te&&k.length<65536&&(k.head.name+=String.fromCharCode(te)),te&&W<G;);if(512&k.flags&&(k.check=y(k.check,E,W,D)),G-=W,D+=W,te)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(G===0)break e;for(W=0;te=E[D+W++],k.head&&te&&k.length<65536&&(k.head.comment+=String.fromCharCode(te)),te&&W<G;);if(512&k.flags&&(k.check=y(k.check,E,W,D)),G-=W,D+=W,te)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;J<16;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(U!==(65535&k.check)){_.msg="header crc mismatch",k.mode=30;break}J=U=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),_.adler=k.check=0,k.mode=12;break;case 10:for(;J<32;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}_.adler=k.check=R(U),J=U=0,k.mode=11;case 11:if(k.havedict===0)return _.next_out=X,_.avail_out=K,_.next_in=D,_.avail_in=G,k.hold=U,k.bits=J,2;_.adler=k.check=1,k.mode=12;case 12:if(j===5||j===6)break e;case 13:if(k.last){U>>>=7&J,J-=7&J,k.mode=27;break}for(;J<3;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}switch(k.last=1&U,J-=1,3&(U>>>=1)){case 0:k.mode=14;break;case 1:if(C(k),k.mode=20,j!==6)break;U>>>=2,J-=2;break e;case 2:k.mode=17;break;case 3:_.msg="invalid block type",k.mode=30}U>>>=2,J-=2;break;case 14:for(U>>>=7&J,J-=7&J;J<32;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if((65535&U)!=(U>>>16^65535)){_.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&U,J=U=0,k.mode=15,j===6)break e;case 15:k.mode=16;case 16:if(W=k.length){if(G<W&&(W=G),K<W&&(W=K),W===0)break e;p.arraySet(I,E,D,W,X),G-=W,D+=W,K-=W,X+=W,k.length-=W;break}k.mode=12;break;case 17:for(;J<14;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(k.nlen=257+(31&U),U>>>=5,J-=5,k.ndist=1+(31&U),U>>>=5,J-=5,k.ncode=4+(15&U),U>>>=4,J-=4,286<k.nlen||30<k.ndist){_.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;J<3;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.lens[fe[k.have++]]=7&U,U>>>=3,J-=3}for(;k.have<19;)k.lens[fe[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,le={bits:k.lenbits},ie=S(0,k.lens,0,19,k.lencode,0,k.work,le),k.lenbits=le.bits,ie){_.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;H=(oe=k.lencode[U&(1<<k.lenbits)-1])>>>16&255,ce=65535&oe,!((se=oe>>>24)<=J);){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(ce<16)U>>>=se,J-=se,k.lens[k.have++]=ce;else{if(ce===16){for(ee=se+2;J<ee;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(U>>>=se,J-=se,k.have===0){_.msg="invalid bit length repeat",k.mode=30;break}te=k.lens[k.have-1],W=3+(3&U),U>>>=2,J-=2}else if(ce===17){for(ee=se+3;J<ee;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}J-=se,te=0,W=3+(7&(U>>>=se)),U>>>=3,J-=3}else{for(ee=se+7;J<ee;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}J-=se,te=0,W=11+(127&(U>>>=se)),U>>>=7,J-=7}if(k.have+W>k.nlen+k.ndist){_.msg="invalid bit length repeat",k.mode=30;break}for(;W--;)k.lens[k.have++]=te}}if(k.mode===30)break;if(k.lens[256]===0){_.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,le={bits:k.lenbits},ie=S(1,k.lens,0,k.nlen,k.lencode,0,k.work,le),k.lenbits=le.bits,ie){_.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,le={bits:k.distbits},ie=S(2,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,le),k.distbits=le.bits,ie){_.msg="invalid distances set",k.mode=30;break}if(k.mode=20,j===6)break e;case 20:k.mode=21;case 21:if(6<=G&&258<=K){_.next_out=X,_.avail_out=K,_.next_in=D,_.avail_in=G,k.hold=U,k.bits=J,v(_,L),X=_.next_out,I=_.output,K=_.avail_out,D=_.next_in,E=_.input,G=_.avail_in,U=k.hold,J=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;H=(oe=k.lencode[U&(1<<k.lenbits)-1])>>>16&255,ce=65535&oe,!((se=oe>>>24)<=J);){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(H&&(240&H)==0){for(ae=se,Y=H,Q=ce;H=(oe=k.lencode[Q+((U&(1<<ae+Y)-1)>>ae)])>>>16&255,ce=65535&oe,!(ae+(se=oe>>>24)<=J);){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}U>>>=ae,J-=ae,k.back+=ae}if(U>>>=se,J-=se,k.back+=se,k.length=ce,H===0){k.mode=26;break}if(32&H){k.back=-1,k.mode=12;break}if(64&H){_.msg="invalid literal/length code",k.mode=30;break}k.extra=15&H,k.mode=22;case 22:if(k.extra){for(ee=k.extra;J<ee;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.length+=U&(1<<k.extra)-1,U>>>=k.extra,J-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;H=(oe=k.distcode[U&(1<<k.distbits)-1])>>>16&255,ce=65535&oe,!((se=oe>>>24)<=J);){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if((240&H)==0){for(ae=se,Y=H,Q=ce;H=(oe=k.distcode[Q+((U&(1<<ae+Y)-1)>>ae)])>>>16&255,ce=65535&oe,!(ae+(se=oe>>>24)<=J);){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}U>>>=ae,J-=ae,k.back+=ae}if(U>>>=se,J-=se,k.back+=se,64&H){_.msg="invalid distance code",k.mode=30;break}k.offset=ce,k.extra=15&H,k.mode=24;case 24:if(k.extra){for(ee=k.extra;J<ee;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}k.offset+=U&(1<<k.extra)-1,U>>>=k.extra,J-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){_.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(K===0)break e;if(W=L-K,k.offset>W){if((W=k.offset-W)>k.whave&&k.sane){_.msg="invalid distance too far back",k.mode=30;break}re=W>k.wnext?(W-=k.wnext,k.wsize-W):k.wnext-W,W>k.length&&(W=k.length),ne=k.window}else ne=I,re=X-k.offset,W=k.length;for(K<W&&(W=K),K-=W,k.length-=W;I[X++]=ne[re++],--W;);k.length===0&&(k.mode=21);break;case 26:if(K===0)break e;I[X++]=k.length,K--,k.mode=21;break;case 27:if(k.wrap){for(;J<32;){if(G===0)break e;G--,U|=E[D++]<<J,J+=8}if(L-=K,_.total_out+=L,k.total+=L,L&&(_.adler=k.check=k.flags?y(k.check,I,L,X-L):x(k.check,I,L,X-L)),L=K,(k.flags?U:R(U))!==k.check){_.msg="incorrect data check",k.mode=30;break}J=U=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;J<32;){if(G===0)break e;G--,U+=E[D++]<<J,J+=8}if(U!==(4294967295&k.total)){_.msg="incorrect length check",k.mode=30;break}J=U=0}k.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return N}return _.next_out=X,_.avail_out=K,_.next_in=D,_.avail_in=G,k.hold=U,k.bits=J,(k.wsize||L!==_.avail_out&&k.mode<30&&(k.mode<27||j!==4))&&w(_,_.output,_.next_out,L-_.avail_out)?(k.mode=31,-4):($-=_.avail_in,L-=_.avail_out,_.total_in+=$,_.total_out+=L,k.total+=L,k.wrap&&L&&(_.adler=k.check=k.flags?y(k.check,I,L,_.next_out-L):x(k.check,I,L,_.next_out-L)),_.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),($==0&&L===0||j===4)&&ie===0&&(ie=-5),ie)},g.inflateEnd=function(_){if(!_||!_.state)return N;var j=_.state;return j.window&&(j.window=null),_.state=null,0},g.inflateGetHeader=function(_,j){var k;return _&&_.state?(2&(k=_.state).wrap)==0?N:((k.head=j).done=!1,0):N},g.inflateSetDictionary=function(_,j){var k,E=j.length;return _&&_.state?(k=_.state).wrap!==0&&k.mode!==11?N:k.mode===11&&x(1,j,E,0)!==k.check?-3:w(_,j,E,E)?(k.mode=31,-4):(k.havedict=1,0):N},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,b,g){var p=d("../utils/common"),x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(N,R,B,M,F,q,V,O){var T,A,C,w,_,j,k,E,I,D=O.bits,X=0,G=0,K=0,U=0,J=0,$=0,L=0,W=0,re=0,ne=0,se=null,H=0,ce=new p.Buf16(16),ae=new p.Buf16(16),Y=null,Q=0;for(X=0;X<=15;X++)ce[X]=0;for(G=0;G<M;G++)ce[R[B+G]]++;for(J=D,U=15;1<=U&&ce[U]===0;U--);if(U<J&&(J=U),U===0)return F[q++]=20971520,F[q++]=20971520,O.bits=1,0;for(K=1;K<U&&ce[K]===0;K++);for(J<K&&(J=K),X=W=1;X<=15;X++)if(W<<=1,(W-=ce[X])<0)return-1;if(0<W&&(N===0||U!==1))return-1;for(ae[1]=0,X=1;X<15;X++)ae[X+1]=ae[X]+ce[X];for(G=0;G<M;G++)R[B+G]!==0&&(V[ae[R[B+G]]++]=G);if(j=N===0?(se=Y=V,19):N===1?(se=x,H-=257,Y=y,Q-=257,256):(se=v,Y=S,-1),X=K,_=q,L=G=ne=0,C=-1,w=(re=1<<($=J))-1,N===1&&852<re||N===2&&592<re)return 1;for(;;){for(k=X-L,I=V[G]<j?(E=0,V[G]):V[G]>j?(E=Y[Q+V[G]],se[H+V[G]]):(E=96,0),T=1<<X-L,K=A=1<<$;F[_+(ne>>L)+(A-=T)]=k<<24|E<<16|I|0,A!==0;);for(T=1<<X-1;ne&T;)T>>=1;if(T!==0?(ne&=T-1,ne+=T):ne=0,G++,--ce[X]==0){if(X===U)break;X=R[B+V[G]]}if(J<X&&(ne&w)!==C){for(L===0&&(L=J),_+=K,W=1<<($=X-L);$+L<U&&!((W-=ce[$+L])<=0);)$++,W<<=1;if(re+=1<<$,N===1&&852<re||N===2&&592<re)return 1;F[C=ne&w]=J<<24|$<<16|_-q|0}}return ne!==0&&(F[_+ne]=X-L<<24|64<<16|0),O.bits=J,0}},{"../utils/common":41}],51:[function(d,b,g){b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,b,g){var p=d("../utils/common");function x(Y){for(var Q=Y.length;0<=--Q;)Y[Q]=0}var y=256,v=286,S=30,N=15,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(576);x(q);var V=new Array(60);x(V);var O=new Array(512);x(O);var T=new Array(256);x(T);var A=new Array(29);x(A);var C,w,_,j=new Array(S);function k(Y,Q,te,ie,le){this.static_tree=Y,this.extra_bits=Q,this.extra_base=te,this.elems=ie,this.max_length=le,this.has_stree=Y&&Y.length}function E(Y,Q){this.dyn_tree=Y,this.max_code=0,this.stat_desc=Q}function I(Y){return Y<256?O[Y]:O[256+(Y>>>7)]}function D(Y,Q){Y.pending_buf[Y.pending++]=255&Q,Y.pending_buf[Y.pending++]=Q>>>8&255}function X(Y,Q,te){Y.bi_valid>16-te?(Y.bi_buf|=Q<<Y.bi_valid&65535,D(Y,Y.bi_buf),Y.bi_buf=Q>>16-Y.bi_valid,Y.bi_valid+=te-16):(Y.bi_buf|=Q<<Y.bi_valid&65535,Y.bi_valid+=te)}function G(Y,Q,te){X(Y,te[2*Q],te[2*Q+1])}function K(Y,Q){for(var te=0;te|=1&Y,Y>>>=1,te<<=1,0<--Q;);return te>>>1}function U(Y,Q,te){var ie,le,ee=new Array(16),oe=0;for(ie=1;ie<=N;ie++)ee[ie]=oe=oe+te[ie-1]<<1;for(le=0;le<=Q;le++){var de=Y[2*le+1];de!==0&&(Y[2*le]=K(ee[de]++,de))}}function J(Y){var Q;for(Q=0;Q<v;Q++)Y.dyn_ltree[2*Q]=0;for(Q=0;Q<S;Q++)Y.dyn_dtree[2*Q]=0;for(Q=0;Q<19;Q++)Y.bl_tree[2*Q]=0;Y.dyn_ltree[512]=1,Y.opt_len=Y.static_len=0,Y.last_lit=Y.matches=0}function $(Y){8<Y.bi_valid?D(Y,Y.bi_buf):0<Y.bi_valid&&(Y.pending_buf[Y.pending++]=Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0}function L(Y,Q,te,ie){var le=2*Q,ee=2*te;return Y[le]<Y[ee]||Y[le]===Y[ee]&&ie[Q]<=ie[te]}function W(Y,Q,te){for(var ie=Y.heap[te],le=te<<1;le<=Y.heap_len&&(le<Y.heap_len&&L(Q,Y.heap[le+1],Y.heap[le],Y.depth)&&le++,!L(Q,ie,Y.heap[le],Y.depth));)Y.heap[te]=Y.heap[le],te=le,le<<=1;Y.heap[te]=ie}function re(Y,Q,te){var ie,le,ee,oe,de=0;if(Y.last_lit!==0)for(;ie=Y.pending_buf[Y.d_buf+2*de]<<8|Y.pending_buf[Y.d_buf+2*de+1],le=Y.pending_buf[Y.l_buf+de],de++,ie===0?G(Y,le,Q):(G(Y,(ee=T[le])+y+1,Q),(oe=R[ee])!==0&&X(Y,le-=A[ee],oe),G(Y,ee=I(--ie),te),(oe=B[ee])!==0&&X(Y,ie-=j[ee],oe)),de<Y.last_lit;);G(Y,256,Q)}function ne(Y,Q){var te,ie,le,ee=Q.dyn_tree,oe=Q.stat_desc.static_tree,de=Q.stat_desc.has_stree,fe=Q.stat_desc.elems,be=-1;for(Y.heap_len=0,Y.heap_max=573,te=0;te<fe;te++)ee[2*te]!==0?(Y.heap[++Y.heap_len]=be=te,Y.depth[te]=0):ee[2*te+1]=0;for(;Y.heap_len<2;)ee[2*(le=Y.heap[++Y.heap_len]=be<2?++be:0)]=1,Y.depth[le]=0,Y.opt_len--,de&&(Y.static_len-=oe[2*le+1]);for(Q.max_code=be,te=Y.heap_len>>1;1<=te;te--)W(Y,ee,te);for(le=fe;te=Y.heap[1],Y.heap[1]=Y.heap[Y.heap_len--],W(Y,ee,1),ie=Y.heap[1],Y.heap[--Y.heap_max]=te,Y.heap[--Y.heap_max]=ie,ee[2*le]=ee[2*te]+ee[2*ie],Y.depth[le]=(Y.depth[te]>=Y.depth[ie]?Y.depth[te]:Y.depth[ie])+1,ee[2*te+1]=ee[2*ie+1]=le,Y.heap[1]=le++,W(Y,ee,1),2<=Y.heap_len;);Y.heap[--Y.heap_max]=Y.heap[1],(function(he,pe){var ke,Ce,Ee,Oe,Te,ye,Ae=pe.dyn_tree,Fe=pe.max_code,Re=pe.stat_desc.static_tree,ge=pe.stat_desc.has_stree,xe=pe.stat_desc.extra_bits,we=pe.stat_desc.extra_base,je=pe.stat_desc.max_length,Se=0;for(Oe=0;Oe<=N;Oe++)he.bl_count[Oe]=0;for(Ae[2*he.heap[he.heap_max]+1]=0,ke=he.heap_max+1;ke<573;ke++)je<(Oe=Ae[2*Ae[2*(Ce=he.heap[ke])+1]+1]+1)&&(Oe=je,Se++),Ae[2*Ce+1]=Oe,Fe<Ce||(he.bl_count[Oe]++,Te=0,we<=Ce&&(Te=xe[Ce-we]),ye=Ae[2*Ce],he.opt_len+=ye*(Oe+Te),ge&&(he.static_len+=ye*(Re[2*Ce+1]+Te)));if(Se!==0){do{for(Oe=je-1;he.bl_count[Oe]===0;)Oe--;he.bl_count[Oe]--,he.bl_count[Oe+1]+=2,he.bl_count[je]--,Se-=2}while(0<Se);for(Oe=je;Oe!==0;Oe--)for(Ce=he.bl_count[Oe];Ce!==0;)Fe<(Ee=he.heap[--ke])||(Ae[2*Ee+1]!==Oe&&(he.opt_len+=(Oe-Ae[2*Ee+1])*Ae[2*Ee],Ae[2*Ee+1]=Oe),Ce--)}})(Y,Q),U(ee,be,Y.bl_count)}function se(Y,Q,te){var ie,le,ee=-1,oe=Q[1],de=0,fe=7,be=4;for(oe===0&&(fe=138,be=3),Q[2*(te+1)+1]=65535,ie=0;ie<=te;ie++)le=oe,oe=Q[2*(ie+1)+1],++de<fe&&le===oe||(de<be?Y.bl_tree[2*le]+=de:le!==0?(le!==ee&&Y.bl_tree[2*le]++,Y.bl_tree[32]++):de<=10?Y.bl_tree[34]++:Y.bl_tree[36]++,ee=le,be=(de=0)===oe?(fe=138,3):le===oe?(fe=6,3):(fe=7,4))}function H(Y,Q,te){var ie,le,ee=-1,oe=Q[1],de=0,fe=7,be=4;for(oe===0&&(fe=138,be=3),ie=0;ie<=te;ie++)if(le=oe,oe=Q[2*(ie+1)+1],!(++de<fe&&le===oe)){if(de<be)for(;G(Y,le,Y.bl_tree),--de!=0;);else le!==0?(le!==ee&&(G(Y,le,Y.bl_tree),de--),G(Y,16,Y.bl_tree),X(Y,de-3,2)):de<=10?(G(Y,17,Y.bl_tree),X(Y,de-3,3)):(G(Y,18,Y.bl_tree),X(Y,de-11,7));ee=le,be=(de=0)===oe?(fe=138,3):le===oe?(fe=6,3):(fe=7,4)}}x(j);var ce=!1;function ae(Y,Q,te,ie){X(Y,0+(ie?1:0),3),(function(le,ee,oe,de){$(le),D(le,oe),D(le,~oe),p.arraySet(le.pending_buf,le.window,ee,oe,le.pending),le.pending+=oe})(Y,Q,te)}g._tr_init=function(Y){ce||((function(){var Q,te,ie,le,ee,oe=new Array(16);for(le=ie=0;le<28;le++)for(A[le]=ie,Q=0;Q<1<<R[le];Q++)T[ie++]=le;for(T[ie-1]=le,le=ee=0;le<16;le++)for(j[le]=ee,Q=0;Q<1<<B[le];Q++)O[ee++]=le;for(ee>>=7;le<S;le++)for(j[le]=ee<<7,Q=0;Q<1<<B[le]-7;Q++)O[256+ee++]=le;for(te=0;te<=N;te++)oe[te]=0;for(Q=0;Q<=143;)q[2*Q+1]=8,Q++,oe[8]++;for(;Q<=255;)q[2*Q+1]=9,Q++,oe[9]++;for(;Q<=279;)q[2*Q+1]=7,Q++,oe[7]++;for(;Q<=287;)q[2*Q+1]=8,Q++,oe[8]++;for(U(q,287,oe),Q=0;Q<S;Q++)V[2*Q+1]=5,V[2*Q]=K(Q,5);C=new k(q,R,257,v,N),w=new k(V,B,0,S,N),_=new k(new Array(0),M,0,19,7)})(),ce=!0),Y.l_desc=new E(Y.dyn_ltree,C),Y.d_desc=new E(Y.dyn_dtree,w),Y.bl_desc=new E(Y.bl_tree,_),Y.bi_buf=0,Y.bi_valid=0,J(Y)},g._tr_stored_block=ae,g._tr_flush_block=function(Y,Q,te,ie){var le,ee,oe=0;0<Y.level?(Y.strm.data_type===2&&(Y.strm.data_type=(function(de){var fe,be=4093624447;for(fe=0;fe<=31;fe++,be>>>=1)if(1&be&&de.dyn_ltree[2*fe]!==0)return 0;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return 1;for(fe=32;fe<y;fe++)if(de.dyn_ltree[2*fe]!==0)return 1;return 0})(Y)),ne(Y,Y.l_desc),ne(Y,Y.d_desc),oe=(function(de){var fe;for(se(de,de.dyn_ltree,de.l_desc.max_code),se(de,de.dyn_dtree,de.d_desc.max_code),ne(de,de.bl_desc),fe=18;3<=fe&&de.bl_tree[2*F[fe]+1]===0;fe--);return de.opt_len+=3*(fe+1)+5+5+4,fe})(Y),le=Y.opt_len+3+7>>>3,(ee=Y.static_len+3+7>>>3)<=le&&(le=ee)):le=ee=te+5,te+4<=le&&Q!==-1?ae(Y,Q,te,ie):Y.strategy===4||ee===le?(X(Y,2+(ie?1:0),3),re(Y,q,V)):(X(Y,4+(ie?1:0),3),(function(de,fe,be,he){var pe;for(X(de,fe-257,5),X(de,be-1,5),X(de,he-4,4),pe=0;pe<he;pe++)X(de,de.bl_tree[2*F[pe]+1],3);H(de,de.dyn_ltree,fe-1),H(de,de.dyn_dtree,be-1)})(Y,Y.l_desc.max_code+1,Y.d_desc.max_code+1,oe+1),re(Y,Y.dyn_ltree,Y.dyn_dtree)),J(Y),ie&&$(Y)},g._tr_tally=function(Y,Q,te){return Y.pending_buf[Y.d_buf+2*Y.last_lit]=Q>>>8&255,Y.pending_buf[Y.d_buf+2*Y.last_lit+1]=255&Q,Y.pending_buf[Y.l_buf+Y.last_lit]=255&te,Y.last_lit++,Q===0?Y.dyn_ltree[2*te]++:(Y.matches++,Q--,Y.dyn_ltree[2*(T[te]+y+1)]++,Y.dyn_dtree[2*I(Q)]++),Y.last_lit===Y.lit_bufsize-1},g._tr_align=function(Y){X(Y,2,3),G(Y,256,q),(function(Q){Q.bi_valid===16?(D(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)})(Y)}},{"../utils/common":41}],53:[function(d,b,g){b.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,b,g){(function(p){(function(x,y){if(!x.setImmediate){var v,S,N,R,B=1,M={},F=!1,q=x.document,V=Object.getPrototypeOf&&Object.getPrototypeOf(x);V=V&&V.setTimeout?V:x,v={}.toString.call(x.process)==="[object process]"?function(C){l.nextTick((function(){T(C)}))}:(function(){if(x.postMessage&&!x.importScripts){var C=!0,w=x.onmessage;return x.onmessage=function(){C=!1},x.postMessage("","*"),x.onmessage=w,C}})()?(R="setImmediate$"+Math.random()+"$",x.addEventListener?x.addEventListener("message",A,!1):x.attachEvent("onmessage",A),function(C){x.postMessage(R+C,"*")}):x.MessageChannel?((N=new MessageChannel).port1.onmessage=function(C){T(C.data)},function(C){N.port2.postMessage(C)}):q&&"onreadystatechange"in q.createElement("script")?(S=q.documentElement,function(C){var w=q.createElement("script");w.onreadystatechange=function(){T(C),w.onreadystatechange=null,S.removeChild(w),w=null},S.appendChild(w)}):function(C){setTimeout(T,0,C)},V.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var w=new Array(arguments.length-1),_=0;_<w.length;_++)w[_]=arguments[_+1];var j={callback:C,args:w};return M[B]=j,v(B),B++},V.clearImmediate=O}function O(C){delete M[C]}function T(C){if(F)setTimeout(T,0,C);else{var w=M[C];if(w){F=!0;try{(function(_){var j=_.callback,k=_.args;switch(k.length){case 0:j();break;case 1:j(k[0]);break;case 2:j(k[0],k[1]);break;case 3:j(k[0],k[1],k[2]);break;default:j.apply(void 0,k)}})(w)}finally{O(C),F=!1}}}}function A(C){C.source===x&&typeof C.data=="string"&&C.data.indexOf(R)===0&&T(+C.data.slice(R.length))}})(typeof self>"u"?p===void 0?this:p:self)}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}))}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,h,f){(function(l){(function(){var s=/[\\^$.*+?()[\]{}|]/g,o=RegExp(s.source),r=typeof l=="object"&&l&&l.Object===Object&&l,t=typeof self=="object"&&self&&self.Object===Object&&self,n=r||t||Function("return this")(),u=Object.prototype.toString,c=n.Symbol,d=c?c.prototype:void 0,b=d?d.toString:void 0;function g(p){if(typeof p=="string")return p;if((function(y){return typeof y=="symbol"||(function(v){return!!v&&typeof v=="object"})(y)&&u.call(y)=="[object Symbol]"})(p))return b?b.call(p):"";var x=p+"";return x=="0"&&1/p==-1/0?"-0":x}h.exports=function(p){var x;return(p=(x=p)==null?"":g(x))&&o.test(p)?p.replace(s,"\\$&"):p}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(e,h,f){(function(l){(function(){var s="[object Arguments]",o="[object Map]",r="[object Object]",t="[object Set]",n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[s]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object Boolean]"]=x["[object DataView]"]=x["[object Date]"]=x["[object Error]"]=x["[object Function]"]=x[o]=x["[object Number]"]=x[r]=x["[object RegExp]"]=x[t]=x["[object String]"]=x["[object WeakMap]"]=!1;var y=typeof l=="object"&&l&&l.Object===Object&&l,v=typeof self=="object"&&self&&self.Object===Object&&self,S=y||v||Function("return this")(),N=typeof f=="object"&&f&&!f.nodeType&&f,R=N&&typeof h=="object"&&h&&!h.nodeType&&h,B=R&&R.exports===N&&y.process,M=(function(){try{return B&&B.binding("util")}catch{}})(),F=M&&M.isTypedArray;function q(ue,_e,Me,Pe){for(var Je=-1,Be=ue?ue.length:0;++Je<Be;){var qe=ue[Je];_e(Pe,qe,Me(qe),ue)}return Pe}function V(ue,_e){for(var Me=-1,Pe=ue?ue.length:0;++Me<Pe;)if(_e(ue[Me],Me,ue))return!0;return!1}function O(ue){var _e=!1;if(ue!=null&&typeof ue.toString!="function")try{_e=!!(ue+"")}catch{}return _e}function T(ue){var _e=-1,Me=Array(ue.size);return ue.forEach((function(Pe,Je){Me[++_e]=[Je,Pe]})),Me}function A(ue){var _e=-1,Me=Array(ue.size);return ue.forEach((function(Pe){Me[++_e]=Pe})),Me}var C,w,_,j=Array.prototype,k=Function.prototype,E=Object.prototype,I=S["__core-js_shared__"],D=(C=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",X=k.toString,G=E.hasOwnProperty,K=E.toString,U=RegExp("^"+X.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=S.Symbol,$=S.Uint8Array,L=E.propertyIsEnumerable,W=j.splice,re=(w=Object.keys,_=Object,function(ue){return w(_(ue))}),ne=Le(S,"DataView"),se=Le(S,"Map"),H=Le(S,"Promise"),ce=Le(S,"Set"),ae=Le(S,"WeakMap"),Y=Le(Object,"create"),Q=ve(ne),te=ve(se),ie=ve(H),le=ve(ce),ee=ve(ae),oe=J?J.prototype:void 0,de=oe?oe.valueOf:void 0,fe=oe?oe.toString:void 0;function be(ue){var _e=-1,Me=ue?ue.length:0;for(this.clear();++_e<Me;){var Pe=ue[_e];this.set(Pe[0],Pe[1])}}function he(ue){var _e=-1,Me=ue?ue.length:0;for(this.clear();++_e<Me;){var Pe=ue[_e];this.set(Pe[0],Pe[1])}}function pe(ue){var _e=-1,Me=ue?ue.length:0;for(this.clear();++_e<Me;){var Pe=ue[_e];this.set(Pe[0],Pe[1])}}function ke(ue){var _e=-1,Me=ue?ue.length:0;for(this.__data__=new pe;++_e<Me;)this.add(ue[_e])}function Ce(ue){this.__data__=new he(ue)}function Ee(ue,_e){var Me=Ze(ue)||lt(ue)?(function(qe,gt){for(var pt=-1,mt=Array(qe);++pt<qe;)mt[pt]=gt(pt);return mt})(ue.length,String):[],Pe=Me.length,Je=!!Pe;for(var Be in ue)!G.call(ue,Be)||Je&&(Be=="length"||Ke(Be,Pe))||Me.push(Be);return Me}function Oe(ue,_e){for(var Me=ue.length;Me--;)if(Ve(ue[Me][0],_e))return Me;return-1}function Te(ue,_e,Me,Pe){return Ae(ue,(function(Je,Be,qe){_e(Pe,Je,Me(Je),qe)})),Pe}be.prototype.clear=function(){this.__data__=Y?Y(null):{}},be.prototype.delete=function(ue){return this.has(ue)&&delete this.__data__[ue]},be.prototype.get=function(ue){var _e=this.__data__;if(Y){var Me=_e[ue];return Me==="__lodash_hash_undefined__"?void 0:Me}return G.call(_e,ue)?_e[ue]:void 0},be.prototype.has=function(ue){var _e=this.__data__;return Y?_e[ue]!==void 0:G.call(_e,ue)},be.prototype.set=function(ue,_e){return this.__data__[ue]=Y&&_e===void 0?"__lodash_hash_undefined__":_e,this},he.prototype.clear=function(){this.__data__=[]},he.prototype.delete=function(ue){var _e=this.__data__,Me=Oe(_e,ue);return!(Me<0)&&(Me==_e.length-1?_e.pop():W.call(_e,Me,1),!0)},he.prototype.get=function(ue){var _e=this.__data__,Me=Oe(_e,ue);return Me<0?void 0:_e[Me][1]},he.prototype.has=function(ue){return Oe(this.__data__,ue)>-1},he.prototype.set=function(ue,_e){var Me=this.__data__,Pe=Oe(Me,ue);return Pe<0?Me.push([ue,_e]):Me[Pe][1]=_e,this},pe.prototype.clear=function(){this.__data__={hash:new be,map:new(se||he),string:new be}},pe.prototype.delete=function(ue){return ze(this,ue).delete(ue)},pe.prototype.get=function(ue){return ze(this,ue).get(ue)},pe.prototype.has=function(ue){return ze(this,ue).has(ue)},pe.prototype.set=function(ue,_e){return ze(this,ue).set(ue,_e),this},ke.prototype.add=ke.prototype.push=function(ue){return this.__data__.set(ue,"__lodash_hash_undefined__"),this},ke.prototype.has=function(ue){return this.__data__.has(ue)},Ce.prototype.clear=function(){this.__data__=new he},Ce.prototype.delete=function(ue){return this.__data__.delete(ue)},Ce.prototype.get=function(ue){return this.__data__.get(ue)},Ce.prototype.has=function(ue){return this.__data__.has(ue)},Ce.prototype.set=function(ue,_e){var Me=this.__data__;if(Me instanceof he){var Pe=Me.__data__;if(!se||Pe.length<199)return Pe.push([ue,_e]),this;Me=this.__data__=new pe(Pe)}return Me.set(ue,_e),this};var ye,Ae=(ye=function(ue,_e){return ue&&Fe(ue,_e,Vt)},function(ue,_e){if(ue==null)return ue;if(!et(ue))return ye(ue,_e);for(var Me=ue.length,Pe=-1,Je=Object(ue);++Pe<Me&&_e(Je[Pe],Pe,Je)!==!1;);return ue}),Fe=(function(ue){return function(_e,Me,Pe){for(var Je=-1,Be=Object(_e),qe=Pe(_e),gt=qe.length;gt--;){var pt=qe[++Je];if(Me(Be[pt],pt,Be)===!1)break}return _e}})();function Re(ue,_e){for(var Me=0,Pe=(_e=Ye(_e,ue)?[_e]:Ie(_e)).length;ue!=null&&Me<Pe;)ue=ue[me(_e[Me++])];return Me&&Me==Pe?ue:void 0}function ge(ue,_e){return ue!=null&&_e in Object(ue)}function xe(ue,_e,Me,Pe,Je){return ue===_e||(ue==null||_e==null||!xt(ue)&&!Dt(_e)?ue!=ue&&_e!=_e:(function(Be,qe,gt,pt,mt,nt){var wt=Ze(Be),jt=Ze(qe),kt="[object Array]",Mt="[object Array]";wt||(kt=(kt=Ge(Be))==s?r:kt),jt||(Mt=(Mt=Ge(qe))==s?r:Mt);var It=kt==r&&!O(Be),Lt=Mt==r&&!O(qe),sr=kt==Mt;if(sr&&!It)return nt||(nt=new Ce),wt||Bt(Be)?He(Be,qe,gt,pt,mt,nt):(function(St,_t,Mr,Rr,Is,Zt,xr){switch(Mr){case"[object DataView]":if(St.byteLength!=_t.byteLength||St.byteOffset!=_t.byteOffset)return!1;St=St.buffer,_t=_t.buffer;case"[object ArrayBuffer]":return!(St.byteLength!=_t.byteLength||!Rr(new $(St),new $(_t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ve(+St,+_t);case"[object Error]":return St.name==_t.name&&St.message==_t.message;case"[object RegExp]":case"[object String]":return St==_t+"";case o:var ur=T;case t:var ds=2&Zt;if(ur||(ur=A),St.size!=_t.size&&!ds)return!1;var us=xr.get(St);if(us)return us==_t;Zt|=1,xr.set(St,_t);var Zr=He(ur(St),ur(_t),Rr,Is,Zt,xr);return xr.delete(St),Zr;case"[object Symbol]":if(de)return de.call(St)==de.call(_t)}return!1})(Be,qe,kt,gt,pt,mt,nt);if(!(2&mt)){var br=It&&G.call(Be,"__wrapped__"),Sr=Lt&&G.call(qe,"__wrapped__");if(br||Sr){var Cr=br?Be.value():Be,Ir=Sr?qe.value():qe;return nt||(nt=new Ce),gt(Cr,Ir,pt,mt,nt)}}return sr?(nt||(nt=new Ce),(function(St,_t,Mr,Rr,Is,Zt){var xr=2&Is,ur=Vt(St),ds=ur.length,us=Vt(_t).length;if(ds!=us&&!xr)return!1;for(var Zr=ds;Zr--;){var Nr=ur[Zr];if(!(xr?Nr in _t:G.call(_t,Nr)))return!1}var In=Zt.get(St);if(In&&Zt.get(_t))return In==_t;var fs=!0;Zt.set(St,_t),Zt.set(_t,St);for(var Ws=xr;++Zr<ds;){Nr=ur[Zr];var Wt=St[Nr],Rt=_t[Nr];if(Rr)var fr=xr?Rr(Rt,Wt,Nr,_t,St,Zt):Rr(Wt,Rt,Nr,St,_t,Zt);if(!(fr===void 0?Wt===Rt||Mr(Wt,Rt,Rr,Is,Zt):fr)){fs=!1;break}Ws||(Ws=Nr=="constructor")}if(fs&&!Ws){var hs=St.constructor,ms=_t.constructor;hs==ms||!("constructor"in St)||!("constructor"in _t)||typeof hs=="function"&&hs instanceof hs&&typeof ms=="function"&&ms instanceof ms||(fs=!1)}return Zt.delete(St),Zt.delete(_t),fs})(Be,qe,gt,pt,mt,nt)):!1})(ue,_e,xe,Me,Pe,Je))}function we(ue){return!(!xt(ue)||(function(_e){return!!D&&D in _e})(ue))&&(ft(ue)||O(ue)?U:g).test(ve(ue))}function je(ue){return typeof ue=="function"?ue:ue==null?Jt:typeof ue=="object"?Ze(ue)?(function(Pe,Je){return Ye(Pe)&&ut(Je)?ht(me(Pe),Je):function(Be){var qe=(function(gt,pt,mt){var nt=gt==null?void 0:Re(gt,pt);return nt===void 0?mt:nt})(Be,Pe);return qe===void 0&&qe===Je?(function(gt,pt){return gt!=null&&(function(mt,nt,wt){nt=Ye(nt,mt)?[nt]:Ie(nt);for(var jt,kt=-1,Mt=nt.length;++kt<Mt;){var It=me(nt[kt]);if(!(jt=mt!=null&&wt(mt,It)))break;mt=mt[It]}return jt||!!(Mt=mt?mt.length:0)&&ct(Mt)&&Ke(It,Mt)&&(Ze(mt)||lt(mt))})(gt,pt,ge)})(Be,Pe):xe(Je,qe,void 0,3)}})(ue[0],ue[1]):(function(Pe){var Je=(function(Be){for(var qe=Vt(Be),gt=qe.length;gt--;){var pt=qe[gt],mt=Be[pt];qe[gt]=[pt,mt,ut(mt)]}return qe})(Pe);return Je.length==1&&Je[0][2]?ht(Je[0][0],Je[0][1]):function(Be){return Be===Pe||(function(qe,gt,pt,mt){var nt=pt.length,wt=nt;if(qe==null)return!wt;for(qe=Object(qe);nt--;){var jt=pt[nt];if(jt[2]?jt[1]!==qe[jt[0]]:!(jt[0]in qe))return!1}for(;++nt<wt;){var kt=(jt=pt[nt])[0],Mt=qe[kt],It=jt[1];if(jt[2]){if(Mt===void 0&&!(kt in qe))return!1}else{var Lt=new Ce,sr;if(!(sr===void 0?xe(It,Mt,mt,3,Lt):sr))return!1}}return!0})(Be,Pe,Je)}})(ue):Ye(_e=ue)?(Me=me(_e),function(Pe){return Pe==null?void 0:Pe[Me]}):(function(Pe){return function(Je){return Re(Je,Pe)}})(_e);var _e,Me}function Se(ue){if(Me=(_e=ue)&&_e.constructor,Pe=typeof Me=="function"&&Me.prototype||E,_e!==Pe)return re(ue);var _e,Me,Pe,Je=[];for(var Be in Object(ue))G.call(ue,Be)&&Be!="constructor"&&Je.push(Be);return Je}function Ie(ue){return Ze(ue)?ue:rt(ue)}function He(ue,_e,Me,Pe,Je,Be){var qe=2&Je,gt=ue.length,pt=_e.length;if(gt!=pt&&!(qe&&pt>gt))return!1;var mt=Be.get(ue);if(mt&&Be.get(_e))return mt==_e;var nt=-1,wt=!0,jt=1&Je?new ke:void 0;for(Be.set(ue,_e),Be.set(_e,ue);++nt<gt;){var kt=ue[nt],Mt=_e[nt];if(Pe)var It=qe?Pe(Mt,kt,nt,_e,ue,Be):Pe(kt,Mt,nt,ue,_e,Be);if(It!==void 0){if(It)continue;wt=!1;break}if(jt){if(!V(_e,(function(Lt,sr){if(!jt.has(sr)&&(kt===Lt||Me(kt,Lt,Pe,Je,Be)))return jt.add(sr)}))){wt=!1;break}}else if(kt!==Mt&&!Me(kt,Mt,Pe,Je,Be)){wt=!1;break}}return Be.delete(ue),Be.delete(_e),wt}function ze(ue,_e){var Me,Pe,Je=ue.__data__;return((Pe=typeof(Me=_e))=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?Me!=="__proto__":Me===null)?Je[typeof _e=="string"?"string":"hash"]:Je.map}function Le(ue,_e){var Me=(function(Pe,Je){return Pe==null?void 0:Pe[Je]})(ue,_e);return we(Me)?Me:void 0}var Ge=function(ue){return K.call(ue)};function Ke(ue,_e){return!!(_e=_e??9007199254740991)&&(typeof ue=="number"||p.test(ue))&&ue>-1&&ue%1==0&&ue<_e}function Ye(ue,_e){if(Ze(ue))return!1;var Me=typeof ue;return!(Me!="number"&&Me!="symbol"&&Me!="boolean"&&ue!=null&&!Tt(ue))||u.test(ue)||!n.test(ue)||_e!=null&&ue in Object(_e)}function ut(ue){return ue==ue&&!xt(ue)}function ht(ue,_e){return function(Me){return Me!=null&&Me[ue]===_e&&(_e!==void 0||ue in Object(Me))}}(ne&&Ge(new ne(new ArrayBuffer(1)))!="[object DataView]"||se&&Ge(new se)!=o||H&&Ge(H.resolve())!="[object Promise]"||ce&&Ge(new ce)!=t||ae&&Ge(new ae)!="[object WeakMap]")&&(Ge=function(ue){var _e=K.call(ue),Me=_e==r?ue.constructor:void 0,Pe=Me?ve(Me):void 0;if(Pe)switch(Pe){case Q:return"[object DataView]";case te:return o;case ie:return"[object Promise]";case le:return t;case ee:return"[object WeakMap]"}return _e});var rt=ot((function(ue){var _e;ue=(_e=ue)==null?"":(function(Pe){if(typeof Pe=="string")return Pe;if(Tt(Pe))return fe?fe.call(Pe):"";var Je=Pe+"";return Je=="0"&&1/Pe==-1/0?"-0":Je})(_e);var Me=[];return c.test(ue)&&Me.push(""),ue.replace(d,(function(Pe,Je,Be,qe){Me.push(Be?qe.replace(b,"$1"):Je||Pe)})),Me}));function me(ue){if(typeof ue=="string"||Tt(ue))return ue;var _e=ue+"";return _e=="0"&&1/ue==-1/0?"-0":_e}function ve(ue){if(ue!=null){try{return X.call(ue)}catch{}try{return ue+""}catch{}}return""}var Ne,$e=(Ne=function(ue,_e,Me){G.call(ue,Me)?ue[Me].push(_e):ue[Me]=[_e]},function(ue,_e){var Me=Ze(ue)?q:Te,Pe={};return Me(ue,Ne,je(_e),Pe)});function ot(ue,_e){if(typeof ue!="function"||_e&&typeof _e!="function")throw new TypeError("Expected a function");var Me=function(){var Pe=arguments,Je=_e?_e.apply(this,Pe):Pe[0],Be=Me.cache;if(Be.has(Je))return Be.get(Je);var qe=ue.apply(this,Pe);return Me.cache=Be.set(Je,qe),qe};return Me.cache=new(ot.Cache||pe),Me}function Ve(ue,_e){return ue===_e||ue!=ue&&_e!=_e}function lt(ue){return(function(_e){return Dt(_e)&&et(_e)})(ue)&&G.call(ue,"callee")&&(!L.call(ue,"callee")||K.call(ue)==s)}ot.Cache=pe;var Ze=Array.isArray;function et(ue){return ue!=null&&ct(ue.length)&&!ft(ue)}function ft(ue){var _e=xt(ue)?K.call(ue):"";return _e=="[object Function]"||_e=="[object GeneratorFunction]"}function ct(ue){return typeof ue=="number"&&ue>-1&&ue%1==0&&ue<=9007199254740991}function xt(ue){var _e=typeof ue;return!!ue&&(_e=="object"||_e=="function")}function Dt(ue){return!!ue&&typeof ue=="object"}function Tt(ue){return typeof ue=="symbol"||Dt(ue)&&K.call(ue)=="[object Symbol]"}var Bt=F?(function(ue){return function(_e){return ue(_e)}})(F):function(ue){return Dt(ue)&&ct(ue.length)&&!!x[K.call(ue)]};function Vt(ue){return et(ue)?Ee(ue):Se(ue)}function Jt(ue){return ue}h.exports=$e}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(e,h,f){var l=Object.prototype.toString;h.exports=function(s){return s===!0||s===!1||(function(o){return!!o&&typeof o=="object"})(s)&&l.call(s)=="[object Boolean]"}},{}],445:[function(e,h,f){(function(l){(function(){var s="[object Arguments]",o="[object Map]",r="[object Object]",t="[object Set]",n=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[s]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[o]=c["[object Number]"]=c[r]=c["[object RegExp]"]=c[t]=c["[object String]"]=c["[object WeakMap]"]=!1;var d=typeof l=="object"&&l&&l.Object===Object&&l,b=typeof self=="object"&&self&&self.Object===Object&&self,g=d||b||Function("return this")(),p=typeof f=="object"&&f&&!f.nodeType&&f,x=p&&typeof h=="object"&&h&&!h.nodeType&&h,y=x&&x.exports===p,v=y&&d.process,S=(function(){try{return v&&v.binding&&v.binding("util")}catch{}})(),N=S&&S.isTypedArray;function R(me,ve){for(var Ne=-1,$e=me==null?0:me.length;++Ne<$e;)if(ve(me[Ne],Ne,me))return!0;return!1}function B(me){var ve=-1,Ne=Array(me.size);return me.forEach((function($e,ot){Ne[++ve]=[ot,$e]})),Ne}function M(me){var ve=-1,Ne=Array(me.size);return me.forEach((function($e){Ne[++ve]=$e})),Ne}var F,q,V,O=Array.prototype,T=Function.prototype,A=Object.prototype,C=g["__core-js_shared__"],w=T.toString,_=A.hasOwnProperty,j=(F=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",k=A.toString,E=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=y?g.Buffer:void 0,D=g.Symbol,X=g.Uint8Array,G=A.propertyIsEnumerable,K=O.splice,U=D?D.toStringTag:void 0,J=Object.getOwnPropertySymbols,$=I?I.isBuffer:void 0,L=(q=Object.keys,V=Object,function(me){return q(V(me))}),W=ge(g,"DataView"),re=ge(g,"Map"),ne=ge(g,"Promise"),se=ge(g,"Set"),H=ge(g,"WeakMap"),ce=ge(Object,"create"),ae=Se(W),Y=Se(re),Q=Se(ne),te=Se(se),ie=Se(H),le=D?D.prototype:void 0,ee=le?le.valueOf:void 0;function oe(me){var ve=-1,Ne=me==null?0:me.length;for(this.clear();++ve<Ne;){var $e=me[ve];this.set($e[0],$e[1])}}function de(me){var ve=-1,Ne=me==null?0:me.length;for(this.clear();++ve<Ne;){var $e=me[ve];this.set($e[0],$e[1])}}function fe(me){var ve=-1,Ne=me==null?0:me.length;for(this.clear();++ve<Ne;){var $e=me[ve];this.set($e[0],$e[1])}}function be(me){var ve=-1,Ne=me==null?0:me.length;for(this.__data__=new fe;++ve<Ne;)this.add(me[ve])}function he(me){var ve=this.__data__=new de(me);this.size=ve.size}function pe(me,ve){var Ne=ze(me),$e=!Ne&&He(me),ot=!Ne&&!$e&&Le(me),Ve=!Ne&&!$e&&!ot&&ht(me),lt=Ne||$e||ot||Ve,Ze=lt?(function(ct,xt){for(var Dt=-1,Tt=Array(ct);++Dt<ct;)Tt[Dt]=xt(Dt);return Tt})(me.length,String):[],et=Ze.length;for(var ft in me)!_.call(me,ft)||lt&&(ft=="length"||ot&&(ft=="offset"||ft=="parent")||Ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||je(ft,et))||Ze.push(ft);return Ze}function ke(me,ve){for(var Ne=me.length;Ne--;)if(Ie(me[Ne][0],ve))return Ne;return-1}function Ce(me){return me==null?me===void 0?"[object Undefined]":"[object Null]":U&&U in Object(me)?(function(ve){var Ne=_.call(ve,U),$e=ve[U];try{ve[U]=void 0;var ot=!0}catch{}var Ve=k.call(ve);return ot&&(Ne?ve[U]=$e:delete ve[U]),Ve})(me):(function(ve){return k.call(ve)})(me)}function Ee(me){return ut(me)&&Ce(me)==s}function Oe(me,ve,Ne,$e,ot){return me===ve||(me==null||ve==null||!ut(me)&&!ut(ve)?me!=me&&ve!=ve:(function(Ve,lt,Ze,et,ft,ct){var xt=ze(Ve),Dt=ze(lt),Tt=xt?"[object Array]":we(Ve),Bt=Dt?"[object Array]":we(lt),Vt=(Tt=Tt==s?r:Tt)==r,Jt=(Bt=Bt==s?r:Bt)==r,ue=Tt==Bt;if(ue&&Le(Ve)){if(!Le(lt))return!1;xt=!0,Vt=!1}if(ue&&!Vt)return ct||(ct=new he),xt||ht(Ve)?Ae(Ve,lt,Ze,et,ft,ct):(function(Be,qe,gt,pt,mt,nt,wt){switch(gt){case"[object DataView]":if(Be.byteLength!=qe.byteLength||Be.byteOffset!=qe.byteOffset)return!1;Be=Be.buffer,qe=qe.buffer;case"[object ArrayBuffer]":return!(Be.byteLength!=qe.byteLength||!nt(new X(Be),new X(qe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ie(+Be,+qe);case"[object Error]":return Be.name==qe.name&&Be.message==qe.message;case"[object RegExp]":case"[object String]":return Be==qe+"";case o:var jt=B;case t:var kt=1&pt;if(jt||(jt=M),Be.size!=qe.size&&!kt)return!1;var Mt=wt.get(Be);if(Mt)return Mt==qe;pt|=2,wt.set(Be,qe);var It=Ae(jt(Be),jt(qe),pt,mt,nt,wt);return wt.delete(Be),It;case"[object Symbol]":if(ee)return ee.call(Be)==ee.call(qe)}return!1})(Ve,lt,Tt,Ze,et,ft,ct);if(!(1&Ze)){var _e=Vt&&_.call(Ve,"__wrapped__"),Me=Jt&&_.call(lt,"__wrapped__");if(_e||Me){var Pe=_e?Ve.value():Ve,Je=Me?lt.value():lt;return ct||(ct=new he),ft(Pe,Je,Ze,et,ct)}}return ue?(ct||(ct=new he),(function(Be,qe,gt,pt,mt,nt){var wt=1&gt,jt=Fe(Be),kt=jt.length,Mt=Fe(qe).length;if(kt!=Mt&&!wt)return!1;for(var It=kt;It--;){var Lt=jt[It];if(!(wt?Lt in qe:_.call(qe,Lt)))return!1}var sr=nt.get(Be);if(sr&&nt.get(qe))return sr==qe;var br=!0;nt.set(Be,qe),nt.set(qe,Be);for(var Sr=wt;++It<kt;){Lt=jt[It];var Cr=Be[Lt],Ir=qe[Lt];if(pt)var St=wt?pt(Ir,Cr,Lt,qe,Be,nt):pt(Cr,Ir,Lt,Be,qe,nt);if(!(St===void 0?Cr===Ir||mt(Cr,Ir,gt,pt,nt):St)){br=!1;break}Sr||(Sr=Lt=="constructor")}if(br&&!Sr){var _t=Be.constructor,Mr=qe.constructor;_t==Mr||!("constructor"in Be)||!("constructor"in qe)||typeof _t=="function"&&_t instanceof _t&&typeof Mr=="function"&&Mr instanceof Mr||(br=!1)}return nt.delete(Be),nt.delete(qe),br})(Ve,lt,Ze,et,ft,ct)):!1})(me,ve,Ne,$e,Oe,ot))}function Te(me){return!(!Ye(me)||(function(ve){return!!j&&j in ve})(me))&&(Ge(me)?E:n).test(Se(me))}function ye(me){if(Ne=(ve=me)&&ve.constructor,$e=typeof Ne=="function"&&Ne.prototype||A,ve!==$e)return L(me);var ve,Ne,$e,ot=[];for(var Ve in Object(me))_.call(me,Ve)&&Ve!="constructor"&&ot.push(Ve);return ot}function Ae(me,ve,Ne,$e,ot,Ve){var lt=1&Ne,Ze=me.length,et=ve.length;if(Ze!=et&&!(lt&&et>Ze))return!1;var ft=Ve.get(me);if(ft&&Ve.get(ve))return ft==ve;var ct=-1,xt=!0,Dt=2&Ne?new be:void 0;for(Ve.set(me,ve),Ve.set(ve,me);++ct<Ze;){var Tt=me[ct],Bt=ve[ct];if($e)var Vt=lt?$e(Bt,Tt,ct,ve,me,Ve):$e(Tt,Bt,ct,me,ve,Ve);if(Vt!==void 0){if(Vt)continue;xt=!1;break}if(Dt){if(!R(ve,(function(Jt,ue){if(_e=ue,!Dt.has(_e)&&(Tt===Jt||ot(Tt,Jt,Ne,$e,Ve)))return Dt.push(ue);var _e}))){xt=!1;break}}else if(Tt!==Bt&&!ot(Tt,Bt,Ne,$e,Ve)){xt=!1;break}}return Ve.delete(me),Ve.delete(ve),xt}function Fe(me){return(function(ve,Ne,$e){var ot=Ne(ve);return ze(ve)?ot:(function(Ve,lt){for(var Ze=-1,et=lt.length,ft=Ve.length;++Ze<et;)Ve[ft+Ze]=lt[Ze];return Ve})(ot,$e(ve))})(me,rt,xe)}function Re(me,ve){var Ne,$e,ot=me.__data__;return(($e=typeof(Ne=ve))=="string"||$e=="number"||$e=="symbol"||$e=="boolean"?Ne!=="__proto__":Ne===null)?ot[typeof ve=="string"?"string":"hash"]:ot.map}function ge(me,ve){var Ne=(function($e,ot){return $e==null?void 0:$e[ot]})(me,ve);return Te(Ne)?Ne:void 0}oe.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},oe.prototype.delete=function(me){var ve=this.has(me)&&delete this.__data__[me];return this.size-=ve?1:0,ve},oe.prototype.get=function(me){var ve=this.__data__;if(ce){var Ne=ve[me];return Ne==="__lodash_hash_undefined__"?void 0:Ne}return _.call(ve,me)?ve[me]:void 0},oe.prototype.has=function(me){var ve=this.__data__;return ce?ve[me]!==void 0:_.call(ve,me)},oe.prototype.set=function(me,ve){var Ne=this.__data__;return this.size+=this.has(me)?0:1,Ne[me]=ce&&ve===void 0?"__lodash_hash_undefined__":ve,this},de.prototype.clear=function(){this.__data__=[],this.size=0},de.prototype.delete=function(me){var ve=this.__data__,Ne=ke(ve,me);return!(Ne<0)&&(Ne==ve.length-1?ve.pop():K.call(ve,Ne,1),--this.size,!0)},de.prototype.get=function(me){var ve=this.__data__,Ne=ke(ve,me);return Ne<0?void 0:ve[Ne][1]},de.prototype.has=function(me){return ke(this.__data__,me)>-1},de.prototype.set=function(me,ve){var Ne=this.__data__,$e=ke(Ne,me);return $e<0?(++this.size,Ne.push([me,ve])):Ne[$e][1]=ve,this},fe.prototype.clear=function(){this.size=0,this.__data__={hash:new oe,map:new(re||de),string:new oe}},fe.prototype.delete=function(me){var ve=Re(this,me).delete(me);return this.size-=ve?1:0,ve},fe.prototype.get=function(me){return Re(this,me).get(me)},fe.prototype.has=function(me){return Re(this,me).has(me)},fe.prototype.set=function(me,ve){var Ne=Re(this,me),$e=Ne.size;return Ne.set(me,ve),this.size+=Ne.size==$e?0:1,this},be.prototype.add=be.prototype.push=function(me){return this.__data__.set(me,"__lodash_hash_undefined__"),this},be.prototype.has=function(me){return this.__data__.has(me)},he.prototype.clear=function(){this.__data__=new de,this.size=0},he.prototype.delete=function(me){var ve=this.__data__,Ne=ve.delete(me);return this.size=ve.size,Ne},he.prototype.get=function(me){return this.__data__.get(me)},he.prototype.has=function(me){return this.__data__.has(me)},he.prototype.set=function(me,ve){var Ne=this.__data__;if(Ne instanceof de){var $e=Ne.__data__;if(!re||$e.length<199)return $e.push([me,ve]),this.size=++Ne.size,this;Ne=this.__data__=new fe($e)}return Ne.set(me,ve),this.size=Ne.size,this};var xe=J?function(me){return me==null?[]:(me=Object(me),(function(ve,Ne){for(var $e=-1,ot=ve==null?0:ve.length,Ve=0,lt=[];++$e<ot;){var Ze=ve[$e];Ne(Ze,$e,ve)&&(lt[Ve++]=Ze)}return lt})(J(me),(function(ve){return G.call(me,ve)})))}:function(){return[]},we=Ce;function je(me,ve){return!!(ve=ve??9007199254740991)&&(typeof me=="number"||u.test(me))&&me>-1&&me%1==0&&me<ve}function Se(me){if(me!=null){try{return w.call(me)}catch{}try{return me+""}catch{}}return""}function Ie(me,ve){return me===ve||me!=me&&ve!=ve}(W&&we(new W(new ArrayBuffer(1)))!="[object DataView]"||re&&we(new re)!=o||ne&&we(ne.resolve())!="[object Promise]"||se&&we(new se)!=t||H&&we(new H)!="[object WeakMap]")&&(we=function(me){var ve=Ce(me),Ne=ve==r?me.constructor:void 0,$e=Ne?Se(Ne):"";if($e)switch($e){case ae:return"[object DataView]";case Y:return o;case Q:return"[object Promise]";case te:return t;case ie:return"[object WeakMap]"}return ve});var He=Ee((function(){return arguments})())?Ee:function(me){return ut(me)&&_.call(me,"callee")&&!G.call(me,"callee")},ze=Array.isArray,Le=$||function(){return!1};function Ge(me){if(!Ye(me))return!1;var ve=Ce(me);return ve=="[object Function]"||ve=="[object GeneratorFunction]"||ve=="[object AsyncFunction]"||ve=="[object Proxy]"}function Ke(me){return typeof me=="number"&&me>-1&&me%1==0&&me<=9007199254740991}function Ye(me){var ve=typeof me;return me!=null&&(ve=="object"||ve=="function")}function ut(me){return me!=null&&typeof me=="object"}var ht=N?(function(me){return function(ve){return me(ve)}})(N):function(me){return ut(me)&&Ke(me.length)&&!!c[Ce(me)]};function rt(me){return(ve=me)!=null&&Ke(ve.length)&&!Ge(ve)?pe(me):ye(me);var ve}h.exports=function(me,ve){return Oe(me,ve)}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(e,h,f){(function(l){(function(){var s=typeof l=="object"&&l&&l.Object===Object&&l,o=typeof self=="object"&&self&&self.Object===Object&&self,r=s||o||Function("return this")(),t=Object.prototype,n=t.hasOwnProperty,u=t.toString,c=r.Symbol,d=c?c.toStringTag:void 0;function b(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":d&&d in Object(g)?(function(p){var x=n.call(p,d),y=p[d];try{p[d]=void 0;var v=!0}catch{}var S=u.call(p);return v&&(x?p[d]=y:delete p[d]),S})(g):(function(p){return u.call(p)})(g)}h.exports=function(g){if(!(function(x){var y=typeof x;return x!=null&&(y=="object"||y=="function")})(g))return!1;var p=b(g);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(e,h,f){h.exports=function(l){return l==null}},{}],448:[function(e,h,f){h.exports=function(l){return l===void 0}},{}],449:[function(e,h,f){(function(l){(function(){var s=/^\[object .+?Constructor\]$/,o=typeof l=="object"&&l&&l.Object===Object&&l,r=typeof self=="object"&&self&&self.Object===Object&&self,t=o||r||Function("return this")();function n(D,X){return!!(D&&D.length)&&(function(G,K,U){if(K!=K)return(function(L,W,re,ne){for(var se=L.length,H=re+-1;++H<se;)if(W(L[H],H,L))return H;return-1})(G,u,U);for(var J=U-1,$=G.length;++J<$;)if(G[J]===K)return J;return-1})(D,X,0)>-1}function u(D){return D!=D}function c(D,X){return D.has(X)}function d(D){var X=-1,G=Array(D.size);return D.forEach((function(K){G[++X]=K})),G}var b,g=Array.prototype,p=Function.prototype,x=Object.prototype,y=t["__core-js_shared__"],v=(b=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",S=p.toString,N=x.hasOwnProperty,R=x.toString,B=RegExp("^"+S.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=g.splice,F=E(t,"Map"),q=E(t,"Set"),V=E(Object,"create");function O(D){var X=-1,G=D?D.length:0;for(this.clear();++X<G;){var K=D[X];this.set(K[0],K[1])}}function T(D){var X=-1,G=D?D.length:0;for(this.clear();++X<G;){var K=D[X];this.set(K[0],K[1])}}function A(D){var X=-1,G=D?D.length:0;for(this.clear();++X<G;){var K=D[X];this.set(K[0],K[1])}}function C(D){var X=-1,G=D?D.length:0;for(this.__data__=new A;++X<G;)this.add(D[X])}function w(D,X){for(var G,K,U=D.length;U--;)if((G=D[U][0])===(K=X)||G!=G&&K!=K)return U;return-1}function _(D){return!(!I(D)||(X=D,v&&v in X))&&((function(G){var K=I(G)?R.call(G):"";return K=="[object Function]"||K=="[object GeneratorFunction]"})(D)||(function(G){var K=!1;if(G!=null&&typeof G.toString!="function")try{K=!!(G+"")}catch{}return K})(D)?B:s).test((function(G){if(G!=null){try{return S.call(G)}catch{}try{return G+""}catch{}}return""})(D));var X}O.prototype.clear=function(){this.__data__=V?V(null):{}},O.prototype.delete=function(D){return this.has(D)&&delete this.__data__[D]},O.prototype.get=function(D){var X=this.__data__;if(V){var G=X[D];return G==="__lodash_hash_undefined__"?void 0:G}return N.call(X,D)?X[D]:void 0},O.prototype.has=function(D){var X=this.__data__;return V?X[D]!==void 0:N.call(X,D)},O.prototype.set=function(D,X){return this.__data__[D]=V&&X===void 0?"__lodash_hash_undefined__":X,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(D){var X=this.__data__,G=w(X,D);return!(G<0)&&(G==X.length-1?X.pop():M.call(X,G,1),!0)},T.prototype.get=function(D){var X=this.__data__,G=w(X,D);return G<0?void 0:X[G][1]},T.prototype.has=function(D){return w(this.__data__,D)>-1},T.prototype.set=function(D,X){var G=this.__data__,K=w(G,D);return K<0?G.push([D,X]):G[K][1]=X,this},A.prototype.clear=function(){this.__data__={hash:new O,map:new(F||T),string:new O}},A.prototype.delete=function(D){return k(this,D).delete(D)},A.prototype.get=function(D){return k(this,D).get(D)},A.prototype.has=function(D){return k(this,D).has(D)},A.prototype.set=function(D,X){return k(this,D).set(D,X),this},C.prototype.add=C.prototype.push=function(D){return this.__data__.set(D,"__lodash_hash_undefined__"),this},C.prototype.has=function(D){return this.__data__.has(D)};var j=q&&1/d(new q([,-0]))[1]==1/0?function(D){return new q(D)}:function(){};function k(D,X){var G,K,U=D.__data__;return((K=typeof(G=X))=="string"||K=="number"||K=="symbol"||K=="boolean"?G!=="__proto__":G===null)?U[typeof X=="string"?"string":"hash"]:U.map}function E(D,X){var G=(function(K,U){return K==null?void 0:K[U]})(D,X);return _(G)?G:void 0}function I(D){var X=typeof D;return!!D&&(X=="object"||X=="function")}h.exports=function(D){return D&&D.length?(function(X,G,K){var U=-1,J=n,$=X.length,L=!0,W=[],re=W;if($>=200){var ne=j(X);if(ne)return d(ne);L=!1,J=c,re=new C}else re=W;e:for(;++U<$;){var se=X[U],H=se;if(se=se!==0?se:0,L&&H==H){for(var ce=re.length;ce--;)if(re[ce]===H)continue e;W.push(se)}else J(re,H,K)||(re!==W&&re.push(H),W.push(se))}return W})(D):[]}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(e,h,f){var l=e("inherits"),s=e("hash-base"),o=e("safe-buffer").Buffer,r=new Array(16);function t(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function n(g,p){return g<<p|g>>>32-p}function u(g,p,x,y,v,S,N){return n(g+(p&x|~p&y)+v+S|0,N)+p|0}function c(g,p,x,y,v,S,N){return n(g+(p&y|x&~y)+v+S|0,N)+p|0}function d(g,p,x,y,v,S,N){return n(g+(p^x^y)+v+S|0,N)+p|0}function b(g,p,x,y,v,S,N){return n(g+(x^(p|~y))+v+S|0,N)+p|0}l(t,s),t.prototype._update=function(){for(var g=r,p=0;p<16;++p)g[p]=this._block.readInt32LE(4*p);var x=this._a,y=this._b,v=this._c,S=this._d;x=u(x,y,v,S,g[0],3614090360,7),S=u(S,x,y,v,g[1],3905402710,12),v=u(v,S,x,y,g[2],606105819,17),y=u(y,v,S,x,g[3],3250441966,22),x=u(x,y,v,S,g[4],4118548399,7),S=u(S,x,y,v,g[5],1200080426,12),v=u(v,S,x,y,g[6],2821735955,17),y=u(y,v,S,x,g[7],4249261313,22),x=u(x,y,v,S,g[8],1770035416,7),S=u(S,x,y,v,g[9],2336552879,12),v=u(v,S,x,y,g[10],4294925233,17),y=u(y,v,S,x,g[11],2304563134,22),x=u(x,y,v,S,g[12],1804603682,7),S=u(S,x,y,v,g[13],4254626195,12),v=u(v,S,x,y,g[14],2792965006,17),x=c(x,y=u(y,v,S,x,g[15],1236535329,22),v,S,g[1],4129170786,5),S=c(S,x,y,v,g[6],3225465664,9),v=c(v,S,x,y,g[11],643717713,14),y=c(y,v,S,x,g[0],3921069994,20),x=c(x,y,v,S,g[5],3593408605,5),S=c(S,x,y,v,g[10],38016083,9),v=c(v,S,x,y,g[15],3634488961,14),y=c(y,v,S,x,g[4],3889429448,20),x=c(x,y,v,S,g[9],568446438,5),S=c(S,x,y,v,g[14],3275163606,9),v=c(v,S,x,y,g[3],4107603335,14),y=c(y,v,S,x,g[8],1163531501,20),x=c(x,y,v,S,g[13],2850285829,5),S=c(S,x,y,v,g[2],4243563512,9),v=c(v,S,x,y,g[7],1735328473,14),x=d(x,y=c(y,v,S,x,g[12],2368359562,20),v,S,g[5],4294588738,4),S=d(S,x,y,v,g[8],2272392833,11),v=d(v,S,x,y,g[11],1839030562,16),y=d(y,v,S,x,g[14],4259657740,23),x=d(x,y,v,S,g[1],2763975236,4),S=d(S,x,y,v,g[4],1272893353,11),v=d(v,S,x,y,g[7],4139469664,16),y=d(y,v,S,x,g[10],3200236656,23),x=d(x,y,v,S,g[13],681279174,4),S=d(S,x,y,v,g[0],3936430074,11),v=d(v,S,x,y,g[3],3572445317,16),y=d(y,v,S,x,g[6],76029189,23),x=d(x,y,v,S,g[9],3654602809,4),S=d(S,x,y,v,g[12],3873151461,11),v=d(v,S,x,y,g[15],530742520,16),x=b(x,y=d(y,v,S,x,g[2],3299628645,23),v,S,g[0],4096336452,6),S=b(S,x,y,v,g[7],1126891415,10),v=b(v,S,x,y,g[14],2878612391,15),y=b(y,v,S,x,g[5],4237533241,21),x=b(x,y,v,S,g[12],1700485571,6),S=b(S,x,y,v,g[3],2399980690,10),v=b(v,S,x,y,g[10],4293915773,15),y=b(y,v,S,x,g[1],2240044497,21),x=b(x,y,v,S,g[8],1873313359,6),S=b(S,x,y,v,g[15],4264355552,10),v=b(v,S,x,y,g[6],2734768916,15),y=b(y,v,S,x,g[13],1309151649,21),x=b(x,y,v,S,g[4],4149444226,6),S=b(S,x,y,v,g[11],3174756917,10),v=b(v,S,x,y,g[2],718787259,15),y=b(y,v,S,x,g[9],3951481745,21),this._a=this._a+x|0,this._b=this._b+y|0,this._c=this._c+v|0,this._d=this._d+S|0},t.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=o.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},h.exports=t},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,h,f){var l=e("bn.js"),s=e("brorand");function o(r){this.rand=r||new s.Rand}h.exports=o,o.create=function(r){return new o(r)},o.prototype._randbelow=function(r){var t=r.bitLength(),n=Math.ceil(t/8);do var u=new l(this.rand.generate(n));while(u.cmp(r)>=0);return u},o.prototype._randrange=function(r,t){var n=t.sub(r);return r.add(this._randbelow(n))},o.prototype.test=function(r,t,n){var u=r.bitLength(),c=l.mont(r),d=new l(1).toRed(c);t||(t=Math.max(1,u/48|0));for(var b=r.subn(1),g=0;!b.testn(g);g++);for(var p=r.shrn(g),x=b.toRed(c);t>0;t--){var y=this._randrange(new l(2),b);n&&n(y);var v=y.toRed(c).redPow(p);if(v.cmp(d)!==0&&v.cmp(x)!==0){for(var S=1;S<g;S++){if((v=v.redSqr()).cmp(d)===0)return!1;if(v.cmp(x)===0)break}if(S===g)return!1}}return!0},o.prototype.getDivisor=function(r,t){var n=r.bitLength(),u=l.mont(r),c=new l(1).toRed(u);t||(t=Math.max(1,n/48|0));for(var d=r.subn(1),b=0;!d.testn(b);b++);for(var g=r.shrn(b),p=d.toRed(u);t>0;t--){var x=this._randrange(new l(2),d),y=r.gcd(x);if(y.cmpn(1)!==0)return y;var v=x.toRed(u).redPow(g);if(v.cmp(c)!==0&&v.cmp(p)!==0){for(var S=1;S<b;S++){if((v=v.redSqr()).cmp(c)===0)return v.fromRed().subn(1).gcd(r);if(v.cmp(p)===0)break}if(S===b)return(v=v.redSqr()).fromRed().subn(1).gcd(r)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,h,f){arguments[4][184][0].apply(f,arguments)},{buffer:188,dup:184}],453:[function(e,h,f){function l(s,o){if(!s)throw new Error(o||"Assertion failed")}h.exports=l,l.equal=function(s,o,r){if(s!=o)throw new Error(r||"Assertion failed: "+s+" != "+o)}},{}],454:[function(e,h,f){var l=f;function s(r){return r.length===1?"0"+r:r}function o(r){for(var t="",n=0;n<r.length;n++)t+=s(r[n].toString(16));return t}l.toArray=function(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var n=[];if(typeof r!="string"){for(var u=0;u<r.length;u++)n[u]=0|r[u];return n}if(t==="hex")for((r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r),u=0;u<r.length;u+=2)n.push(parseInt(r[u]+r[u+1],16));else for(u=0;u<r.length;u++){var c=r.charCodeAt(u),d=c>>8,b=255&c;d?n.push(d,b):n.push(b)}return n},l.zero2=s,l.toHex=o,l.encode=function(r,t){return t==="hex"?o(r):r}},{}],455:[function(e,h,f){h.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,h,f){var l=e("asn1.js");f.certificate=e("./certificate");var s=l.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));f.RSAPrivateKey=s;var o=l.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));f.RSAPublicKey=o;var r=l.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(t),this.key("subjectPublicKey").bitstr())}));f.PublicKey=r;var t=l.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),n=l.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(t),this.key("subjectPrivateKey").octstr())}));f.PrivateKey=n;var u=l.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));f.EncryptedPrivateKey=u;var c=l.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));f.DSAPrivateKey=c,f.DSAparam=l.define("DSAparam",(function(){this.int()}));var d=l.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(b),this.key("publicKey").optional().explicit(1).bitstr())}));f.ECPrivateKey=d;var b=l.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));f.signature=l.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},{"./certificate":457,"asn1.js":170}],457:[function(e,h,f){var l=e("asn1.js"),s=l.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=l.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),r=l.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),t=l.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())})),n=l.define("RelativeDistinguishedName",(function(){this.setof(o)})),u=l.define("RDNSequence",(function(){this.seqof(n)})),c=l.define("Name",(function(){this.choice({rdnSequence:this.use(u)})})),d=l.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))})),b=l.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),g=l.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(c),this.key("validity").use(d),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(t),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(b).optional())})),p=l.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())}));h.exports=p},{"asn1.js":170}],458:[function(e,h,f){var l=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=e("evp_bytestokey"),t=e("browserify-aes"),n=e("safe-buffer").Buffer;h.exports=function(u,c){var d,b=u.toString(),g=b.match(l);if(g){var p="aes"+g[1],x=n.from(g[2],"hex"),y=n.from(g[3].replace(/[\r\n]/g,""),"base64"),v=r(c,x.slice(0,8),parseInt(g[1],10)).key,S=[],N=t.createDecipheriv(p,v,x);S.push(N.update(y)),S.push(N.final()),d=n.concat(S)}else{var R=b.match(o);d=n.from(R[2].replace(/[\r\n]/g,""),"base64")}return{tag:b.match(s)[1],data:d}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,h,f){var l=e("./asn1"),s=e("./aesid.json"),o=e("./fixProc"),r=e("browserify-aes"),t=e("pbkdf2"),n=e("safe-buffer").Buffer;function u(c){var d;typeof c!="object"||n.isBuffer(c)||(d=c.passphrase,c=c.key),typeof c=="string"&&(c=n.from(c));var b,g,p=o(c,d),x=p.tag,y=p.data;switch(x){case"CERTIFICATE":g=l.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=l.PublicKey.decode(y,"der")),b=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return l.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=l.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+b)}case"ENCRYPTED PRIVATE KEY":y=(function(v,S){var N=v.algorithm.decrypt.kde.kdeparams.salt,R=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),B=s[v.algorithm.decrypt.cipher.algo.join(".")],M=v.algorithm.decrypt.cipher.iv,F=v.subjectPrivateKey,q=parseInt(B.split("-")[1],10)/8,V=t.pbkdf2Sync(S,N,R,q,"sha1"),O=r.createDecipheriv(B,V,M),T=[];return T.push(O.update(F)),T.push(O.final()),n.concat(T)})(y=l.EncryptedPrivateKey.decode(y,"der"),d);case"PRIVATE KEY":switch(b=(g=l.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return l.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:l.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=l.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+b)}case"RSA PUBLIC KEY":return l.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return l.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:l.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=l.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+x)}}h.exports=u,u.signature=l.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,h,f){f.pbkdf2=e("./lib/async"),f.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,h,f){(function(l){(function(){var s,o,r=e("safe-buffer").Buffer,t=e("./precondition"),n=e("./default-encoding"),u=e("./sync"),c=e("./to-buffer"),d=l.crypto&&l.crypto.subtle,b={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function p(){return o||(o=l.process&&l.process.nextTick?l.process.nextTick:l.queueMicrotask?l.queueMicrotask:l.setImmediate?l.setImmediate:l.setTimeout)}function x(y,v,S,N,R){return d.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then((function(B){return d.deriveBits({name:"PBKDF2",salt:v,iterations:S,hash:{name:R}},B,N<<3)})).then((function(B){return r.from(B)}))}h.exports=function(y,v,S,N,R,B){typeof R=="function"&&(B=R,R=void 0);var M=b[(R=R||"sha1").toLowerCase()];if(M&&typeof l.Promise=="function"){if(t(S,N),y=c(y,n,"Password"),v=c(v,n,"Salt"),typeof B!="function")throw new Error("No callback provided to pbkdf2");(function(F,q){F.then((function(V){p()((function(){q(null,V)}))}),(function(V){p()((function(){q(V)}))}))})((function(F){if(l.process&&!l.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(g[F]!==void 0)return g[F];var q=x(s=s||r.alloc(8),s,10,128,F).then((function(){return!0})).catch((function(){return!1}));return g[F]=q,q})(M).then((function(F){return F?x(y,v,S,N,M):u(y,v,S,N,R)})),B)}else p()((function(){var F;try{F=u(y,v,S,N,R)}catch(q){return B(q)}B(null,F)}))}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,h,f){(function(l,s){(function(){var o;s.process&&s.process.browser?o="utf-8":s.process&&s.process.version?o=parseInt(l.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":o="utf-8",h.exports=o}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(e,h,f){var l=Math.pow(2,30)-1;h.exports=function(s,o){if(typeof s!="number")throw new TypeError("Iterations not a number");if(s<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>l||o!=o)throw new TypeError("Bad key length")}},{}],464:[function(e,h,f){var l=e("create-hash/md5"),s=e("ripemd160"),o=e("sha.js"),r=e("safe-buffer").Buffer,t=e("./precondition"),n=e("./default-encoding"),u=e("./to-buffer"),c=r.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function b(g,p,x){var y=(function(M){function F(q){return o(M).update(q).digest()}return M==="rmd160"||M==="ripemd160"?function(q){return new s().update(q).digest()}:M==="md5"?l:F})(g),v=g==="sha512"||g==="sha384"?128:64;p.length>v?p=y(p):p.length<v&&(p=r.concat([p,c],v));for(var S=r.allocUnsafe(v+d[g]),N=r.allocUnsafe(v+d[g]),R=0;R<v;R++)S[R]=54^p[R],N[R]=92^p[R];var B=r.allocUnsafe(v+x+4);S.copy(B,0,0,v),this.ipad1=B,this.ipad2=S,this.opad=N,this.alg=g,this.blocksize=v,this.hash=y,this.size=d[g]}b.prototype.run=function(g,p){return g.copy(p,this.blocksize),this.hash(p).copy(this.opad,this.blocksize),this.hash(this.opad)},h.exports=function(g,p,x,y,v){t(x,y);var S=new b(v=v||"sha1",g=u(g,n,"Password"),(p=u(p,n,"Salt")).length),N=r.allocUnsafe(y),R=r.allocUnsafe(p.length+4);p.copy(R,0,0,p.length);for(var B=0,M=d[v],F=Math.ceil(y/M),q=1;q<=F;q++){R.writeUInt32BE(q,p.length);for(var V=S.run(R,S.ipad1),O=V,T=1;T<x;T++){O=S.run(O,S.ipad2);for(var A=0;A<M;A++)V[A]^=O[A]}V.copy(N,B),B+=M}return N}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,h,f){var l=e("safe-buffer").Buffer;h.exports=function(s,o,r){if(l.isBuffer(s))return s;if(typeof s=="string")return l.from(s,o);if(ArrayBuffer.isView(s))return l.from(s.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,h,f){(function(l){(function(){l===void 0||!l.version||l.version.indexOf("v0.")===0||l.version.indexOf("v1.")===0&&l.version.indexOf("v1.8.")!==0?h.exports={nextTick:function(s,o,r,t){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var n,u,c=arguments.length;switch(c){case 0:case 1:return l.nextTick(s);case 2:return l.nextTick((function(){s.call(null,o)}));case 3:return l.nextTick((function(){s.call(null,o,r)}));case 4:return l.nextTick((function(){s.call(null,o,r,t)}));default:for(n=new Array(c-1),u=0;u<n.length;)n[u++]=arguments[u];return l.nextTick((function(){s.apply(null,n)}))}}}:h.exports=l}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,h,f){var l,s,o=h.exports={};function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function n(v){if(l===setTimeout)return setTimeout(v,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(v,0);try{return l(v,0)}catch{try{return l.call(null,v,0)}catch{return l.call(this,v,0)}}}(function(){try{l=typeof setTimeout=="function"?setTimeout:r}catch{l=r}try{s=typeof clearTimeout=="function"?clearTimeout:t}catch{s=t}})();var u,c=[],d=!1,b=-1;function g(){d&&u&&(d=!1,u.length?c=u.concat(c):b=-1,c.length&&p())}function p(){if(!d){var v=n(g);d=!0;for(var S=c.length;S;){for(u=c,c=[];++b<S;)u&&u[b].run();b=-1,S=c.length}u=null,d=!1,(function(N){if(s===clearTimeout)return clearTimeout(N);if((s===t||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(N);try{s(N)}catch{try{return s.call(null,N)}catch{return s.call(this,N)}}})(v)}}function x(v,S){this.fun=v,this.array=S}function y(){}o.nextTick=function(v){var S=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)S[N-1]=arguments[N];c.push(new x(v,S)),c.length!==1||d||n(p)},x.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(v){return[]},o.binding=function(v){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(v){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],468:[function(e,h,f){f.publicEncrypt=e("./publicEncrypt"),f.privateDecrypt=e("./privateDecrypt"),f.privateEncrypt=function(l,s){return f.publicEncrypt(l,s,!0)},f.publicDecrypt=function(l,s){return f.privateDecrypt(l,s,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,h,f){var l=e("create-hash"),s=e("safe-buffer").Buffer;function o(r){var t=s.allocUnsafe(4);return t.writeUInt32BE(r,0),t}h.exports=function(r,t){for(var n,u=s.alloc(0),c=0;u.length<t;)n=o(c++),u=s.concat([u,l("sha1").update(r).update(n).digest()]);return u.slice(0,t)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,h,f){arguments[4][184][0].apply(f,arguments)},{buffer:188,dup:184}],471:[function(e,h,f){var l=e("parse-asn1"),s=e("./mgf"),o=e("./xor"),r=e("bn.js"),t=e("browserify-rsa"),n=e("create-hash"),u=e("./withPublic"),c=e("safe-buffer").Buffer;h.exports=function(d,b,g){var p;p=d.padding?d.padding:g?1:4;var x,y=l(d),v=y.modulus.byteLength();if(b.length>v||new r(b).cmp(y.modulus)>=0)throw new Error("decryption error");x=g?u(new r(b),y):t(b,y);var S=c.alloc(v-x.length);if(x=c.concat([S,x],v),p===4)return(function(N,R){var B=N.modulus.byteLength(),M=n("sha1").update(c.alloc(0)).digest(),F=M.length;if(R[0]!==0)throw new Error("decryption error");var q=R.slice(1,F+1),V=R.slice(F+1),O=o(q,s(V,F)),T=o(V,s(O,B-F-1));if((function(C,w){C=c.from(C),w=c.from(w);var _=0,j=C.length;C.length!==w.length&&(_++,j=Math.min(C.length,w.length));for(var k=-1;++k<j;)_+=C[k]^w[k];return _})(M,T.slice(0,F)))throw new Error("decryption error");for(var A=F;T[A]===0;)A++;if(T[A++]!==1)throw new Error("decryption error");return T.slice(A)})(y,x);if(p===1)return(function(N,R,B){for(var M=R.slice(0,2),F=2,q=0;R[F++]!==0;)if(F>=R.length){q++;break}var V=R.slice(2,F-1);if((M.toString("hex")!=="0002"&&!B||M.toString("hex")!=="0001"&&B)&&q++,V.length<8&&q++,q)throw new Error("decryption error");return R.slice(F)})(0,x,g);if(p===3)return x;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,h,f){var l=e("parse-asn1"),s=e("randombytes"),o=e("create-hash"),r=e("./mgf"),t=e("./xor"),n=e("bn.js"),u=e("./withPublic"),c=e("browserify-rsa"),d=e("safe-buffer").Buffer;h.exports=function(b,g,p){var x;x=b.padding?b.padding:p?1:4;var y,v=l(b);if(x===4)y=(function(S,N){var R=S.modulus.byteLength(),B=N.length,M=o("sha1").update(d.alloc(0)).digest(),F=M.length,q=2*F;if(B>R-q-2)throw new Error("message too long");var V=d.alloc(R-B-q-2),O=R-F-1,T=s(F),A=t(d.concat([M,V,d.alloc(1,1),N],O),r(T,O)),C=t(T,r(A,F));return new n(d.concat([d.alloc(1),C,A],R))})(v,g);else if(x===1)y=(function(S,N,R){var B,M=N.length,F=S.modulus.byteLength();if(M>F-11)throw new Error("message too long");return B=R?d.alloc(F-M-3,255):(function(q){for(var V,O=d.allocUnsafe(q),T=0,A=s(2*q),C=0;T<q;)C===A.length&&(A=s(2*q),C=0),(V=A[C++])&&(O[T++]=V);return O})(F-M-3),new n(d.concat([d.from([0,R?1:2]),B,d.alloc(1),N],F))})(v,g,p);else{if(x!==3)throw new Error("unknown padding");if((y=new n(g)).cmp(v.modulus)>=0)throw new Error("data too long for modulus")}return p?c(y,v):u(y,v)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,h,f){var l=e("bn.js"),s=e("safe-buffer").Buffer;h.exports=function(o,r){return s.from(o.toRed(l.mont(r.modulus)).redPow(new l(r.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,h,f){h.exports=function(l,s){for(var o=l.length,r=-1;++r<o;)l[r]^=s[r];return l}},{}],475:[function(e,h,f){(function(l,s){(function(){var o=e("safe-buffer").Buffer,r=s.crypto||s.msCrypto;r&&r.getRandomValues?h.exports=function(t,n){if(t>4294967295)throw new RangeError("requested too many random bytes");var u=o.allocUnsafe(t);if(t>0)if(t>65536)for(var c=0;c<t;c+=65536)r.getRandomValues(u.slice(c,c+65536));else r.getRandomValues(u);return typeof n=="function"?l.nextTick((function(){n(null,u)})):u}:h.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,h,f){(function(l,s){(function(){function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var r=e("safe-buffer"),t=e("randombytes"),n=r.Buffer,u=r.kMaxLength,c=s.crypto||s.msCrypto,d=Math.pow(2,32)-1;function b(x,y){if(typeof x!="number"||x!=x)throw new TypeError("offset must be a number");if(x>d||x<0)throw new TypeError("offset must be a uint32");if(x>u||x>y)throw new RangeError("offset out of range")}function g(x,y,v){if(typeof x!="number"||x!=x)throw new TypeError("size must be a number");if(x>d||x<0)throw new TypeError("size must be a uint32");if(x+y>v||x>u)throw new RangeError("buffer too small")}function p(x,y,v,S){if(l.browser){var N=x.buffer,R=new Uint8Array(N,y,v);return c.getRandomValues(R),S?void l.nextTick((function(){S(null,x)})):x}if(!S)return t(v).copy(x,y),x;t(v,(function(B,M){if(B)return S(B);M.copy(x,y),S(null,x)}))}c&&c.getRandomValues||!l.browser?(f.randomFill=function(x,y,v,S){if(!(n.isBuffer(x)||x instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")S=y,y=0,v=x.length;else if(typeof v=="function")S=v,v=x.length-y;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return b(y,x.length),g(v,y,x.length),p(x,y,v,S)},f.randomFillSync=function(x,y,v){if(y===void 0&&(y=0),!(n.isBuffer(x)||x instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return b(y,x.length),v===void 0&&(v=x.length-y),g(v,y,x.length),p(x,y,v)}):(f.randomFill=o,f.randomFillSync=o)}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,h,f){var l={};function s(r,t,n){n||(n=Error);var u=(function(c){var d,b;function g(p,x,y){return c.call(this,(function(v,S,N){return typeof t=="string"?t:t(v,S,N)})(p,x,y))||this}return b=c,(d=g).prototype=Object.create(b.prototype),d.prototype.constructor=d,d.__proto__=b,g})(n);u.prototype.name=n.name,u.prototype.code=r,l[r]=u}function o(r,t){if(Array.isArray(r)){var n=r.length;return r=r.map((function(u){return String(u)})),n>2?"one of ".concat(t," ").concat(r.slice(0,n-1).join(", "),", or ")+r[n-1]:n===2?"one of ".concat(t," ").concat(r[0]," or ").concat(r[1]):"of ".concat(t," ").concat(r[0])}return"of ".concat(t," ").concat(String(r))}s("ERR_INVALID_OPT_VALUE",(function(r,t){return'The value "'+t+'" is invalid for option "'+r+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(r,t,n){var u,c,d;if(typeof t=="string"&&(c="not ",t.substr(0,c.length)===c)?(u="must not be",t=t.replace(/^not /,"")):u="must be",(function(g,p,x){return(x===void 0||x>g.length)&&(x=g.length),g.substring(x-p.length,x)===p})(r," argument"))d="The ".concat(r," ").concat(u," ").concat(o(t,"type"));else{var b=(function(g,p,x){return typeof x!="number"&&(x=0),!(x+p.length>g.length)&&g.indexOf(p,x)!==-1})(r,".")?"property":"argument";d='The "'.concat(r,'" ').concat(b," ").concat(u," ").concat(o(t,"type"))}return d+=". Received type ".concat(typeof n)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(r){return"The "+r+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(r){return"Cannot call "+r+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(r){return"Unknown encoding: "+r}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),h.exports.codes=l},{}],478:[function(e,h,f){(function(l){(function(){var s=Object.keys||function(g){var p=[];for(var x in g)p.push(x);return p};h.exports=c;var o=e("./_stream_readable"),r=e("./_stream_writable");e("inherits")(c,o);for(var t=s(r.prototype),n=0;n<t.length;n++){var u=t[n];c.prototype[u]||(c.prototype[u]=r.prototype[u])}function c(g){if(!(this instanceof c))return new c(g);o.call(this,g),r.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||l.nextTick(b,this)}function b(g){g.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,h,f){h.exports=s;var l=e("./_stream_transform");function s(o){if(!(this instanceof s))return new s(o);l.call(this,o)}e("inherits")(s,l),s.prototype._transform=function(o,r,t){t(null,o)}},{"./_stream_transform":481,inherits:440}],480:[function(e,h,f){(function(l,s){(function(){var o;h.exports=O,O.ReadableState=V,e("events").EventEmitter;var r=function($,L){return $.listeners(L).length},t=e("./internal/streams/stream"),n=e("buffer").Buffer,u=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},c,d=e("util");c=d&&d.debuglog?d.debuglog("stream"):function(){};var b,g,p,x=e("./internal/streams/buffer_list"),y=e("./internal/streams/destroy"),v=e("./internal/streams/state").getHighWaterMark,S=e("../errors").codes,N=S.ERR_INVALID_ARG_TYPE,R=S.ERR_STREAM_PUSH_AFTER_EOF,B=S.ERR_METHOD_NOT_IMPLEMENTED,M=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(O,t);var F=y.errorOrDestroy,q=["error","close","destroy","pause","resume"];function V($,L,W){o=o||e("./_stream_duplex"),$=$||{},typeof W!="boolean"&&(W=L instanceof o),this.objectMode=!!$.objectMode,W&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=v(this,$,"readableHighWaterMark",W),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(b||(b=e("string_decoder/").StringDecoder),this.decoder=new b($.encoding),this.encoding=$.encoding)}function O($){if(o=o||e("./_stream_duplex"),!(this instanceof O))return new O($);var L=this instanceof o;this._readableState=new V($,this,L),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),t.call(this)}function T($,L,W,re,ne){c("readableAddChunk",L);var se,H=$._readableState;if(L===null)H.reading=!1,(function(ce,ae){if(c("onEofChunk"),!ae.ended){if(ae.decoder){var Y=ae.decoder.end();Y&&Y.length&&(ae.buffer.push(Y),ae.length+=ae.objectMode?1:Y.length)}ae.ended=!0,ae.sync?w(ce):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,_(ce)))}})($,H);else if(ne||(se=(function(ce,ae){var Y;Q=ae,n.isBuffer(Q)||Q instanceof u||typeof ae=="string"||ae===void 0||ce.objectMode||(Y=new N("chunk",["string","Buffer","Uint8Array"],ae));var Q;return Y})(H,L)),se)F($,se);else if(H.objectMode||L&&L.length>0)if(typeof L=="string"||H.objectMode||Object.getPrototypeOf(L)===n.prototype||(L=(function(ce){return n.from(ce)})(L)),re)H.endEmitted?F($,new M):A($,H,L,!0);else if(H.ended)F($,new R);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!W?(L=H.decoder.write(L),H.objectMode||L.length!==0?A($,H,L,!1):j($,H)):A($,H,L,!1)}else re||(H.reading=!1,j($,H));return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function A($,L,W,re){L.flowing&&L.length===0&&!L.sync?(L.awaitDrain=0,$.emit("data",W)):(L.length+=L.objectMode?1:W.length,re?L.buffer.unshift(W):L.buffer.push(W),L.needReadable&&w($)),j($,L)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),O.prototype.destroy=y.destroy,O.prototype._undestroy=y.undestroy,O.prototype._destroy=function($,L){L($)},O.prototype.push=function($,L){var W,re=this._readableState;return re.objectMode?W=!0:typeof $=="string"&&((L=L||re.defaultEncoding)!==re.encoding&&($=n.from($,L),L=""),W=!0),T(this,$,L,!1,W)},O.prototype.unshift=function($){return T(this,$,null,!0,!1)},O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function($){b||(b=e("string_decoder/").StringDecoder);var L=new b($);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,re="";W!==null;)re+=L.write(W.data),W=W.next;return this._readableState.buffer.clear(),re!==""&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};function C($,L){return $<=0||L.length===0&&L.ended?0:L.objectMode?1:$!=$?L.flowing&&L.length?L.buffer.head.data.length:L.length:($>L.highWaterMark&&(L.highWaterMark=(function(W){return W>=1073741824?W=1073741824:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W})($)),$<=L.length?$:L.ended?L.length:(L.needReadable=!0,0))}function w($){var L=$._readableState;c("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(c("emitReadable",L.flowing),L.emittedReadable=!0,l.nextTick(_,$))}function _($){var L=$._readableState;c("emitReadable_",L.destroyed,L.length,L.ended),L.destroyed||!L.length&&!L.ended||($.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,X($)}function j($,L){L.readingMore||(L.readingMore=!0,l.nextTick(k,$,L))}function k($,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){var W=L.length;if(c("maybeReadMore read 0"),$.read(0),W===L.length)break}L.readingMore=!1}function E($){var L=$._readableState;L.readableListening=$.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:$.listenerCount("data")>0&&$.resume()}function I($){c("readable nexttick read 0"),$.read(0)}function D($,L){c("resume",L.reading),L.reading||$.read(0),L.resumeScheduled=!1,$.emit("resume"),X($),L.flowing&&!L.reading&&$.read(0)}function X($){var L=$._readableState;for(c("flow",L.flowing);L.flowing&&$.read()!==null;);}function G($,L){return L.length===0?null:(L.objectMode?W=L.buffer.shift():!$||$>=L.length?(W=L.decoder?L.buffer.join(""):L.buffer.length===1?L.buffer.first():L.buffer.concat(L.length),L.buffer.clear()):W=L.buffer.consume($,L.decoder),W);var W}function K($){var L=$._readableState;c("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,l.nextTick(U,L,$))}function U($,L){if(c("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,L.readable=!1,L.emit("end"),$.autoDestroy)){var W=L._writableState;(!W||W.autoDestroy&&W.finished)&&L.destroy()}}function J($,L){for(var W=0,re=$.length;W<re;W++)if($[W]===L)return W;return-1}O.prototype.read=function($){c("read",$),$=parseInt($,10);var L=this._readableState,W=$;if($!==0&&(L.emittedReadable=!1),$===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return c("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?K(this):w(this),null;if(($=C($,L))===0&&L.ended)return L.length===0&&K(this),null;var re,ne=L.needReadable;return c("need readable",ne),(L.length===0||L.length-$<L.highWaterMark)&&c("length less than watermark",ne=!0),L.ended||L.reading?c("reading or ended",ne=!1):ne&&(c("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||($=C(W,L))),(re=$>0?G($,L):null)===null?(L.needReadable=L.length<=L.highWaterMark,$=0):(L.length-=$,L.awaitDrain=0),L.length===0&&(L.ended||(L.needReadable=!0),W!==$&&L.ended&&K(this)),re!==null&&this.emit("data",re),re},O.prototype._read=function($){F(this,new B("_read()"))},O.prototype.pipe=function($,L){var W=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=$;break;case 1:re.pipes=[re.pipes,$];break;default:re.pipes.push($)}re.pipesCount+=1,c("pipe count=%d opts=%j",re.pipesCount,L);var ne=(!L||L.end!==!1)&&$!==l.stdout&&$!==l.stderr?H:le;function se(ee,oe){c("onunpipe"),ee===W&&oe&&oe.hasUnpiped===!1&&(oe.hasUnpiped=!0,c("cleanup"),$.removeListener("close",te),$.removeListener("finish",ie),$.removeListener("drain",ce),$.removeListener("error",Q),$.removeListener("unpipe",se),W.removeListener("end",H),W.removeListener("end",le),W.removeListener("data",Y),ae=!0,!re.awaitDrain||$._writableState&&!$._writableState.needDrain||ce())}function H(){c("onend"),$.end()}re.endEmitted?l.nextTick(ne):W.once("end",ne),$.on("unpipe",se);var ce=(function(ee){return function(){var oe=ee._readableState;c("pipeOnDrain",oe.awaitDrain),oe.awaitDrain&&oe.awaitDrain--,oe.awaitDrain===0&&r(ee,"data")&&(oe.flowing=!0,X(ee))}})(W);$.on("drain",ce);var ae=!1;function Y(ee){c("ondata");var oe=$.write(ee);c("dest.write",oe),oe===!1&&((re.pipesCount===1&&re.pipes===$||re.pipesCount>1&&J(re.pipes,$)!==-1)&&!ae&&(c("false write response, pause",re.awaitDrain),re.awaitDrain++),W.pause())}function Q(ee){c("onerror",ee),le(),$.removeListener("error",Q),r($,"error")===0&&F($,ee)}function te(){$.removeListener("finish",ie),le()}function ie(){c("onfinish"),$.removeListener("close",te),le()}function le(){c("unpipe"),W.unpipe($)}return W.on("data",Y),(function(ee,oe,de){if(typeof ee.prependListener=="function")return ee.prependListener(oe,de);ee._events&&ee._events[oe]?Array.isArray(ee._events[oe])?ee._events[oe].unshift(de):ee._events[oe]=[de,ee._events[oe]]:ee.on(oe,de)})($,"error",Q),$.once("close",te),$.once("finish",ie),$.emit("pipe",W),re.flowing||(c("pipe resume"),W.resume()),$},O.prototype.unpipe=function($){var L=this._readableState,W={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return $&&$!==L.pipes||($||($=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,$&&$.emit("unpipe",this,W)),this;if(!$){var re=L.pipes,ne=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var se=0;se<ne;se++)re[se].emit("unpipe",this,{hasUnpiped:!1});return this}var H=J(L.pipes,$);return H===-1||(L.pipes.splice(H,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),$.emit("unpipe",this,W)),this},O.prototype.on=function($,L){var W=t.prototype.on.call(this,$,L),re=this._readableState;return $==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):$==="readable"&&(re.endEmitted||re.readableListening||(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,c("on readable",re.length,re.reading),re.length?w(this):re.reading||l.nextTick(I,this))),W},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function($,L){var W=t.prototype.removeListener.call(this,$,L);return $==="readable"&&l.nextTick(E,this),W},O.prototype.removeAllListeners=function($){var L=t.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||l.nextTick(E,this),L},O.prototype.resume=function(){var $=this._readableState;return $.flowing||(c("resume"),$.flowing=!$.readableListening,(function(L,W){W.resumeScheduled||(W.resumeScheduled=!0,l.nextTick(D,L,W))})(this,$)),$.paused=!1,this},O.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function($){var L=this,W=this._readableState,re=!1;for(var ne in $.on("end",(function(){if(c("wrapped end"),W.decoder&&!W.ended){var H=W.decoder.end();H&&H.length&&L.push(H)}L.push(null)})),$.on("data",(function(H){c("wrapped data"),W.decoder&&(H=W.decoder.write(H)),W.objectMode&&H==null||(W.objectMode||H&&H.length)&&(L.push(H)||(re=!0,$.pause()))})),$)this[ne]===void 0&&typeof $[ne]=="function"&&(this[ne]=(function(H){return function(){return $[H].apply($,arguments)}})(ne));for(var se=0;se<q.length;se++)$.on(q[se],this.emit.bind(this,q[se]));return this._read=function(H){c("wrapped _read",H),re&&(re=!1,$.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=e("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),O._fromList=G,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(O.from=function($,L){return p===void 0&&(p=e("./internal/streams/from")),p(O,$,L)})}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,h,f){h.exports=c;var l=e("../errors").codes,s=l.ERR_METHOD_NOT_IMPLEMENTED,o=l.ERR_MULTIPLE_CALLBACK,r=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=l.ERR_TRANSFORM_WITH_LENGTH_0,n=e("./_stream_duplex");function u(g,p){var x=this._transformState;x.transforming=!1;var y=x.writecb;if(y===null)return this.emit("error",new o);x.writechunk=null,x.writecb=null,p!=null&&this.push(p),y(g);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function c(g){if(!(this instanceof c))return new c(g);n.call(this,g),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",d)}function d(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?b(this,null,null):this._flush((function(p,x){b(g,p,x)}))}function b(g,p,x){if(p)return g.emit("error",p);if(x!=null&&g.push(x),g._writableState.length)throw new t;if(g._transformState.transforming)throw new r;return g.push(null)}e("inherits")(c,n),c.prototype.push=function(g,p){return this._transformState.needTransform=!1,n.prototype.push.call(this,g,p)},c.prototype._transform=function(g,p,x){x(new s("_transform()"))},c.prototype._write=function(g,p,x){var y=this._transformState;if(y.writecb=x,y.writechunk=g,y.writeencoding=p,!y.transforming){var v=this._readableState;(y.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},c.prototype._read=function(g){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},c.prototype._destroy=function(g,p){n.prototype._destroy.call(this,g,(function(x){p(x)}))}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,h,f){(function(l,s){(function(){function o(k){var E=this;this.next=null,this.entry=null,this.finish=function(){(function(I,D,X){var G=I.entry;for(I.entry=null;G;){var K=G.callback;D.pendingcb--,K(X),G=G.next}D.corkedRequestsFree.next=I})(E,k)}}var r;h.exports=O,O.WritableState=V;var t={deprecate:e("util-deprecate")},n=e("./internal/streams/stream"),u=e("buffer").Buffer,c=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d,b=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,p=e("../errors").codes,x=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,v=p.ERR_MULTIPLE_CALLBACK,S=p.ERR_STREAM_CANNOT_PIPE,N=p.ERR_STREAM_DESTROYED,R=p.ERR_STREAM_NULL_VALUES,B=p.ERR_STREAM_WRITE_AFTER_END,M=p.ERR_UNKNOWN_ENCODING,F=b.errorOrDestroy;function q(){}function V(k,E,I){r=r||e("./_stream_duplex"),k=k||{},typeof I!="boolean"&&(I=E instanceof r),this.objectMode=!!k.objectMode,I&&(this.objectMode=this.objectMode||!!k.writableObjectMode),this.highWaterMark=g(this,k,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=k.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=k.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){(function(G,K){var U=G._writableState,J=U.sync,$=U.writecb;if(typeof $!="function")throw new v;if((function(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0})(U),K)(function(W,re,ne,se,H){--re.pendingcb,ne?(l.nextTick(H,se),l.nextTick(j,W,re),W._writableState.errorEmitted=!0,F(W,se)):(H(se),W._writableState.errorEmitted=!0,F(W,se),j(W,re))})(G,U,J,K,$);else{var L=w(U)||G.destroyed;L||U.corked||U.bufferProcessing||!U.bufferedRequest||C(G,U),J?l.nextTick(A,G,U,L,$):A(G,U,L,$)}})(E,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=k.emitClose!==!1,this.autoDestroy=!!k.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function O(k){var E=this instanceof(r=r||e("./_stream_duplex"));if(!E&&!d.call(O,this))return new O(k);this._writableState=new V(k,this,E),this.writable=!0,k&&(typeof k.write=="function"&&(this._write=k.write),typeof k.writev=="function"&&(this._writev=k.writev),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.final=="function"&&(this._final=k.final)),n.call(this)}function T(k,E,I,D,X,G,K){E.writelen=D,E.writecb=K,E.writing=!0,E.sync=!0,E.destroyed?E.onwrite(new N("write")):I?k._writev(X,E.onwrite):k._write(X,G,E.onwrite),E.sync=!1}function A(k,E,I,D){I||(function(X,G){G.length===0&&G.needDrain&&(G.needDrain=!1,X.emit("drain"))})(k,E),E.pendingcb--,D(),j(k,E)}function C(k,E){E.bufferProcessing=!0;var I=E.bufferedRequest;if(k._writev&&I&&I.next){var D=E.bufferedRequestCount,X=new Array(D),G=E.corkedRequestsFree;G.entry=I;for(var K=0,U=!0;I;)X[K]=I,I.isBuf||(U=!1),I=I.next,K+=1;X.allBuffers=U,T(k,E,!0,E.length,X,"",G.finish),E.pendingcb++,E.lastBufferedRequest=null,G.next?(E.corkedRequestsFree=G.next,G.next=null):E.corkedRequestsFree=new o(E),E.bufferedRequestCount=0}else{for(;I;){var J=I.chunk,$=I.encoding,L=I.callback;if(T(k,E,!1,E.objectMode?1:J.length,J,$,L),I=I.next,E.bufferedRequestCount--,E.writing)break}I===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=I,E.bufferProcessing=!1}function w(k){return k.ending&&k.length===0&&k.bufferedRequest===null&&!k.finished&&!k.writing}function _(k,E){k._final((function(I){E.pendingcb--,I&&F(k,I),E.prefinished=!0,k.emit("prefinish"),j(k,E)}))}function j(k,E){var I=w(E);if(I&&((function(X,G){G.prefinished||G.finalCalled||(typeof X._final!="function"||G.destroyed?(G.prefinished=!0,X.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,l.nextTick(_,X,G)))})(k,E),E.pendingcb===0&&(E.finished=!0,k.emit("finish"),E.autoDestroy))){var D=k._readableState;(!D||D.autoDestroy&&D.endEmitted)&&k.destroy()}return I}e("inherits")(O,n),V.prototype.getBuffer=function(){for(var k=this.bufferedRequest,E=[];k;)E.push(k),k=k.next;return E},(function(){try{Object.defineProperty(V.prototype,"buffer",{get:t.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(k){return!!d.call(this,k)||this===O&&k&&k._writableState instanceof V}})):d=function(k){return k instanceof this},O.prototype.pipe=function(){F(this,new S)},O.prototype.write=function(k,E,I){var D,X=this._writableState,G=!1,K=!X.objectMode&&(D=k,u.isBuffer(D)||D instanceof c);return K&&!u.isBuffer(k)&&(k=(function(U){return u.from(U)})(k)),typeof E=="function"&&(I=E,E=null),K?E="buffer":E||(E=X.defaultEncoding),typeof I!="function"&&(I=q),X.ending?(function(U,J){var $=new B;F(U,$),l.nextTick(J,$)})(this,I):(K||(function(U,J,$,L){var W;return $===null?W=new R:typeof $=="string"||J.objectMode||(W=new x("chunk",["string","Buffer"],$)),!W||(F(U,W),l.nextTick(L,W),!1)})(this,X,k,I))&&(X.pendingcb++,G=(function(U,J,$,L,W,re){if(!$){var ne=(function(ae,Y,Q){return ae.objectMode||ae.decodeStrings===!1||typeof Y!="string"||(Y=u.from(Y,Q)),Y})(J,L,W);L!==ne&&($=!0,W="buffer",L=ne)}var se=J.objectMode?1:L.length;J.length+=se;var H=J.length<J.highWaterMark;if(H||(J.needDrain=!0),J.writing||J.corked){var ce=J.lastBufferedRequest;J.lastBufferedRequest={chunk:L,encoding:W,isBuf:$,callback:re,next:null},ce?ce.next=J.lastBufferedRequest:J.bufferedRequest=J.lastBufferedRequest,J.bufferedRequestCount+=1}else T(U,J,!1,se,L,W,re);return H})(this,X,K,k,E,I)),G},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var k=this._writableState;k.corked&&(k.corked--,k.writing||k.corked||k.bufferProcessing||!k.bufferedRequest||C(this,k))},O.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=k.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((k+"").toLowerCase())>-1))throw new M(k);return this._writableState.defaultEncoding=k,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(k,E,I){I(new y("_write()"))},O.prototype._writev=null,O.prototype.end=function(k,E,I){var D=this._writableState;return typeof k=="function"?(I=k,k=null,E=null):typeof E=="function"&&(I=E,E=null),k!=null&&this.write(k,E),D.corked&&(D.corked=1,this.uncork()),D.ending||(function(X,G,K){G.ending=!0,j(X,G),K&&(G.finished?l.nextTick(K):X.once("finish",K)),G.ended=!0,X.writable=!1})(this,D,I),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(k){this._writableState&&(this._writableState.destroyed=k)}}),O.prototype.destroy=b.destroy,O.prototype._undestroy=b.undestroy,O.prototype._destroy=function(k,E){E(k)}}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,h,f){(function(l){(function(){var s;function o(N,R,B){return(R=(function(M){var F=(function(q,V){if(typeof q!="object"||q===null)return q;var O=q[Symbol.toPrimitive];if(O!==void 0){var T=O.call(q,V);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(q)})(M,"string");return typeof F=="symbol"?F:String(F)})(R))in N?Object.defineProperty(N,R,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[R]=B,N}var r=e("./end-of-stream"),t=Symbol("lastResolve"),n=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),b=Symbol("handlePromise"),g=Symbol("stream");function p(N,R){return{value:N,done:R}}function x(N){var R=N[t];if(R!==null){var B=N[g].read();B!==null&&(N[d]=null,N[t]=null,N[n]=null,R(p(B,!1)))}}function y(N){l.nextTick(x,N)}var v=Object.getPrototypeOf((function(){})),S=Object.setPrototypeOf((o(s={get stream(){return this[g]},next:function(){var N=this,R=this[u];if(R!==null)return Promise.reject(R);if(this[c])return Promise.resolve(p(void 0,!0));if(this[g].destroyed)return new Promise((function(q,V){l.nextTick((function(){N[u]?V(N[u]):q(p(void 0,!0))}))}));var B,M=this[d];if(M)B=new Promise((function(q,V){return function(O,T){q.then((function(){V[c]?O(p(void 0,!0)):V[b](O,T)}),T)}})(M,this));else{var F=this[g].read();if(F!==null)return Promise.resolve(p(F,!1));B=new Promise(this[b])}return this[d]=B,B}},Symbol.asyncIterator,(function(){return this})),o(s,"return",(function(){var N=this;return new Promise((function(R,B){N[g].destroy(null,(function(M){M?B(M):R(p(void 0,!0))}))}))})),s),v);h.exports=function(N){var R,B=Object.create(S,(o(R={},g,{value:N,writable:!0}),o(R,t,{value:null,writable:!0}),o(R,n,{value:null,writable:!0}),o(R,u,{value:null,writable:!0}),o(R,c,{value:N._readableState.endEmitted,writable:!0}),o(R,b,{value:function(M,F){var q=B[g].read();q?(B[d]=null,B[t]=null,B[n]=null,M(p(q,!1))):(B[t]=M,B[n]=F)},writable:!0}),R));return B[d]=null,r(N,(function(M){if(M&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=B[n];return F!==null&&(B[d]=null,B[t]=null,B[n]=null,F(M)),void(B[u]=M)}var q=B[t];q!==null&&(B[d]=null,B[t]=null,B[n]=null,q(p(void 0,!0))),B[c]=!0})),N.on("readable",y.bind(null,B)),B}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,h,f){function l(d,b){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);b&&(p=p.filter((function(x){return Object.getOwnPropertyDescriptor(d,x).enumerable}))),g.push.apply(g,p)}return g}function s(d){for(var b=1;b<arguments.length;b++){var g=arguments[b]!=null?arguments[b]:{};b%2?l(Object(g),!0).forEach((function(p){o(d,p,g[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):l(Object(g)).forEach((function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(g,p))}))}return d}function o(d,b,g){return(b=t(b))in d?Object.defineProperty(d,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[b]=g,d}function r(d,b){for(var g=0;g<b.length;g++){var p=b[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,t(p.key),p)}}function t(d){var b=(function(g,p){if(typeof g!="object"||g===null)return g;var x=g[Symbol.toPrimitive];if(x!==void 0){var y=x.call(g,p);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(g)})(d,"string");return typeof b=="symbol"?b:String(b)}var n=e("buffer").Buffer,u=e("util").inspect,c=u&&u.custom||"inspect";h.exports=(function(){function d(){(function(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}var b,g;return b=d,(g=[{key:"push",value:function(p){var x={data:p,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(p){var x={data:p,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var x=this.head,y=""+x.data;x=x.next;)y+=p+x.data;return y}},{key:"concat",value:function(p){if(this.length===0)return n.alloc(0);for(var x,y,v,S=n.allocUnsafe(p>>>0),N=this.head,R=0;N;)x=N.data,y=S,v=R,n.prototype.copy.call(x,y,v),R+=N.data.length,N=N.next;return S}},{key:"consume",value:function(p,x){var y;return p<this.head.data.length?(y=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):y=p===this.head.data.length?this.shift():x?this._getString(p):this._getBuffer(p),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var x=this.head,y=1,v=x.data;for(p-=v.length;x=x.next;){var S=x.data,N=p>S.length?S.length:p;if(N===S.length?v+=S:v+=S.slice(0,p),(p-=N)==0){N===S.length?(++y,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=S.slice(N));break}++y}return this.length-=y,v}},{key:"_getBuffer",value:function(p){var x=n.allocUnsafe(p),y=this.head,v=1;for(y.data.copy(x),p-=y.data.length;y=y.next;){var S=y.data,N=p>S.length?S.length:p;if(S.copy(x,x.length-p,0,N),(p-=N)==0){N===S.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=S.slice(N));break}++v}return this.length-=v,x}},{key:c,value:function(p,x){return u(this,s(s({},x),{},{depth:0,customInspect:!1}))}}])&&r(b.prototype,g),Object.defineProperty(b,"prototype",{writable:!1}),d})()},{buffer:220,util:188}],485:[function(e,h,f){(function(l){(function(){function s(t,n){r(t,n),o(t)}function o(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,n){t.emit("error",n)}h.exports={destroy:function(t,n){var u=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(r,this,t)):l.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(b){!n&&b?u._writableState?u._writableState.errorEmitted?l.nextTick(o,u):(u._writableState.errorEmitted=!0,l.nextTick(s,u,b)):l.nextTick(s,u,b):n?(l.nextTick(o,u),n(b)):l.nextTick(o,u)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,n){var u=t._readableState,c=t._writableState;u&&u.autoDestroy||c&&c.autoDestroy?t.destroy(n):t.emit("error",n)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,h,f){var l=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}h.exports=function o(r,t,n){if(typeof t=="function")return o(r,null,t);t||(t={}),n=(function(N){var R=!1;return function(){if(!R){R=!0;for(var B=arguments.length,M=new Array(B),F=0;F<B;F++)M[F]=arguments[F];N.apply(this,M)}}})(n||s);var u=t.readable||t.readable!==!1&&r.readable,c=t.writable||t.writable!==!1&&r.writable,d=function(){r.writable||g()},b=r._writableState&&r._writableState.finished,g=function(){c=!1,b=!0,u||n.call(r)},p=r._readableState&&r._readableState.endEmitted,x=function(){u=!1,p=!0,c||n.call(r)},y=function(N){n.call(r,N)},v=function(){var N;return u&&!p?(r._readableState&&r._readableState.ended||(N=new l),n.call(r,N)):c&&!b?(r._writableState&&r._writableState.ended||(N=new l),n.call(r,N)):void 0},S=function(){r.req.on("finish",g)};return(function(N){return N.setHeader&&typeof N.abort=="function"})(r)?(r.on("complete",g),r.on("abort",v),r.req?S():r.on("request",S)):c&&!r._writableState&&(r.on("end",d),r.on("close",d)),r.on("end",x),r.on("finish",g),t.error!==!1&&r.on("error",y),r.on("close",v),function(){r.removeListener("complete",g),r.removeListener("abort",v),r.removeListener("request",S),r.req&&r.req.removeListener("finish",g),r.removeListener("end",d),r.removeListener("close",d),r.removeListener("finish",g),r.removeListener("end",x),r.removeListener("error",y),r.removeListener("close",v)}}},{"../../../errors":477}],487:[function(e,h,f){h.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,h,f){var l,s=e("../../../errors").codes,o=s.ERR_MISSING_ARGS,r=s.ERR_STREAM_DESTROYED;function t(b){if(b)throw b}function n(b,g,p,x){x=(function(S){var N=!1;return function(){N||(N=!0,S.apply(void 0,arguments))}})(x);var y=!1;b.on("close",(function(){y=!0})),l===void 0&&(l=e("./end-of-stream")),l(b,{readable:g,writable:p},(function(S){if(S)return x(S);y=!0,x()}));var v=!1;return function(S){if(!y&&!v)return v=!0,(function(N){return N.setHeader&&typeof N.abort=="function"})(b)?b.abort():typeof b.destroy=="function"?b.destroy():void x(S||new r("pipe"))}}function u(b){b()}function c(b,g){return b.pipe(g)}function d(b){return b.length?typeof b[b.length-1]!="function"?t:b.pop():t}h.exports=function(){for(var b=arguments.length,g=new Array(b),p=0;p<b;p++)g[p]=arguments[p];var x,y=d(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new o("streams");var v=g.map((function(S,N){var R=N<g.length-1;return n(S,R,N>0,(function(B){x||(x=B),B&&v.forEach(u),R||(v.forEach(u),y(x))}))}));return g.reduce(c)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,h,f){var l=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;h.exports={getHighWaterMark:function(s,o,r,t){var n=(function(u,c,d){return u.highWaterMark!=null?u.highWaterMark:c?u[d]:null})(o,t,r);if(n!=null){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new l(t?r:"highWaterMark",n);return Math.floor(n)}return s.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,h,f){h.exports=e("events").EventEmitter},{events:422}],491:[function(e,h,f){(f=h.exports=e("./lib/_stream_readable.js")).Stream=f,f.Readable=f,f.Writable=e("./lib/_stream_writable.js"),f.Duplex=e("./lib/_stream_duplex.js"),f.Transform=e("./lib/_stream_transform.js"),f.PassThrough=e("./lib/_stream_passthrough.js"),f.finished=e("./lib/internal/streams/end-of-stream.js"),f.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,h,f){var l=(function(s){var o=Object.prototype,r=o.hasOwnProperty,t=Object.defineProperty||function(j,k,E){j[k]=E.value},n=typeof Symbol=="function"?Symbol:{},u=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",d=n.toStringTag||"@@toStringTag";function b(j,k,E){return Object.defineProperty(j,k,{value:E,enumerable:!0,configurable:!0,writable:!0}),j[k]}try{b({},"")}catch{b=function(k,E,I){return k[E]=I}}function g(j,k,E,I){var D=k&&k.prototype instanceof y?k:y,X=Object.create(D.prototype),G=new C(I||[]);return t(X,"_invoke",{value:V(j,E,G)}),X}function p(j,k,E){try{return{type:"normal",arg:j.call(k,E)}}catch(I){return{type:"throw",arg:I}}}s.wrap=g;var x={};function y(){}function v(){}function S(){}var N={};b(N,u,(function(){return this}));var R=Object.getPrototypeOf,B=R&&R(R(w([])));B&&B!==o&&r.call(B,u)&&(N=B);var M=S.prototype=y.prototype=Object.create(N);function F(j){["next","throw","return"].forEach((function(k){b(j,k,(function(E){return this._invoke(k,E)}))}))}function q(j,k){var E;t(this,"_invoke",{value:function(I,D){function X(){return new k((function(G,K){(function U(J,$,L,W){var re=p(j[J],j,$);if(re.type!=="throw"){var ne=re.arg,se=ne.value;return se&&typeof se=="object"&&r.call(se,"__await")?k.resolve(se.__await).then((function(H){U("next",H,L,W)}),(function(H){U("throw",H,L,W)})):k.resolve(se).then((function(H){ne.value=H,L(ne)}),(function(H){return U("throw",H,L,W)}))}W(re.arg)})(I,D,G,K)}))}return E=E?E.then(X,X):X()}})}function V(j,k,E){var I="suspendedStart";return function(D,X){if(I==="executing")throw new Error("Generator is already running");if(I==="completed"){if(D==="throw")throw X;return _()}for(E.method=D,E.arg=X;;){var G=E.delegate;if(G){var K=O(G,E);if(K){if(K===x)continue;return K}}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(I==="suspendedStart")throw I="completed",E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);I="executing";var U=p(j,k,E);if(U.type==="normal"){if(I=E.done?"completed":"suspendedYield",U.arg===x)continue;return{value:U.arg,done:E.done}}U.type==="throw"&&(I="completed",E.method="throw",E.arg=U.arg)}}}function O(j,k){var E=k.method,I=j.iterator[E];if(I===void 0)return k.delegate=null,E==="throw"&&j.iterator.return&&(k.method="return",k.arg=void 0,O(j,k),k.method==="throw")||E!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+E+"' method")),x;var D=p(I,j.iterator,k.arg);if(D.type==="throw")return k.method="throw",k.arg=D.arg,k.delegate=null,x;var X=D.arg;return X?X.done?(k[j.resultName]=X.value,k.next=j.nextLoc,k.method!=="return"&&(k.method="next",k.arg=void 0),k.delegate=null,x):X:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,x)}function T(j){var k={tryLoc:j[0]};1 in j&&(k.catchLoc=j[1]),2 in j&&(k.finallyLoc=j[2],k.afterLoc=j[3]),this.tryEntries.push(k)}function A(j){var k=j.completion||{};k.type="normal",delete k.arg,j.completion=k}function C(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(T,this),this.reset(!0)}function w(j){if(j){var k=j[u];if(k)return k.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var E=-1,I=function D(){for(;++E<j.length;)if(r.call(j,E))return D.value=j[E],D.done=!1,D;return D.value=void 0,D.done=!0,D};return I.next=I}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=S,t(M,"constructor",{value:S,configurable:!0}),t(S,"constructor",{value:v,configurable:!0}),v.displayName=b(S,d,"GeneratorFunction"),s.isGeneratorFunction=function(j){var k=typeof j=="function"&&j.constructor;return!!k&&(k===v||(k.displayName||k.name)==="GeneratorFunction")},s.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,S):(j.__proto__=S,b(j,d,"GeneratorFunction")),j.prototype=Object.create(M),j},s.awrap=function(j){return{__await:j}},F(q.prototype),b(q.prototype,c,(function(){return this})),s.AsyncIterator=q,s.async=function(j,k,E,I,D){D===void 0&&(D=Promise);var X=new q(g(j,k,E,I),D);return s.isGeneratorFunction(k)?X:X.next().then((function(G){return G.done?G.value:X.next()}))},F(M),b(M,d,"Generator"),b(M,u,(function(){return this})),b(M,"toString",(function(){return"[object Generator]"})),s.keys=function(j){var k=Object(j),E=[];for(var I in k)E.push(I);return E.reverse(),function D(){for(;E.length;){var X=E.pop();if(X in k)return D.value=X,D.done=!1,D}return D.done=!0,D}},s.values=w,C.prototype={constructor:C,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!j)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=void 0)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var k=this;function E(U,J){return X.type="throw",X.arg=j,k.next=U,J&&(k.method="next",k.arg=void 0),!!J}for(var I=this.tryEntries.length-1;I>=0;--I){var D=this.tryEntries[I],X=D.completion;if(D.tryLoc==="root")return E("end");if(D.tryLoc<=this.prev){var G=r.call(D,"catchLoc"),K=r.call(D,"finallyLoc");if(G&&K){if(this.prev<D.catchLoc)return E(D.catchLoc,!0);if(this.prev<D.finallyLoc)return E(D.finallyLoc)}else if(G){if(this.prev<D.catchLoc)return E(D.catchLoc,!0)}else{if(!K)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return E(D.finallyLoc)}}}},abrupt:function(j,k){for(var E=this.tryEntries.length-1;E>=0;--E){var I=this.tryEntries[E];if(I.tryLoc<=this.prev&&r.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var D=I;break}}D&&(j==="break"||j==="continue")&&D.tryLoc<=k&&k<=D.finallyLoc&&(D=null);var X=D?D.completion:{};return X.type=j,X.arg=k,D?(this.method="next",this.next=D.finallyLoc,x):this.complete(X)},complete:function(j,k){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&k&&(this.next=k),x},finish:function(j){for(var k=this.tryEntries.length-1;k>=0;--k){var E=this.tryEntries[k];if(E.finallyLoc===j)return this.complete(E.completion,E.afterLoc),A(E),x}},catch:function(j){for(var k=this.tryEntries.length-1;k>=0;--k){var E=this.tryEntries[k];if(E.tryLoc===j){var I=E.completion;if(I.type==="throw"){var D=I.arg;A(E)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(j,k,E){return this.delegate={iterator:w(j),resultName:k,nextLoc:E},this.method==="next"&&(this.arg=void 0),x}},s})(typeof h=="object"?h.exports:{});try{regeneratorRuntime=l}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}},{}],493:[function(e,h,f){var l=e("buffer").Buffer,s=e("inherits"),o=e("hash-base"),r=new Array(16),t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function g(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(R,B){return R<<B|R>>>32-B}function x(R,B,M,F,q,V,O,T){return p(R+(B^M^F)+V+O|0,T)+q|0}function y(R,B,M,F,q,V,O,T){return p(R+(B&M|~B&F)+V+O|0,T)+q|0}function v(R,B,M,F,q,V,O,T){return p(R+((B|~M)^F)+V+O|0,T)+q|0}function S(R,B,M,F,q,V,O,T){return p(R+(B&F|M&~F)+V+O|0,T)+q|0}function N(R,B,M,F,q,V,O,T){return p(R+(B^(M|~F))+V+O|0,T)+q|0}s(g,o),g.prototype._update=function(){for(var R=r,B=0;B<16;++B)R[B]=this._block.readInt32LE(4*B);for(var M=0|this._a,F=0|this._b,q=0|this._c,V=0|this._d,O=0|this._e,T=0|this._a,A=0|this._b,C=0|this._c,w=0|this._d,_=0|this._e,j=0;j<80;j+=1){var k,E;j<16?(k=x(M,F,q,V,O,R[t[j]],d[0],u[j]),E=N(T,A,C,w,_,R[n[j]],b[0],c[j])):j<32?(k=y(M,F,q,V,O,R[t[j]],d[1],u[j]),E=S(T,A,C,w,_,R[n[j]],b[1],c[j])):j<48?(k=v(M,F,q,V,O,R[t[j]],d[2],u[j]),E=v(T,A,C,w,_,R[n[j]],b[2],c[j])):j<64?(k=S(M,F,q,V,O,R[t[j]],d[3],u[j]),E=y(T,A,C,w,_,R[n[j]],b[3],c[j])):(k=N(M,F,q,V,O,R[t[j]],d[4],u[j]),E=x(T,A,C,w,_,R[n[j]],b[4],c[j])),M=O,O=V,V=p(q,10),q=F,F=k,T=_,_=w,w=p(C,10),C=A,A=E}var I=this._b+q+w|0;this._b=this._c+V+_|0,this._c=this._d+O+T|0,this._d=this._e+M+A|0,this._e=this._a+F+C|0,this._a=I},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var R=l.alloc?l.alloc(20):new l(20);return R.writeInt32LE(this._a,0),R.writeInt32LE(this._b,4),R.writeInt32LE(this._c,8),R.writeInt32LE(this._d,12),R.writeInt32LE(this._e,16),R},h.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,h,f){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var l=e("buffer"),s=l.Buffer;function o(t,n){for(var u in t)n[u]=t[u]}function r(t,n,u){return s(t,n,u)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?h.exports=l:(o(l,f),f.Buffer=r),r.prototype=Object.create(s.prototype),o(s,r),r.from=function(t,n,u){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,n,u)},r.alloc=function(t,n,u){if(typeof t!="number")throw new TypeError("Argument must be a number");var c=s(t);return n!==void 0?typeof u=="string"?c.fill(n,u):c.fill(n):c.fill(0),c},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return l.SlowBuffer(t)}},{buffer:220}],495:[function(e,h,f){(function(l){(function(){var s,o=e("buffer"),r=o.Buffer,t={};for(s in o)o.hasOwnProperty(s)&&s!=="SlowBuffer"&&s!=="Buffer"&&(t[s]=o[s]);var n=t.Buffer={};for(s in r)r.hasOwnProperty(s)&&s!=="allocUnsafe"&&s!=="allocUnsafeSlow"&&(n[s]=r[s]);if(t.Buffer.prototype=r.prototype,n.from&&n.from!==Uint8Array.from||(n.from=function(u,c,d){if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof u);if(u&&u.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);return r(u,c,d)}),n.alloc||(n.alloc=function(u,c,d){if(typeof u!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof u);if(u<0||u>=2*(1<<30))throw new RangeError('The value "'+u+'" is invalid for option "size"');var b=r(u);return c&&c.length!==0?typeof d=="string"?b.fill(c,d):b.fill(c):b.fill(0),b}),!t.kStringMaxLength)try{t.kStringMaxLength=l.binding("buffer").kStringMaxLength}catch{}t.constants||(t.constants={MAX_LENGTH:t.kMaxLength},t.kStringMaxLength&&(t.constants.MAX_STRING_LENGTH=t.kStringMaxLength)),h.exports=t}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0});const l=e("xmlchars/xml/1.0/ed5"),s=e("xmlchars/xml/1.1/ed2"),o=e("xmlchars/xmlns/1.0/ed3");var r=l.isS,t=l.isChar,n=l.isNameStartChar,u=l.isNameChar,c=l.S_LIST,d=l.NAME_RE,b=s.isChar,g=o.isNCNameStartChar,p=o.isNCNameChar,x=o.NC_NAME_RE;const y="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:y,xmlns:v},N={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},R=w=>w===34||w===39,B=[34,39],M=[...B,91,62],F=[...B,60,93],q=[61,63,...c],V=[...c,62,38,60];function O(w,_,j){switch(_){case"xml":j!==y&&w.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":j!==v&&w.fail(`xmlns prefix must be bound to ${v}.`)}switch(j){case v:w.fail(_===""?`the default namespace may not be set to ${j}.`:`may not assign a prefix (even "xmlns") to the URI ${v}.`);break;case y:switch(_){case"xml":break;case"":w.fail(`the default namespace may not be set to ${j}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}const T=w=>x.test(w),A=w=>d.test(w);f.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const C={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};f.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;const _=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,_){this.nameStartCheck=g,this.nameCheck=p,this.isName=T,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);const j=this.opt.additionalNamespaces;j!=null&&((function(k,E){for(const I of Object.keys(E))O(k,I,E[I])})(this,j),Object.assign(this.ns,j))}else this.nameStartCheck=n,this.nameCheck=u,this.isName=A,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:_}=this;this.state=_?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=_,this.xmlDeclPossible=!_,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:j}=this.opt;if(j===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");j="1.0"}this.setXMLVersion(j),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(N),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,_){this[C[w]]=_}off(w){this[C[w]]=void 0}makeError(w){var _;let j=(_=this.fileName)!==null&&_!==void 0?_:"";return this.trackPosition&&(j.length>0&&(j+=":"),j+=`${this.line}:${this.column}`),j.length>0&&(j+=": "),new Error(j+w)}fail(w){const _=this.makeError(w),j=this.errorHandler;if(j===void 0)throw _;return j(_),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let _=!1;w===null?(_=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let j=w.length;const k=w.charCodeAt(j-1);!_&&(k===13||k>=55296&&k<=56319)&&(this.carriedFromPrevious=w[j-1],j--,w=w.slice(0,j));const{stateTable:E}=this;for(this.chunk=w,this.i=0;this.i<j;)E[this.state].call(this);return this.chunkPosition+=j,_?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const j=w.charCodeAt(_);if(this.column++,j<55296){if(j>=32||j===9)return j;switch(j){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(_+1)===10&&(this.i=_+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),j}}if(j>56319)return j>=57344&&j<=65533||this.fail("disallowed character."),j;const k=65536+1024*(j-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,k>1114111&&this.fail("disallowed character."),k}getCode11(){const{chunk:w,i:_}=this;if(this.prevI=_,this.i=_+1,_>=w.length)return-1;const j=w.charCodeAt(_);if(this.column++,j<55296){if(j>31&&j<127||j>159&&j!==8232||j===9)return j;switch(j){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const E=w.charCodeAt(_+1);E!==10&&E!==133||(this.i=_+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),j}}if(j>56319)return j>=57344&&j<=65533||this.fail("disallowed character."),j;const k=65536+1024*(j-55296)+(w.charCodeAt(_+1)-56320);return this.i=_+2,k>1114111&&this.fail("disallowed character."),k}getCodeNorm(){const w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:_}=this;const{chunk:j}=this;for(;;){const k=this.getCode(),E=k===-2,I=E?10:k;if(I===-1||w.includes(I))return this.text+=j.slice(_,this.prevI),I;E&&(this.text+=j.slice(_,this.prevI)+`
`,_=this.i)}}captureToChar(w){let{i:_}=this;const{chunk:j}=this;for(;;){let k=this.getCode();switch(k){case-2:this.text+=j.slice(_,this.prevI)+`
`,_=this.i,k=10;break;case-1:return this.text+=j.slice(_),!1}if(k===w)return this.text+=j.slice(_,this.prevI),!0}}captureNameChars(){const{chunk:w,i:_}=this;for(;;){const j=this.getCode();if(j===-1)return this.name+=w.slice(_),-1;if(!u(j))return this.name+=w.slice(_,this.prevI),j===-2?10:j}}skipSpaces(){for(;;){const w=this.getCodeNorm();if(w===-1||!r(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=t,this.getCode=this.getCode10):(this.isChar=b,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const w=this.i,_=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),_){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;const _=this.captureTo(M);switch(_){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(_),_===91?this.state=4:R(_)&&(this.state=3,this.q=_)}}sDoctypeQuote(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){const w=this.captureTo(F);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:R(w)&&(this.state=5,this.q=w))}sDTDQuoted(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){const w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const w=String.fromCodePoint(this.getCodeNorm()),_=this.openWakaBang+=w;this.text+=w,_!=="-"&&(this.state=_==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this;const{chunk:_}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=_.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{const{entityReturnState:j}=this,k=this.entity+_.slice(w,this.prevI);let E;this.state=j,k===""?(this.fail("empty entity name."),E="&;"):(E=this.parseEntity(k),this.entity=""),j===13&&this.textHandler===void 0||(this.text+=E);break e}case-1:this.entity+=_.slice(w);break e}}sOpenWaka(){const w=this.getCode();if(n(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;const _=this.getCodeNorm();_===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(_),this.state=17)}sCommentEnded(){const w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;const _=this.getCodeNorm();switch(_){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(_),this.state=20}}sPIFirstChar(){const w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||r(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){const{chunk:w,i:_}=this;for(;;){const j=this.getCodeNorm();if(j===-1)return void(this.piTarget+=w.slice(_));if(!this.nameCheck(j)){this.piTarget+=w.slice(_,this.prevI);const k=j===63;k||r(j)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=k?33:27):this.state=k?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(j));break}}}sPIBody(){if(this.text.length===0){const w=this.getCodeNorm();w===63?this.state=26:r(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;const _=this.getCodeNorm();if(_===62){const{piTarget:j}=this;j.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:j,body:this.text}),this.piTarget=this.text="",this.state=13}else _===63?this.text+="?":(this.text+="?"+String.fromCodePoint(_),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){const w=this.captureTo(q);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(r(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");r(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");r(w)||(R(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;const _=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const j=_;this.xmlDecl.version=j,/^1\.[0-9]+$/.test(j)?this.opt.forceXMLVersion||this.setXMLVersion(j):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(_)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=_;break;case"standalone":_!=="yes"&&_!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=_}this.name="",this.state=32}sXMLDeclSeparator(){const w=this.getCodeNorm();w!==63?(r(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;const _=this.captureNameChars();if(_===-1)return;const j=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=j.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,j),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),_){case 62:this.openTag();break;case 47:this.state=35;break;default:r(_)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const w=this.skipSpaces();w!==-1&&(n(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const w=this.captureNameChars();w===61?this.state=39:r(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():n(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const w=this.getCodeNorm();R(w)?(this.q=w,this.state=40):r(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:w,chunk:_}=this;let{i:j}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+_.slice(j,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=_.slice(j,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=_.slice(j,this.prevI)+" ",j=this.i;break;case 60:return this.text+=_.slice(j,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=_.slice(j))}}sAttribValueClosed(){const w=this.getCodeNorm();r(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:n(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const w=this.captureTo(V);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){const w=this.captureNameChars();w===62?this.closeTag():r(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:_}=this;const{chunk:j,textHandler:k}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,k!==void 0){const{text:E}=this,I=j.slice(w,this.prevI);E.length!==0?(k(E+I),this.text=""):I.length!==0&&k(I)}_=0;break e;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=j.slice(w,this.prevI)),_=0;break e;case 93:switch(_){case 0:_=1;break;case 1:_=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:_===2&&this.fail('the string "]]>" is disallowed in char data.'),_=0;break;case-2:k!==void 0&&(this.text+=j.slice(w,this.prevI)+`
`),w=this.i,_=0;break;case-1:k!==void 0&&(this.text+=j.slice(w));break e;default:_=0}this.forbiddenState=_}handleTextOutsideRoot(){let{i:w}=this;const{chunk:_,textHandler:j}=this;let k=!1;e:for(;;){const E=this.getCode();switch(E){case 60:if(this.state=15,j!==void 0){const{text:I}=this,D=_.slice(w,this.prevI);I.length!==0?(j(I+D),this.text=""):D.length!==0&&j(D)}break e;case 38:this.state=14,this.entityReturnState=13,j!==void 0&&(this.text+=_.slice(w,this.prevI)),k=!0;break e;case-2:j!==void 0&&(this.text+=_.slice(w,this.prevI)+`
`),w=this.i;break;case-1:j!==void 0&&(this.text+=_.slice(w));break e;default:r(E)||(k=!0)}}k&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,_){var j;const{prefix:k,local:E}=this.qname(w),I={name:w,prefix:k,local:E,value:_};if(this.attribList.push(I),(j=this.attributeHandler)===null||j===void 0||j.call(this,I),k==="xmlns"){const D=_.trim();this.currentXMLVersion==="1.0"&&D===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[E]=D,O(this,E,D)}else if(w==="xmlns"){const D=_.trim();this.topNS[""]=D,O(this,"",D)}}pushAttribPlain(w,_){var j;const k={name:w,value:_};this.attribList.push(k),(j=this.attributeHandler)===null||j===void 0||j.call(this,k)}end(){var w,_;this.sawRoot||this.fail("document must contain a root element.");const{tags:j}=this;for(;j.length>0;){const E=j.pop();this.fail("unclosed tag: "+E.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:k}=this;return k.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,k),this.text=""),this._closed=!0,(_=this.endHandler)===null||_===void 0||_.call(this),this._init(),this}resolve(w){var _,j;let k=this.topNS[w];if(k!==void 0)return k;const{tags:E}=this;for(let I=E.length-1;I>=0;I--)if(k=E[I].ns[w],k!==void 0)return k;return k=this.ns[w],k!==void 0?k:(j=(_=this.opt).resolvePrefix)===null||j===void 0?void 0:j.call(_,w)}qname(w){const _=w.indexOf(":");if(_===-1)return{prefix:"",local:w};const j=w.slice(_+1),k=w.slice(0,_);return(k===""||j===""||j.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:k,local:j}}processAttribsNS(){var w;const{attribList:_}=this,j=this.tag;{const{prefix:I,local:D}=this.qname(j.name);j.prefix=I,j.local=D;const X=j.uri=(w=this.resolve(I))!==null&&w!==void 0?w:"";I!==""&&(I==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),X===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(I)}.`),j.uri=I))}if(_.length===0)return;const{attributes:k}=j,E=new Set;for(const I of _){const{name:D,prefix:X,local:G}=I;let K,U;X===""?(K=D==="xmlns"?v:"",U=D):(K=this.resolve(X),K===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(X)}.`),K=X),U=`{${K}}${G}`),E.has(U)&&this.fail(`duplicate attribute: ${U}.`),E.add(U),I.uri=K,k[D]=I}this.attribList=[]}processAttribsPlain(){const{attribList:w}=this,_=this.tag.attributes;for(const{name:j,value:k}of w)_[j]!==void 0&&this.fail(`duplicate attribute: ${j}.`),_[j]=k;this.attribList=[]}openTag(){var w;this.processAttribs();const{tags:_}=this,j=this.tag;j.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,j),_.push(j),this.state=13,this.name=""}openSelfClosingTag(){var w,_,j;this.processAttribs();const{tags:k}=this,E=this.tag;E.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,E),(_=this.closeTagHandler)===null||_===void 0||_.call(this,E),(this.tag=(j=k[k.length-1])!==null&&j!==void 0?j:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:w,name:_}=this;if(this.state=13,this.name="",_==="")return this.fail("weird empty close tag."),void(this.text+="</>");const j=this.closeTagHandler;let k=w.length;for(;k-- >0;){const E=this.tag=w.pop();if(this.topNS=E.ns,j==null||j(E),E.name===_)break;this.fail("unexpected close tag.")}k===0?this.closedRoot=!0:k<0&&(this.fail(`unmatched closing tag: ${_}.`),this.text+=`</${_}>`)}parseEntity(w){if(w[0]!=="#"){const j=this.ENTITIES[w];return j!==void 0?j:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let _=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?_=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(_=parseInt(w.slice(1),10)),this.isChar(_)?String.fromCodePoint(_):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,h,f){var l=e("safe-buffer").Buffer;function s(o,r){this._block=l.alloc(o),this._finalSize=r,this._blockSize=o,this._len=0}s.prototype.update=function(o,r){typeof o=="string"&&(r=r||"utf8",o=l.from(o,r));for(var t=this._block,n=this._blockSize,u=o.length,c=this._len,d=0;d<u;){for(var b=c%n,g=Math.min(u-d,n-b),p=0;p<g;p++)t[b+p]=o[d+p];d+=g,(c+=g)%n==0&&this._update(t)}return this._len+=u,this},s.prototype.digest=function(o){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var t=8*this._len;if(t<=4294967295)this._block.writeUInt32BE(t,this._blockSize-4);else{var n=(4294967295&t)>>>0,u=(t-n)/4294967296;this._block.writeUInt32BE(u,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var c=this._hash();return o?c.toString(o):c},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},h.exports=s},{"safe-buffer":494}],498:[function(e,h,f){var l=h.exports=function(s){s=s.toLowerCase();var o=l[s];if(!o)throw new Error(s+" is not supported (we accept pull requests)");return new o};l.sha=e("./sha"),l.sha1=e("./sha1"),l.sha224=e("./sha224"),l.sha256=e("./sha256"),l.sha384=e("./sha384"),l.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,h,f){var l=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],t=new Array(80);function n(){this.init(),this._w=t,s.call(this,64,56)}function u(d){return d<<30|d>>>2}function c(d,b,g,p){return d===0?b&g|~b&p:d===2?b&g|b&p|g&p:b^g^p}l(n,s),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(d){for(var b,g=this._w,p=0|this._a,x=0|this._b,y=0|this._c,v=0|this._d,S=0|this._e,N=0;N<16;++N)g[N]=d.readInt32BE(4*N);for(;N<80;++N)g[N]=g[N-3]^g[N-8]^g[N-14]^g[N-16];for(var R=0;R<80;++R){var B=~~(R/20),M=0|((b=p)<<5|b>>>27)+c(B,x,y,v)+S+g[R]+r[B];S=v,v=y,y=u(x),x=p,p=M}this._a=p+this._a|0,this._b=x+this._b|0,this._c=y+this._c|0,this._d=v+this._d|0,this._e=S+this._e|0},n.prototype._hash=function(){var d=o.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,h,f){var l=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],t=new Array(80);function n(){this.init(),this._w=t,s.call(this,64,56)}function u(b){return b<<5|b>>>27}function c(b){return b<<30|b>>>2}function d(b,g,p,x){return b===0?g&p|~g&x:b===2?g&p|g&x|p&x:g^p^x}l(n,s),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(b){for(var g,p=this._w,x=0|this._a,y=0|this._b,v=0|this._c,S=0|this._d,N=0|this._e,R=0;R<16;++R)p[R]=b.readInt32BE(4*R);for(;R<80;++R)p[R]=(g=p[R-3]^p[R-8]^p[R-14]^p[R-16])<<1|g>>>31;for(var B=0;B<80;++B){var M=~~(B/20),F=u(x)+d(M,y,v,S)+N+p[B]+r[M]|0;N=S,S=v,v=c(y),y=x,x=F}this._a=x+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=S+this._d|0,this._e=N+this._e|0},n.prototype._hash=function(){var b=o.allocUnsafe(20);return b.writeInt32BE(0|this._a,0),b.writeInt32BE(0|this._b,4),b.writeInt32BE(0|this._c,8),b.writeInt32BE(0|this._d,12),b.writeInt32BE(0|this._e,16),b},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,h,f){var l=e("inherits"),s=e("./sha256"),o=e("./hash"),r=e("safe-buffer").Buffer,t=new Array(64);function n(){this.init(),this._w=t,o.call(this,64,56)}l(n,s),n.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},n.prototype._hash=function(){var u=r.allocUnsafe(28);return u.writeInt32BE(this._a,0),u.writeInt32BE(this._b,4),u.writeInt32BE(this._c,8),u.writeInt32BE(this._d,12),u.writeInt32BE(this._e,16),u.writeInt32BE(this._f,20),u.writeInt32BE(this._g,24),u},h.exports=n},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,h,f){var l=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],t=new Array(64);function n(){this.init(),this._w=t,s.call(this,64,56)}function u(p,x,y){return y^p&(x^y)}function c(p,x,y){return p&x|y&(p|x)}function d(p){return(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10)}function b(p){return(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7)}function g(p){return(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3}l(n,s),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(p){for(var x,y=this._w,v=0|this._a,S=0|this._b,N=0|this._c,R=0|this._d,B=0|this._e,M=0|this._f,F=0|this._g,q=0|this._h,V=0;V<16;++V)y[V]=p.readInt32BE(4*V);for(;V<64;++V)y[V]=0|(((x=y[V-2])>>>17|x<<15)^(x>>>19|x<<13)^x>>>10)+y[V-7]+g(y[V-15])+y[V-16];for(var O=0;O<64;++O){var T=q+b(B)+u(B,M,F)+r[O]+y[O]|0,A=d(v)+c(v,S,N)|0;q=F,F=M,M=B,B=R+T|0,R=N,N=S,S=v,v=T+A|0}this._a=v+this._a|0,this._b=S+this._b|0,this._c=N+this._c|0,this._d=R+this._d|0,this._e=B+this._e|0,this._f=M+this._f|0,this._g=F+this._g|0,this._h=q+this._h|0},n.prototype._hash=function(){var p=o.allocUnsafe(32);return p.writeInt32BE(this._a,0),p.writeInt32BE(this._b,4),p.writeInt32BE(this._c,8),p.writeInt32BE(this._d,12),p.writeInt32BE(this._e,16),p.writeInt32BE(this._f,20),p.writeInt32BE(this._g,24),p.writeInt32BE(this._h,28),p},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,h,f){var l=e("inherits"),s=e("./sha512"),o=e("./hash"),r=e("safe-buffer").Buffer,t=new Array(160);function n(){this.init(),this._w=t,o.call(this,128,112)}l(n,s),n.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},n.prototype._hash=function(){var u=r.allocUnsafe(48);function c(d,b,g){u.writeInt32BE(d,g),u.writeInt32BE(b,g+4)}return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),u},h.exports=n},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,h,f){var l=e("inherits"),s=e("./hash"),o=e("safe-buffer").Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],t=new Array(160);function n(){this.init(),this._w=t,s.call(this,128,112)}function u(S,N,R){return R^S&(N^R)}function c(S,N,R){return S&N|R&(S|N)}function d(S,N){return(S>>>28|N<<4)^(N>>>2|S<<30)^(N>>>7|S<<25)}function b(S,N){return(S>>>14|N<<18)^(S>>>18|N<<14)^(N>>>9|S<<23)}function g(S,N){return(S>>>1|N<<31)^(S>>>8|N<<24)^S>>>7}function p(S,N){return(S>>>1|N<<31)^(S>>>8|N<<24)^(S>>>7|N<<25)}function x(S,N){return(S>>>19|N<<13)^(N>>>29|S<<3)^S>>>6}function y(S,N){return(S>>>19|N<<13)^(N>>>29|S<<3)^(S>>>6|N<<26)}function v(S,N){return S>>>0<N>>>0?1:0}l(n,s),n.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},n.prototype._update=function(S){for(var N=this._w,R=0|this._ah,B=0|this._bh,M=0|this._ch,F=0|this._dh,q=0|this._eh,V=0|this._fh,O=0|this._gh,T=0|this._hh,A=0|this._al,C=0|this._bl,w=0|this._cl,_=0|this._dl,j=0|this._el,k=0|this._fl,E=0|this._gl,I=0|this._hl,D=0;D<32;D+=2)N[D]=S.readInt32BE(4*D),N[D+1]=S.readInt32BE(4*D+4);for(;D<160;D+=2){var X=N[D-30],G=N[D-30+1],K=g(X,G),U=p(G,X),J=x(X=N[D-4],G=N[D-4+1]),$=y(G,X),L=N[D-14],W=N[D-14+1],re=N[D-32],ne=N[D-32+1],se=U+W|0,H=K+L+v(se,U)|0;H=(H=H+J+v(se=se+$|0,$)|0)+re+v(se=se+ne|0,ne)|0,N[D]=H,N[D+1]=se}for(var ce=0;ce<160;ce+=2){H=N[ce],se=N[ce+1];var ae=c(R,B,M),Y=c(A,C,w),Q=d(R,A),te=d(A,R),ie=b(q,j),le=b(j,q),ee=r[ce],oe=r[ce+1],de=u(q,V,O),fe=u(j,k,E),be=I+le|0,he=T+ie+v(be,I)|0;he=(he=(he=he+de+v(be=be+fe|0,fe)|0)+ee+v(be=be+oe|0,oe)|0)+H+v(be=be+se|0,se)|0;var pe=te+Y|0,ke=Q+ae+v(pe,te)|0;T=O,I=E,O=V,E=k,V=q,k=j,q=F+he+v(j=_+be|0,_)|0,F=M,_=w,M=B,w=C,B=R,C=A,R=he+ke+v(A=be+pe|0,be)|0}this._al=this._al+A|0,this._bl=this._bl+C|0,this._cl=this._cl+w|0,this._dl=this._dl+_|0,this._el=this._el+j|0,this._fl=this._fl+k|0,this._gl=this._gl+E|0,this._hl=this._hl+I|0,this._ah=this._ah+R+v(this._al,A)|0,this._bh=this._bh+B+v(this._bl,C)|0,this._ch=this._ch+M+v(this._cl,w)|0,this._dh=this._dh+F+v(this._dl,_)|0,this._eh=this._eh+q+v(this._el,j)|0,this._fh=this._fh+V+v(this._fl,k)|0,this._gh=this._gh+O+v(this._gl,E)|0,this._hh=this._hh+T+v(this._hl,I)|0},n.prototype._hash=function(){var S=o.allocUnsafe(64);function N(R,B,M){S.writeInt32BE(R,M),S.writeInt32BE(B,M+4)}return N(this._ah,this._al,0),N(this._bh,this._bl,8),N(this._ch,this._cl,16),N(this._dh,this._dl,24),N(this._eh,this._el,32),N(this._fh,this._fl,40),N(this._gh,this._gl,48),N(this._hh,this._hl,56),S},h.exports=n},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,h,f){h.exports=s;var l=e("events").EventEmitter;function s(){l.call(this)}e("inherits")(s,l),s.Readable=e("readable-stream/readable.js"),s.Writable=e("readable-stream/writable.js"),s.Duplex=e("readable-stream/duplex.js"),s.Transform=e("readable-stream/transform.js"),s.PassThrough=e("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(o,r){var t=this;function n(x){o.writable&&o.write(x)===!1&&t.pause&&t.pause()}function u(){t.readable&&t.resume&&t.resume()}t.on("data",n),o.on("drain",u),o._isStdio||r&&r.end===!1||(t.on("end",d),t.on("close",b));var c=!1;function d(){c||(c=!0,o.end())}function b(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function g(x){if(p(),l.listenerCount(this,"error")===0)throw x}function p(){t.removeListener("data",n),o.removeListener("drain",u),t.removeListener("end",d),t.removeListener("close",b),t.removeListener("error",g),o.removeListener("error",g),t.removeListener("end",p),t.removeListener("close",p),o.removeListener("close",p)}return t.on("error",g),o.on("error",g),t.on("end",p),t.on("close",p),o.on("close",p),o.emit("pipe",t),o}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,h,f){var l={}.toString;h.exports=Array.isArray||function(s){return l.call(s)=="[object Array]"}},{}],507:[function(e,h,f){h.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,h,f){var l=e("process-nextick-args"),s=Object.keys||function(p){var x=[];for(var y in p)x.push(y);return x};h.exports=d;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var r=e("./_stream_readable"),t=e("./_stream_writable");o.inherits(d,r);for(var n=s(t.prototype),u=0;u<n.length;u++){var c=n[u];d.prototype[c]||(d.prototype[c]=t.prototype[c])}function d(p){if(!(this instanceof d))return new d(p);r.call(this,p),t.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||l.nextTick(g,this)}function g(p){p.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),d.prototype._destroy=function(p,x){this.push(null),this.end(),l.nextTick(x,p)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,h,f){h.exports=o;var l=e("./_stream_transform"),s=Object.create(e("core-util-is"));function o(r){if(!(this instanceof o))return new o(r);l.call(this,r)}s.inherits=e("inherits"),s.inherits(o,l),o.prototype._transform=function(r,t,n){n(null,r)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,h,f){(function(l,s){(function(){var o=e("process-nextick-args");h.exports=R;var r,t=e("isarray");R.ReadableState=N,e("events").EventEmitter;var n=function(I,D){return I.listeners(D).length},u=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,d=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=Object.create(e("core-util-is"));b.inherits=e("inherits");var g=e("util"),p=void 0;p=g&&g.debuglog?g.debuglog("stream"):function(){};var x,y=e("./internal/streams/BufferList"),v=e("./internal/streams/destroy");b.inherits(R,u);var S=["error","close","destroy","pause","resume"];function N(I,D){I=I||{};var X=D instanceof(r=r||e("./_stream_duplex"));this.objectMode=!!I.objectMode,X&&(this.objectMode=this.objectMode||!!I.readableObjectMode);var G=I.highWaterMark,K=I.readableHighWaterMark,U=this.objectMode?16:16384;this.highWaterMark=G||G===0?G:X&&(K||K===0)?K:U,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(x||(x=e("string_decoder/").StringDecoder),this.decoder=new x(I.encoding),this.encoding=I.encoding)}function R(I){if(r=r||e("./_stream_duplex"),!(this instanceof R))return new R(I);this._readableState=new N(I,this),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),u.call(this)}function B(I,D,X,G,K){var U,J=I._readableState;return D===null?(J.reading=!1,(function($,L){if(!L.ended){if(L.decoder){var W=L.decoder.end();W&&W.length&&(L.buffer.push(W),L.length+=L.objectMode?1:W.length)}L.ended=!0,q($)}})(I,J)):(K||(U=(function($,L){var W;re=L,c.isBuffer(re)||re instanceof d||typeof L=="string"||L===void 0||$.objectMode||(W=new TypeError("Invalid non-string/buffer chunk"));var re;return W})(J,D)),U?I.emit("error",U):J.objectMode||D&&D.length>0?(typeof D=="string"||J.objectMode||Object.getPrototypeOf(D)===c.prototype||(D=(function($){return c.from($)})(D)),G?J.endEmitted?I.emit("error",new Error("stream.unshift() after end event")):M(I,J,D,!0):J.ended?I.emit("error",new Error("stream.push() after EOF")):(J.reading=!1,J.decoder&&!X?(D=J.decoder.write(D),J.objectMode||D.length!==0?M(I,J,D,!1):O(I,J)):M(I,J,D,!1))):G||(J.reading=!1)),(function($){return!$.ended&&($.needReadable||$.length<$.highWaterMark||$.length===0)})(J)}function M(I,D,X,G){D.flowing&&D.length===0&&!D.sync?(I.emit("data",X),I.read(0)):(D.length+=D.objectMode?1:X.length,G?D.buffer.unshift(X):D.buffer.push(X),D.needReadable&&q(I)),O(I,D)}Object.defineProperty(R.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(I){this._readableState&&(this._readableState.destroyed=I)}}),R.prototype.destroy=v.destroy,R.prototype._undestroy=v.undestroy,R.prototype._destroy=function(I,D){this.push(null),D(I)},R.prototype.push=function(I,D){var X,G=this._readableState;return G.objectMode?X=!0:typeof I=="string"&&((D=D||G.defaultEncoding)!==G.encoding&&(I=c.from(I,D),D=""),X=!0),B(this,I,D,!1,X)},R.prototype.unshift=function(I){return B(this,I,null,!0,!1)},R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(I){return x||(x=e("string_decoder/").StringDecoder),this._readableState.decoder=new x(I),this._readableState.encoding=I,this};function F(I,D){return I<=0||D.length===0&&D.ended?0:D.objectMode?1:I!=I?D.flowing&&D.length?D.buffer.head.data.length:D.length:(I>D.highWaterMark&&(D.highWaterMark=(function(X){return X>=8388608?X=8388608:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X})(I)),I<=D.length?I:D.ended?D.length:(D.needReadable=!0,0))}function q(I){var D=I._readableState;D.needReadable=!1,D.emittedReadable||(p("emitReadable",D.flowing),D.emittedReadable=!0,D.sync?o.nextTick(V,I):V(I))}function V(I){p("emit readable"),I.emit("readable"),w(I)}function O(I,D){D.readingMore||(D.readingMore=!0,o.nextTick(T,I,D))}function T(I,D){for(var X=D.length;!D.reading&&!D.flowing&&!D.ended&&D.length<D.highWaterMark&&(p("maybeReadMore read 0"),I.read(0),X!==D.length);)X=D.length;D.readingMore=!1}function A(I){p("readable nexttick read 0"),I.read(0)}function C(I,D){D.reading||(p("resume read 0"),I.read(0)),D.resumeScheduled=!1,D.awaitDrain=0,I.emit("resume"),w(I),D.flowing&&!D.reading&&I.read(0)}function w(I){var D=I._readableState;for(p("flow",D.flowing);D.flowing&&I.read()!==null;);}function _(I,D){return D.length===0?null:(D.objectMode?X=D.buffer.shift():!I||I>=D.length?(X=D.decoder?D.buffer.join(""):D.buffer.length===1?D.buffer.head.data:D.buffer.concat(D.length),D.buffer.clear()):X=(function(G,K,U){var J;return G<K.head.data.length?(J=K.head.data.slice(0,G),K.head.data=K.head.data.slice(G)):J=G===K.head.data.length?K.shift():U?(function($,L){var W=L.head,re=1,ne=W.data;for($-=ne.length;W=W.next;){var se=W.data,H=$>se.length?se.length:$;if(H===se.length?ne+=se:ne+=se.slice(0,$),($-=H)===0){H===se.length?(++re,W.next?L.head=W.next:L.head=L.tail=null):(L.head=W,W.data=se.slice(H));break}++re}return L.length-=re,ne})(G,K):(function($,L){var W=c.allocUnsafe($),re=L.head,ne=1;for(re.data.copy(W),$-=re.data.length;re=re.next;){var se=re.data,H=$>se.length?se.length:$;if(se.copy(W,W.length-$,0,H),($-=H)===0){H===se.length?(++ne,re.next?L.head=re.next:L.head=L.tail=null):(L.head=re,re.data=se.slice(H));break}++ne}return L.length-=ne,W})(G,K),J})(I,D.buffer,D.decoder),X);var X}function j(I){var D=I._readableState;if(D.length>0)throw new Error('"endReadable()" called on non-empty stream');D.endEmitted||(D.ended=!0,o.nextTick(k,D,I))}function k(I,D){I.endEmitted||I.length!==0||(I.endEmitted=!0,D.readable=!1,D.emit("end"))}function E(I,D){for(var X=0,G=I.length;X<G;X++)if(I[X]===D)return X;return-1}R.prototype.read=function(I){p("read",I),I=parseInt(I,10);var D=this._readableState,X=I;if(I!==0&&(D.emittedReadable=!1),I===0&&D.needReadable&&(D.length>=D.highWaterMark||D.ended))return p("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?j(this):q(this),null;if((I=F(I,D))===0&&D.ended)return D.length===0&&j(this),null;var G,K=D.needReadable;return p("need readable",K),(D.length===0||D.length-I<D.highWaterMark)&&p("length less than watermark",K=!0),D.ended||D.reading?p("reading or ended",K=!1):K&&(p("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(I=F(X,D))),(G=I>0?_(I,D):null)===null?(D.needReadable=!0,I=0):D.length-=I,D.length===0&&(D.ended||(D.needReadable=!0),X!==I&&D.ended&&j(this)),G!==null&&this.emit("data",G),G},R.prototype._read=function(I){this.emit("error",new Error("_read() is not implemented"))},R.prototype.pipe=function(I,D){var X=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=I;break;case 1:G.pipes=[G.pipes,I];break;default:G.pipes.push(I)}G.pipesCount+=1,p("pipe count=%d opts=%j",G.pipesCount,D);var K=(!D||D.end!==!1)&&I!==l.stdout&&I!==l.stderr?J:ce;function U(ae,Y){p("onunpipe"),ae===X&&Y&&Y.hasUnpiped===!1&&(Y.hasUnpiped=!0,p("cleanup"),I.removeListener("close",se),I.removeListener("finish",H),I.removeListener("drain",$),I.removeListener("error",ne),I.removeListener("unpipe",U),X.removeListener("end",J),X.removeListener("end",ce),X.removeListener("data",re),L=!0,!G.awaitDrain||I._writableState&&!I._writableState.needDrain||$())}function J(){p("onend"),I.end()}G.endEmitted?o.nextTick(K):X.once("end",K),I.on("unpipe",U);var $=(function(ae){return function(){var Y=ae._readableState;p("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,Y.awaitDrain===0&&n(ae,"data")&&(Y.flowing=!0,w(ae))}})(X);I.on("drain",$);var L=!1,W=!1;function re(ae){p("ondata"),W=!1,I.write(ae)!==!1||W||((G.pipesCount===1&&G.pipes===I||G.pipesCount>1&&E(G.pipes,I)!==-1)&&!L&&(p("false write response, pause",G.awaitDrain),G.awaitDrain++,W=!0),X.pause())}function ne(ae){p("onerror",ae),ce(),I.removeListener("error",ne),n(I,"error")===0&&I.emit("error",ae)}function se(){I.removeListener("finish",H),ce()}function H(){p("onfinish"),I.removeListener("close",se),ce()}function ce(){p("unpipe"),X.unpipe(I)}return X.on("data",re),(function(ae,Y,Q){if(typeof ae.prependListener=="function")return ae.prependListener(Y,Q);ae._events&&ae._events[Y]?t(ae._events[Y])?ae._events[Y].unshift(Q):ae._events[Y]=[Q,ae._events[Y]]:ae.on(Y,Q)})(I,"error",ne),I.once("close",se),I.once("finish",H),I.emit("pipe",X),G.flowing||(p("pipe resume"),X.resume()),I},R.prototype.unpipe=function(I){var D=this._readableState,X={hasUnpiped:!1};if(D.pipesCount===0)return this;if(D.pipesCount===1)return I&&I!==D.pipes||(I||(I=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,I&&I.emit("unpipe",this,X)),this;if(!I){var G=D.pipes,K=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var U=0;U<K;U++)G[U].emit("unpipe",this,{hasUnpiped:!1});return this}var J=E(D.pipes,I);return J===-1||(D.pipes.splice(J,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),I.emit("unpipe",this,X)),this},R.prototype.on=function(I,D){var X=u.prototype.on.call(this,I,D);if(I==="data")this._readableState.flowing!==!1&&this.resume();else if(I==="readable"){var G=this._readableState;G.endEmitted||G.readableListening||(G.readableListening=G.needReadable=!0,G.emittedReadable=!1,G.reading?G.length&&q(this):o.nextTick(A,this))}return X},R.prototype.addListener=R.prototype.on,R.prototype.resume=function(){var I=this._readableState;return I.flowing||(p("resume"),I.flowing=!0,(function(D,X){X.resumeScheduled||(X.resumeScheduled=!0,o.nextTick(C,D,X))})(this,I)),this},R.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},R.prototype.wrap=function(I){var D=this,X=this._readableState,G=!1;for(var K in I.on("end",(function(){if(p("wrapped end"),X.decoder&&!X.ended){var J=X.decoder.end();J&&J.length&&D.push(J)}D.push(null)})),I.on("data",(function(J){p("wrapped data"),X.decoder&&(J=X.decoder.write(J)),X.objectMode&&J==null||(X.objectMode||J&&J.length)&&(D.push(J)||(G=!0,I.pause()))})),I)this[K]===void 0&&typeof I[K]=="function"&&(this[K]=(function(J){return function(){return I[J].apply(I,arguments)}})(K));for(var U=0;U<S.length;U++)I.on(S[U],this.emit.bind(this,S[U]));return this._read=function(J){p("wrapped _read",J),G&&(G=!1,I.resume())},this},Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),R._fromList=_}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,h,f){h.exports=r;var l=e("./_stream_duplex"),s=Object.create(e("core-util-is"));function o(u,c){var d=this._transformState;d.transforming=!1;var b=d.writecb;if(!b)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,c!=null&&this.push(c),b(u);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function r(u){if(!(this instanceof r))return new r(u);l.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",t)}function t(){var u=this;typeof this._flush=="function"?this._flush((function(c,d){n(u,c,d)})):n(this,null,null)}function n(u,c,d){if(c)return u.emit("error",c);if(d!=null&&u.push(d),u._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(u._transformState.transforming)throw new Error("Calling transform done when still transforming");return u.push(null)}s.inherits=e("inherits"),s.inherits(r,l),r.prototype.push=function(u,c){return this._transformState.needTransform=!1,l.prototype.push.call(this,u,c)},r.prototype._transform=function(u,c,d){throw new Error("_transform() is not implemented")},r.prototype._write=function(u,c,d){var b=this._transformState;if(b.writecb=d,b.writechunk=u,b.writeencoding=c,!b.transforming){var g=this._readableState;(b.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},r.prototype._read=function(u){var c=this._transformState;c.writechunk!==null&&c.writecb&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},r.prototype._destroy=function(u,c){var d=this;l.prototype._destroy.call(this,u,(function(b){c(b),d.emit("close")}))}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,h,f){(function(l,s,o){(function(){var r=e("process-nextick-args");function t(O){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(A,C,w){var _=A.entry;for(A.entry=null;_;){var j=_.callback;C.pendingcb--,j(w),_=_.next}C.corkedRequestsFree.next=A})(T,O)}}h.exports=N;var n,u=!l.browser&&["v0.10","v0.9."].indexOf(l.version.slice(0,5))>-1?o:r.nextTick;N.WritableState=S;var c=Object.create(e("core-util-is"));c.inherits=e("inherits");var d={deprecate:e("util-deprecate")},b=e("./internal/streams/stream"),g=e("safe-buffer").Buffer,p=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},x,y=e("./internal/streams/destroy");function v(){}function S(O,T){n=n||e("./_stream_duplex"),O=O||{};var A=T instanceof n;this.objectMode=!!O.objectMode,A&&(this.objectMode=this.objectMode||!!O.writableObjectMode);var C=O.highWaterMark,w=O.writableHighWaterMark,_=this.objectMode?16:16384;this.highWaterMark=C||C===0?C:A&&(w||w===0)?w:_,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=O.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){(function(E,I){var D=E._writableState,X=D.sync,G=D.writecb;if((function(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0})(D),I)(function(U,J,$,L,W){--J.pendingcb,$?(r.nextTick(W,L),r.nextTick(V,U,J),U._writableState.errorEmitted=!0,U.emit("error",L)):(W(L),U._writableState.errorEmitted=!0,U.emit("error",L),V(U,J))})(E,D,X,I,G);else{var K=F(D);K||D.corked||D.bufferProcessing||!D.bufferedRequest||M(E,D),X?u(B,E,D,K,G):B(E,D,K,G)}})(T,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function N(O){if(n=n||e("./_stream_duplex"),!(x.call(N,this)||this instanceof n))return new N(O);this._writableState=new S(O,this),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),b.call(this)}function R(O,T,A,C,w,_,j){T.writelen=C,T.writecb=j,T.writing=!0,T.sync=!0,A?O._writev(w,T.onwrite):O._write(w,_,T.onwrite),T.sync=!1}function B(O,T,A,C){A||(function(w,_){_.length===0&&_.needDrain&&(_.needDrain=!1,w.emit("drain"))})(O,T),T.pendingcb--,C(),V(O,T)}function M(O,T){T.bufferProcessing=!0;var A=T.bufferedRequest;if(O._writev&&A&&A.next){var C=T.bufferedRequestCount,w=new Array(C),_=T.corkedRequestsFree;_.entry=A;for(var j=0,k=!0;A;)w[j]=A,A.isBuf||(k=!1),A=A.next,j+=1;w.allBuffers=k,R(O,T,!0,T.length,w,"",_.finish),T.pendingcb++,T.lastBufferedRequest=null,_.next?(T.corkedRequestsFree=_.next,_.next=null):T.corkedRequestsFree=new t(T),T.bufferedRequestCount=0}else{for(;A;){var E=A.chunk,I=A.encoding,D=A.callback;if(R(O,T,!1,T.objectMode?1:E.length,E,I,D),A=A.next,T.bufferedRequestCount--,T.writing)break}A===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=A,T.bufferProcessing=!1}function F(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function q(O,T){O._final((function(A){T.pendingcb--,A&&O.emit("error",A),T.prefinished=!0,O.emit("prefinish"),V(O,T)}))}function V(O,T){var A=F(T);return A&&((function(C,w){w.prefinished||w.finalCalled||(typeof C._final=="function"?(w.pendingcb++,w.finalCalled=!0,r.nextTick(q,C,w)):(w.prefinished=!0,C.emit("prefinish")))})(O,T),T.pendingcb===0&&(T.finished=!0,O.emit("finish"))),A}c.inherits(N,b),S.prototype.getBuffer=function(){for(var O=this.bufferedRequest,T=[];O;)T.push(O),O=O.next;return T},(function(){try{Object.defineProperty(S.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(O){return!!x.call(this,O)||this===N&&O&&O._writableState instanceof S}})):x=function(O){return O instanceof this},N.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},N.prototype.write=function(O,T,A){var C,w=this._writableState,_=!1,j=!w.objectMode&&(C=O,g.isBuffer(C)||C instanceof p);return j&&!g.isBuffer(O)&&(O=(function(k){return g.from(k)})(O)),typeof T=="function"&&(A=T,T=null),j?T="buffer":T||(T=w.defaultEncoding),typeof A!="function"&&(A=v),w.ended?(function(k,E){var I=new Error("write after end");k.emit("error",I),r.nextTick(E,I)})(this,A):(j||(function(k,E,I,D){var X=!0,G=!1;return I===null?G=new TypeError("May not write null values to stream"):typeof I=="string"||I===void 0||E.objectMode||(G=new TypeError("Invalid non-string/buffer chunk")),G&&(k.emit("error",G),r.nextTick(D,G),X=!1),X})(this,w,O,A))&&(w.pendingcb++,_=(function(k,E,I,D,X,G){if(!I){var K=(function(L,W,re){return L.objectMode||L.decodeStrings===!1||typeof W!="string"||(W=g.from(W,re)),W})(E,D,X);D!==K&&(I=!0,X="buffer",D=K)}var U=E.objectMode?1:D.length;E.length+=U;var J=E.length<E.highWaterMark;if(J||(E.needDrain=!0),E.writing||E.corked){var $=E.lastBufferedRequest;E.lastBufferedRequest={chunk:D,encoding:X,isBuf:I,callback:G,next:null},$?$.next=E.lastBufferedRequest:E.bufferedRequest=E.lastBufferedRequest,E.bufferedRequestCount+=1}else R(k,E,!1,U,D,X,G);return J})(this,w,j,O,T,A)),_},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||M(this,O))},N.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(O,T,A){A(new Error("_write() is not implemented"))},N.prototype._writev=null,N.prototype.end=function(O,T,A){var C=this._writableState;typeof O=="function"?(A=O,O=null,T=null):typeof T=="function"&&(A=T,T=null),O!=null&&this.write(O,T),C.corked&&(C.corked=1,this.uncork()),C.ending||(function(w,_,j){_.ending=!0,V(w,_),j&&(_.finished?r.nextTick(j):w.once("finish",j)),_.ended=!0,w.writable=!1})(this,C,A)},Object.defineProperty(N.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),N.prototype.destroy=y.destroy,N.prototype._undestroy=y.undestroy,N.prototype._destroy=function(O,T){this.end(),T(O)}}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,h,f){var l=e("safe-buffer").Buffer,s=e("util");h.exports=(function(){function o(){(function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(r){var t={data:r,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},o.prototype.unshift=function(r){var t={data:r,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length},o.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(r){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=r+t.data;return n},o.prototype.concat=function(r){if(this.length===0)return l.alloc(0);for(var t,n,u,c=l.allocUnsafe(r>>>0),d=this.head,b=0;d;)t=d.data,n=c,u=b,t.copy(n,u),b+=d.data.length,d=d.next;return c},o})(),s&&s.inspect&&s.inspect.custom&&(h.exports.prototype[s.inspect.custom]=function(){var o=s.inspect({length:this.length});return this.constructor.name+" "+o})},{"safe-buffer":520,util:188}],514:[function(e,h,f){var l=e("process-nextick-args");function s(o,r){o.emit("error",r)}h.exports={destroy:function(o,r){var t=this,n=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return n||u?(r?r(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(s,this,o)):l.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,(function(c){!r&&c?t._writableState?t._writableState.errorEmitted||(t._writableState.errorEmitted=!0,l.nextTick(s,t,c)):l.nextTick(s,t,c):r&&r(c)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,h,f){arguments[4][490][0].apply(f,arguments)},{dup:490,events:422}],516:[function(e,h,f){h.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,h,f){(f=h.exports=e("./lib/_stream_readable.js")).Stream=f,f.Readable=f,f.Writable=e("./lib/_stream_writable.js"),f.Duplex=e("./lib/_stream_duplex.js"),f.Transform=e("./lib/_stream_transform.js"),f.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,h,f){h.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,h,f){h.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,h,f){arguments[4][217][0].apply(f,arguments)},{buffer:220,dup:217}],521:[function(e,h,f){arguments[4][218][0].apply(f,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,h,f){arguments[4][218][0].apply(f,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,h,f){(function(l,s){(function(){var o=e("process/browser.js").nextTick,r=Function.prototype.apply,t=Array.prototype.slice,n={},u=0;function c(d,b){this._id=d,this._clearFn=b}f.setTimeout=function(){return new c(r.call(setTimeout,window,arguments),clearTimeout)},f.setInterval=function(){return new c(r.call(setInterval,window,arguments),clearInterval)},f.clearTimeout=f.clearInterval=function(d){d.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},f.enroll=function(d,b){clearTimeout(d._idleTimeoutId),d._idleTimeout=b},f.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},f._unrefActive=f.active=function(d){clearTimeout(d._idleTimeoutId);var b=d._idleTimeout;b>=0&&(d._idleTimeoutId=setTimeout((function(){d._onTimeout&&d._onTimeout()}),b))},f.setImmediate=typeof l=="function"?l:function(d){var b=u++,g=!(arguments.length<2)&&t.call(arguments,1);return n[b]=!0,o((function(){n[b]&&(g?d.apply(null,g):d.call(null),f.clearImmediate(b))})),b},f.clearImmediate=typeof s=="function"?s:function(d){delete n[d]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,h,f){(function(l){(function(){function s(o){try{if(!l.localStorage)return!1}catch{return!1}var r=l.localStorage[o];return r!=null&&String(r).toLowerCase()==="true"}h.exports=function(o,r){if(s("noDeprecation"))return o;var t=!1;return function(){if(!t){if(s("throwDeprecation"))throw new Error(r);s("traceDeprecation")?console.trace(r):console.warn(r),t=!0}return o.apply(this,arguments)}}}).call(this)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(e,h,f){typeof Object.create=="function"?h.exports=function(l,s){l.super_=s,l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:h.exports=function(l,s){l.super_=s;var o=function(){};o.prototype=s.prototype,l.prototype=new o,l.prototype.constructor=l}},{}],526:[function(e,h,f){h.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},{}],527:[function(e,h,f){(function(l,s){(function(){var o=/%[sdj%]/g;f.format=function(w){if(!S(w)){for(var _=[],j=0;j<arguments.length;j++)_.push(n(arguments[j]));return _.join(" ")}j=1;for(var k=arguments,E=k.length,I=String(w).replace(o,(function(X){if(X==="%%")return"%";if(j>=E)return X;switch(X){case"%s":return String(k[j++]);case"%d":return Number(k[j++]);case"%j":try{return JSON.stringify(k[j++])}catch{return"[Circular]"}default:return X}})),D=k[j];j<E;D=k[++j])y(D)||!B(D)?I+=" "+D:I+=" "+n(D);return I},f.deprecate=function(w,_){if(N(s.process))return function(){return f.deprecate(w,_).apply(this,arguments)};if(l.noDeprecation===!0)return w;var j=!1;return function(){if(!j){if(l.throwDeprecation)throw new Error(_);l.traceDeprecation?console.trace(_):console.error(_),j=!0}return w.apply(this,arguments)}};var r,t={};function n(w,_){var j={seen:[],stylize:c};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),x(_)?j.showHidden=_:_&&f._extend(j,_),N(j.showHidden)&&(j.showHidden=!1),N(j.depth)&&(j.depth=2),N(j.colors)&&(j.colors=!1),N(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=u),d(j,w,j.depth)}function u(w,_){var j=n.styles[_];return j?"\x1B["+n.colors[j][0]+"m"+w+"\x1B["+n.colors[j][1]+"m":w}function c(w,_){return w}function d(w,_,j){if(w.customInspect&&_&&q(_.inspect)&&_.inspect!==f.inspect&&(!_.constructor||_.constructor.prototype!==_)){var k=_.inspect(j,w);return S(k)||(k=d(w,k,j)),k}var E=(function($,L){if(N(L))return $.stylize("undefined","undefined");if(S(L)){var W="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(W,"string")}if(v(L))return $.stylize(""+L,"number");if(x(L))return $.stylize(""+L,"boolean");if(y(L))return $.stylize("null","null")})(w,_);if(E)return E;var I=Object.keys(_),D=(function($){var L={};return $.forEach((function(W,re){L[W]=!0})),L})(I);if(w.showHidden&&(I=Object.getOwnPropertyNames(_)),F(_)&&(I.indexOf("message")>=0||I.indexOf("description")>=0))return b(_);if(I.length===0){if(q(_)){var X=_.name?": "+_.name:"";return w.stylize("[Function"+X+"]","special")}if(R(_))return w.stylize(RegExp.prototype.toString.call(_),"regexp");if(M(_))return w.stylize(Date.prototype.toString.call(_),"date");if(F(_))return b(_)}var G,K="",U=!1,J=["{","}"];return p(_)&&(U=!0,J=["[","]"]),q(_)&&(K=" [Function"+(_.name?": "+_.name:"")+"]"),R(_)&&(K=" "+RegExp.prototype.toString.call(_)),M(_)&&(K=" "+Date.prototype.toUTCString.call(_)),F(_)&&(K=" "+b(_)),I.length!==0||U&&_.length!=0?j<0?R(_)?w.stylize(RegExp.prototype.toString.call(_),"regexp"):w.stylize("[Object]","special"):(w.seen.push(_),G=U?(function($,L,W,re,ne){for(var se=[],H=0,ce=L.length;H<ce;++H)C(L,String(H))?se.push(g($,L,W,re,String(H),!0)):se.push("");return ne.forEach((function(ae){ae.match(/^\d+$/)||se.push(g($,L,W,re,ae,!0))})),se})(w,_,j,D,I):I.map((function($){return g(w,_,j,D,$,U)})),w.seen.pop(),(function($,L,W){return $.reduce((function(re,ne){return ne.indexOf(`
`)>=0,re+ne.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?W[0]+(L===""?"":L+`
 `)+" "+$.join(`,
  `)+" "+W[1]:W[0]+L+" "+$.join(", ")+" "+W[1]})(G,K,J)):J[0]+K+J[1]}function b(w){return"["+Error.prototype.toString.call(w)+"]"}function g(w,_,j,k,E,I){var D,X,G;if((G=Object.getOwnPropertyDescriptor(_,E)||{value:_[E]}).get?X=G.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):G.set&&(X=w.stylize("[Setter]","special")),C(k,E)||(D="["+E+"]"),X||(w.seen.indexOf(G.value)<0?(X=y(j)?d(w,G.value,null):d(w,G.value,j-1)).indexOf(`
`)>-1&&(X=I?X.split(`
`).map((function(K){return"  "+K})).join(`
`).substr(2):`
`+X.split(`
`).map((function(K){return"   "+K})).join(`
`)):X=w.stylize("[Circular]","special")),N(D)){if(I&&E.match(/^\d+$/))return X;(D=JSON.stringify(""+E)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(D=D.substr(1,D.length-2),D=w.stylize(D,"name")):(D=D.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),D=w.stylize(D,"string"))}return D+": "+X}function p(w){return Array.isArray(w)}function x(w){return typeof w=="boolean"}function y(w){return w===null}function v(w){return typeof w=="number"}function S(w){return typeof w=="string"}function N(w){return w===void 0}function R(w){return B(w)&&V(w)==="[object RegExp]"}function B(w){return typeof w=="object"&&w!==null}function M(w){return B(w)&&V(w)==="[object Date]"}function F(w){return B(w)&&(V(w)==="[object Error]"||w instanceof Error)}function q(w){return typeof w=="function"}function V(w){return Object.prototype.toString.call(w)}function O(w){return w<10?"0"+w.toString(10):w.toString(10)}f.debuglog=function(w){if(N(r)&&(r=l.env.NODE_DEBUG||""),w=w.toUpperCase(),!t[w])if(new RegExp("\\b"+w+"\\b","i").test(r)){var _=l.pid;t[w]=function(){var j=f.format.apply(f,arguments);console.error("%s %d: %s",w,_,j)}}else t[w]=function(){};return t[w]},f.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},f.isArray=p,f.isBoolean=x,f.isNull=y,f.isNullOrUndefined=function(w){return w==null},f.isNumber=v,f.isString=S,f.isSymbol=function(w){return typeof w=="symbol"},f.isUndefined=N,f.isRegExp=R,f.isObject=B,f.isDate=M,f.isError=F,f.isFunction=q,f.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},f.isBuffer=e("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var w=new Date,_=[O(w.getHours()),O(w.getMinutes()),O(w.getSeconds())].join(":");return[w.getDate(),T[w.getMonth()],_].join(" ")}function C(w,_){return Object.prototype.hasOwnProperty.call(w,_)}f.log=function(){console.log("%s - %s",A(),f.format.apply(f,arguments))},f.inherits=e("inherits"),f._extend=function(w,_){if(!_||!B(_))return w;for(var j=Object.keys(_),k=j.length;k--;)w[j[k]]=_[j[k]];return w}}).call(this)}).call(this,e("_process"),typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"v1",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(f,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(f,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(f,"v5",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(f,"NIL",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(f,"version",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(f,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(f,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(f,"parse",{enumerable:!0,get:function(){return d.default}});var l=b(e("./v1.js")),s=b(e("./v3.js")),o=b(e("./v4.js")),r=b(e("./v5.js")),t=b(e("./nil.js")),n=b(e("./version.js")),u=b(e("./validate.js")),c=b(e("./stringify.js")),d=b(e("./parse.js"));function b(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,h,f){function l(d){return 14+(d+64>>>9<<4)+1}function s(d,b){const g=(65535&d)+(65535&b);return(d>>16)+(b>>16)+(g>>16)<<16|65535&g}function o(d,b,g,p,x,y){return s((v=s(s(b,d),s(p,y)))<<(S=x)|v>>>32-S,g);var v,S}function r(d,b,g,p,x,y,v){return o(b&g|~b&p,d,b,x,y,v)}function t(d,b,g,p,x,y,v){return o(b&p|g&~p,d,b,x,y,v)}function n(d,b,g,p,x,y,v){return o(b^g^p,d,b,x,y,v)}function u(d,b,g,p,x,y,v){return o(g^(b|~p),d,b,x,y,v)}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=function(d){if(typeof d=="string"){const b=unescape(encodeURIComponent(d));d=new Uint8Array(b.length);for(let g=0;g<b.length;++g)d[g]=b.charCodeAt(g)}return(function(b){const g=[],p=32*b.length;for(let x=0;x<p;x+=8){const y=b[x>>5]>>>x%32&255,v=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);g.push(v)}return g})((function(b,g){b[g>>5]|=128<<g%32,b[l(g)-1]=g;let p=1732584193,x=-271733879,y=-1732584194,v=271733878;for(let S=0;S<b.length;S+=16){const N=p,R=x,B=y,M=v;p=r(p,x,y,v,b[S],7,-680876936),v=r(v,p,x,y,b[S+1],12,-389564586),y=r(y,v,p,x,b[S+2],17,606105819),x=r(x,y,v,p,b[S+3],22,-1044525330),p=r(p,x,y,v,b[S+4],7,-176418897),v=r(v,p,x,y,b[S+5],12,1200080426),y=r(y,v,p,x,b[S+6],17,-1473231341),x=r(x,y,v,p,b[S+7],22,-45705983),p=r(p,x,y,v,b[S+8],7,1770035416),v=r(v,p,x,y,b[S+9],12,-1958414417),y=r(y,v,p,x,b[S+10],17,-42063),x=r(x,y,v,p,b[S+11],22,-1990404162),p=r(p,x,y,v,b[S+12],7,1804603682),v=r(v,p,x,y,b[S+13],12,-40341101),y=r(y,v,p,x,b[S+14],17,-1502002290),x=r(x,y,v,p,b[S+15],22,1236535329),p=t(p,x,y,v,b[S+1],5,-165796510),v=t(v,p,x,y,b[S+6],9,-1069501632),y=t(y,v,p,x,b[S+11],14,643717713),x=t(x,y,v,p,b[S],20,-373897302),p=t(p,x,y,v,b[S+5],5,-701558691),v=t(v,p,x,y,b[S+10],9,38016083),y=t(y,v,p,x,b[S+15],14,-660478335),x=t(x,y,v,p,b[S+4],20,-405537848),p=t(p,x,y,v,b[S+9],5,568446438),v=t(v,p,x,y,b[S+14],9,-1019803690),y=t(y,v,p,x,b[S+3],14,-187363961),x=t(x,y,v,p,b[S+8],20,1163531501),p=t(p,x,y,v,b[S+13],5,-1444681467),v=t(v,p,x,y,b[S+2],9,-51403784),y=t(y,v,p,x,b[S+7],14,1735328473),x=t(x,y,v,p,b[S+12],20,-1926607734),p=n(p,x,y,v,b[S+5],4,-378558),v=n(v,p,x,y,b[S+8],11,-2022574463),y=n(y,v,p,x,b[S+11],16,1839030562),x=n(x,y,v,p,b[S+14],23,-35309556),p=n(p,x,y,v,b[S+1],4,-1530992060),v=n(v,p,x,y,b[S+4],11,1272893353),y=n(y,v,p,x,b[S+7],16,-155497632),x=n(x,y,v,p,b[S+10],23,-1094730640),p=n(p,x,y,v,b[S+13],4,681279174),v=n(v,p,x,y,b[S],11,-358537222),y=n(y,v,p,x,b[S+3],16,-722521979),x=n(x,y,v,p,b[S+6],23,76029189),p=n(p,x,y,v,b[S+9],4,-640364487),v=n(v,p,x,y,b[S+12],11,-421815835),y=n(y,v,p,x,b[S+15],16,530742520),x=n(x,y,v,p,b[S+2],23,-995338651),p=u(p,x,y,v,b[S],6,-198630844),v=u(v,p,x,y,b[S+7],10,1126891415),y=u(y,v,p,x,b[S+14],15,-1416354905),x=u(x,y,v,p,b[S+5],21,-57434055),p=u(p,x,y,v,b[S+12],6,1700485571),v=u(v,p,x,y,b[S+3],10,-1894986606),y=u(y,v,p,x,b[S+10],15,-1051523),x=u(x,y,v,p,b[S+1],21,-2054922799),p=u(p,x,y,v,b[S+8],6,1873313359),v=u(v,p,x,y,b[S+15],10,-30611744),y=u(y,v,p,x,b[S+6],15,-1560198380),x=u(x,y,v,p,b[S+13],21,1309151649),p=u(p,x,y,v,b[S+4],6,-145523070),v=u(v,p,x,y,b[S+11],10,-1120210379),y=u(y,v,p,x,b[S+2],15,718787259),x=u(x,y,v,p,b[S+9],21,-343485551),p=s(p,N),x=s(x,R),y=s(y,B),v=s(v,M)}return[p,x,y,v]})((function(b){if(b.length===0)return[];const g=8*b.length,p=new Uint32Array(l(g));for(let x=0;x<g;x+=8)p[x>>5]|=(255&b[x/8])<<x%32;return p})(d),8*d.length))};f.default=c},{}],530:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,f.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l,s=(l=e("./validate.js"))&&l.__esModule?l:{default:l},o=function(r){if(!(0,s.default)(r))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(r.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(r.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(r.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(r.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};f.default=o},{"./validate.js":541}],532:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,f.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,h,f){let l;Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(){if(!l&&(l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(s)};const s=new Uint8Array(16)},{}],534:[function(e,h,f){function l(r,t,n,u){switch(r){case 0:return t&n^~t&u;case 1:return t^n^u;case 2:return t&n^t&u^n&u;case 3:return t^n^u}}function s(r,t){return r<<t|r>>>32-t}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var o=function(r){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){const b=unescape(encodeURIComponent(r));r=[];for(let g=0;g<b.length;++g)r.push(b.charCodeAt(g))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);const u=r.length/4+2,c=Math.ceil(u/16),d=new Array(c);for(let b=0;b<c;++b){const g=new Uint32Array(16);for(let p=0;p<16;++p)g[p]=r[64*b+4*p]<<24|r[64*b+4*p+1]<<16|r[64*b+4*p+2]<<8|r[64*b+4*p+3];d[b]=g}d[c-1][14]=8*(r.length-1)/Math.pow(2,32),d[c-1][14]=Math.floor(d[c-1][14]),d[c-1][15]=8*(r.length-1)&4294967295;for(let b=0;b<c;++b){const g=new Uint32Array(80);for(let N=0;N<16;++N)g[N]=d[b][N];for(let N=16;N<80;++N)g[N]=s(g[N-3]^g[N-8]^g[N-14]^g[N-16],1);let p=n[0],x=n[1],y=n[2],v=n[3],S=n[4];for(let N=0;N<80;++N){const R=Math.floor(N/20),B=s(p,5)+l(R,x,y,v)+S+t[R]+g[N]>>>0;S=v,v=y,y=s(x,30)>>>0,x=p,p=B}n[0]=n[0]+p>>>0,n[1]=n[1]+x>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+S>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};f.default=o},{}],535:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l,s=(l=e("./validate.js"))&&l.__esModule?l:{default:l};const o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).substr(1));var r=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const u=(o[t[n+0]]+o[t[n+1]]+o[t[n+2]]+o[t[n+3]]+"-"+o[t[n+4]]+o[t[n+5]]+"-"+o[t[n+6]]+o[t[n+7]]+"-"+o[t[n+8]]+o[t[n+9]]+"-"+o[t[n+10]]+o[t[n+11]]+o[t[n+12]]+o[t[n+13]]+o[t[n+14]]+o[t[n+15]]).toLowerCase();if(!(0,s.default)(u))throw TypeError("Stringified UUID is invalid");return u};f.default=r},{"./validate.js":541}],536:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=o(e("./rng.js")),s=o(e("./stringify.js"));function o(d){return d&&d.__esModule?d:{default:d}}let r,t,n=0,u=0;var c=function(d,b,g){let p=b&&g||0;const x=b||new Array(16);let y=(d=d||{}).node||r,v=d.clockseq!==void 0?d.clockseq:t;if(y==null||v==null){const F=d.random||(d.rng||l.default)();y==null&&(y=r=[1|F[0],F[1],F[2],F[3],F[4],F[5]]),v==null&&(v=t=16383&(F[6]<<8|F[7]))}let S=d.msecs!==void 0?d.msecs:Date.now(),N=d.nsecs!==void 0?d.nsecs:u+1;const R=S-n+(N-u)/1e4;if(R<0&&d.clockseq===void 0&&(v=v+1&16383),(R<0||S>n)&&d.nsecs===void 0&&(N=0),N>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");n=S,u=N,t=v,S+=122192928e5;const B=(1e4*(268435455&S)+N)%4294967296;x[p++]=B>>>24&255,x[p++]=B>>>16&255,x[p++]=B>>>8&255,x[p++]=255&B;const M=S/4294967296*1e4&268435455;x[p++]=M>>>8&255,x[p++]=255&M,x[p++]=M>>>24&15|16,x[p++]=M>>>16&255,x[p++]=v>>>8|128,x[p++]=255&v;for(let F=0;F<6;++F)x[p+F]=y[F];return b||(0,s.default)(x)};f.default=c},{"./rng.js":533,"./stringify.js":535}],537:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=o(e("./v35.js")),s=o(e("./md5.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=(0,l.default)("v3",48,s.default);f.default=r},{"./md5.js":529,"./v35.js":538}],538:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(n,u,c){function d(b,g,p,x){if(typeof b=="string"&&(b=(function(v){v=unescape(encodeURIComponent(v));const S=[];for(let N=0;N<v.length;++N)S.push(v.charCodeAt(N));return S})(b)),typeof g=="string"&&(g=(0,s.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+b.length);if(y.set(g),y.set(b,g.length),y=c(y),y[6]=15&y[6]|u,y[8]=63&y[8]|128,p){x=x||0;for(let v=0;v<16;++v)p[x+v]=y[v];return p}return(0,l.default)(y)}try{d.name=n}catch{}return d.DNS=r,d.URL=t,d},f.URL=f.DNS=void 0;var l=o(e("./stringify.js")),s=o(e("./parse.js"));function o(n){return n&&n.__esModule?n:{default:n}}const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8";f.DNS=r;const t="6ba7b811-9dad-11d1-80b4-00c04fd430c8";f.URL=t},{"./parse.js":531,"./stringify.js":535}],539:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=o(e("./rng.js")),s=o(e("./stringify.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(t,n,u){const c=(t=t||{}).random||(t.rng||l.default)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,n){u=u||0;for(let d=0;d<16;++d)n[u+d]=c[d];return n}return(0,s.default)(c)};f.default=r},{"./rng.js":533,"./stringify.js":535}],540:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=o(e("./v35.js")),s=o(e("./sha1.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=(0,l.default)("v5",80,s.default);f.default=r},{"./sha1.js":534,"./v35.js":538}],541:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l,s=(l=e("./regex.js"))&&l.__esModule?l:{default:l},o=function(r){return typeof r=="string"&&s.default.test(r)};f.default=o},{"./regex.js":532}],542:[function(e,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l,s=(l=e("./validate.js"))&&l.__esModule?l:{default:l},o=function(r){if(!(0,s.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)};f.default=o},{"./validate.js":541}],543:[function(e,h,f){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(f,"__esModule",{value:!0}),f.CHAR=`	
\r -퟿-�𐀀-􏿿`,f.S=` 	\r
`,f.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",f.NAME_CHAR="-"+f.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",f.CHAR_RE=new RegExp("^["+f.CHAR+"]$","u"),f.S_RE=new RegExp("^["+f.S+"]+$","u"),f.NAME_START_CHAR_RE=new RegExp("^["+f.NAME_START_CHAR+"]$","u"),f.NAME_CHAR_RE=new RegExp("^["+f.NAME_CHAR+"]$","u"),f.NAME_RE=new RegExp("^["+f.NAME_START_CHAR+"]["+f.NAME_CHAR+"]*$","u"),f.NMTOKEN_RE=new RegExp("^["+f.NAME_CHAR+"]+$","u");function l(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}f.S_LIST=[32,10,13,9],f.isChar=function(s){return s>=32&&s<=55295||s===10||s===13||s===9||s>=57344&&s<=65533||s>=65536&&s<=1114111},f.isS=function(s){return s===32||s===10||s===13||s===9},f.isNameStartChar=l,f.isNameChar=function(s){return l(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],544:[function(e,h,f){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(f,"__esModule",{value:!0}),f.CHAR="-퟿-�𐀀-􏿿",f.RESTRICTED_CHAR="-\b\v\f---",f.S=` 	\r
`,f.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",f.NAME_CHAR="-"+f.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",f.CHAR_RE=new RegExp("^["+f.CHAR+"]$","u"),f.RESTRICTED_CHAR_RE=new RegExp("^["+f.RESTRICTED_CHAR+"]$","u"),f.S_RE=new RegExp("^["+f.S+"]+$","u"),f.NAME_START_CHAR_RE=new RegExp("^["+f.NAME_START_CHAR+"]$","u"),f.NAME_CHAR_RE=new RegExp("^["+f.NAME_CHAR+"]$","u"),f.NAME_RE=new RegExp("^["+f.NAME_START_CHAR+"]["+f.NAME_CHAR+"]*$","u"),f.NMTOKEN_RE=new RegExp("^["+f.NAME_CHAR+"]+$","u");function l(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}f.S_LIST=[32,10,13,9],f.isChar=function(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},f.isRestrictedChar=function(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159},f.isCharAndNotRestricted=function(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},f.isS=function(s){return s===32||s===10||s===13||s===9},f.isNameStartChar=l,f.isNameChar=function(s){return l(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],545:[function(e,h,f){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function l(s){return s>=65&&s<=90||s===95||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}Object.defineProperty(f,"__esModule",{value:!0}),f.NC_NAME_START_CHAR="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",f.NC_NAME_CHAR="-"+f.NC_NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",f.NC_NAME_START_CHAR_RE=new RegExp("^["+f.NC_NAME_START_CHAR+"]$","u"),f.NC_NAME_CHAR_RE=new RegExp("^["+f.NC_NAME_CHAR+"]$","u"),f.NC_NAME_RE=new RegExp("^["+f.NC_NAME_START_CHAR+"]["+f.NC_NAME_CHAR+"]*$","u"),f.isNCNameStartChar=l,f.isNCNameChar=function(s){return l(s)||s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}]},{},[15])(15)}))})(Bn)),Bn.exports}var F0=D0();const aa=ii(F0);class la{static async readExcelFile(a){return new Promise((e,h)=>{const f=new FileReader;f.onload=async l=>{var s;try{const o=(s=l.target)==null?void 0:s.result;if(!o){h(new Error("No data found in file"));return}const r=new aa.Workbook;await r.xlsx.load(o);const t=r.worksheets[0];if(!t){h(new Error("No worksheet found"));return}const n=[],u=[];t.getRow(1).eachCell((d,b)=>{var g;u[b-1]=((g=d.value)==null?void 0:g.toString())||""}),t.eachRow((d,b)=>{if(b===1)return;const g={};d.eachCell((p,x)=>{const y=u[x-1];y&&(g[y]=p.value)}),Object.keys(g).length>0&&n.push(g)}),e(n)}catch(o){h(o)}},f.onerror=()=>{h(new Error("Failed to read file"))},f.readAsArrayBuffer(a)})}static async exportToExcel(a,e="export.xlsx"){try{const h=new aa.Workbook,f=h.addWorksheet("Data");if(a.length===0)throw new Error("No data to export");const l=Object.keys(a[0]);f.addRow(l);const s=f.getRow(1);s.font={bold:!0},s.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6FA"}},a.forEach(u=>{const c=l.map(d=>u[d]||"");f.addRow(c)}),f.columns.forEach(u=>{u.width=15});const o=await h.xlsx.writeBuffer(),r=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=window.URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t)}catch(h){throw new Error(`Failed to export Excel: ${h}`)}}static validateExcelData(a,e){const h=[];if(a.length===0)return h.push("No data found in file"),{isValid:!1,errors:h};const f=a[0],l=e.filter(o=>!(o in f));l.length>0&&h.push(`Missing required fields: ${l.join(", ")}`);const s=a.filter(o=>Object.values(o).every(r=>!r||r.toString().trim()===""));return s.length>0&&h.push(`Found ${s.length} empty rows`),{isValid:h.length===0,errors:h}}}const Es=({currentPage:m,totalPages:a,totalItems:e,itemsPerPage:h,onPageChange:f})=>{const l=Ue();if(a<=1)return null;const s=()=>{m>1&&f(m-1)},o=()=>{m<a&&f(m+1)},r=(m-1)*h+1,t=Math.min(m*h,e);return i.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 sm:px-6 rounded-b-lg",children:[i.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[i.jsx("button",{onClick:s,disabled:m===1,className:"relative inline-flex items-center rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50",children:l("previous")}),i.jsx("button",{onClick:o,disabled:m===a,className:"relative ml-3 inline-flex items-center rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50",children:l("next")})]}),i.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l("showing")," ",i.jsx("span",{className:"font-medium",children:r})," ",l("to")," ",i.jsx("span",{className:"font-medium",children:t})," ",l("of")," ",i.jsx("span",{className:"font-medium",children:e})," ",l("results")]})}),i.jsx("div",{children:i.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[i.jsxs("button",{onClick:s,disabled:m===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 dark:ring-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:l("previous")}),i.jsx($a,{className:"h-5 w-5","aria-hidden":"true"})]}),i.jsxs("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 dark:text-slate-300 ring-1 ring-inset ring-slate-300 dark:ring-slate-600",children:[l("page")," ",m," / ",a]}),i.jsxs("button",{onClick:o,disabled:m===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 dark:ring-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:l("next")}),i.jsx(qs,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})},en=15,Un=({title:m,value:a,icon:e,onClick:h,color:f,isActive:l})=>i.jsxs("button",{onClick:h,className:`p-4 rounded-xl shadow-md flex items-center space-x-4 w-full text-left transition-all transform hover:scale-105 ${l?"ring-2 ring-offset-2 dark:ring-offset-slate-800":"ring-1 ring-transparent"} ${f}`,children:[i.jsx("div",{className:"flex-shrink-0 bg-white/20 rounded-full p-3 text-white",children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-white/80",children:m}),i.jsx("p",{className:"text-3xl font-bold text-white",children:a})]})]}),L0=({enabled:m,onChange:a})=>i.jsx("button",{type:"button",className:`${m?"bg-blue-600":"bg-gray-200 dark:bg-slate-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,role:"switch","aria-checked":m,onClick:a,children:i.jsx("span",{"aria-hidden":"true",className:`${m?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),O0=m=>{const{user:a,students:e,projectGroups:h,majors:f,classrooms:l,addStudent:s,updateStudent:o,deleteStudent:r,bulkAddOrUpdateStudents:t,bulkUpdateStudents:n,bulkDeleteStudents:u,initialFilter:c,onFilterConsumed:d}=m,[b,g]=Z.useState(!1),[p,x]=Z.useState(null),[y,v]=Z.useState(null),[S,N]=Z.useState({key:"studentId",direction:"ascending"}),[R,B]=Z.useState(""),[M,F]=Z.useState("all"),[q,V]=Z.useState(c||"all"),[O,T]=Z.useState(new Set),[A,C]=Z.useState(!1),[w,_]=Z.useState(!1),[j,k]=Z.useState(!1),[E,I]=Z.useState([]),[D,X]=Z.useState(1),G=Dr.useRef(null),K=At(),U=Ue();Z.useEffect(()=>{c&&d&&d()},[c,d]),Z.useEffect(()=>{X(1)},[R,M,q]);const J=he=>{let pe="ascending";S&&S.key===he&&S.direction==="ascending"&&(pe="descending"),N({key:he,direction:pe})},$=Z.useMemo(()=>{const he=new Map;return h.forEach(pe=>{pe.students.forEach(ke=>{he.set(ke.studentId,pe.project.projectId)})}),he},[h]),L=Z.useMemo(()=>{let he=[...e];if(R){const pe=R.toLowerCase();he=he.filter(ke=>ke.studentId.toLowerCase().includes(pe)||`${ke.name} ${ke.surname}`.toLowerCase().includes(pe)||ke.email.toLowerCase().includes(pe))}return M!=="all"&&(he=he.filter(pe=>pe.major===M)),q!=="all"&&(he=he.filter(pe=>pe.status===q)),S!==null&&he.sort((pe,ke)=>{let Ce,Ee;return S.key==="name"?(Ce=`${pe.name} ${pe.surname}`,Ee=`${ke.name} ${ke.surname}`):(Ce=pe[S.key],Ee=ke[S.key]),Ce<Ee?S.direction==="ascending"?-1:1:Ce>Ee?S.direction==="ascending"?1:-1:0}),he},[e,S,R,M,q]),W=Z.useMemo(()=>{const he=e.filter(ke=>ke.status==="Approved").length,pe=e.filter(ke=>ke.status==="Pending").length;return{total:e.length,approved:he,pending:pe}},[e]),re=Z.useMemo(()=>{const he=(D-1)*en;return L.slice(he,he+en)},[L,D]),ne=()=>{x(null),g(!0)},se=he=>{x(he),g(!0)},H=he=>{o({...he,status:"Approved"}),K({type:"success",message:U("approvedStudent").replace("${name}",`${he.name} ${he.surname}`)})},ce=he=>{if($.has(he.studentId)){K({type:"error",message:U("cannotDeleteStudentWithProject")});return}v(he)},ae=()=>{y&&(r(y.studentId),K({type:"success",message:U("studentDeletedSuccess")}),v(null))},Y=he=>{"studentId"in he&&p?(o(he),K({type:"success",message:U("studentUpdatedSuccess")})):(s(he),K({type:"success",message:U("studentAddedSuccess")})),g(!1)},Q=he=>{T(pe=>{const ke=new Set(pe);return ke.has(he)?ke.delete(he):ke.add(he),ke})},te=he=>{T(he.target.checked?new Set(L.map(pe=>pe.studentId)):new Set)},ie=he=>{if(Object.keys(he).length===0){K({type:"info",message:U("noChangesForBulkEdit")});return}n(Array.from(O),he),K({type:"success",message:U("studentsUpdatedSuccess").replace("${count}",String(O.size))}),C(!1),T(new Set)},le=()=>{const he=Array.from(O).filter(pe=>$.has(pe));if(he.length>0){K({type:"error",message:U("cannotDeleteStudentsWithProjects").replace("${count}",String(he.length))}),_(!1);return}u(Array.from(O)),K({type:"success",message:U("studentsDeletedSuccess").replace("${count}",String(O.size))}),_(!1),T(new Set)},ee=()=>{var he;return(he=G.current)==null?void 0:he.click()},oe=he=>{var Ce;const pe=(Ce=he.target.files)==null?void 0:Ce[0];if(!pe)return;const ke=new FileReader;ke.onload=async Ee=>{var Oe;try{const Te=(Oe=Ee.target)==null?void 0:Oe.result,ye=await la.readExcelFile(pe),Ae=new Set(e.map(xe=>xe.studentId.toLowerCase())),Fe=new Set(f.map(xe=>xe.name.toLowerCase())),Re=new Set(l.map(xe=>xe.name.toLowerCase())),ge=ye.map(xe=>{var ze,Le,Ge,Ke,Ye,ut,ht,rt,me;const we=(ze=xe["Student ID"])==null?void 0:ze.toString().trim().toUpperCase();if(!we)return{...xe,_status:"error",_error:"Missing Student ID"};const je=Ae.has(we.toLowerCase())?"update":"new";let Se="";const Ie=(Le=xe.Major)==null?void 0:Le.toString().trim();Fe.has(Ie.toLowerCase())||(Se+="Invalid Major. ");const He=(Ge=xe.Classroom)==null?void 0:Ge.toString().trim();return Re.has(He.toLowerCase())||(Se+="Invalid Classroom. "),{studentId:we,name:(Ke=xe.Name)==null?void 0:Ke.toString().trim(),surname:(Ye=xe.Surname)==null?void 0:Ye.toString().trim(),gender:(ut=xe.Gender)==null?void 0:ut.toString().trim(),major:Ie,classroom:He,tel:(ht=xe.Tel)==null?void 0:ht.toString().trim(),email:(rt=xe.Email)==null?void 0:rt.toString().trim(),status:((me=xe.Status)==null?void 0:me.toString().trim())||"Approved",_status:Se?"error":je,_error:Se||void 0}});I(ge),k(!0)}catch(Te){K({type:"error",message:U("fileParseError")}),console.error("File parse error:",Te)}finally{he.target&&(he.target.value="")}},ke.readAsBinaryString(pe)},de=he=>{t(he),K({type:"success",message:U("studentsImportedSuccess").replace("${count}",String(he.length))}),k(!1)},fe=Z.useCallback(async()=>{const he=L.map(pe=>({[U("studentId")]:pe.studentId,[U("name")]:pe.name,[U("surname")]:pe.surname,[U("gender")]:pe.gender,[U("major")]:pe.major,[U("classroom")]:pe.classroom,[U("telephone")]:pe.tel,[U("email")]:pe.email,[U("status")]:pe.status,[U("project")]:$.get(pe.studentId)||U("na")}));if(he.length===0){K({type:"info",message:U("noDataToExport")});return}await la.exportToExcel(he,"students_report.xlsx"),K({type:"success",message:U("studentExportSuccess")})},[L,$,K,U]),be=he=>{o({...he,isAiAssistantEnabled:!(he.isAiAssistantEnabled??!0)})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Fr,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:U("manageAllStudents")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:U("studentsDescription")})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[i.jsx("input",{type:"file",ref:G,onChange:oe,className:"hidden",accept:".xlsx, .xls"}),i.jsxs("button",{onClick:ee,className:"flex items-center justify-center bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(Xr,{className:"w-5 h-5 mr-2"})," ",U("import")]}),i.jsxs("button",{onClick:fe,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"})," ",U("exportExcel")]}),i.jsxs("button",{onClick:ne,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(or,{className:"w-5 h-5 mr-2"})," ",U("addStudent")]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(Un,{title:U("totalStudents"),value:W.total,icon:i.jsx(Fr,{className:"w-6 h-6"}),onClick:()=>V("all"),color:"bg-blue-500 ring-blue-500",isActive:q==="all"}),i.jsx(Un,{title:U("approvedStudents"),value:W.approved,icon:i.jsx(Kt,{className:"w-6 h-6"}),onClick:()=>V("Approved"),color:"bg-green-500 ring-green-500",isActive:q==="Approved"}),i.jsx(Un,{title:U("pendingStudents"),value:W.pending,icon:i.jsx(Er,{className:"w-6 h-6"}),onClick:()=>V("Pending"),color:"bg-yellow-500 ring-yellow-500",isActive:q==="Pending"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm dark:bg-slate-700 dark:text-white",placeholder:U("searchByIdNameEmail"),value:R,onChange:he=>B(he.target.value)})]}),i.jsxs("select",{value:M,onChange:he=>F(he.target.value),className:"block w-full rounded-md border-0 py-2 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm dark:bg-slate-700 dark:text-white",children:[i.jsx("option",{value:"all",children:U("allMajors")}),f.map(he=>i.jsx("option",{value:he.name,children:he.name},he.id))]})]}),O.size>0&&i.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-3 rounded-lg flex justify-between items-center mb-4",children:[i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:U("bulkActionsSelected").replace("${count}",String(O.size))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>C(!0),className:"text-sm font-medium text-blue-600 dark:text-blue-300 hover:underline",children:U("edit")}),i.jsx("button",{onClick:()=>_(!0),className:"text-sm font-medium text-red-600 dark:text-red-400 hover:underline",children:U("delete")})]})]}),i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:re.map(he=>i.jsx(M0,{student:he,user:a,projectId:$.get(he.studentId),onEdit:()=>se(he),onDelete:()=>ce(he),onApprove:()=>H(he),onSelect:Q,isSelected:O.has(he.studentId),onToggleAiAssistant:()=>be(he)},he.studentId))}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-4",children:i.jsx("input",{type:"checkbox",onChange:te,checked:O.size>0&&O.size===L.length,className:"w-4 h-4 text-blue-600"})}),i.jsx(We,{sortKey:"studentId",title:U("studentId"),sortConfig:S,requestSort:J}),i.jsx(We,{sortKey:"name",title:U("fullName"),sortConfig:S,requestSort:J}),i.jsx(We,{sortKey:"major",title:U("major"),sortConfig:S,requestSort:J}),i.jsx(We,{sortKey:"status",title:U("status"),sortConfig:S,requestSort:J}),a.role==="Admin"&&i.jsx("th",{scope:"col",className:"px-6 py-3",children:U("aiAssistant")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:U("project")}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:U("actions")})]})}),i.jsx("tbody",{children:re.map(he=>i.jsxs("tr",{className:`border-b dark:border-slate-700 ${O.has(he.studentId)?"bg-blue-50 dark:bg-blue-900/20":"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:[i.jsx("td",{className:"w-4 p-4",children:i.jsx("input",{type:"checkbox",checked:O.has(he.studentId),onChange:()=>Q(he.studentId),className:"w-4 h-4 text-blue-600"})}),i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:he.studentId}),i.jsxs("td",{className:"px-6 py-4",children:[he.name," ",he.surname]}),i.jsx("td",{className:"px-6 py-4",children:he.major}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${he.status==="Approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:he.status})}),a.role==="Admin"&&i.jsx("td",{className:"px-6 py-4",children:i.jsx(L0,{enabled:he.isAiAssistantEnabled??!0,onChange:()=>be(he)})}),i.jsx("td",{className:"px-6 py-4",children:$.get(he.studentId)||"N/A"}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[he.status==="Pending"&&i.jsx("button",{onClick:()=>H(he),className:"p-2 text-slate-500 hover:text-green-600",title:U("approve"),children:i.jsx(Kt,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>se(he),className:"p-2 text-slate-500 hover:text-blue-600",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>ce(he),className:"p-2 text-slate-500 hover:text-red-600",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},he.studentId))})]}),L.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:R?U("noStudentsForQuery").replace("${query}",R):U("noStudentsClickToAdd")})]}),i.jsx(Es,{currentPage:D,totalPages:Math.ceil(L.length/en),totalItems:L.length,itemsPerPage:en,onPageChange:X})]}),b&&i.jsx(I0,{onClose:()=>g(!1),onSave:Y,studentToEdit:p,allStudents:e,majors:f,classrooms:l}),y&&i.jsx(dr,{isOpen:!!y,onClose:()=>v(null),onConfirm:ae,title:U("deleteStudentTitle"),message:U("deleteStudentMessage").replace("${name}",`${y.name} ${y.surname}`)}),A&&i.jsx(R0,{isOpen:A,onClose:()=>C(!1),onSave:ie,majors:f,classrooms:l,selectedCount:O.size}),w&&i.jsx(dr,{isOpen:w,onClose:()=>_(!1),onConfirm:le,title:U("bulkDeleteStudentTitle").replace("${count}",String(O.size)),message:U("bulkDeleteStudentMessage").replace("${count}",String(O.size))}),j&&i.jsx(vi,{isOpen:j,onClose:()=>k(!1),onConfirm:de,data:E,columns:[{key:"_status",header:"Status"},{key:"studentId",header:"Student ID"},{key:"name",header:"Name"},{key:"surname",header:"Surname"},{key:"major",header:"Major"},{key:"classroom",header:"Classroom"},{key:"_error",header:"Error"}],dataTypeName:"Students"})]})},kl=({onClose:m,onSave:a,advisorToEdit:e,allAdvisors:h,majors:f,user:l})=>{const s=!!e,o=Ue(),[r,t]=Z.useState(e||{quota:5,mainCommitteeQuota:5,secondCommitteeQuota:5,thirdCommitteeQuota:5,specializedMajorIds:[]}),[n,u]=Z.useState({});Z.useEffect(()=>{e&&t(e)},[e]);const c=g=>{const p=r.specializedMajorIds||[],x=p.includes(g)?p.filter(y=>y!==g):[...p,g];t(y=>({...y,specializedMajorIds:x}))},d=()=>{var p;const g={};return(p=r.name)!=null&&p.trim()||(g.name=o("nameRequired")),h.some(x=>{var y;return x.name.toLowerCase()===((y=r.name)==null?void 0:y.trim().toLowerCase())&&x.id!==(e==null?void 0:e.id)})&&(g.name=o("advisorNameExists")),u(g),Object.keys(g).length===0},b=g=>{if(g.preventDefault(),!d())return;const p=s?{...e,...r}:{...r,password:"password12p3",mustChangePassword:!0};a(p)};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold",children:o(s?"editAdvisor":"addAdvisorTitle")}),i.jsx("button",{onClick:m,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:b,noValidate:!0,className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("fullName")}),i.jsx("input",{type:"text",id:"name",value:r.name||"",onChange:g=>t(p=>({...p,name:g.target.value})),className:`input-style mt-1 ${n.name?"border-red-500":""}`}),n.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.name})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"quota",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("supervisingQuota")}),i.jsx("input",{type:"number",id:"quota",value:r.quota??"",onChange:g=>t(p=>({...p,quota:Number(g.target.value)})),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mainCommitteeQuota",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("mainCommitteeQuota")}),i.jsx("input",{type:"number",id:"mainCommitteeQuota",value:r.mainCommitteeQuota??"",onChange:g=>t(p=>({...p,mainCommitteeQuota:Number(g.target.value)})),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"secondCommitteeQuota",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("secondCommitteeQuota")}),i.jsx("input",{type:"number",id:"secondCommitteeQuota",value:r.secondCommitteeQuota??"",onChange:g=>t(p=>({...p,secondCommitteeQuota:Number(g.target.value)})),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"thirdCommitteeQuota",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("thirdCommitteeQuota")}),i.jsx("input",{type:"number",id:"thirdCommitteeQuota",value:r.thirdCommitteeQuota??"",onChange:g=>t(p=>({...p,thirdCommitteeQuota:Number(g.target.value)})),className:"input-style mt-1"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("specializedMajors")}),i.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:f.map(g=>{var p;return i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:`major-${g.id}`,type:"checkbox",checked:(p=r.specializedMajorIds)==null?void 0:p.includes(g.id),onChange:()=>c(g.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600"}),i.jsx("label",{htmlFor:`major-${g.id}`,className:"ml-2 block text-sm text-slate-800 dark:text-slate-200",children:g.name})]},g.id)})})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500 font-bold py-2 px-4 rounded-lg",children:o("cancel")}),i.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:o("saveAdvisor")})]})]})]})]})},B0=({isOpen:m,onClose:a,onSave:e,selectedCount:h})=>{const[f,l]=Z.useState({}),s=Ue(),o=()=>{const t={};f.quota&&(t.quota=Number(f.quota)),f.mainCommitteeQuota&&(t.mainCommitteeQuota=Number(f.mainCommitteeQuota)),f.secondCommitteeQuota&&(t.secondCommitteeQuota=Number(f.secondCommitteeQuota)),f.thirdCommitteeQuota&&(t.thirdCommitteeQuota=Number(f.thirdCommitteeQuota)),e(t)};if(!m)return null;const r=[{key:"quota",label:s("supervisingQuota")},{key:"mainCommitteeQuota",label:s("mainCommitteeQuota")},{key:"secondCommitteeQuota",label:s("secondCommitteeQuota")},{key:"thirdCommitteeQuota",label:s("thirdCommitteeQuota")}];return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-md",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s("bulkEditAdvisorTitle").replace("{count}",String(h))}),i.jsx("button",{onClick:a,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("bulkEditAdvisorDescription")}),r.map(t=>i.jsxs("div",{children:[i.jsx("label",{htmlFor:`bulk-${t.key}`,className:"block text-sm font-medium",children:t.label}),i.jsx("input",{type:"number",id:`bulk-${t.key}`,placeholder:s("leaveBlankNoChange"),onChange:n=>l(u=>({...u,[t.key]:n.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},t.key))]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 mt-4 border-t dark:border-slate-700",children:[i.jsx("button",{onClick:a,className:"bg-slate-200 hover:bg-slate-300 py-2 px-4 rounded-lg",children:s("cancel")}),i.jsx("button",{onClick:o,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg",children:s("saveChanges")})]})]})})},U0=({enabled:m,onChange:a})=>i.jsx("button",{type:"button",className:`${m?"bg-blue-600":"bg-gray-200 dark:bg-slate-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,role:"switch","aria-checked":m,onClick:a,children:i.jsx("span",{"aria-hidden":"true",className:`${m?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),$0=({advisor:m,user:a,projectCount:e,getMajorNames:h,onEdit:f,onDelete:l,onSelect:s,isSelected:o,onToggleAiAssistant:r})=>{const t=Ue(),n=e>m.quota,u=c=>{c.stopPropagation(),r()};return i.jsxs("div",{className:`relative bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 flex flex-col justify-between ${o?"ring-2 ring-blue-500":""}`,children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"pr-10",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:m.name}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-semibold",children:m.id})]}),i.jsx("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500",checked:o,onChange:()=>s(m.id)})]}),i.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsxs("strong",{children:[t("projects"),":"]})," ",i.jsxs("span",{className:n?"text-red-500 dark:text-red-400 font-bold":"",children:[e," / ",m.quota]})]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[t("majors"),":"]})," ",h(m.specializedMajorIds)]}),a.role==="Admin"&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("strong",{children:[t("aiAssistant"),":"]}),i.jsx(U0,{enabled:m.isAiAssistantEnabled??!0,onChange:u})]})]})]}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700 flex justify-end space-x-2",children:[i.jsx("button",{onClick:f,className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:l,className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]})},tn=15,z0=({enabled:m,onChange:a})=>i.jsx("button",{type:"button",className:`${m?"bg-blue-600":"bg-gray-200 dark:bg-slate-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,role:"switch","aria-checked":m,onClick:a,children:i.jsx("span",{"aria-hidden":"true",className:`${m?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),q0=m=>{const{user:a,advisors:e,projectGroups:h,majors:f,advisorProjectCounts:l,committeeCounts:s,addAdvisor:o,updateAdvisor:r,deleteAdvisor:t,deleteAdvisors:n,bulkAddOrUpdateAdvisors:u,bulkUpdateAdvisors:c}=m,[d,b]=Z.useState(!1),[g,p]=Z.useState(null),[x,y]=Z.useState(null),[v,S]=Z.useState({key:"id",direction:"ascending"}),[N,R]=Z.useState(""),[B,M]=Z.useState(new Set),[F,q]=Z.useState(!1),[V,O]=Z.useState(!1),[T,A]=Z.useState(!1),[C,w]=Z.useState([]),[_,j]=Z.useState(1),k=Z.useRef(null),E=At(),I=Ue(),D=ie=>{let le="ascending";v&&v.key===ie&&v.direction==="ascending"&&(le="descending"),S({key:ie,direction:le})},X=Z.useCallback(ie=>!ie||ie.length===0?I("all"):ie.map(le=>{var ee;return((ee=f.find(oe=>oe.id===le))==null?void 0:ee.abbreviation)||"?"}).join(", "),[f,I]),G=Z.useMemo(()=>{let ie=[...e];if(N){const le=N.toLowerCase();ie=ie.filter(ee=>ee.id.toLowerCase().includes(le)||ee.name.toLowerCase().includes(le))}return v!==null&&ie.sort((le,ee)=>{var fe,be,he,pe,ke,Ce;let oe,de;switch(v.key){case"projectCount":oe=l[le.name]||0,de=l[ee.name]||0;break;case"mainCommittee":oe=((fe=s[le.id])==null?void 0:fe.main)||0,de=((be=s[ee.id])==null?void 0:be.main)||0;break;case"secondCommittee":oe=((he=s[le.id])==null?void 0:he.second)||0,de=((pe=s[ee.id])==null?void 0:pe.second)||0;break;case"thirdCommittee":oe=((ke=s[le.id])==null?void 0:ke.third)||0,de=((Ce=s[ee.id])==null?void 0:Ce.third)||0;break;default:oe=le[v.key],de=ee[v.key]}return oe<de?v.direction==="ascending"?-1:1:oe>de?v.direction==="ascending"?1:-1:0}),ie},[e,v,N,l,s]),K=Z.useMemo(()=>{const ie=(_-1)*tn;return G.slice(ie,ie+tn)},[G,_]),U=()=>{p(null),b(!0)},J=ie=>{p(ie),b(!0)},$=ie=>{if(h.some(le=>le.project.advisorName===ie.name)){E({type:"error",message:I("cannotDeleteAdvisorWithProjects")});return}y(ie)},L=()=>{x&&(t(x.id),E({type:"success",message:I("advisorDeletedSuccess")}),y(null))},W=ie=>{"id"in ie?(r(ie),E({type:"success",message:I("advisorUpdatedSuccess")})):(o(ie),E({type:"success",message:I("advisorAddedSuccess")})),b(!1)},re=ie=>{M(le=>{const ee=new Set(le);return ee.has(ie)?ee.delete(ie):ee.add(ie),ee})},ne=ie=>{M(ie.target.checked?new Set(G.map(le=>le.id)):new Set)},se=ie=>{if(Object.keys(ie).length===0){E({type:"info",message:I("noChangesForBulkEdit")});return}c(Array.from(B),ie),E({type:"success",message:I("advisorsUpdatedSuccess").replace("${count}",String(B.size))}),q(!1),M(new Set)},H=()=>{const ie=Array.from(B).filter(le=>{const ee=e.find(oe=>oe.id===le);return ee&&h.some(oe=>oe.project.advisorName===ee.name)});if(ie.length>0){E({type:"error",message:I("cannotDeleteAdvisorsWithProjects").replace("${count}",String(ie.length))}),O(!1);return}n(Array.from(B)),E({type:"success",message:I("advisorsDeletedSuccess").replace("${count}",String(B.size))}),O(!1),M(new Set)},ce=()=>{var ie;return(ie=k.current)==null?void 0:ie.click()},ae=Z.useCallback(()=>{const ie=G.map(oe=>{const de=l[oe.name]||0,fe=s[oe.id]||{main:0,second:0,third:0};return{[I("id")]:oe.id,[I("fullName")]:oe.name,[I("projectsSupervising")]:`${de} / ${oe.quota}`,[I("mainCommittee")]:`${fe.main} / ${oe.mainCommitteeQuota}`,[I("secondCommittee")]:`${fe.second} / ${oe.secondCommitteeQuota}`,[I("thirdCommittee")]:`${fe.third} / ${oe.thirdCommitteeQuota}`,[I("specializedMajors")]:X(oe.specializedMajorIds),[I("deptAdmin")]:oe.isDepartmentAdmin?I("yes"):I("no")}});if(ie.length===0){E({type:"info",message:I("noDataToExport")});return}const le=XLSX.utils.json_to_sheet(ie),ee=XLSX.utils.book_new();XLSX.utils.book_append_sheet(ee,le,"Advisors"),le["!cols"]=[{wch:10},{wch:25},{wch:20},{wch:20},{wch:20},{wch:20},{wch:30},{wch:15}],XLSX.writeFile(ee,"advisors_report.xlsx"),E({type:"success",message:I("advisorExportSuccess")})},[G,l,s,X,E,I]),Y=ie=>{var oe;const le=(oe=ie.target.files)==null?void 0:oe[0];if(!le)return;const ee=new FileReader;ee.onload=de=>{var fe;try{const be=(fe=de.target)==null?void 0:fe.result,he=XLSX.read(be,{type:"binary"}),pe=he.SheetNames[0],ke=he.Sheets[pe],Ce=XLSX.utils.sheet_to_json(ke),Ee=new Set(e.map(ye=>ye.name.toLowerCase())),Oe=new Map(f.map(ye=>[ye.abbreviation.toLowerCase(),ye.id])),Te=Ce.map(ye=>{var je;const Ae=String(ye.Name??"").trim();if(!Ae)return{...ye,_status:"error",_error:"Missing Name"};const Fe=Ee.has(Ae.toLowerCase())?"update":"new";let Re="";const ge=String(ye["Specialized Majors"]??"").split(",").map(Se=>Se.trim().toLowerCase()),xe=[];return ge.forEach(Se=>{Oe.has(Se)?xe.push(Oe.get(Se)):Se&&(Re+=`Invalid Major Abbreviation: ${Se}. `)}),{id:(je=e.find(Se=>Se.name.toLowerCase()===Ae.toLowerCase()))==null?void 0:je.id,name:Ae,quota:Number(ye.Quota)||5,mainCommitteeQuota:Number(ye["Main Committee Quota"])||5,secondCommitteeQuota:Number(ye["2nd Committee Quota"])||5,thirdCommitteeQuota:Number(ye["3rd Committee Quota"])||5,specializedMajorIds:xe,_status:Re?"error":Fe,_error:Re||void 0}});w(Te),A(!0)}catch(be){E({type:"error",message:I("fileParseError")}),console.error("File parse error:",be)}finally{ie.target&&(ie.target.value="")}},ee.readAsBinaryString(le)},Q=ie=>{u(ie),E({type:"success",message:I("advisorsImportedSuccess").replace("${count}",String(ie.length))}),A(!1)},te=ie=>{r({...ie,isAiAssistantEnabled:!(ie.isAiAssistantEnabled??!0)})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(_r,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:I("manageAdvisors")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:I("advisorsDescription")})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[i.jsx("input",{type:"file",ref:k,onChange:Y,className:"hidden",accept:".xlsx, .xls"}),i.jsxs("button",{onClick:ce,className:"flex items-center justify-center bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(Xr,{className:"w-5 h-5 mr-2"})," ",I("import")]}),i.jsxs("button",{onClick:ae,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"})," ",I("exportExcel")]}),i.jsxs("button",{onClick:U,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md",children:[i.jsx(or,{className:"w-5 h-5 mr-2"})," ",I("addAdvisor")]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm dark:bg-slate-700 dark:text-white",placeholder:I("searchByAdvisor"),value:N,onChange:ie=>R(ie.target.value)})]})}),B.size>0&&i.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-3 rounded-lg flex justify-between items-center mb-4",children:[i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:I("bulkActionsSelected").replace("{count}",String(B.size))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>q(!0),className:"text-sm font-medium text-blue-600 dark:text-blue-300 hover:underline",children:I("edit")}),i.jsx("button",{onClick:()=>O(!0),className:"text-sm font-medium text-red-600 dark:text-red-400 hover:underline",children:I("delete")})]})]}),i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:K.map(ie=>{const le=l[ie.name]||0;return i.jsx($0,{advisor:ie,user:a,projectCount:le,getMajorNames:X,onEdit:()=>J(ie),onDelete:()=>$(ie),onSelect:re,isSelected:B.has(ie.id),onToggleAiAssistant:()=>te(ie)},ie.id)})}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"p-4",children:i.jsx("input",{type:"checkbox",onChange:ne,checked:B.size>0&&B.size===G.length,className:"w-4 h-4 text-blue-600"})}),i.jsx(We,{sortKey:"id",title:"ID",sortConfig:v,requestSort:D}),i.jsx(We,{sortKey:"name",title:I("fullName"),sortConfig:v,requestSort:D}),i.jsx(We,{sortKey:"projectCount",title:I("projectsSupervising"),sortConfig:v,requestSort:D}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("specializedMajors")}),a.role==="Admin"&&i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("aiAssistant")}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:I("actions")})]})}),i.jsx("tbody",{children:K.map(ie=>{const le=l[ie.name]||0,ee=B.has(ie.id),oe=le>ie.quota;return i.jsxs("tr",{className:`border-b dark:border-slate-700 ${ee?"bg-blue-50 dark:bg-blue-900/20":"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:[i.jsx("td",{className:"w-4 p-4",children:i.jsx("input",{type:"checkbox",checked:ee,onChange:()=>re(ie.id),className:"w-4 h-4 text-blue-600"})}),i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:ie.id}),i.jsx("td",{className:"px-6 py-4",children:ie.name}),i.jsxs("td",{className:`px-6 py-4 ${oe?"text-red-500 dark:text-red-400 font-bold":""}`,children:[le," / ",ie.quota]}),i.jsx("td",{className:"px-6 py-4",children:X(ie.specializedMajorIds)}),a.role==="Admin"&&i.jsx("td",{className:"px-6 py-4",children:i.jsx(z0,{enabled:ie.isAiAssistantEnabled??!0,onChange:()=>te(ie)})}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>J(ie),className:"p-2 text-slate-500 hover:text-blue-600",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>$(ie),className:"p-2 text-slate-500 hover:text-red-600",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},ie.id)})})]}),G.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:N?`No advisors found for "${N}".`:I("noAdvisorsData")})]}),i.jsx(Es,{currentPage:_,totalPages:Math.ceil(G.length/tn),totalItems:G.length,itemsPerPage:tn,onPageChange:j})]}),d&&i.jsx(kl,{user:a,onClose:()=>b(!1),onSave:W,advisorToEdit:g,allAdvisors:e,majors:f}),x&&i.jsx(dr,{isOpen:!!x,onClose:()=>y(null),onConfirm:L,title:I("deleteAdvisorTitle"),message:I("deleteAdvisorMessage").replace("${name}",x.name)}),F&&i.jsx(B0,{isOpen:F,onClose:()=>q(!1),onSave:se,selectedCount:B.size}),V&&i.jsx(dr,{isOpen:V,onClose:()=>O(!1),onConfirm:H,title:I("bulkDeleteAdvisorTitle").replace("${count}",String(B.size)),message:I("bulkDeleteAdvisorMessage").replace("${count}",String(B.size))}),T&&i.jsx(vi,{isOpen:T,onClose:()=>A(!1),onConfirm:Q,data:C,columns:[{key:"_status",header:"Status"},{key:"name",header:"Name"},{key:"quota",header:"Quota"},{key:"specializedMajorIds",header:"Majors"},{key:"_error",header:"Error"}],dataTypeName:"Advisors"})]})},V0=({user:m,advisors:a,projectGroups:e,majors:h,addAdvisor:f,updateAdvisor:l})=>{const[s,o]=Z.useState(!1),[r,t]=Z.useState(null),[n,u]=Z.useState(null),[c,d]=Z.useState({key:"id",direction:"ascending"}),[b,g]=Z.useState(""),p=At(),x=Ue(),y=Z.useMemo(()=>a.filter(V=>V.isDepartmentAdmin),[a]),v=V=>{let O="ascending";c&&c.key===V&&c.direction==="ascending"&&(O="descending"),d({key:V,direction:O})},S=Z.useCallback(V=>!V||V.length===0?"All Majors":V.map(O=>{var T;return((T=h.find(A=>A.id===O))==null?void 0:T.abbreviation)||"?"}).join(", "),[h]),N=Z.useMemo(()=>{let V=[...y];if(b){const O=b.toLowerCase();V=V.filter(T=>T.id.toLowerCase().includes(O)||T.name.toLowerCase().includes(O))}return c!==null&&V.sort((O,T)=>{let A,C;switch(c.key){case"specializedMajors":A=S(O.specializedMajorIds),C=S(T.specializedMajorIds);break;default:A=O[c.key],C=T[c.key]}return A<C?c.direction==="ascending"?-1:1:A>C?c.direction==="ascending"?1:-1:0}),V},[y,c,b,S]),R=()=>{t(null),o(!0)},B=V=>{t(V),o(!0)},M=V=>{u(V)},F=()=>{n&&(l({...n,isDepartmentAdmin:!1}),p({type:"success",message:x("demotedSuccess").replace("${name}",n.name)}),u(null))},q=V=>{const O={...V,isDepartmentAdmin:!0};"id"in O?(l(O),p({type:"success",message:x("deptAdminUpdatedSuccess")})):(f(O),p({type:"success",message:x("deptAdminAddedSuccess")})),o(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Us,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:x("manageDeptAdmins")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:x("manageDeptAdminsDescription")})]})]}),i.jsxs("button",{onClick:R,className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),x("addDeptAdmin")]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:x("searchByDeptAdmin"),value:b,onChange:V=>g(V.target.value)})]})}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"id",title:x("studentId"),sortConfig:c,requestSort:v}),i.jsx(We,{sortKey:"name",title:x("fullName"),sortConfig:c,requestSort:v}),i.jsx(We,{sortKey:"specializedMajors",title:x("managedMajors"),sortConfig:c,requestSort:v}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:x("actions")})]})}),i.jsx("tbody",{children:N.map(V=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:V.id}),i.jsx("td",{className:"px-6 py-4",children:V.name}),i.jsx("td",{className:"px-6 py-4",children:S(V.specializedMajorIds)}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>B(V),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>M(V),disabled:V.id===m.id,title:V.id===m.id?x("cannotDemoteSelf"):x("demoteToAdvisor"),className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},V.id))})]}),N.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:b?`No department admins found for "${b}".`:"No department admins found. Promote an advisor to create one."})]}),s&&i.jsx(kl,{user:m,onClose:()=>o(!1),onSave:q,advisorToEdit:r,allAdvisors:a,majors:h}),n&&i.jsx(dr,{isOpen:!!n,onClose:()=>u(null),onConfirm:F,title:x("demoteDeptAdminTitle"),message:x("demoteDeptAdminMessage").replace("${name}",n.name),confirmText:x("confirmDemotion"),confirmButtonClass:"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500"})]})},H0=({onClose:m,onSave:a,majorToEdit:e,allMajors:h})=>{const f=!!e,l=Ue(),[s,o]=Z.useState(""),[r,t]=Z.useState(""),[n,u]=Z.useState({});Z.useEffect(()=>{f&&e&&(o(e.name),t(e.abbreviation))},[f,e]);const c=()=>{const b={};return s.trim()||(b.name=l("majorNameRequired")),h.some(x=>x.name.toLowerCase()===s.trim().toLowerCase()&&x.id!==(e==null?void 0:e.id))&&(b.name=l("majorNameExists")),r.trim()||(b.abbreviation=l("abbreviationRequired")),h.some(x=>x.abbreviation.toLowerCase()===r.trim().toLowerCase()&&x.id!==(e==null?void 0:e.id))&&(b.abbreviation=l("abbreviationExists")),u(b),Object.keys(b).length===0},d=b=>{if(b.preventDefault(),!c())return;const g={name:s.trim(),abbreviation:r.trim().toUpperCase()},p=f?{...e,...g}:g;a(p)};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:l(f?"editMajor":"addMajor")}),i.jsx("button",{onClick:m,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:d,noValidate:!0,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:l("majorName")}),i.jsx("input",{type:"text",id:"name",value:s,onChange:b=>o(b.target.value),className:`input-style mt-1 ${n.name?"border-red-500":""}`}),n.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.name})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"abbreviation",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:l("abbreviation")}),i.jsx("input",{type:"text",id:"abbreviation",value:r,onChange:b=>t(b.target.value.toUpperCase()),className:`input-style mt-1 ${n.abbreviation?"border-red-500":""}`}),n.abbreviation&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.abbreviation})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:l("cancel")}),i.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:l("saveMajor")})]})]})]})]})},W0=({major:m,studentCount:a,classroomCount:e,maleCount:h,femaleCount:f,monkCount:l,projectCount:s,soloProjectCount:o,duoProjectCount:r,approvedCount:t,pendingCount:n,rejectedCount:u,onEdit:c,onDelete:d})=>{const b=Ue();return i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 flex flex-col justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100 pr-4",children:m.name}),i.jsx("span",{className:"text-sm flex-shrink-0 font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2.5 py-1 rounded-full",children:m.abbreviation})]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-semibold mt-1",children:m.id}),i.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-slate-500 dark:text-slate-400",children:[i.jsx(Fr,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:b("students")})]}),i.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[a," ",i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-normal",children:["(",b("male").charAt(0),":",h," ",b("female").charAt(0),":",f," ",b("monk"),":",l,")"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-slate-500 dark:text-slate-400",children:[i.jsx(lr,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:b("projects")})]}),i.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[s," ",i.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(1P:",o,", 2P:",r,")"]})]})]}),i.jsxs("div",{className:"pl-6 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[b("approved"),": ",t]}),","," ",i.jsxs("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:[b("pending"),": ",n]}),","," ",i.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:[b("rejected"),": ",u]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-slate-500 dark:text-slate-400",children:[i.jsx(ai,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:b("classrooms")})]}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:e})]})]})]}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700 flex justify-end space-x-2",children:[i.jsx("button",{onClick:c,className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:d,className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]})},rn=15,G0=({majors:m,students:a,classrooms:e,projectGroups:h,addMajor:f,updateMajor:l,deleteMajor:s})=>{const[o,r]=Z.useState(!1),[t,n]=Z.useState(null),[u,c]=Z.useState(null),[d,b]=Z.useState({key:"id",direction:"ascending"}),[g,p]=Z.useState(""),[x,y]=Z.useState(1),v=At(),S=Ue();Z.useEffect(()=>{y(1)},[g]);const N=w=>{let _="ascending";d&&d.key===w&&d.direction==="ascending"&&(_="descending"),b({key:w,direction:_})},R=Z.useMemo(()=>{const w=new Map;return m.forEach(_=>{w.set(_.id,{studentCount:0,classroomCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0})}),a.forEach(_=>{const j=m.find(k=>k.name===_.major);if(j){const k=w.get(j.id);k&&(k.studentCount++,_.gender===qt.Male?k.maleCount++:_.gender===qt.Female?k.femaleCount++:_.gender===qt.Monk&&k.monkCount++)}}),e.forEach(_=>{const j=w.get(_.majorId);j&&j.classroomCount++}),h.forEach(_=>{if(_.students.length>0){const j=_.students[0].major,k=m.find(E=>E.name===j);if(k){const E=w.get(k.id);E&&(E.projectCount++,_.students.length===1?E.soloProjectCount++:_.students.length>=2&&E.duoProjectCount++,_.project.status===it.Approved?E.approvedCount++:_.project.status===it.Pending?E.pendingCount++:_.project.status===it.Rejected&&E.rejectedCount++)}}}),w},[m,a,e,h]),B=Z.useMemo(()=>{let w=[...m];if(g){const _=g.toLowerCase();w=w.filter(j=>j.id.toLowerCase().includes(_)||j.name.toLowerCase().includes(_)||j.abbreviation.toLowerCase().includes(_))}return d!==null&&w.sort((_,j)=>{var I,D,X,G,K,U,J,$,L,W,re,ne,se,H,ce,ae,Y,Q,te,ie,le,ee;let k,E;return d.key==="students"?(k=((I=R.get(_.id))==null?void 0:I.studentCount)||0,E=((D=R.get(j.id))==null?void 0:D.studentCount)||0):d.key==="projects"?(k=((X=R.get(_.id))==null?void 0:X.projectCount)||0,E=((G=R.get(j.id))==null?void 0:G.projectCount)||0):d.key==="soloProjects"?(k=((K=R.get(_.id))==null?void 0:K.soloProjectCount)||0,E=((U=R.get(j.id))==null?void 0:U.soloProjectCount)||0):d.key==="duoProjects"?(k=((J=R.get(_.id))==null?void 0:J.duoProjectCount)||0,E=(($=R.get(j.id))==null?void 0:$.duoProjectCount)||0):d.key==="classrooms"?(k=((L=R.get(_.id))==null?void 0:L.classroomCount)||0,E=((W=R.get(j.id))==null?void 0:W.classroomCount)||0):d.key==="male"?(k=((re=R.get(_.id))==null?void 0:re.maleCount)||0,E=((ne=R.get(j.id))==null?void 0:ne.maleCount)||0):d.key==="female"?(k=((se=R.get(_.id))==null?void 0:se.femaleCount)||0,E=((H=R.get(j.id))==null?void 0:H.femaleCount)||0):d.key==="monk"?(k=((ce=R.get(_.id))==null?void 0:ce.monkCount)||0,E=((ae=R.get(j.id))==null?void 0:ae.monkCount)||0):d.key==="approved"?(k=((Y=R.get(_.id))==null?void 0:Y.approvedCount)||0,E=((Q=R.get(j.id))==null?void 0:Q.approvedCount)||0):d.key==="pending"?(k=((te=R.get(_.id))==null?void 0:te.pendingCount)||0,E=((ie=R.get(j.id))==null?void 0:ie.pendingCount)||0):d.key==="rejected"?(k=((le=R.get(_.id))==null?void 0:le.rejectedCount)||0,E=((ee=R.get(j.id))==null?void 0:ee.rejectedCount)||0):(k=_[d.key],E=j[d.key]),k<E?d.direction==="ascending"?-1:1:k>E?d.direction==="ascending"?1:-1:0}),w},[m,d,g,R]),M=Z.useMemo(()=>{const w=(x-1)*rn;return B.slice(w,w+rn)},[B,x]),F=Z.useMemo(()=>{let w=0,_=0,j=0,k=0,E=0,I=0,D=0,X=0,G=0,K=0,U=0;for(const J of R.values())w+=J.studentCount,_+=J.projectCount,j+=J.soloProjectCount,k+=J.duoProjectCount,E+=J.approvedCount,I+=J.pendingCount,D+=J.rejectedCount,X+=J.maleCount,G+=J.femaleCount,K+=J.monkCount,U+=J.classroomCount;return{totalStudents:w,totalProjects:_,totalSoloProjects:j,totalDuoProjects:k,totalApproved:E,totalPending:I,totalRejected:D,totalMale:X,totalFemale:G,totalMonk:K,totalClassrooms:U}},[R]),q=()=>{n(null),r(!0)},V=w=>{n(w),r(!0)},O=w=>{if(a.some(k=>k.major===w.name)){v({type:"error",message:S("majorInUseStudentsError").replace("${majorName}",w.name)});return}if(e.some(k=>k.majorId===w.id)){v({type:"error",message:S("majorInUseClassroomError").replace("${majorName}",w.name)});return}c(w)},T=()=>{u&&(s(u.id),v({type:"success",message:S("majorDeletedSuccess")}),c(null))},A=w=>{"id"in w?(l(w),v({type:"success",message:S("majorUpdatedSuccess")})):(f(w),v({type:"success",message:S("majorAddedSuccess")})),r(!1)},C=Z.useCallback(()=>{const w=B.map(k=>{const E=R.get(k.id)||{studentCount:0,classroomCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return{[S("majorId")]:k.id,[S("majorName")]:k.name,[S("abbreviation")]:k.abbreviation,[S("students")]:E.studentCount,[S("projects")]:E.projectCount,[S("projects1p")]:E.soloProjectCount,[S("projects2p")]:E.duoProjectCount,[S("approved")]:E.approvedCount,[S("pending")]:E.pendingCount,[S("rejected")]:E.rejectedCount,[S("male")]:E.maleCount,[S("female")]:E.femaleCount,[S("monk")]:E.monkCount,[S("classrooms")]:E.classroomCount}});if(w.length===0){v({type:"info",message:S("noDataToExport")});return}const _=XLSX.utils.json_to_sheet(w),j=XLSX.utils.book_new();XLSX.utils.book_append_sheet(j,_,"Majors"),_["!cols"]=[{wch:15},{wch:30},{wch:15},{wch:10},{wch:10},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:8},{wch:8},{wch:8},{wch:12}],XLSX.writeFile(j,"majors_report.xlsx"),v({type:"success",message:S("majorExportSuccess")})},[B,R,v,S]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(oi,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:S("manageMajors")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:S("manageMajorsDescription")})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[i.jsxs("button",{onClick:C,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),S("exportExcel")]}),i.jsxs("button",{onClick:q,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),S("addMajor")]})]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:S("searchByMajor"),value:g,onChange:w=>p(w.target.value)})]})}),i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:M.map(w=>{const _=R.get(w.id)||{studentCount:0,classroomCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return i.jsx(W0,{major:w,studentCount:_.studentCount,classroomCount:_.classroomCount,maleCount:_.maleCount,femaleCount:_.femaleCount,monkCount:_.monkCount,projectCount:_.projectCount,soloProjectCount:_.soloProjectCount,duoProjectCount:_.duoProjectCount,approvedCount:_.approvedCount,pendingCount:_.pendingCount,rejectedCount:_.rejectedCount,onEdit:()=>V(w),onDelete:()=>O(w)},w.id)})}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"id",title:S("majorId"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"name",title:S("majorName"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"abbreviation",title:S("abbreviation"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"students",title:S("students"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"projects",title:S("projects"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"soloProjects",title:S("projects1p"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"duoProjects",title:S("projects2p"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"approved",title:S("approved"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"pending",title:S("pending"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"rejected",title:S("rejected"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"male",title:S("male"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"female",title:S("female"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"monk",title:S("monk"),sortConfig:d,requestSort:N}),i.jsx(We,{sortKey:"classrooms",title:S("classrooms"),sortConfig:d,requestSort:N}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:S("actions")})]})}),i.jsx("tbody",{children:M.map(w=>{const _=R.get(w.id)||{studentCount:0,classroomCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:w.id}),i.jsx("td",{className:"px-6 py-4",children:w.name}),i.jsx("td",{className:"px-6 py-4",children:w.abbreviation}),i.jsx("td",{className:"px-6 py-4",children:_.studentCount}),i.jsx("td",{className:"px-6 py-4",children:_.projectCount}),i.jsx("td",{className:"px-6 py-4",children:_.soloProjectCount}),i.jsx("td",{className:"px-6 py-4",children:_.duoProjectCount}),i.jsx("td",{className:"px-6 py-4 text-green-600 dark:text-green-400",children:_.approvedCount}),i.jsx("td",{className:"px-6 py-4 text-yellow-600 dark:text-yellow-400",children:_.pendingCount}),i.jsx("td",{className:"px-6 py-4 text-red-600 dark:text-red-400",children:_.rejectedCount}),i.jsx("td",{className:"px-6 py-4",children:_.maleCount}),i.jsx("td",{className:"px-6 py-4",children:_.femaleCount}),i.jsx("td",{className:"px-6 py-4",children:_.monkCount}),i.jsx("td",{className:"px-6 py-4",children:_.classroomCount}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>V(w),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>O(w),className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},w.id)})}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[i.jsx("td",{className:"px-6 py-4",colSpan:3,children:S("total")}),i.jsx("td",{className:"px-6 py-4",children:F.totalStudents}),i.jsx("td",{className:"px-6 py-4",children:F.totalProjects}),i.jsx("td",{className:"px-6 py-4",children:F.totalSoloProjects}),i.jsx("td",{className:"px-6 py-4",children:F.totalDuoProjects}),i.jsx("td",{className:"px-6 py-4 text-green-600 dark:text-green-400",children:F.totalApproved}),i.jsx("td",{className:"px-6 py-4 text-yellow-600 dark:text-yellow-400",children:F.totalPending}),i.jsx("td",{className:"px-6 py-4 text-red-600 dark:text-red-400",children:F.totalRejected}),i.jsx("td",{className:"px-6 py-4",children:F.totalMale}),i.jsx("td",{className:"px-6 py-4",children:F.totalFemale}),i.jsx("td",{className:"px-6 py-4",children:F.totalMonk}),i.jsx("td",{className:"px-6 py-4",children:F.totalClassrooms}),i.jsx("td",{className:"px-6 py-4"})]})})]}),B.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:g?`No majors found for "${g}".`:`No majors found. Click "${S("addMajor")}" to begin.`})]}),i.jsx(Es,{currentPage:x,totalPages:Math.ceil(B.length/rn),totalItems:B.length,itemsPerPage:rn,onPageChange:y}),o&&i.jsx(H0,{onClose:()=>r(!1),onSave:A,majorToEdit:t,allMajors:m}),u&&i.jsx(dr,{isOpen:!!u,onClose:()=>c(null),onConfirm:T,title:S("deleteMajorTitle"),message:S("deleteMajorMessage").replace("${majorName}",u.name)})]})},X0=({onClose:m,onSave:a,classroomToEdit:e,allClassrooms:h,majors:f,user:l})=>{const s=!!e,o=Ue(),r=Z.useMemo(()=>{if(l.role==="DepartmentAdmin"){const y=l,v=new Set(y.specializedMajorIds||[]);return f.filter(S=>v.has(S.id))}return f},[l,f]),t=Z.useCallback(()=>{var y;return e?e.majorId:((y=r[0])==null?void 0:y.id)||""},[e,r]),[n,u]=Z.useState((e==null?void 0:e.name)||""),[c,d]=Z.useState(t()),[b,g]=Z.useState({});Z.useEffect(()=>{var y;e?(u(e.name),d(e.majorId)):d(((y=r[0])==null?void 0:y.id)||"")},[e,r]);const p=()=>{const y={};return n.trim()||(y.name=o("classroomNameRequired")),h.some(S=>S.name.toLowerCase()===n.trim().toLowerCase()&&S.id!==(e==null?void 0:e.id))&&(y.name=o("classroomNameExists")),c||(y.majorId=o("majorRequired")),g(y),Object.keys(y).length===0},x=y=>{if(y.preventDefault(),!p())return;const v=f.find(R=>R.id===c);if(!v){g(R=>({...R,majorId:o("invalidMajorSelected")}));return}const S={name:n.trim(),majorId:c,majorName:v.name},N=s?{...e,...S}:S;a(N)};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:o(s?"editClassroom":"addClassroom")}),i.jsx("button",{onClick:m,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:x,noValidate:!0,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("classroomName")}),i.jsx("input",{type:"text",id:"name",value:n,onChange:y=>u(y.target.value),className:`input-style mt-1 ${b.name?"border-red-500":""}`}),b.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.name})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"major",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:o("major")}),i.jsx("select",{id:"major",value:c,onChange:y=>d(y.target.value),className:`input-style mt-1 ${b.majorId?"border-red-500":""}`,children:r.length===0?i.jsx("option",{disabled:!0,children:o("pleaseAddMajorFirst")}):r.map(y=>i.jsx("option",{value:y.id,children:y.name},y.id))}),b.majorId&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.majorId})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:o("cancel")}),i.jsx("button",{type:"submit",disabled:r.length===0,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed",children:o("saveClassroom")})]})]})]})]})},Y0=({classroom:m,studentCount:a,maleCount:e,femaleCount:h,monkCount:f,projectCount:l,soloProjectCount:s,duoProjectCount:o,approvedCount:r,pendingCount:t,rejectedCount:n,onEdit:u,onDelete:c,index:d})=>{const b=Ue();return i.jsxs("div",{className:"relative bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 flex flex-col justify-between",children:[i.jsx("div",{className:"absolute top-2 left-2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center",children:d}),i.jsxs("div",{children:[i.jsxs("div",{className:"pl-8",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:m.name}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-semibold",children:m.majorName})]}),i.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-slate-500 dark:text-slate-400",children:[i.jsx(Fr,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:b("students")})]}),i.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[a," ",i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-normal",children:["(",b("male").charAt(0),":",e," ",b("female").charAt(0),":",h," ",b("monk"),":",f,")"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-slate-500 dark:text-slate-400",children:[i.jsx(lr,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:b("projects")})]}),i.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[l," ",i.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(1P:",s,", 2P:",o,")"]})]})]}),i.jsxs("div",{className:"pl-6 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[b("approved"),": ",r]}),","," ",i.jsxs("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:[b("pending"),": ",t]}),","," ",i.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:[b("rejected"),": ",n]})]})]})]}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700 flex justify-end space-x-2",children:[i.jsx("button",{onClick:u,className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:c,className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]})},xs=15,K0=({user:m,classrooms:a,students:e,majors:h,projectGroups:f,addClassroom:l,updateClassroom:s,deleteClassroom:o})=>{const[r,t]=Z.useState(!1),[n,u]=Z.useState(null),[c,d]=Z.useState(null),[b,g]=Z.useState({key:"id",direction:"ascending"}),[p,x]=Z.useState(""),[y,v]=Z.useState(1),S=At(),N=Ue();Z.useEffect(()=>{v(1)},[p]);const R=w=>{let _="ascending";b&&b.key===w&&b.direction==="ascending"&&(_="descending"),g({key:w,direction:_})},B=Z.useMemo(()=>{const w=new Map;return a.forEach(_=>{w.set(_.id,{studentCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0})}),e.forEach(_=>{const j=a.find(k=>k.name===_.classroom);if(j){const k=w.get(j.id);k&&(k.studentCount++,_.gender===qt.Male?k.maleCount++:_.gender===qt.Female?k.femaleCount++:_.gender===qt.Monk&&k.monkCount++)}}),f.forEach(_=>{_.students.length>0&&new Set(_.students.map(k=>{var E;return(E=a.find(I=>I.name===k.classroom))==null?void 0:E.id}).filter(Boolean)).forEach(k=>{const E=w.get(k);E&&(E.projectCount++,_.students.length===1?E.soloProjectCount++:_.students.length>=2&&E.duoProjectCount++,_.project.status===it.Approved?E.approvedCount++:_.project.status===it.Pending?E.pendingCount++:_.project.status===it.Rejected&&E.rejectedCount++)})}),w},[a,e,f]),M=Z.useMemo(()=>{let w=[...a];if(p){const _=p.toLowerCase();w=w.filter(j=>j.id.toLowerCase().includes(_)||j.name.toLowerCase().includes(_)||j.majorName.toLowerCase().includes(_))}return b!==null&&w.sort((_,j)=>{let k,E;const I=B.get(_.id),D=B.get(j.id);switch(b.key){case"students":k=(I==null?void 0:I.studentCount)||0,E=(D==null?void 0:D.studentCount)||0;break;case"projects":k=(I==null?void 0:I.projectCount)||0,E=(D==null?void 0:D.projectCount)||0;break;case"soloProjects":k=(I==null?void 0:I.soloProjectCount)||0,E=(D==null?void 0:D.soloProjectCount)||0;break;case"duoProjects":k=(I==null?void 0:I.duoProjectCount)||0,E=(D==null?void 0:D.duoProjectCount)||0;break;case"approved":k=(I==null?void 0:I.approvedCount)||0,E=(D==null?void 0:D.approvedCount)||0;break;case"pending":k=(I==null?void 0:I.pendingCount)||0,E=(D==null?void 0:D.pendingCount)||0;break;case"rejected":k=(I==null?void 0:I.rejectedCount)||0,E=(D==null?void 0:D.rejectedCount)||0;break;case"male":k=(I==null?void 0:I.maleCount)||0,E=(D==null?void 0:D.maleCount)||0;break;case"female":k=(I==null?void 0:I.femaleCount)||0,E=(D==null?void 0:D.femaleCount)||0;break;case"monk":k=(I==null?void 0:I.monkCount)||0,E=(D==null?void 0:D.monkCount)||0;break;default:k=_[b.key],E=j[b.key]}return k<E?b.direction==="ascending"?-1:1:k>E?b.direction==="ascending"?1:-1:0}),w},[a,b,p,B]),F=Z.useMemo(()=>{const w=(y-1)*xs;return M.slice(w,w+xs)},[M,y]);Z.useMemo(()=>{let w=0,_=0,j=0,k=0,E=0,I=0,D=0,X=0,G=0,K=0;for(const U of B.values())w+=U.studentCount,_+=U.projectCount,j+=U.soloProjectCount,k+=U.duoProjectCount,E+=U.approvedCount,I+=U.pendingCount,D+=U.rejectedCount,X+=U.maleCount,G+=U.femaleCount,K+=U.monkCount;return{totalStudents:w,totalProjects:_,totalSoloProjects:j,totalDuoProjects:k,totalApproved:E,totalPending:I,totalRejected:D,totalMale:X,totalFemale:G,totalMonk:K}},[B]);const q=()=>{u(null),t(!0)},V=w=>{u(w),t(!0)},O=w=>{e.some(j=>j.classroom===w.name)?S({type:"error",message:N("classroomInUseError").replace("${classroomName}",w.name)}):d(w)},T=()=>{c&&(o(c.id),S({type:"success",message:N("classroomDeletedSuccess")}),d(null))},A=w=>{"id"in w?(s(w),S({type:"success",message:N("classroomUpdatedSuccess")})):(l(w),S({type:"success",message:N("classroomAddedSuccess")})),t(!1)},C=Z.useCallback(()=>{const w=M.map(k=>{const E=B.get(k.id)||{studentCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return{[N("classroomId")]:k.id,[N("classroomName")]:k.name,[N("major")]:k.majorName,[N("students")]:E.studentCount,[N("male")]:E.maleCount,[N("female")]:E.femaleCount,[N("monk")]:E.monkCount,[N("projects")]:E.projectCount,[N("projects1p")]:E.soloProjectCount,[N("projects2p")]:E.duoProjectCount,[N("approved")]:E.approvedCount,[N("pending")]:E.pendingCount,[N("rejected")]:E.rejectedCount}});if(w.length===0){S({type:"info",message:N("noDataToExport")});return}const _=XLSX.utils.json_to_sheet(w),j=XLSX.utils.book_new();XLSX.utils.book_append_sheet(j,_,"Classrooms"),_["!cols"]=[{wch:15},{wch:20},{wch:30},{wch:10},{wch:8},{wch:8},{wch:8},{wch:10},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10}],XLSX.writeFile(j,"classrooms_report.xlsx"),S({type:"success",message:N("classroomExportSuccess")})},[M,B,S,N]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ai,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:N("manageClassrooms")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:N("manageClassroomsDescription")})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[i.jsxs("button",{onClick:C,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),N("exportExcel")]}),i.jsxs("button",{onClick:q,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),N("addClassroom")]})]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:N("searchByClassroom"),value:p,onChange:w=>x(w.target.value)})]})}),i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:F.map((w,_)=>{const j=B.get(w.id)||{studentCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return i.jsx(Y0,{index:(y-1)*xs+_+1,classroom:w,...j,onEdit:()=>V(w),onDelete:()=>O(w)},w.id)})}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:N("no")}),i.jsx(We,{sortKey:"id",title:N("classroomId"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"name",title:N("classroomName"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"majorName",title:N("major"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"students",title:N("students"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"male",title:N("male"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"female",title:N("female"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"monk",title:N("monk"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"projects",title:N("projects"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"soloProjects",title:N("projects1p"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"duoProjects",title:N("projects2p"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"approved",title:N("approved"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"pending",title:N("pending"),sortConfig:b,requestSort:R}),i.jsx(We,{sortKey:"rejected",title:N("rejected"),sortConfig:b,requestSort:R}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:N("actions")})]})}),i.jsx("tbody",{children:F.map((w,_)=>{const j=B.get(w.id)||{studentCount:0,maleCount:0,femaleCount:0,monkCount:0,projectCount:0,soloProjectCount:0,duoProjectCount:0,approvedCount:0,pendingCount:0,rejectedCount:0};return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4",children:(y-1)*xs+_+1}),i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:w.id}),i.jsx("td",{className:"px-6 py-4",children:w.name}),i.jsx("td",{className:"px-6 py-4",children:w.majorName}),i.jsx("td",{className:"px-6 py-4",children:j.studentCount}),i.jsx("td",{className:"px-6 py-4",children:j.maleCount}),i.jsx("td",{className:"px-6 py-4",children:j.femaleCount}),i.jsx("td",{className:"px-6 py-4",children:j.monkCount}),i.jsx("td",{className:"px-6 py-4",children:j.projectCount}),i.jsx("td",{className:"px-6 py-4",children:j.soloProjectCount}),i.jsx("td",{className:"px-6 py-4",children:j.duoProjectCount}),i.jsx("td",{className:"px-6 py-4 text-green-600 dark:text-green-400",children:j.approvedCount}),i.jsx("td",{className:"px-6 py-4 text-yellow-600 dark:text-yellow-400",children:j.pendingCount}),i.jsx("td",{className:"px-6 py-4 text-red-600 dark:text-red-400",children:j.rejectedCount}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>V(w),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>O(w),className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},w.id)})})]}),M.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:p?`No classrooms found for "${p}".`:'No classrooms found. Click "Add Classroom" to begin.'})]}),i.jsx(Es,{currentPage:y,totalPages:Math.ceil(M.length/xs),totalItems:M.length,itemsPerPage:xs,onPageChange:v}),r&&i.jsx(X0,{user:m,onClose:()=>t(!1),onSave:A,classroomToEdit:n,allClassrooms:a,majors:h}),c&&i.jsx(dr,{isOpen:!!c,onClose:()=>d(null),onConfirm:T,title:"Delete Classroom?",message:`Are you sure you want to delete classroom "${c.name}"? This action cannot be undone.`})]})},J0=({advisor:m,count:a})=>{const e=Ue(),h=m.quota>0?a/m.quota*100:0,f=Vs(m.name);return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-baseline",children:[i.jsxs("p",{className:"font-semibold text-slate-800 dark:text-slate-200 flex items-center",children:[i.jsx("span",{className:"h-2 w-2 rounded-full mr-2",style:{backgroundColor:f}}),m.name]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[a," / ",m.quota," ",e("projects")]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mt-1",children:i.jsx("div",{className:"h-2 rounded-full",style:{width:`${h}%`,backgroundColor:f}})})]})},ca=({active:m,onClick:a,children:e})=>i.jsx("button",{type:"button",onClick:a,className:`px-4 py-2 text-sm font-medium text-center rounded-t-lg transition-colors border-b-2
      ${m?"text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-slate-500 border-transparent hover:text-slate-700 dark:text-slate-400 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-600"}`,children:e}),Z0=({onRegisterClick:m,onOpenSuggester:a,advisors:e,advisorProjectCounts:h,allProjects:f,announcements:l,user:s,onStartTour:o,onSelectProject:r,majors:t})=>{const[n,u]=Z.useState("dashboard"),[c,d]=Z.useState(""),[b,g]=Z.useState("all"),[p,x]=Z.useState({key:"projectId",direction:"ascending"}),[y,v]=Z.useState("all"),[S,N]=Z.useState("all"),[R,B]=Z.useState("all"),[M,F]=Z.useState("all"),[q,V]=Z.useState(!1),O=Ue(),T=w=>{let _="ascending";p&&p.key===w&&p.direction==="ascending"&&(_="descending"),x({key:w,direction:_})},A=Z.useMemo(()=>{if(!c&&S==="all"&&R==="all"&&y==="all"&&M==="all"&&!q)return f;const w=c.toLowerCase();return f.filter(_=>{const j=c===""||_.project.projectId.toLowerCase().includes(w)||_.project.topicLao.toLowerCase().includes(w)||_.project.topicEng.toLowerCase().includes(w)||_.students.some(K=>K.studentId.toLowerCase().includes(w)||`${K.name} ${K.surname}`.toLowerCase().includes(w)),k=y==="all"||_.students.some(K=>K.gender===y),E=S==="all"||_.students.some(K=>K.major===S),I=R==="all"||_.project.status===R,D=!!(_.project.defenseDate&&_.project.defenseTime&&_.project.defenseRoom),X=M==="all"||(M==="scheduled"?D:!D),G=!q||q&&!!_.project.similarityInfo;return j&&k&&E&&I&&X&&G})},[f,c,y,S,R,M,q]),C=Z.useMemo(()=>p?[...A].sort((_,j)=>{var I,D;let k,E;switch(p.key){case"studentId":k=((I=_.students[0])==null?void 0:I.studentId)||"",E=((D=j.students[0])==null?void 0:D.studentId)||"";break;case"projectId":k=_.project.projectId,E=j.project.projectId;break;case"advisorName":k=_.project.advisorName,E=j.project.advisorName;break;default:return 0}return k<E?p.direction==="ascending"?-1:1:k>E?p.direction==="ascending"?1:-1:0}):A,[A,p]);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex -mb-px space-x-4",children:[i.jsx(ca,{active:n==="dashboard",onClick:()=>u("dashboard"),children:O("dashboard")}),i.jsx(ca,{active:n==="projects",onClick:()=>u("projects"),children:O("browseAllProjects")})]})}),n==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start animate-fade-in",children:[i.jsxs("div",{id:"welcome-panel",className:"relative lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg text-center py-16 px-6",children:[i.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",title:"Replay introduction tour",children:i.jsx(qc,{className:"w-6 h-6"})}),i.jsx(dn,{className:"mx-auto h-16 w-16 text-blue-500"}),i.jsx("h2",{className:"mt-4 text-2xl font-bold text-slate-800 dark:text-slate-100",children:O("welcomeToPortal")}),i.jsx("p",{className:"mt-2 text-md text-slate-600 dark:text-slate-400",children:O("notAssignedToProject")}),i.jsx("p",{className:"mt-1 text-md text-slate-600 dark:text-slate-400",children:O("canRegisterProject")}),i.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[i.jsxs("button",{id:"ai-topic-suggester-btn-welcome",type:"button",onClick:a,className:"inline-flex items-center rounded-md bg-purple-600 px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-purple-700 transition-transform transform hover:scale-105",children:[i.jsx(Ft,{className:"-ml-1 mr-2 h-5 w-5"}),O("aiTopicSuggestion")]}),i.jsxs("button",{id:"register-project-btn-welcome",type:"button",onClick:m,className:"inline-flex items-center rounded-md bg-blue-600 px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-blue-700 transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),O("registerYourProject")]})]})]}),i.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[i.jsx(Tn,{announcements:l,user:s}),i.jsx("div",{id:"advisor-workload-panel",className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0 bg-indigo-100 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-400 rounded-full p-3",children:i.jsx(_r,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3",children:O("allAdvisors")}),i.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto pr-2",children:e.map(w=>i.jsx(J0,{advisor:w,count:h[w.name]||0},w.id))})]})]})})]})]}),n==="projects"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx(vl,{user:s,searchQuery:c,setSearchQuery:d,advisorFilter:b,setAdvisorFilter:g,advisors:[],majors:t,genderFilter:y,setGenderFilter:v,majorFilter:S,setMajorFilter:N,statusFilter:R,setStatusFilter:B,scheduleFilter:M,setScheduleFilter:F,similarityFilter:q,setSimilarityFilter:V}),i.jsx(Ga,{user:s,projectGroups:C,onSelectProject:r,onRegisterClick:m,sortConfig:p,requestSort:T,onUpdateStatus:(w,_)=>{}})]})]})},Q0=m=>{const{isOpen:a,onClose:e,onConfirm:h,projectGroup:f,action:l,advisors:s,advisorProjectCounts:o,currentAdvisorName:r,milestoneTemplates:t,majors:n}=m,[u,c]=Z.useState(""),[d,b]=Z.useState(!1),[g,p]=Z.useState(""),[x,y]=Z.useState(""),[v,S]=Z.useState(""),N=Ue(),B=Z.useMemo(()=>({approve:{title:N("approveProject"),icon:i.jsx(Kt,{className:"h-6 w-6 text-green-600","aria-hidden":"true"}),iconBg:"bg-green-100",buttonText:N("confirmApproval"),buttonBg:"bg-green-600 hover:bg-green-700 focus:ring-green-500",prompt:q=>N("approveProjectPrompt").replace("${projectName}",q)},reject:{title:N("rejectProject"),icon:i.jsx(cr,{className:"h-6 w-6 text-red-600","aria-hidden":"true"}),iconBg:"bg-red-100",buttonText:N("confirmRejection"),buttonBg:"bg-red-600 hover:bg-red-700 focus:ring-red-500",prompt:q=>N("rejectProjectPrompt").replace("${projectName}",q)}}),[N])[l];Z.useEffect(()=>{var q;a&&(c(""),b(!1),p(""),y(((q=t[0])==null?void 0:q.id)||""),S(""))},[a,t]);const M=Z.useMemo(()=>{var V;const q=(V=n.find(O=>{var T;return O.name===((T=f.students[0])==null?void 0:T.major)}))==null?void 0:V.id;return q?s.filter(O=>{var T;return O.name===r?!1:(T=O.specializedMajorIds)==null?void 0:T.includes(q)}):[]},[s,n,f,r]),F=()=>{if(l==="reject"&&!u.trim()&&!d){S(N("commentRequiredForRejection"));return}if(l==="reject"&&d&&!g){S(N("selectAdvisorToTransfer"));return}if(l==="approve"&&!x){S(N("selectMilestoneTemplate"));return}S(""),h({comment:u,transferTo:d?g:void 0,templateId:l==="approve"?x:void 0})};return a?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-md",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${B.iconBg} sm:mx-0 sm:h-10 sm:w-10`,children:B.icon}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[i.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",id:"modal-title",children:B.title}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:B.prompt(f.project.topicEng)})}),l==="approve"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{htmlFor:"templateId",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:N("milestoneTemplate")}),i.jsx("select",{id:"templateId",value:x,onChange:q=>y(q.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:t.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))})]}),i.jsx("div",{className:"mt-4",children:i.jsx("textarea",{rows:4,value:u,onChange:q=>c(q.target.value),className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600",placeholder:N("enterCommentPlaceholder"),"aria-label":"Comment"})}),l==="reject"&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"isTransferring",checked:d,onChange:q=>b(q.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"isTransferring",className:"ml-2 block text-sm text-slate-800 dark:text-slate-200",children:N("transferToAnotherAdvisor")})]}),d&&i.jsx("div",{className:"mt-2",children:i.jsxs("select",{value:g,onChange:q=>p(q.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",disabled:!0,children:N("selectAnAdvisor")}),M.map(q=>{const V=o[q.name]||0,O=V>=q.quota;return i.jsxs("option",{value:q.name,disabled:O,children:[q.name," (",V,"/",q.quota,") ",O?` - ${N("full")}`:""]},q.id)})]})})]}),v&&i.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:v})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-6 sm:flex sm:flex-row-reverse sm:space-x-2 space-y-2 sm:space-y-0",children:[i.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto sm:text-sm ${B.buttonBg}`,onClick:F,children:d?N("confirmTransfer"):B.buttonText}),i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm dark:bg-slate-600 dark:text-white dark:border-slate-500 dark:hover:bg-slate-500",onClick:e,children:N("cancel")})]})]})}):null},eg=({onClose:m,onSave:a,templateToEdit:e,allTemplates:h})=>{const f=!!e,l=Ue(),[s,o]=Z.useState(""),[r,t]=Z.useState(""),[n,u]=Z.useState([]),[c,d]=Z.useState({});Z.useEffect(()=>{e?(o(e.name),t(e.description),u([...e.tasks])):u([{id:Ar(),name:"",durationDays:30}])},[e]);const b=()=>{const v={tasks:{}};return s.trim()?h.some(N=>N.name.toLowerCase()===s.trim().toLowerCase()&&N.id!==(e==null?void 0:e.id))&&(v.name=l("templateNameExists")):v.name=l("templateNameRequired"),r.trim()||(v.description=l("descriptionRequired")),n.length===0&&(v.tasksError=l("atLeastOneTask")),n.forEach((S,N)=>{S.name.trim()||(v.tasks[N]={...v.tasks[N],name:l("taskNameRequired")}),S.durationDays<=0&&(v.tasks[N]={...v.tasks[N],duration:l("daysPositiveError")})}),d(v),Object.keys(v).length===1&&Object.keys(v.tasks).length===0&&!v.tasksError},g=v=>{if(v.preventDefault(),!b())return;const S={name:s,description:r,tasks:n},N=f?{...e,...S}:S;a(N)},p=(v,S,N)=>{const R=[...n];R[v][S]=N,u(R)},x=()=>{u([...n,{id:Ar(),name:"",durationDays:30}])},y=v=>{u(n.filter((S,N)=>N!==v))};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700 flex-shrink-0",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:l(f?"editTemplate":"addTemplate")}),i.jsx("button",{onClick:m,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:g,noValidate:!0,className:"flex-grow overflow-y-auto pr-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:l("templateName")}),i.jsx("input",{type:"text",id:"name",value:s,onChange:v=>o(v.target.value),className:`input-style mt-1 ${c.name?"border-red-500":""}`}),c.name&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.name})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:l("description")}),i.jsx("textarea",{id:"description",rows:2,value:r,onChange:v=>t(v.target.value),className:`input-style mt-1 ${c.description?"border-red-500":""}`}),c.description&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.description})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:l("milestoneTasks")}),c.tasksError&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.tasksError}),i.jsx("div",{className:"mt-2 space-y-3",children:n.map((v,S)=>{var N,R,B,M,F,q,V,O;return i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{className:"col-span-8",children:[i.jsx("label",{htmlFor:`task-name-${S}`,className:"sr-only",children:l("taskName")}),i.jsx("input",{type:"text",id:`task-name-${S}`,placeholder:"e.g., Chapter 1: Introduction",value:v.name,onChange:T=>p(S,"name",T.target.value),className:`input-style ${(R=(N=c.tasks)==null?void 0:N[S])!=null&&R.name?"border-red-500":""}`}),((M=(B=c.tasks)==null?void 0:B[S])==null?void 0:M.name)&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.tasks[S].name})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("label",{htmlFor:`task-days-${S}`,className:"sr-only",children:l("durationInDays")}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",id:`task-days-${S}`,value:v.durationDays,onChange:T=>p(S,"durationDays",parseInt(T.target.value,10)||0),min:"1",className:`input-style pr-12 ${(q=(F=c.tasks)==null?void 0:F[S])!=null&&q.duration?"border-red-500":""}`}),i.jsx("span",{className:"absolute inset-y-0 right-3 flex items-center text-sm text-slate-500 dark:text-slate-400",children:l("days")})]}),((O=(V=c.tasks)==null?void 0:V[S])==null?void 0:O.duration)&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.tasks[S].duration})]}),i.jsx("div",{className:"col-span-1 flex items-center pt-2",children:i.jsx("button",{type:"button",onClick:()=>y(S),className:"text-slate-500 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400","aria-label":l("removeTask"),children:i.jsx(Gt,{className:"w-5 h-5"})})})]},v.id)})}),i.jsxs("button",{type:"button",onClick:x,className:"mt-4 flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(or,{className:"w-4 h-4 mr-1"})," ",l("addTask")]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6 flex-shrink-0",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:l("cancel")}),i.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:l("saveTemplate")})]})]})]})]})},tg=({templates:m,addTemplate:a,updateTemplate:e,deleteTemplate:h})=>{const[f,l]=Z.useState(!1),[s,o]=Z.useState(null),[r,t]=Z.useState(null),[n,u]=Z.useState({key:"id",direction:"ascending"}),[c,d]=Z.useState(""),b=At(),g=Ue(),p=B=>{let M="ascending";n&&n.key===B&&n.direction==="ascending"&&(M="descending"),u({key:B,direction:M})},x=Z.useMemo(()=>{let B=[...m];if(c){const M=c.toLowerCase();B=B.filter(F=>F.id.toLowerCase().includes(M)||F.name.toLowerCase().includes(M)||F.description.toLowerCase().includes(M))}return n!==null&&B.sort((M,F)=>{let q,V;return n.key==="taskCount"?(q=M.tasks.length,V=F.tasks.length):(q=M[n.key],V=F[n.key]),q<V?n.direction==="ascending"?-1:1:q>V?n.direction==="ascending"?1:-1:0}),B},[m,n,c]),y=()=>{o(null),l(!0)},v=B=>{o(B),l(!0)},S=B=>{t(B)},N=()=>{r&&(h(r.id),b({type:"success",message:g("templateDeletedSuccess")}),t(null))},R=B=>{"id"in B?(e(B),b({type:"success",message:g("templateUpdatedSuccess")})):(a(B),b({type:"success",message:g("templateAddedSuccess")})),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Fa,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:g("manageMilestoneTemplates")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:g("manageMilestoneTemplatesDescription")})]})]}),i.jsxs("button",{onClick:y,className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),g("addTemplate")]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:g("searchByTemplate"),value:c,onChange:B=>d(B.target.value)})]})}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"id",title:"ID",sortConfig:n,requestSort:p}),i.jsx(We,{sortKey:"name",title:g("templateName"),sortConfig:n,requestSort:p}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:g("description")}),i.jsx(We,{sortKey:"taskCount",title:g("tasks"),sortConfig:n,requestSort:p}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:g("actions")})]})}),i.jsx("tbody",{children:x.map(B=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:B.id}),i.jsx("td",{className:"px-6 py-4",children:B.name}),i.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300 max-w-sm truncate",children:B.description}),i.jsx("td",{className:"px-6 py-4",children:B.tasks.length}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>v(B),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>S(B),className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},B.id))})]}),x.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:c?`No templates found for "${c}".`:`No templates found. Click "${g("addTemplate")}" to begin.`})]}),f&&i.jsx(eg,{onClose:()=>l(!1),onSave:R,templateToEdit:s,allTemplates:m}),r&&i.jsx(dr,{isOpen:!!r,onClose:()=>t(null),onConfirm:N,title:g("deleteTemplateTitle"),message:g("deleteTemplateMessage").replace("${templateName}",r.name)})]})},rg=({milestone:m,project:a,t:e})=>i.jsxs("div",{className:"absolute bottom-full mb-2 w-64 hidden group-hover:block bg-slate-800 text-white text-xs rounded p-2 z-20 shadow-lg text-left transform -translate-x-1/2 left-1/2",children:[i.jsx("p",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:m.name}),i.jsxs("p",{children:[i.jsxs("strong",{children:[e("projectLabel"),":"]})," ",a.project.projectId]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[e("studentsLabel"),":"]})," ",a.students.map(h=>h.name).join(", ")]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[e("dueLabel"),":"]})," ",new Date(m.dueDate).toLocaleDateString()]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[e("statusLabel"),":"]})," ",m.status]})]}),da=({submission:m,project:a,type:e,t:h})=>i.jsxs("div",{className:"absolute bottom-full mb-2 w-64 hidden group-hover:block bg-slate-800 text-white text-xs rounded p-2 z-20 shadow-lg text-left transform -translate-x-1/2 left-1/2",children:[i.jsx("p",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:e}),i.jsxs("p",{children:[i.jsxs("strong",{children:[h("projectLabel"),":"]})," ",a.project.projectId]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[h("studentsLabel"),":"]})," ",a.students.map(f=>f.name).join(", ")]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[h("submittedLabel"),":"]})," ",new Date(m.submittedAt).toLocaleDateString()]}),i.jsxs("p",{children:[i.jsxs("strong",{children:[h("statusLabel"),":"]})," ",m.status]})]}),sg=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>m.filter(u=>u.project.status===it.Approved&&(u.project.milestones&&u.project.milestones.length>0||u.project.finalSubmissions&&(u.project.finalSubmissions.preDefenseFile||u.project.finalSubmissions.postDefenseFile))).sort((u,c)=>u.project.projectId.localeCompare(c.project.projectId)),[m]),{startDate:h,endDate:f,totalDays:l}=Z.useMemo(()=>{if(e.length===0){const x=new Date,y=x.getMonth()>=7?x.getFullYear():x.getFullYear()-1,v=new Date(y,7,1),S=new Date(y+1,6,31),N=Math.ceil((S.getTime()-v.getTime())/(1e3*3600*24));return{startDate:v,endDate:S,totalDays:N}}const u=e.flatMap(x=>{var y,v,S;return[...((y=x.project.milestones)==null?void 0:y.map(N=>new Date(N.dueDate)))||[],...(v=x.project.finalSubmissions)!=null&&v.preDefenseFile?[new Date(x.project.finalSubmissions.preDefenseFile.submittedAt)]:[],...(S=x.project.finalSubmissions)!=null&&S.postDefenseFile?[new Date(x.project.finalSubmissions.postDefenseFile.submittedAt)]:[]]}).filter(Boolean);if(u.length===0){const x=new Date,y=x.getMonth()>=7?x.getFullYear():x.getFullYear()-1,v=new Date(y,7,1),S=new Date(y+1,6,31),N=Math.ceil((S.getTime()-v.getTime())/(1e3*3600*24));return{startDate:v,endDate:S,totalDays:N}}const c=new Date(Math.min(...u.map(x=>x.getTime()))),d=new Date(Math.max(...u.map(x=>x.getTime()))),b=new Date(c);b.setDate(b.getDate()-15);const g=new Date(d);g.setDate(g.getDate()+15);const p=Math.ceil((g.getTime()-b.getTime())/(1e3*3600*24));return{startDate:b,endDate:g,totalDays:p}},[e]),s=u=>{const c=u.getTime()-h.getTime();return c<0?0:c/(1e3*3600*24)/l*100},o=u=>{const c=new Date;c.setHours(0,0,0,0);const d=new Date(u.dueDate);if((u.status===bt.Pending||u.status===bt.RequiresRevision)&&d<c)return{icon:i.jsx(cr,{className:"w-4 h-4 text-white"}),color:"bg-red-500",label:a("overdue")};switch(u.status){case bt.Approved:return{icon:i.jsx(Kt,{className:"w-4 h-4 text-white"}),color:"bg-green-500",label:a("approved")};case bt.Submitted:return{icon:i.jsx(Xr,{className:"w-4 h-4 text-white"}),color:"bg-blue-500",label:a("submitted")};case bt.RequiresRevision:return{icon:i.jsx($s,{className:"w-4 h-4 text-white"}),color:"bg-orange-500",label:a("requiresRevision")};default:return{icon:i.jsx(Er,{className:"w-4 h-4 text-white"}),color:"bg-slate-400 dark:bg-slate-500",label:a("pending")}}},r=u=>{switch(u.status){case ir.Approved:return{icon:i.jsx(Kt,{className:"w-4 h-4 text-white"}),color:"bg-emerald-500",label:a("approved")};case ir.Submitted:return{icon:i.jsx(Xr,{className:"w-4 h-4 text-white"}),color:"bg-sky-500",label:a("submitted")};case ir.RequiresRevision:return{icon:i.jsx($s,{className:"w-4 h-4 text-white"}),color:"bg-amber-500",label:a("requiresRevision")};default:return{icon:i.jsx(Er,{className:"w-4 h-4 text-white"}),color:"bg-slate-400 dark:bg-slate-500",label:a("unknown")}}},t=Z.useMemo(()=>{const u=[];let c=new Date(h);for(c.setDate(1);c<=f;){const d=new Date(c);d.setMonth(d.getMonth()+1);const b=s(c>h?c:h),g=s(d<f?d:f);u.push({name:c.toLocaleString("default",{month:"short",year:"numeric"}),position:b,width:g-b}),c=d}return u},[h,f]),n=s(new Date);return e.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 text-center",children:[i.jsx(wn,{className:"mx-auto h-12 w-12 text-slate-400"}),i.jsx("h3",{className:"mt-2 text-lg font-semibold text-slate-800 dark:text-slate-200",children:a("noTimelineTitle")}),i.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:a("noTimelineData")})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4",children:a("projectTimelineTitle")}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"relative",style:{minWidth:"1200px"},children:[i.jsx("div",{className:"relative h-8 mb-2 flex",children:t.map(u=>i.jsx("div",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 border-r border-slate-200 dark:border-slate-700 text-center",style:{position:"absolute",left:`${u.position}%`,width:`${u.width}%`},children:u.name},u.name))}),n>=0&&n<=100&&i.jsx("div",{className:"absolute top-8 bottom-0 w-0.5 bg-blue-500 z-10",style:{left:`${n}%`},children:i.jsx("div",{className:"absolute -top-6 -translate-x-1/2 text-xs font-semibold bg-blue-500 text-white px-1.5 py-0.5 rounded",children:a("today")})}),i.jsx("div",{className:"space-y-2 pt-2",children:e.map((u,c)=>{var d,b,g;return i.jsxs("div",{className:`h-10 flex items-center rounded ${c%2===0?"bg-slate-50 dark:bg-slate-800/50":""}`,children:[i.jsx("div",{className:"w-48 px-2 text-sm font-semibold text-slate-700 dark:text-slate-300 truncate sticky left-0 bg-inherit z-10",children:u.project.projectId}),i.jsxs("div",{className:"relative flex-1 h-full border-l border-slate-200 dark:border-slate-700",children:[(d=u.project.milestones)==null?void 0:d.map(p=>{const x=s(new Date(p.dueDate)),y=o(p);return i.jsxs("div",{className:"group absolute top-1/2 -translate-y-1/2",style:{left:`${x}%`},children:[i.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white cursor-pointer ${y.color} ring-2 ring-white dark:ring-slate-800`,children:y.icon}),i.jsx(rg,{milestone:p,project:u,t:a})]},p.id)}),((b=u.project.finalSubmissions)==null?void 0:b.preDefenseFile)&&(()=>{const p=u.project.finalSubmissions.preDefenseFile,x=s(new Date(p.submittedAt)),y=r(p);return i.jsxs("div",{className:"group absolute top-1/2 -translate-y-1/2",style:{left:`${x}%`},children:[i.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-white cursor-pointer ${y.color} ring-2 ring-white dark:ring-slate-800`,children:y.icon}),i.jsx(da,{submission:p,project:u,type:a("preDefenseFilesLabel"),t:a})]})})(),((g=u.project.finalSubmissions)==null?void 0:g.postDefenseFile)&&(()=>{const p=u.project.finalSubmissions.postDefenseFile,x=s(new Date(p.submittedAt)),y=r(p);return i.jsxs("div",{className:"group absolute top-1/2 -translate-y-1/2",style:{left:`${x}%`},children:[i.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-white cursor-pointer ${y.color} ring-2 ring-white dark:ring-slate-800`,children:y.icon}),i.jsx(da,{submission:p,project:u,type:a("postDefenseFilesLabel"),t:a})]})})()]})]},u.project.projectId)})})]})}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-4 mt-4 border-t border-slate-200 dark:border-slate-700 text-xs",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-blue-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:a("milestoneUnit")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-red-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:a("overdueMilestone")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-green-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:a("defense")})]})]})]})},ys=({title:m,icon:a,children:e})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-full mr-3",children:a}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:m})]}),i.jsx("div",{className:"min-h-[250px] flex items-center justify-center",children:e})]}),ng=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>{const f=m.filter(t=>t.project.status===it.Approved),l=f.length;if(l===0)return null;let s=0,o=0,r=0;return f.forEach(t=>{const{mainCommitteeId:n,secondCommitteeId:u,thirdCommitteeId:c,defenseDate:d}=t.project,b=[n,u,c].filter(Boolean).length;b===3?s++:b>0&&o++,d&&r++}),{total:l,fullyAssigned:s,partiallyAssigned:o,unassigned:l-s-o,scheduled:r,unscheduled:l-r}},[m]);if(!e)return i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("noApprovedProjects")});const h=({value:f,total:l,color:s,label:o})=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-baseline mb-1 text-sm",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:o}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[f," / ",l]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${s} h-4 rounded-full transition-all duration-500 text-white text-xs flex items-center justify-center font-bold`,style:{width:`${l>0?f/l*100:0}%`},children:l>0&&f>0&&`${(f/l*100).toFixed(0)}%`})})]});return i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-600 dark:text-slate-300 mb-2",children:a("committeeAssignmentStatus")}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(h,{value:e.fullyAssigned,total:e.total,color:"bg-green-500",label:a("fullyAssigned")}),i.jsx(h,{value:e.partiallyAssigned,total:e.total,color:"bg-yellow-500",label:a("partiallyAssigned")}),i.jsx(h,{value:e.unassigned,total:e.total,color:"bg-red-500",label:a("unassigned")})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-600 dark:text-slate-300 mb-2",children:a("defenseSchedulingStatus")}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(h,{value:e.scheduled,total:e.total,color:"bg-blue-500",label:a("scheduledDefenses")}),i.jsx(h,{value:e.unscheduled,total:e.total,color:"bg-slate-400",label:a("unscheduled")})]})]})]})},ig=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>{const t=m.reduce((n,u)=>(n[u.project.status]=(n[u.project.status]||0)+1,n),{});return{approved:t.Approved||0,pending:t.Pending||0,rejected:t.Rejected||0}},[m]),h=e.approved+e.pending+e.rejected;if(h===0)return i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("noProjectsToDisplay")});const f=80,l=2*Math.PI*f,s=[{value:e.approved,color:"stroke-green-500"},{value:e.pending,color:"stroke-yellow-500"},{value:e.rejected,color:"stroke-red-500"}],o=[{label:a("approved"),color:"bg-green-500",value:e.approved},{label:a("pending"),color:"bg-yellow-500",value:e.pending},{label:a("rejected"),color:"bg-red-500",value:e.rejected}];let r=0;return i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-around w-full",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",className:"-rotate-90",children:[i.jsx("circle",{cx:"100",cy:"100",r:f,fill:"transparent",strokeWidth:"20",className:"stroke-slate-200 dark:stroke-slate-700"}),s.map((t,n)=>{const u=t.value/h*l,c=r;return r+=u,i.jsx("circle",{cx:"100",cy:"100",r:f,fill:"transparent",strokeWidth:"20",strokeDasharray:`${u} ${l}`,strokeDashoffset:-c,className:t.color},n)})]}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[i.jsx("span",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:h}),i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:a("projects")})]})]}),i.jsx("div",{className:"mt-6 md:mt-0 md:ml-6 space-y-2",children:o.map(t=>i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${t.color}`}),i.jsxs("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[t.label,":"]}),i.jsxs("span",{className:"ml-1.5 text-slate-500 dark:text-slate-400",children:[t.value," (",(h>0?t.value/h*100:0).toFixed(1),"%)"]})]},t.label))})]})},og=({advisors:m,advisorProjectCounts:a})=>{const e=Ue();return m.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e("noAdvisorsData")}):i.jsx("div",{className:"w-full space-y-4",children:m.map(h=>{const f=a[h.name]||0,l=h.quota>0?f/h.quota*100:0,s=Vs(h.name);return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-baseline mb-1 text-sm",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:h.name}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[f," / ",h.quota]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"h-4 rounded-full transition-all duration-500",style:{width:`${l}%`,backgroundColor:s}})})]},h.id)})})},ag=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>{const n=new Date,u=[],c=[];for(let d=5;d>=0;d--){const b=new Date(n.getFullYear(),n.getMonth()-d,1);u.push(b.toLocaleString("default",{month:"short"})),c.push(0)}return m.forEach(d=>{const b=d.project.history.find(g=>g.status===it.Pending);if(b){const g=new Date(b.timestamp),p=new Date(n.getFullYear(),n.getMonth()-5,1);if(g>=p){const x=(g.getFullYear()-n.getFullYear())*12+g.getMonth()-n.getMonth()+5;x>=0&&x<6&&c[x]++}}}),{labels:u,counts:c}},[m]);if(m.length===0)return i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("noProjectsToDisplay")});const h=Math.max(...e.counts,5),f=400,l=200,s={top:10,right:10,bottom:20,left:30},o=e.counts.map((n,u)=>{const c=s.left+u/(e.counts.length-1)*(f-s.left-s.right),d=l-s.bottom-n/h*(l-s.top-s.bottom);return`${c},${d}`}).join(" "),r=`M${s.left},${l-s.bottom} L${o} L${f-s.right},${l-s.bottom} Z`,t=`M${o}`;return i.jsx("div",{className:"w-full",children:i.jsxs("svg",{viewBox:`0 0 ${f} ${l}`,className:"w-full h-auto",children:[i.jsx("text",{x:"10",y:s.top+5,className:"text-xs fill-slate-500 dark:fill-slate-400",children:h}),i.jsx("line",{x1:s.left,y1:s.top,x2:s.left,y2:l-s.bottom,className:"stroke-slate-200 dark:stroke-slate-700",strokeWidth:"1"}),i.jsx("text",{x:"10",y:l-s.bottom,className:"text-xs fill-slate-500 dark:fill-slate-400",children:"0"}),i.jsx("line",{x1:s.left,y1:l-s.bottom,x2:f-s.right,y2:l-s.bottom,className:"stroke-slate-200 dark:stroke-slate-700",strokeWidth:"1"}),e.labels.map((n,u)=>i.jsx("text",{x:s.left+u/(e.labels.length-1)*(f-s.left-s.right),y:l-5,textAnchor:"middle",className:"text-xs fill-slate-500 dark:fill-slate-400",children:n},n)),i.jsx("path",{d:r,className:"fill-blue-500/20"}),i.jsx("path",{d:t,fill:"none",className:"stroke-blue-500",strokeWidth:"2"}),e.counts.map((n,u)=>i.jsx("circle",{cx:s.left+u/(e.counts.length-1)*(f-s.left-s.right),cy:l-s.bottom-n/h*(l-s.top-s.bottom),r:"3",className:"fill-blue-500"},u))]})})},lg=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>{const f=m.filter(s=>s.project.status===it.Approved&&s.project.milestones);if(f.length===0)return[];const l={};return f.flatMap(s=>s.project.milestones||[]).forEach(s=>{l[s.name]||(l[s.name]={[bt.Approved]:0,[bt.Pending]:0,[bt.RequiresRevision]:0,[bt.Submitted]:0,total:0}),l[s.name][s.status]++,l[s.name].total++}),Object.entries(l).map(([s,o])=>({name:s,...o}))},[m]);if(e.length===0)return i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("noMilestonesYet")});const h={[bt.Approved]:"bg-green-500",[bt.Submitted]:"bg-blue-500",[bt.RequiresRevision]:"bg-orange-500",[bt.Pending]:"bg-slate-400 dark:bg-slate-500"};return i.jsxs("div",{className:"w-full space-y-4",children:[e.map(f=>i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-1 truncate",title:f.name,children:f.name}),i.jsx("div",{className:"flex w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:Object.entries(h).map(([l,s])=>{const o=f[l]||0,r=f.total>0?o/f.total*100:0;return r===0?null:i.jsx("div",{className:s,style:{width:`${r}%`},title:`${l}: ${o}`},l)})})]},f.name)),i.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-4 text-xs",children:Object.entries(h).map(([f,l])=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-1.5 ${l}`}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:f})]},f))})]})},cg=({projectGroups:m})=>{const a=Ue(),e=Z.useMemo(()=>{const s={};return m.forEach(r=>{if(r.project.finalGrade){const t=r.project.finalGrade.trim().toUpperCase();s[t]=(s[t]||0)+1}}),Object.entries(s).sort(([,r],[,t])=>t-r)},[m]);if(e.length===0)return i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("noFinalGradesYet")});const h=Math.max(...e.map(([,s])=>s),1),f={A:"bg-green-500","A+":"bg-green-500","A-":"bg-green-500","B+":"bg-sky-500",B:"bg-blue-500","B-":"bg-indigo-500","C+":"bg-yellow-500",C:"bg-orange-500","C-":"bg-orange-600","D+":"bg-red-500",D:"bg-red-600",F:"bg-gray-600"},l="bg-slate-400";return i.jsx("div",{className:"w-full space-y-3 pr-4",children:e.map(([s,o])=>{const r=o/h*100,t=f[s]||l;return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"w-12 text-right font-bold text-slate-700 dark:text-slate-300",children:s}),i.jsxs("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-6 relative",children:[i.jsx("div",{className:`h-6 rounded-full flex items-center justify-end px-2 text-white text-xs font-bold transition-all duration-500 ${t}`,style:{width:`${r}%`},children:o>0&&r>10&&i.jsx("span",{children:o})}),r<=10&&i.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs font-bold text-slate-600 dark:text-slate-300 pl-1",style:{left:`${r}%`},children:o})]})]},s)})})},dg=({projectGroups:m,advisors:a,advisorProjectCounts:e})=>{const h=At(),f=Ue(),l=Z.useCallback(()=>{const s=m.reduce((M,F)=>(M[F.project.status]=(M[F.project.status]||0)+1,M),{}),o=[[f("status"),f("count")],[f("approved"),s.Approved||0],[f("pending"),s.Pending||0],[f("rejected"),s.Rejected||0]],r=XLSX.utils.aoa_to_sheet(o);r["!cols"]=[{wch:20},{wch:10}];const t=[[f("advisor"),f("projectsSupervising"),f("quota")],...a.sort((M,F)=>M.name.localeCompare(F.name)).map(M=>[M.name,e[M.name]||0,M.quota])],n=XLSX.utils.aoa_to_sheet(t);n["!cols"]=[{wch:30},{wch:20},{wch:10}];const u=new Date,c=Array.from({length:6}).map((M,F)=>({month:new Date(u.getFullYear(),u.getMonth()-(5-F),1).toLocaleString("default",{month:"short",year:"numeric"}),count:0})),d=new Date(u.getFullYear(),u.getMonth()-5,1);m.forEach(M=>{const F=M.project.history.find(q=>q.status===it.Pending);if(F){const q=new Date(F.timestamp);if(q>=d){const V=(q.getFullYear()-d.getFullYear())*12+q.getMonth()-d.getMonth();V>=0&&V<6&&c[V].count++}}});const b=[[f("month"),f("submissions")],...c.map(M=>[M.month,M.count])],g=XLSX.utils.aoa_to_sheet(b);g["!cols"]=[{wch:20},{wch:15}];const p=m.filter(M=>M.project.status===it.Approved&&M.project.milestones),x={};p.flatMap(M=>M.project.milestones||[]).forEach(M=>{x[M.name]||(x[M.name]={Approved:0,Pending:0,"Requires Revision":0,Submitted:0,total:0}),x[M.name][M.status]++,x[M.name].total++});const y=[[f("milestone"),f("approved"),f("submitted"),f("requiresRevision"),f("pending"),f("total")],...Object.entries(x).map(([M,F])=>[M,F.Approved,F.Submitted,F["Requires Revision"],F.Pending,F.total])],v=XLSX.utils.aoa_to_sheet(y);v["!cols"]=[{wch:40},{wch:10},{wch:10},{wch:15},{wch:10},{wch:10}];const S={};m.forEach(M=>{if(M.project.finalGrade){const F=M.project.finalGrade.trim().toUpperCase();S[F]=(S[F]||0)+1}});const N=[[f("finalGrade"),f("count")],...Object.entries(S).sort((M,F)=>M[0].localeCompare(F[0])).map(([M,F])=>[M,F])],R=XLSX.utils.aoa_to_sheet(N);R["!cols"]=[{wch:10},{wch:10}];const B=XLSX.utils.book_new();XLSX.utils.book_append_sheet(B,r,f("projectStatus")),XLSX.utils.book_append_sheet(B,n,f("advisorWorkloadOverview")),XLSX.utils.book_append_sheet(B,g,f("monthlySubmissions")),XLSX.utils.book_append_sheet(B,v,f("milestoneProgress")),XLSX.utils.book_append_sheet(B,R,f("gradeDistribution")),XLSX.writeFile(B,"Analytics_Report.xlsx"),h({type:"success",message:f("analyticsExportSuccess")})},[m,a,e,h,f]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(mn,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:f("analytics")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:f("analyticsDescription")})]})]}),i.jsxs("button",{onClick:l,className:"mt-4 sm:mt-0 flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),f("exportReport")]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx(ys,{title:f("projectStatusBreakdown"),icon:i.jsx(mn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(ig,{projectGroups:m})}),i.jsx(ys,{title:f("advisorWorkloadOverview"),icon:i.jsx(_r,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(og,{advisors:a,advisorProjectCounts:e})}),i.jsx(ys,{title:f("monthlySubmissions"),icon:i.jsx(li,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(ag,{projectGroups:m})}),i.jsx(ys,{title:f("milestoneProgress"),icon:i.jsx(lr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(lg,{projectGroups:m})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx(ys,{title:f("committeeSchedulingStatus"),icon:i.jsx(lr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(ng,{projectGroups:m})})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx(ys,{title:f("gradeDistribution"),icon:i.jsx(_r,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),children:i.jsx(cg,{projectGroups:m})})})]})]})},ug=(m="")=>m.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/(\r\n|\n|\r)/g,"<br />"),fg=({onClose:m,onSave:a,announcementToEdit:e})=>{const h=!!e,f=Ue(),[l,s]=Z.useState(""),[o,r]=Z.useState(""),[t,n]=Z.useState("All"),[u,c]=Z.useState({});Z.useEffect(()=>{e&&(s(e.title),r(e.content),n(e.audience))},[e]);const d=()=>{const g={};return l.trim()||(g.title=f("titleRequired")),o.trim()||(g.content=f("contentRequired")),c(g),Object.keys(g).length===0},b=g=>{g.preventDefault(),d()&&a({title:l,content:o,audience:t})};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; } .prose strong { color: inherit; } .prose em { color: inherit; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b dark:border-slate-700 flex-shrink-0",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:f(h?"editAnnouncement":"newAnnouncement")}),i.jsx("button",{onClick:m,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:b,noValidate:!0,className:"flex-grow min-h-0 flex flex-col",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:f("title")}),i.jsx("input",{type:"text",id:"title",value:l,onChange:g=>s(g.target.value),className:`input-style mt-1 ${u.title?"border-red-500":""}`}),u.title&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.title})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"audience",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:f("audience")}),i.jsxs("select",{id:"audience",value:t,onChange:g=>n(g.target.value),className:"input-style mt-1",children:[i.jsx("option",{value:"All",children:f("allUsers")}),i.jsx("option",{value:"Students",children:f("studentsOnly")}),i.jsx("option",{value:"Advisors",children:f("advisorsOnly")})]})]})]}),i.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-2 gap-4 min-h-0",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:f("contentMarkdown")}),i.jsx("textarea",{id:"content",value:o,onChange:g=>r(g.target.value),className:`input-style flex-grow resize-none ${u.content?"border-red-500":""}`,placeholder:f("markdownHelp")}),u.content&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.content})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:f("preview")}),i.jsx("div",{className:"input-style flex-grow prose prose-sm max-w-none dark:text-slate-200",dangerouslySetInnerHTML:{__html:ug(o)||`<p class="text-slate-400">${f("previewPlaceholder")}</p>`}})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t dark:border-slate-700 mt-6 flex-shrink-0",children:[i.jsx("button",{type:"button",onClick:m,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:f("cancel")}),i.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:f(h?"saveChanges":"postAnnouncement")})]})]})]})]})},hg=({announcements:m,user:a,addAnnouncement:e,updateAnnouncement:h,deleteAnnouncement:f})=>{const[l,s]=Z.useState(!1),[o,r]=Z.useState(null),[t,n]=Z.useState(null),u=At(),c=Ue(),d=()=>{r(null),s(!0)},b=x=>{r(x),s(!0)},g=()=>{t&&(f(t.id),u({type:"success",message:c("announcementDeletedSuccess")}),n(null))},p=x=>{o?(h({...o,...x}),u({type:"success",message:c("announcementUpdatedSuccess")})):(e({...x,authorName:a.name}),u({type:"success",message:c("announcementPostedSuccess")})),s(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ci,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:c("manageAnnouncements")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:c("manageAnnouncementsDescription")})]})]}),i.jsxs("button",{onClick:d,className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(or,{className:"w-5 h-5 mr-2"}),c("newAnnouncement")]})]}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:c("title")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:c("audience")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:c("author")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:c("date")}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:c("actions")})]})}),i.jsx("tbody",{children:m.map(x=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:x.title}),i.jsx("td",{className:"px-6 py-4",children:x.audience}),i.jsx("td",{className:"px-6 py-4",children:x.authorName}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(x.createdAt).toLocaleDateString()}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>b(x),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>n(x),className:"p-2 text-slate-500 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},x.id))})]}),m.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:c("noAnnouncementsFound").replace("${newAnnouncement}",c("newAnnouncement"))})]}),l&&i.jsx(fg,{onClose:()=>s(!1),onSave:p,announcementToEdit:o}),t&&i.jsx(dr,{isOpen:!!t,onClose:()=>n(null),onConfirm:g,title:c("deleteAnnouncementTitle"),message:c("deleteAnnouncementMessage").replace("${title}",t.title)})]})},jl=(m,a)=>{const[e,h]=Z.useState(null),[f,l]=Z.useState(!1),[s,o]=Z.useState(null),[r,t]=Z.useState(!1),n=At(),u=Ue(),c=Z.useCallback(async()=>{{n({type:"error",message:u("aiFeatureNotConfigured")});return}},[m,a.id,n,u]),d=Z.useCallback(async()=>{{n({type:"error",message:u("runSkillsAnalysisFirst")});return}},[e,n,u]);return{skillsAnalysis:e,isAnalyzingSkills:f,analyzeSkills:c,careerPaths:s,isSuggestingCareers:r,suggestCareers:d}},wr=({label:m,value:a})=>i.jsxs("div",{className:"py-2 sm:grid sm:grid-cols-3 sm:gap-4",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsx("dd",{className:"mt-1 text-sm text-slate-900 dark:text-white sm:col-span-2 sm:mt-0",children:a})]}),$n=({label:m,value:a,onSave:e,error:h,type:f="text"})=>{const[l,s]=Z.useState(!1),[o,r]=Z.useState(a);Z.useEffect(()=>{r(a)},[a]);const t=()=>{o.trim()!==a.trim()&&e(o),s(!1)};return i.jsxs("div",{className:"py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-center",children:[i.jsx("dt",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsxs("dd",{className:"mt-1 sm:col-span-2 sm:mt-0",children:[l?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:f,value:o,onChange:n=>r(n.target.value),className:`block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 ${h?"ring-red-500":""}`}),i.jsx("button",{onClick:t,className:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-full",children:i.jsx(es,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>{s(!1),r(a)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",children:i.jsx(Ot,{className:"w-5 h-5"})})]}):i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:a}),i.jsx("button",{onClick:()=>s(!0),className:"p-2 text-slate-500 hover:text-blue-600 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(er,{className:"w-4 h-4"})})]}),h&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:h})]})]})},Fs=({title:m,icon:a,children:e,defaultOpen:h=!1})=>{const[f,l]=Z.useState(h);return i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>l(!f),className:"w-full flex justify-between items-center p-3 bg-slate-100 dark:bg-slate-900/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[a,i.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:m})]}),f?i.jsx(Ua,{className:"w-5 h-5"}):i.jsx(ui,{className:"w-5 h-5"})]}),f&&i.jsx("div",{className:"p-4",children:e})]})},zn=({title:m,icon:a,children:e,onAnalyze:h,isLoading:f,analysisPerformed:l,canAnalyze:s})=>{const o=Ue();return i.jsx(Fs,{title:m,icon:a,children:i.jsxs("div",{className:"p-0",children:[!l&&s&&i.jsxs("button",{onClick:h,disabled:f,className:"w-full flex items-center justify-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:[f?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsx(Ft,{className:"w-5 h-5"}),i.jsx("span",{className:"ml-2",children:o(f?"analyzing":"analyzeWithAI")})]}),!s&&!l&&i.jsx("p",{className:"text-sm text-center text-slate-500 dark:text-slate-400",children:o("notEnoughData")}),f&&!l&&i.jsx("div",{className:"flex justify-center items-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),l&&e]})})},mg=({isOpen:m,onClose:a,user:e,userData:h,onUpdateStudent:f,onUpdateAdvisor:l,allAdvisors:s,studentProjectGroup:o,allProjectGroups:r,isPasswordChangeForced:t,onPasswordChanged:n})=>{const u=At(),c=Ue(),[d,b]=Z.useState(""),[g,p]=Z.useState({}),[x,y]=Z.useState(""),[v,S]=Z.useState(""),[N,R]=Z.useState(""),[B,M]=Z.useState(""),{skillsAnalysis:F,isAnalyzingSkills:q,analyzeSkills:V,careerPaths:O,isSuggestingCareers:T,suggestCareers:A}=jl(o,e),[C,w]=Z.useState(null),[_,j]=Z.useState(!1);if(!m)return null;const k=G=>{if(b(""),!G.trim()){b(c("nameRequired"));return}if(s.some(U=>U.name.toLowerCase()===G.trim().toLowerCase()&&U.id!==e.id)){b(c("advisorNameExists"));return}l({...h,name:G.trim()}),u({type:"success",message:c("nameUpdatedSuccess")})},E=(G,K)=>{p({});const U={};if(G==="email"){const J=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;K.trim()?J.test(K)||(U.email=c("invalidEmail")):U.email=c("emailRequired")}if(G==="tel"){const J=/^[\d, -]+$/;K.trim()?J.test(K)||(U.tel=c("invalidTel")):U.tel=c("telRequired")}if(Object.keys(U).length>0){p(U);return}f({...h,[G]:K.trim()}),u({type:"success",message:c(G==="email"?"emailUpdatedSuccess":"telUpdatedSuccess")})},I=()=>{if(M(""),(h==null?void 0:h.password)!==x){M(c("currentPasswordMismatch"));return}if(v.length<6){M(c("passwordLengthError"));return}if(v!==N){M(c("passwordMismatch"));return}e.role==="Student"?f({...h,password:v,mustChangePassword:!1}):(e.role==="Advisor"||e.role==="DepartmentAdmin")&&l({...h,password:v,mustChangePassword:!1}),u({type:"success",message:c("passwordUpdatedSuccess")}),y(""),S(""),R(""),t&&n&&(n(),a())},D=async()=>{},X=()=>{if(!h)return i.jsx("div",{className:"text-center text-slate-500 dark:text-slate-400",children:c("userDataNotFound")});switch(e.role){case"Student":const G=h;return i.jsxs("div",{className:"space-y-4",children:[i.jsx(Fs,{title:c("personalInformation"),icon:i.jsx(un,{className:"w-5 h-5"}),defaultOpen:!0,children:i.jsxs("dl",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx(wr,{label:c("studentId"),value:G.studentId}),i.jsx(wr,{label:c("fullName"),value:`${G.name} ${G.surname}`}),i.jsx(wr,{label:c("major"),value:G.major}),i.jsx($n,{label:c("email"),value:G.email,type:"email",onSave:U=>E("email",U),error:g.email}),i.jsx($n,{label:c("telephone"),value:G.tel,type:"tel",onSave:U=>E("tel",U),error:g.tel})]})}),i.jsx(Fs,{title:c("security"),icon:i.jsx(Us,{className:"w-5 h-5"}),defaultOpen:t,children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("currentPassword")}),i.jsx("input",{type:"password",value:x,onChange:U=>y(U.target.value),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("newPassword")}),i.jsx("input",{type:"password",value:v,onChange:U=>S(U.target.value),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("confirmNewPassword")}),i.jsx("input",{type:"password",value:N,onChange:U=>R(U.target.value),className:"input-style mt-1"})]}),B&&i.jsx("p",{className:"text-red-500 text-xs",children:B}),i.jsx("button",{onClick:I,className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700",children:c("updatePasswordBtn")})]})}),i.jsx(zn,{title:c("aiSkillsAnalysis"),icon:i.jsx(lr,{className:"w-5 h-5 text-blue-600"}),onAnalyze:V,isLoading:q,analysisPerformed:!!F,canAnalyze:!!o,children:F&&i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsx("p",{className:"italic text-slate-600 dark:text-slate-400",children:F.summary}),i.jsx("ul",{className:"space-y-2",children:F.skills.map(U=>i.jsxs("li",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("strong",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[U.skill,":"]})," ",U.justification]},U.skill))})]})}),i.jsx(zn,{title:c("aiCareerPathSuggestions"),icon:i.jsx(_r,{className:"w-5 h-5 text-blue-600"}),onAnalyze:A,isLoading:T,analysisPerformed:!!O,canAnalyze:!!F,children:O&&i.jsx("ul",{className:"space-y-2 text-sm",children:O.map(U=>i.jsxs("li",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("strong",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[U.path,":"]})," ",U.reasoning]},U.path))})})]});case"Advisor":case"DepartmentAdmin":const K=h;return i.jsxs("div",{className:"space-y-4",children:[i.jsx(Fs,{title:c("advisorInformation"),icon:i.jsx(un,{className:"w-5 h-5"}),defaultOpen:!0,children:i.jsxs("dl",{className:"divide-y divide-slate-200 dark:border-slate-700",children:[i.jsx(wr,{label:c("advisorId"),value:K.id}),i.jsx($n,{label:c("fullName"),value:K.name,onSave:k,error:d}),i.jsx(wr,{label:c("supervisingQuota"),value:String(K.quota)}),i.jsx(wr,{label:c("mainCommitteeQuota"),value:String(K.mainCommitteeQuota)}),i.jsx(wr,{label:c("secondCommitteeQuota"),value:String(K.secondCommitteeQuota)}),i.jsx(wr,{label:c("thirdCommitteeQuota"),value:String(K.thirdCommitteeQuota)})]})}),i.jsx(Fs,{title:c("security"),icon:i.jsx(Us,{className:"w-5 h-5"}),defaultOpen:t,children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("currentPassword")}),i.jsx("input",{type:"password",value:x,onChange:U=>y(U.target.value),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("newPassword")}),i.jsx("input",{type:"password",value:v,onChange:U=>S(U.target.value),className:"input-style mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:c("confirmNewPassword")}),i.jsx("input",{type:"password",value:N,onChange:U=>R(U.target.value),className:"input-style mt-1"})]}),B&&i.jsx("p",{className:"text-red-500 text-xs",children:B}),i.jsx("button",{onClick:I,className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700",children:c("updatePasswordBtn")})]})}),i.jsx(zn,{title:c("aiMentoringStyleAnalysis"),icon:i.jsx(fi,{className:"w-5 h-5 text-blue-600"}),onAnalyze:D,isLoading:_,analysisPerformed:!!C,canAnalyze:!0,children:C&&i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("p",{children:[i.jsxs("strong",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[c("identifiedStyle"),":"]})," ",i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:C.style})]}),i.jsx("p",{className:"italic text-slate-600 dark:text-slate-400",children:C.summary}),i.jsxs("div",{children:[i.jsxs("h5",{className:"font-semibold",children:[c("strengths"),":"]}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-300",children:C.strengths.map((U,J)=>i.jsx("li",{children:U},J))})]}),i.jsxs("div",{children:[i.jsxs("h5",{className:"font-semibold",children:[c("suggestions"),":"]}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-300",children:C.suggestionsForImprovement.map((U,J)=>i.jsx("li",{children:U},J))})]})]})})]});case"Admin":return i.jsxs("dl",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx(wr,{label:c("userId"),value:e.id}),i.jsx(wr,{label:c("fullName"),value:e.name}),i.jsx(wr,{label:c("role"),value:e.role})]});default:return null}};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:[i.jsx("style",{children:".input-style { transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid #cbd5e1; } .dark .input-style { background-color: #334155; border-color: #475569; color: #f8fafc; }"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400 rounded-full p-3 mr-4",children:i.jsx(un,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:c("smartProfile")}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.name," (",e.role,")"]})]})]}),i.jsx("button",{onClick:a,disabled:t,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),t&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 rounded-md text-sm font-semibold text-center",children:c("updatePasswordSectionPrompt")}),i.jsxs("div",{className:"mt-4 flex-grow overflow-y-auto pr-2",children:[X(),e.role!=="Admin"&&i.jsx("p",{className:"text-xs text-center text-slate-400 dark:text-slate-500 mt-6",children:c("aiDisclaimer")})]}),i.jsx("div",{className:"mt-6 flex justify-end flex-shrink-0",children:i.jsx("button",{type:"button",className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 dark:bg-slate-600 dark:text-white dark:border-slate-500 dark:hover:bg-slate-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:a,disabled:t,children:c("closeBtn")})})]})]})};var qn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var ua;function pg(){return ua||(ua=1,(function(m,a){(function(e){m.exports=e()})(function(){return(function e(h,f,l){function s(t,n){if(!f[t]){if(!h[t]){var u=typeof Gr=="function"&&Gr;if(!n&&u)return u(t,!0);if(o)return o(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var d=f[t]={exports:{}};h[t][0].call(d.exports,function(b){var g=h[t][1][b];return s(g||b)},d,d.exports,e,h,f,l)}return f[t].exports}for(var o=typeof Gr=="function"&&Gr,r=0;r<l.length;r++)s(l[r]);return s})({1:[function(e,h,f){var l=e("./utils"),s=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(r){for(var t,n,u,c,d,b,g,p=[],x=0,y=r.length,v=y,S=l.getTypeOf(r)!=="string";x<r.length;)v=y-x,u=S?(t=r[x++],n=x<y?r[x++]:0,x<y?r[x++]:0):(t=r.charCodeAt(x++),n=x<y?r.charCodeAt(x++):0,x<y?r.charCodeAt(x++):0),c=t>>2,d=(3&t)<<4|n>>4,b=1<v?(15&n)<<2|u>>6:64,g=2<v?63&u:64,p.push(o.charAt(c)+o.charAt(d)+o.charAt(b)+o.charAt(g));return p.join("")},f.decode=function(r){var t,n,u,c,d,b,g=0,p=0,x="data:";if(r.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var y,v=3*(r=r.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(r.charAt(r.length-1)===o.charAt(64)&&v--,r.charAt(r.length-2)===o.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=s.uint8array?new Uint8Array(0|v):new Array(0|v);g<r.length;)t=o.indexOf(r.charAt(g++))<<2|(c=o.indexOf(r.charAt(g++)))>>4,n=(15&c)<<4|(d=o.indexOf(r.charAt(g++)))>>2,u=(3&d)<<6|(b=o.indexOf(r.charAt(g++))),y[p++]=t,d!==64&&(y[p++]=n),b!==64&&(y[p++]=u);return y}},{"./support":30,"./utils":32}],2:[function(e,h,f){var l=e("./external"),s=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),r=e("./stream/DataLengthProbe");function t(n,u,c,d,b){this.compressedSize=n,this.uncompressedSize=u,this.crc32=c,this.compression=d,this.compressedContent=b}t.prototype={getContentWorker:function(){var n=new s(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),u=this;return n.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),n},getCompressedWorker:function(){return new s(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},t.createWorkerFrom=function(n,u,c){return n.pipe(new o).pipe(new r("uncompressedSize")).pipe(u.compressWorker(c)).pipe(new r("compressedSize")).withStreamInfo("compression",u)},h.exports=t},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,h,f){var l=e("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},f.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,h,f){var l=e("./utils"),s=(function(){for(var o,r=[],t=0;t<256;t++){o=t;for(var n=0;n<8;n++)o=1&o?3988292384^o>>>1:o>>>1;r[t]=o}return r})();h.exports=function(o,r){return o!==void 0&&o.length?l.getTypeOf(o)!=="string"?(function(t,n,u,c){var d=s,b=c+u;t^=-1;for(var g=c;g<b;g++)t=t>>>8^d[255&(t^n[g])];return-1^t})(0|r,o,o.length,0):(function(t,n,u,c){var d=s,b=c+u;t^=-1;for(var g=c;g<b;g++)t=t>>>8^d[255&(t^n.charCodeAt(g))];return-1^t})(0|r,o,o.length,0):0}},{"./utils":32}],5:[function(e,h,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(e,h,f){var l=null;l=typeof Promise<"u"?Promise:e("lie"),h.exports={Promise:l}},{lie:37}],7:[function(e,h,f){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),o=e("./utils"),r=e("./stream/GenericWorker"),t=l?"uint8array":"array";function n(u,c){r.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=c,this.meta={}}f.magic="\b\0",o.inherits(n,r),n.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(t,u.data),!1)},n.prototype.flush=function(){r.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},n.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},n.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(c){u.push({data:c,meta:u.meta})}},f.compressWorker=function(u){return new n("Deflate",u)},f.uncompressWorker=function(){return new n("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,h,f){function l(d,b){var g,p="";for(g=0;g<b;g++)p+=String.fromCharCode(255&d),d>>>=8;return p}function s(d,b,g,p,x,y){var v,S,N=d.file,R=d.compression,B=y!==t.utf8encode,M=o.transformTo("string",y(N.name)),F=o.transformTo("string",t.utf8encode(N.name)),q=N.comment,V=o.transformTo("string",y(q)),O=o.transformTo("string",t.utf8encode(q)),T=F.length!==N.name.length,A=O.length!==q.length,C="",w="",_="",j=N.dir,k=N.date,E={crc32:0,compressedSize:0,uncompressedSize:0};b&&!g||(E.crc32=d.crc32,E.compressedSize=d.compressedSize,E.uncompressedSize=d.uncompressedSize);var I=0;b&&(I|=8),B||!T&&!A||(I|=2048);var D=0,X=0;j&&(D|=16),x==="UNIX"?(X=798,D|=(function(K,U){var J=K;return K||(J=U?16893:33204),(65535&J)<<16})(N.unixPermissions,j)):(X=20,D|=(function(K){return 63&(K||0)})(N.dosPermissions)),v=k.getUTCHours(),v<<=6,v|=k.getUTCMinutes(),v<<=5,v|=k.getUTCSeconds()/2,S=k.getUTCFullYear()-1980,S<<=4,S|=k.getUTCMonth()+1,S<<=5,S|=k.getUTCDate(),T&&(w=l(1,1)+l(n(M),4)+F,C+="up"+l(w.length,2)+w),A&&(_=l(1,1)+l(n(V),4)+O,C+="uc"+l(_.length,2)+_);var G="";return G+=`
\0`,G+=l(I,2),G+=R.magic,G+=l(v,2),G+=l(S,2),G+=l(E.crc32,4),G+=l(E.compressedSize,4),G+=l(E.uncompressedSize,4),G+=l(M.length,2),G+=l(C.length,2),{fileRecord:u.LOCAL_FILE_HEADER+G+M+C,dirRecord:u.CENTRAL_FILE_HEADER+l(X,2)+G+l(V.length,2)+"\0\0\0\0"+l(D,4)+l(p,4)+M+C+V}}var o=e("../utils"),r=e("../stream/GenericWorker"),t=e("../utf8"),n=e("../crc32"),u=e("../signature");function c(d,b,g,p){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=g,this.encodeFileName=p,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,r),c.prototype.push=function(d){var b=d.meta.percent||0,g=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,r.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:g?(b+100*(g-p-1))/g:100}}))},c.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var b=this.streamFiles&&!d.file.dir;if(b){var g=s(d,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(d){this.accumulate=!1;var b=this.streamFiles&&!d.file.dir,g=s(d,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),b)this.push({data:(function(p){return u.DATA_DESCRIPTOR+l(p.crc32,4)+l(p.compressedSize,4)+l(p.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var d=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var g=this.bytesWritten-d,p=(function(x,y,v,S,N){var R=o.transformTo("string",N(S));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(x,2)+l(x,2)+l(y,4)+l(v,4)+l(R.length,2)+R})(this.dirRecords.length,g,d,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(d){this._sources.push(d);var b=this;return d.on("data",function(g){b.processChunk(g)}),d.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),d.on("error",function(g){b.error(g)}),this},c.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(d){var b=this._sources;if(!r.prototype.error.call(this,d))return!1;for(var g=0;g<b.length;g++)try{b[g].error(d)}catch{}return!0},c.prototype.lock=function(){r.prototype.lock.call(this);for(var d=this._sources,b=0;b<d.length;b++)d[b].lock()},h.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,h,f){var l=e("../compressions"),s=e("./ZipFileWorker");f.generateWorker=function(o,r,t){var n=new s(r.streamFiles,t,r.platform,r.encodeFileName),u=0;try{o.forEach(function(c,d){u++;var b=(function(y,v){var S=y||v,N=l[S];if(!N)throw new Error(S+" is not a valid compression method !");return N})(d.options.compression,r.compression),g=d.options.compressionOptions||r.compressionOptions||{},p=d.dir,x=d.date;d._compressWorker(b,g).withStreamInfo("file",{name:c,dir:p,date:x,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(n)}),n.entriesCount=u}catch(c){n.error(c)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,h,f){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new l;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(l.prototype=e("./object")).loadAsync=e("./load"),l.support=e("./support"),l.defaults=e("./defaults"),l.version="3.10.1",l.loadAsync=function(s,o){return new l().loadAsync(s,o)},l.external=e("./external"),h.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,h,f){var l=e("./utils"),s=e("./external"),o=e("./utf8"),r=e("./zipEntries"),t=e("./stream/Crc32Probe"),n=e("./nodejsUtils");function u(c){return new s.Promise(function(d,b){var g=c.decompressed.getContentWorker().pipe(new t);g.on("error",function(p){b(p)}).on("end",function(){g.streamInfo.crc32!==c.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}h.exports=function(c,d){var b=this;return d=l.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),n.isNode&&n.isStream(c)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",c,!0,d.optimizedBinaryString,d.base64).then(function(g){var p=new r(d);return p.load(g),p}).then(function(g){var p=[s.Promise.resolve(g)],x=g.files;if(d.checkCRC32)for(var y=0;y<x.length;y++)p.push(u(x[y]));return s.Promise.all(p)}).then(function(g){for(var p=g.shift(),x=p.files,y=0;y<x.length;y++){var v=x[y],S=v.fileNameStr,N=l.resolve(v.fileNameStr);b.file(N,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:d.createFolders}),v.dir||(b.file(N).unsafeOriginalName=S)}return p.zipComment.length&&(b.comment=p.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,h,f){var l=e("../utils"),s=e("../stream/GenericWorker");function o(r,t){s.call(this,"Nodejs stream input adapter for "+r),this._upstreamEnded=!1,this._bindStream(t)}l.inherits(o,s),o.prototype._bindStream=function(r){var t=this;(this._stream=r).pause(),r.on("data",function(n){t.push({data:n,meta:{percent:0}})}).on("error",function(n){t.isPaused?this.generatedError=n:t.error(n)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,h,f){var l=e("readable-stream").Readable;function s(o,r,t){l.call(this,r),this._helper=o;var n=this;o.on("data",function(u,c){n.push(u)||n._helper.pause(),t&&t(c)}).on("error",function(u){n.emit("error",u)}).on("end",function(){n.push(null)})}e("../utils").inherits(s,l),s.prototype._read=function(){this._helper.resume()},h.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,h,f){h.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,s);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,s)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var s=new Buffer(l);return s.fill(0),s},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(e,h,f){function l(N,R,B){var M,F=o.getTypeOf(R),q=o.extend(B||{},n);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(N=x(N)),q.createFolders&&(M=p(N))&&y.call(this,M,!0);var V=F==="string"&&q.binary===!1&&q.base64===!1;B&&B.binary!==void 0||(q.binary=!V),(R instanceof u&&R.uncompressedSize===0||q.dir||!R||R.length===0)&&(q.base64=!1,q.binary=!0,R="",q.compression="STORE",F="string");var O=null;O=R instanceof u||R instanceof r?R:b.isNode&&b.isStream(R)?new g(N,R):o.prepareContent(N,R,q.binary,q.optimizedBinaryString,q.base64);var T=new c(N,O,q);this.files[N]=T}var s=e("./utf8"),o=e("./utils"),r=e("./stream/GenericWorker"),t=e("./stream/StreamHelper"),n=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),b=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),p=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var R=N.lastIndexOf("/");return 0<R?N.substring(0,R):""},x=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},y=function(N,R){return R=R!==void 0?R:n.createFolders,N=x(N),this.files[N]||l.call(this,N,null,{dir:!0,createFolders:R}),this.files[N]};function v(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var R,B,M;for(R in this.files)M=this.files[R],(B=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&N(B,M)},filter:function(N){var R=[];return this.forEach(function(B,M){N(B,M)&&R.push(M)}),R},file:function(N,R,B){if(arguments.length!==1)return N=this.root+N,l.call(this,N,R,B),this;if(v(N)){var M=N;return this.filter(function(q,V){return!V.dir&&M.test(q)})}var F=this.files[this.root+N];return F&&!F.dir?F:null},folder:function(N){if(!N)return this;if(v(N))return this.filter(function(F,q){return q.dir&&N.test(F)});var R=this.root+N,B=y.call(this,R),M=this.clone();return M.root=B.name,M},remove:function(N){N=this.root+N;var R=this.files[N];if(R||(N.slice(-1)!=="/"&&(N+="/"),R=this.files[N]),R&&!R.dir)delete this.files[N];else for(var B=this.filter(function(F,q){return q.name.slice(0,N.length)===N}),M=0;M<B.length;M++)delete this.files[B[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var R,B={};try{if((B=o.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");o.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var M=B.comment||this.comment||"";R=d.generateWorker(this,B,M)}catch(F){(R=new r("error")).error(F)}return new t(R,B.type||"string",B.mimeType)},generateAsync:function(N,R){return this.generateInternalStream(N).accumulate(R)},generateNodeStream:function(N,R){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(R)}};h.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,h,f){h.exports=e("stream")},{stream:void 0}],17:[function(e,h,f){var l=e("./DataReader");function s(o){l.call(this,o);for(var r=0;r<this.data.length;r++)o[r]=255&o[r]}e("../utils").inherits(s,l),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var r=o.charCodeAt(0),t=o.charCodeAt(1),n=o.charCodeAt(2),u=o.charCodeAt(3),c=this.length-4;0<=c;--c)if(this.data[c]===r&&this.data[c+1]===t&&this.data[c+2]===n&&this.data[c+3]===u)return c-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var r=o.charCodeAt(0),t=o.charCodeAt(1),n=o.charCodeAt(2),u=o.charCodeAt(3),c=this.readData(4);return r===c[0]&&t===c[1]&&n===c[2]&&u===c[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,r},h.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,h,f){var l=e("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var r,t=0;for(this.checkOffset(o),r=this.index+o-1;r>=this.index;r--)t=(t<<8)+this.byteAt(r);return this.index+=o,t},readString:function(o){return l.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},h.exports=s},{"../utils":32}],19:[function(e,h,f){var l=e("./Uint8ArrayReader");function s(o){l.call(this,o)}e("../utils").inherits(s,l),s.prototype.readData=function(o){this.checkOffset(o);var r=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,r},h.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,h,f){var l=e("./DataReader");function s(o){l.call(this,o)}e("../utils").inherits(s,l),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var r=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,r},h.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,h,f){var l=e("./ArrayReader");function s(o){l.call(this,o)}e("../utils").inherits(s,l),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,r},h.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,h,f){var l=e("../utils"),s=e("../support"),o=e("./ArrayReader"),r=e("./StringReader"),t=e("./NodeBufferReader"),n=e("./Uint8ArrayReader");h.exports=function(u){var c=l.getTypeOf(u);return l.checkSupport(c),c!=="string"||s.uint8array?c==="nodebuffer"?new t(u):s.uint8array?new n(l.transformTo("uint8array",u)):new o(l.transformTo("array",u)):new r(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,h,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,h,f){var l=e("./GenericWorker"),s=e("../utils");function o(r){l.call(this,"ConvertWorker to "+r),this.destType=r}s.inherits(o,l),o.prototype.processChunk=function(r){this.push({data:s.transformTo(this.destType,r.data),meta:r.meta})},h.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,h,f){var l=e("./GenericWorker"),s=e("../crc32");function o(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,l),o.prototype.processChunk=function(r){this.streamInfo.crc32=s(r.data,this.streamInfo.crc32||0),this.push(r)},h.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,h,f){var l=e("../utils"),s=e("./GenericWorker");function o(r){s.call(this,"DataLengthProbe for "+r),this.propName=r,this.withStreamInfo(r,0)}l.inherits(o,s),o.prototype.processChunk=function(r){if(r){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+r.data.length}s.prototype.processChunk.call(this,r)},h.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,h,f){var l=e("../utils"),s=e("./GenericWorker");function o(r){s.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,r.then(function(n){t.dataIsReady=!0,t.data=n,t.max=n&&n.length||0,t.type=l.getTypeOf(n),t.isPaused||t._tickAndRepeat()},function(n){t.error(n)})}l.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var r=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,t);break;case"uint8array":r=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":r=this.data.slice(this.index,t)}return this.index=t,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,h,f){function l(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var r=0;r<this._listeners[s].length;r++)this._listeners[s][r].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(r){o.processChunk(r)}),s.on("end",function(){o.end()}),s.on("error",function(r){o.error(r)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},h.exports=l},{}],29:[function(e,h,f){var l=e("../utils"),s=e("./ConvertWorker"),o=e("./GenericWorker"),r=e("../base64"),t=e("../support"),n=e("../external"),u=null;if(t.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function c(b,g){return new n.Promise(function(p,x){var y=[],v=b._internalType,S=b._outputType,N=b._mimeType;b.on("data",function(R,B){y.push(R),g&&g(B)}).on("error",function(R){y=[],x(R)}).on("end",function(){try{var R=(function(B,M,F){switch(B){case"blob":return l.newBlob(l.transformTo("arraybuffer",M),F);case"base64":return r.encode(M);default:return l.transformTo(B,M)}})(S,(function(B,M){var F,q=0,V=null,O=0;for(F=0;F<M.length;F++)O+=M[F].length;switch(B){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(V=new Uint8Array(O),F=0;F<M.length;F++)V.set(M[F],q),q+=M[F].length;return V;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+B+"'")}})(v,y),N);p(R)}catch(B){x(B)}y=[]}).resume()})}function d(b,g,p){var x=g;switch(g){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=g,this._mimeType=p,l.checkSupport(x),this._worker=b.pipe(new s(x)),b.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}d.prototype={accumulate:function(b){return c(this,b)},on:function(b,g){var p=this;return b==="data"?this._worker.on(b,function(x){g.call(p,x.data,x.meta)}):this._worker.on(b,function(){l.delay(g,arguments,p)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},b)}},h.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,h,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var l=new ArrayBuffer(0);try{f.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(l),f.blob=s.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!e("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(e,h,f){for(var l=e("./utils"),s=e("./support"),o=e("./nodejsUtils"),r=e("./stream/GenericWorker"),t=new Array(256),n=0;n<256;n++)t[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;t[254]=t[254]=1;function u(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}f.utf8encode=function(d){return s.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(b){var g,p,x,y,v,S=b.length,N=0;for(y=0;y<S;y++)(64512&(p=b.charCodeAt(y)))==55296&&y+1<S&&(64512&(x=b.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(x-56320),y++),N+=p<128?1:p<2048?2:p<65536?3:4;for(g=s.uint8array?new Uint8Array(N):new Array(N),y=v=0;v<N;y++)(64512&(p=b.charCodeAt(y)))==55296&&y+1<S&&(64512&(x=b.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(x-56320),y++),p<128?g[v++]=p:(p<2048?g[v++]=192|p>>>6:(p<65536?g[v++]=224|p>>>12:(g[v++]=240|p>>>18,g[v++]=128|p>>>12&63),g[v++]=128|p>>>6&63),g[v++]=128|63&p);return g})(d)},f.utf8decode=function(d){return s.nodebuffer?l.transformTo("nodebuffer",d).toString("utf-8"):(function(b){var g,p,x,y,v=b.length,S=new Array(2*v);for(g=p=0;g<v;)if((x=b[g++])<128)S[p++]=x;else if(4<(y=t[x]))S[p++]=65533,g+=y-1;else{for(x&=y===2?31:y===3?15:7;1<y&&g<v;)x=x<<6|63&b[g++],y--;1<y?S[p++]=65533:x<65536?S[p++]=x:(x-=65536,S[p++]=55296|x>>10&1023,S[p++]=56320|1023&x)}return S.length!==p&&(S.subarray?S=S.subarray(0,p):S.length=p),l.applyFromCharCode(S)})(d=l.transformTo(s.uint8array?"uint8array":"array",d))},l.inherits(u,r),u.prototype.processChunk=function(d){var b=l.transformTo(s.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=b;(b=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),b.set(g,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var p=(function(y,v){var S;for((v=v||y.length)>y.length&&(v=y.length),S=v-1;0<=S&&(192&y[S])==128;)S--;return S<0||S===0?v:S+t[y[S]]>v?S:v})(b),x=b;p!==b.length&&(s.uint8array?(x=b.subarray(0,p),this.leftOver=b.subarray(p,b.length)):(x=b.slice(0,p),this.leftOver=b.slice(p,b.length))),this.push({data:f.utf8decode(x),meta:d.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=u,l.inherits(c,r),c.prototype.processChunk=function(d){this.push({data:f.utf8encode(d.data),meta:d.meta})},f.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,h,f){var l=e("./support"),s=e("./base64"),o=e("./nodejsUtils"),r=e("./external");function t(g){return g}function n(g,p){for(var x=0;x<g.length;++x)p[x]=255&g.charCodeAt(x);return p}e("setimmediate"),f.newBlob=function(g,p){f.checkSupport("blob");try{return new Blob([g],{type:p})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(g),x.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(g,p,x){var y=[],v=0,S=g.length;if(S<=x)return String.fromCharCode.apply(null,g);for(;v<S;)p==="array"||p==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(v,Math.min(v+x,S)))):y.push(String.fromCharCode.apply(null,g.subarray(v,Math.min(v+x,S)))),v+=x;return y.join("")},stringifyByChar:function(g){for(var p="",x=0;x<g.length;x++)p+=String.fromCharCode(g[x]);return p},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function c(g){var p=65536,x=f.getTypeOf(g),y=!0;if(x==="uint8array"?y=u.applyCanBeUsed.uint8array:x==="nodebuffer"&&(y=u.applyCanBeUsed.nodebuffer),y)for(;1<p;)try{return u.stringifyByChunk(g,x,p)}catch{p=Math.floor(p/2)}return u.stringifyByChar(g)}function d(g,p){for(var x=0;x<g.length;x++)p[x]=g[x];return p}f.applyFromCharCode=c;var b={};b.string={string:t,array:function(g){return n(g,new Array(g.length))},arraybuffer:function(g){return b.string.uint8array(g).buffer},uint8array:function(g){return n(g,new Uint8Array(g.length))},nodebuffer:function(g){return n(g,o.allocBuffer(g.length))}},b.array={string:c,array:t,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},b.arraybuffer={string:function(g){return c(new Uint8Array(g))},array:function(g){return d(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:t,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},b.uint8array={string:c,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:t,nodebuffer:function(g){return o.newBufferFrom(g)}},b.nodebuffer={string:c,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return b.nodebuffer.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:t},f.transformTo=function(g,p){if(p=p||"",!g)return p;f.checkSupport(g);var x=f.getTypeOf(p);return b[x][g](p)},f.resolve=function(g){for(var p=g.split("/"),x=[],y=0;y<p.length;y++){var v=p[y];v==="."||v===""&&y!==0&&y!==p.length-1||(v===".."?x.pop():x.push(v))}return x.join("/")},f.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":l.nodebuffer&&o.isBuffer(g)?"nodebuffer":l.uint8array&&g instanceof Uint8Array?"uint8array":l.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(g){if(!l[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(g){var p,x,y="";for(x=0;x<(g||"").length;x++)y+="\\x"+((p=g.charCodeAt(x))<16?"0":"")+p.toString(16).toUpperCase();return y},f.delay=function(g,p,x){setImmediate(function(){g.apply(x||null,p||[])})},f.inherits=function(g,p){function x(){}x.prototype=p.prototype,g.prototype=new x},f.extend=function(){var g,p,x={};for(g=0;g<arguments.length;g++)for(p in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],p)&&x[p]===void 0&&(x[p]=arguments[g][p]);return x},f.prepareContent=function(g,p,x,y,v){return r.Promise.resolve(p).then(function(S){return l.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new r.Promise(function(N,R){var B=new FileReader;B.onload=function(M){N(M.target.result)},B.onerror=function(M){R(M.target.error)},B.readAsArrayBuffer(S)}):S}).then(function(S){var N=f.getTypeOf(S);return N?(N==="arraybuffer"?S=f.transformTo("uint8array",S):N==="string"&&(v?S=s.decode(S):x&&y!==!0&&(S=(function(R){return n(R,l.uint8array?new Uint8Array(R.length):new Array(R.length))})(S))),S):r.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,h,f){var l=e("./reader/readerFor"),s=e("./utils"),o=e("./signature"),r=e("./zipEntry"),t=e("./support");function n(u){this.files=[],this.loadOptions=u}n.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(c)+", expected "+s.pretty(u)+")")}},isSignature:function(u,c){var d=this.reader.index;this.reader.setIndex(u);var b=this.reader.readString(4)===c;return this.reader.setIndex(d),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),c=t.uint8array?"uint8array":"array",d=s.transformTo(c,u);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,c,d,b=this.zip64EndOfCentralSize-44;0<b;)u=this.reader.readInt(2),c=this.reader.readInt(4),d=this.reader.readData(c),this.zip64ExtensibleData[u]={id:u,length:c,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,c;for(u=0;u<this.files.length;u++)c=this.files[u],this.reader.setIndex(c.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),c.readLocalPart(this.reader),c.handleUTF8(),c.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var c=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var b=c-d;if(0<b)this.isSignature(c,o.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(u){this.reader=l(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=n},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,h,f){var l=e("./reader/readerFor"),s=e("./utils"),o=e("./compressedObject"),r=e("./crc32"),t=e("./utf8"),n=e("./compressions"),u=e("./support");function c(d,b){this.options=d,this.loadOptions=b}c.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var b,g;if(d.skip(22),this.fileNameLength=d.readInt(2),g=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(p){for(var x in n)if(Object.prototype.hasOwnProperty.call(n,x)&&n[x].magic===p)return n[x];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,b,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var b=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(b),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=l(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var b,g,p,x=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<x;)b=d.readInt(2),g=d.readInt(2),p=d.readData(g),this.extraFields[b]={id:b,length:g,value:p};d.setIndex(x)},handleUTF8:function(){var d=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=t.utf8decode(this.fileName),this.fileCommentStr=t.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var g=s.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var x=s.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var b=l(d.value);return b.readInt(1)!==1||r(this.fileName)!==b.readInt(4)?null:t.utf8decode(b.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var b=l(d.value);return b.readInt(1)!==1||r(this.fileComment)!==b.readInt(4)?null:t.utf8decode(b.readData(d.length-5))}return null}},h.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,h,f){function l(b,g,p){this.name=b,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=g,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var s=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),r=e("./utf8"),t=e("./compressedObject"),n=e("./stream/GenericWorker");l.prototype={internalStream:function(b){var g=null,p="string";try{if(!b)throw new Error("No output type specified.");var x=(p=b.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!x&&(g=g.pipe(new r.Utf8EncodeWorker)),!y&&x&&(g=g.pipe(new r.Utf8DecodeWorker))}catch(v){(g=new n("error")).error(v)}return new s(g,p,"")},async:function(b,g){return this.internalStream(b).accumulate(g)},nodeStream:function(b,g){return this.internalStream(b||"nodebuffer").toNodejsStream(g)},_compressWorker:function(b,g){if(this._data instanceof t&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new r.Utf8EncodeWorker)),t.createWorkerFrom(p,b,g)},_decompressWorker:function(){return this._data instanceof t?this._data.getContentWorker():this._data instanceof n?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)l.prototype[u[d]]=c;h.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,h,f){(function(l){var s,o,r=l.MutationObserver||l.WebKitMutationObserver;if(r){var t=0,n=new r(b),u=l.document.createTextNode("");n.observe(u,{characterData:!0}),s=function(){u.data=t=++t%2}}else if(l.setImmediate||l.MessageChannel===void 0)s="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var g=l.document.createElement("script");g.onreadystatechange=function(){b(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},l.document.documentElement.appendChild(g)}:function(){setTimeout(b,0)};else{var c=new l.MessageChannel;c.port1.onmessage=b,s=function(){c.port2.postMessage(0)}}var d=[];function b(){var g,p;o=!0;for(var x=d.length;x;){for(p=d,d=[],g=-1;++g<x;)p[g]();x=d.length}o=!1}h.exports=function(g){d.push(g)!==1||o||s()}}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,h,f){var l=e("immediate");function s(){}var o={},r=["REJECTED"],t=["FULFILLED"],n=["PENDING"];function u(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,x!==s&&g(this,x)}function c(x,y,v){this.promise=x,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function d(x,y,v){l(function(){var S;try{S=y(v)}catch(N){return o.reject(x,N)}S===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,S)})}function b(x){var y=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof y=="function")return function(){y.apply(x,arguments)}}function g(x,y){var v=!1;function S(B){v||(v=!0,o.reject(x,B))}function N(B){v||(v=!0,o.resolve(x,B))}var R=p(function(){y(N,S)});R.status==="error"&&S(R.value)}function p(x,y){var v={};try{v.value=x(y),v.status="success"}catch(S){v.status="error",v.value=S}return v}(h.exports=u).prototype.finally=function(x){if(typeof x!="function")return this;var y=this.constructor;return this.then(function(v){return y.resolve(x()).then(function(){return v})},function(v){return y.resolve(x()).then(function(){throw v})})},u.prototype.catch=function(x){return this.then(null,x)},u.prototype.then=function(x,y){if(typeof x!="function"&&this.state===t||typeof y!="function"&&this.state===r)return this;var v=new this.constructor(s);return this.state!==n?d(v,this.state===t?x:y,this.outcome):this.queue.push(new c(v,x,y)),v},c.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},c.prototype.otherCallFulfilled=function(x){d(this.promise,this.onFulfilled,x)},c.prototype.callRejected=function(x){o.reject(this.promise,x)},c.prototype.otherCallRejected=function(x){d(this.promise,this.onRejected,x)},o.resolve=function(x,y){var v=p(b,y);if(v.status==="error")return o.reject(x,v.value);var S=v.value;if(S)g(x,S);else{x.state=t,x.outcome=y;for(var N=-1,R=x.queue.length;++N<R;)x.queue[N].callFulfilled(y)}return x},o.reject=function(x,y){x.state=r,x.outcome=y;for(var v=-1,S=x.queue.length;++v<S;)x.queue[v].callRejected(y);return x},u.resolve=function(x){return x instanceof this?x:o.resolve(new this(s),x)},u.reject=function(x){var y=new this(s);return o.reject(y,x)},u.all=function(x){var y=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=x.length,S=!1;if(!v)return this.resolve([]);for(var N=new Array(v),R=0,B=-1,M=new this(s);++B<v;)F(x[B],B);return M;function F(q,V){y.resolve(q).then(function(O){N[V]=O,++R!==v||S||(S=!0,o.resolve(M,N))},function(O){S||(S=!0,o.reject(M,O))})}},u.race=function(x){var y=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=x.length,S=!1;if(!v)return this.resolve([]);for(var N=-1,R=new this(s);++N<v;)B=x[N],y.resolve(B).then(function(M){S||(S=!0,o.resolve(R,M))},function(M){S||(S=!0,o.reject(R,M))});var B;return R}},{immediate:36}],38:[function(e,h,f){var l={};(0,e("./lib/utils/common").assign)(l,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),h.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,h,f){var l=e("./zlib/deflate"),s=e("./utils/common"),o=e("./utils/strings"),r=e("./zlib/messages"),t=e("./zlib/zstream"),n=Object.prototype.toString,u=0,c=-1,d=0,b=8;function g(x){if(!(this instanceof g))return new g(x);this.options=s.assign({level:c,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},x||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t,this.strm.avail_out=0;var v=l.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(v!==u)throw new Error(r[v]);if(y.header&&l.deflateSetHeader(this.strm,y.header),y.dictionary){var S;if(S=typeof y.dictionary=="string"?o.string2buf(y.dictionary):n.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(v=l.deflateSetDictionary(this.strm,S))!==u)throw new Error(r[v]);this._dict_set=!0}}function p(x,y){var v=new g(y);if(v.push(x,!0),v.err)throw v.msg||r[v.err];return v.result}g.prototype.push=function(x,y){var v,S,N=this.strm,R=this.options.chunkSize;if(this.ended)return!1;S=y===~~y?y:y===!0?4:0,typeof x=="string"?N.input=o.string2buf(x):n.call(x)==="[object ArrayBuffer]"?N.input=new Uint8Array(x):N.input=x,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new s.Buf8(R),N.next_out=0,N.avail_out=R),(v=l.deflate(N,S))!==1&&v!==u)return this.onEnd(v),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(N.output,N.next_out))):this.onData(s.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&v!==1);return S===4?(v=l.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u):S!==2||(this.onEnd(u),!(N.avail_out=0))},g.prototype.onData=function(x){this.chunks.push(x)},g.prototype.onEnd=function(x){x===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},f.Deflate=g,f.deflate=p,f.deflateRaw=function(x,y){return(y=y||{}).raw=!0,p(x,y)},f.gzip=function(x,y){return(y=y||{}).gzip=!0,p(x,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,h,f){var l=e("./zlib/inflate"),s=e("./utils/common"),o=e("./utils/strings"),r=e("./zlib/constants"),t=e("./zlib/messages"),n=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function d(g){if(!(this instanceof d))return new d(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||g&&g.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&(15&p.windowBits)==0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var x=l.inflateInit2(this.strm,p.windowBits);if(x!==r.Z_OK)throw new Error(t[x]);this.header=new u,l.inflateGetHeader(this.strm,this.header)}function b(g,p){var x=new d(p);if(x.push(g,!0),x.err)throw x.msg||t[x.err];return x.result}d.prototype.push=function(g,p){var x,y,v,S,N,R,B=this.strm,M=this.options.chunkSize,F=this.options.dictionary,q=!1;if(this.ended)return!1;y=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof g=="string"?B.input=o.binstring2buf(g):c.call(g)==="[object ArrayBuffer]"?B.input=new Uint8Array(g):B.input=g,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(M),B.next_out=0,B.avail_out=M),(x=l.inflate(B,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&F&&(R=typeof F=="string"?o.string2buf(F):c.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,x=l.inflateSetDictionary(this.strm,R)),x===r.Z_BUF_ERROR&&q===!0&&(x=r.Z_OK,q=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&x!==r.Z_STREAM_END&&(B.avail_in!==0||y!==r.Z_FINISH&&y!==r.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=o.utf8border(B.output,B.next_out),S=B.next_out-v,N=o.buf2string(B.output,v),B.next_out=S,B.avail_out=M-S,S&&s.arraySet(B.output,B.output,v,S,0),this.onData(N)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(q=!0)}while((0<B.avail_in||B.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(y=r.Z_FINISH),y===r.Z_FINISH?(x=l.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):y!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),!(B.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},f.Inflate=d,f.inflate=b,f.inflateRaw=function(g,p){return(p=p||{}).raw=!0,b(g,p)},f.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,h,f){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var u in n)n.hasOwnProperty(u)&&(r[u]=n[u])}}return r},f.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var s={arraySet:function(r,t,n,u,c){if(t.subarray&&r.subarray)r.set(t.subarray(n,n+u),c);else for(var d=0;d<u;d++)r[c+d]=t[n+d]},flattenChunks:function(r){var t,n,u,c,d,b;for(t=u=0,n=r.length;t<n;t++)u+=r[t].length;for(b=new Uint8Array(u),t=c=0,n=r.length;t<n;t++)d=r[t],b.set(d,c),c+=d.length;return b}},o={arraySet:function(r,t,n,u,c){for(var d=0;d<u;d++)r[c+d]=t[n+d]},flattenChunks:function(r){return[].concat.apply([],r)}};f.setTyped=function(r){r?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,s)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,o))},f.setTyped(l)},{}],42:[function(e,h,f){var l=e("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var r=new l.Buf8(256),t=0;t<256;t++)r[t]=252<=t?6:248<=t?5:240<=t?4:224<=t?3:192<=t?2:1;function n(u,c){if(c<65537&&(u.subarray&&o||!u.subarray&&s))return String.fromCharCode.apply(null,l.shrinkBuf(u,c));for(var d="",b=0;b<c;b++)d+=String.fromCharCode(u[b]);return d}r[254]=r[254]=1,f.string2buf=function(u){var c,d,b,g,p,x=u.length,y=0;for(g=0;g<x;g++)(64512&(d=u.charCodeAt(g)))==55296&&g+1<x&&(64512&(b=u.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(b-56320),g++),y+=d<128?1:d<2048?2:d<65536?3:4;for(c=new l.Buf8(y),g=p=0;p<y;g++)(64512&(d=u.charCodeAt(g)))==55296&&g+1<x&&(64512&(b=u.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(b-56320),g++),d<128?c[p++]=d:(d<2048?c[p++]=192|d>>>6:(d<65536?c[p++]=224|d>>>12:(c[p++]=240|d>>>18,c[p++]=128|d>>>12&63),c[p++]=128|d>>>6&63),c[p++]=128|63&d);return c},f.buf2binstring=function(u){return n(u,u.length)},f.binstring2buf=function(u){for(var c=new l.Buf8(u.length),d=0,b=c.length;d<b;d++)c[d]=u.charCodeAt(d);return c},f.buf2string=function(u,c){var d,b,g,p,x=c||u.length,y=new Array(2*x);for(d=b=0;d<x;)if((g=u[d++])<128)y[b++]=g;else if(4<(p=r[g]))y[b++]=65533,d+=p-1;else{for(g&=p===2?31:p===3?15:7;1<p&&d<x;)g=g<<6|63&u[d++],p--;1<p?y[b++]=65533:g<65536?y[b++]=g:(g-=65536,y[b++]=55296|g>>10&1023,y[b++]=56320|1023&g)}return n(y,b)},f.utf8border=function(u,c){var d;for((c=c||u.length)>u.length&&(c=u.length),d=c-1;0<=d&&(192&u[d])==128;)d--;return d<0||d===0?c:d+r[u[d]]>c?d:c}},{"./common":41}],43:[function(e,h,f){h.exports=function(l,s,o,r){for(var t=65535&l|0,n=l>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;n=n+(t=t+s[r++]|0)|0,--u;);t%=65521,n%=65521}return t|n<<16|0}},{}],44:[function(e,h,f){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,h,f){var l=(function(){for(var s,o=[],r=0;r<256;r++){s=r;for(var t=0;t<8;t++)s=1&s?3988292384^s>>>1:s>>>1;o[r]=s}return o})();h.exports=function(s,o,r,t){var n=l,u=t+r;s^=-1;for(var c=t;c<u;c++)s=s>>>8^n[255&(s^o[c])];return-1^s}},{}],46:[function(e,h,f){var l,s=e("../utils/common"),o=e("./trees"),r=e("./adler32"),t=e("./crc32"),n=e("./messages"),u=0,c=4,d=0,b=-2,g=-1,p=4,x=2,y=8,v=9,S=286,N=30,R=19,B=2*S+1,M=15,F=3,q=258,V=q+F+1,O=42,T=113,A=1,C=2,w=3,_=4;function j(H,ce){return H.msg=n[ce],ce}function k(H){return(H<<1)-(4<H?9:0)}function E(H){for(var ce=H.length;0<=--ce;)H[ce]=0}function I(H){var ce=H.state,ae=ce.pending;ae>H.avail_out&&(ae=H.avail_out),ae!==0&&(s.arraySet(H.output,ce.pending_buf,ce.pending_out,ae,H.next_out),H.next_out+=ae,ce.pending_out+=ae,H.total_out+=ae,H.avail_out-=ae,ce.pending-=ae,ce.pending===0&&(ce.pending_out=0))}function D(H,ce){o._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,ce),H.block_start=H.strstart,I(H.strm)}function X(H,ce){H.pending_buf[H.pending++]=ce}function G(H,ce){H.pending_buf[H.pending++]=ce>>>8&255,H.pending_buf[H.pending++]=255&ce}function K(H,ce){var ae,Y,Q=H.max_chain_length,te=H.strstart,ie=H.prev_length,le=H.nice_match,ee=H.strstart>H.w_size-V?H.strstart-(H.w_size-V):0,oe=H.window,de=H.w_mask,fe=H.prev,be=H.strstart+q,he=oe[te+ie-1],pe=oe[te+ie];H.prev_length>=H.good_match&&(Q>>=2),le>H.lookahead&&(le=H.lookahead);do if(oe[(ae=ce)+ie]===pe&&oe[ae+ie-1]===he&&oe[ae]===oe[te]&&oe[++ae]===oe[te+1]){te+=2,ae++;do;while(oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&oe[++te]===oe[++ae]&&te<be);if(Y=q-(be-te),te=be-q,ie<Y){if(H.match_start=ce,le<=(ie=Y))break;he=oe[te+ie-1],pe=oe[te+ie]}}while((ce=fe[ce&de])>ee&&--Q!=0);return ie<=H.lookahead?ie:H.lookahead}function U(H){var ce,ae,Y,Q,te,ie,le,ee,oe,de,fe=H.w_size;do{if(Q=H.window_size-H.lookahead-H.strstart,H.strstart>=fe+(fe-V)){for(s.arraySet(H.window,H.window,fe,fe,0),H.match_start-=fe,H.strstart-=fe,H.block_start-=fe,ce=ae=H.hash_size;Y=H.head[--ce],H.head[ce]=fe<=Y?Y-fe:0,--ae;);for(ce=ae=fe;Y=H.prev[--ce],H.prev[ce]=fe<=Y?Y-fe:0,--ae;);Q+=fe}if(H.strm.avail_in===0)break;if(ie=H.strm,le=H.window,ee=H.strstart+H.lookahead,oe=Q,de=void 0,de=ie.avail_in,oe<de&&(de=oe),ae=de===0?0:(ie.avail_in-=de,s.arraySet(le,ie.input,ie.next_in,de,ee),ie.state.wrap===1?ie.adler=r(ie.adler,le,de,ee):ie.state.wrap===2&&(ie.adler=t(ie.adler,le,de,ee)),ie.next_in+=de,ie.total_in+=de,de),H.lookahead+=ae,H.lookahead+H.insert>=F)for(te=H.strstart-H.insert,H.ins_h=H.window[te],H.ins_h=(H.ins_h<<H.hash_shift^H.window[te+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[te+F-1])&H.hash_mask,H.prev[te&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=te,te++,H.insert--,!(H.lookahead+H.insert<F)););}while(H.lookahead<V&&H.strm.avail_in!==0)}function J(H,ce){for(var ae,Y;;){if(H.lookahead<V){if(U(H),H.lookahead<V&&ce===u)return A;if(H.lookahead===0)break}if(ae=0,H.lookahead>=F&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+F-1])&H.hash_mask,ae=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),ae!==0&&H.strstart-ae<=H.w_size-V&&(H.match_length=K(H,ae)),H.match_length>=F)if(Y=o._tr_tally(H,H.strstart-H.match_start,H.match_length-F),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=F){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+F-1])&H.hash_mask,ae=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else Y=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(Y&&(D(H,!1),H.strm.avail_out===0))return A}return H.insert=H.strstart<F-1?H.strstart:F-1,ce===c?(D(H,!0),H.strm.avail_out===0?w:_):H.last_lit&&(D(H,!1),H.strm.avail_out===0)?A:C}function $(H,ce){for(var ae,Y,Q;;){if(H.lookahead<V){if(U(H),H.lookahead<V&&ce===u)return A;if(H.lookahead===0)break}if(ae=0,H.lookahead>=F&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+F-1])&H.hash_mask,ae=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=F-1,ae!==0&&H.prev_length<H.max_lazy_match&&H.strstart-ae<=H.w_size-V&&(H.match_length=K(H,ae),H.match_length<=5&&(H.strategy===1||H.match_length===F&&4096<H.strstart-H.match_start)&&(H.match_length=F-1)),H.prev_length>=F&&H.match_length<=H.prev_length){for(Q=H.strstart+H.lookahead-F,Y=o._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-F),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=Q&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+F-1])&H.hash_mask,ae=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=F-1,H.strstart++,Y&&(D(H,!1),H.strm.avail_out===0))return A}else if(H.match_available){if((Y=o._tr_tally(H,0,H.window[H.strstart-1]))&&D(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return A}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(Y=o._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<F-1?H.strstart:F-1,ce===c?(D(H,!0),H.strm.avail_out===0?w:_):H.last_lit&&(D(H,!1),H.strm.avail_out===0)?A:C}function L(H,ce,ae,Y,Q){this.good_length=H,this.max_lazy=ce,this.nice_length=ae,this.max_chain=Y,this.func=Q}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*N+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),E(this.dyn_ltree),E(this.dyn_dtree),E(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(M+1),this.heap=new s.Buf16(2*S+1),E(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*S+1),E(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(H){var ce;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=x,(ce=H.state).pending=0,ce.pending_out=0,ce.wrap<0&&(ce.wrap=-ce.wrap),ce.status=ce.wrap?O:T,H.adler=ce.wrap===2?0:1,ce.last_flush=u,o._tr_init(ce),d):j(H,b)}function ne(H){var ce=re(H);return ce===d&&(function(ae){ae.window_size=2*ae.w_size,E(ae.head),ae.max_lazy_match=l[ae.level].max_lazy,ae.good_match=l[ae.level].good_length,ae.nice_match=l[ae.level].nice_length,ae.max_chain_length=l[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=F-1,ae.match_available=0,ae.ins_h=0})(H.state),ce}function se(H,ce,ae,Y,Q,te){if(!H)return b;var ie=1;if(ce===g&&(ce=6),Y<0?(ie=0,Y=-Y):15<Y&&(ie=2,Y-=16),Q<1||v<Q||ae!==y||Y<8||15<Y||ce<0||9<ce||te<0||p<te)return j(H,b);Y===8&&(Y=9);var le=new W;return(H.state=le).strm=H,le.wrap=ie,le.gzhead=null,le.w_bits=Y,le.w_size=1<<le.w_bits,le.w_mask=le.w_size-1,le.hash_bits=Q+7,le.hash_size=1<<le.hash_bits,le.hash_mask=le.hash_size-1,le.hash_shift=~~((le.hash_bits+F-1)/F),le.window=new s.Buf8(2*le.w_size),le.head=new s.Buf16(le.hash_size),le.prev=new s.Buf16(le.w_size),le.lit_bufsize=1<<Q+6,le.pending_buf_size=4*le.lit_bufsize,le.pending_buf=new s.Buf8(le.pending_buf_size),le.d_buf=1*le.lit_bufsize,le.l_buf=3*le.lit_bufsize,le.level=ce,le.strategy=te,le.method=ae,ne(H)}l=[new L(0,0,0,0,function(H,ce){var ae=65535;for(ae>H.pending_buf_size-5&&(ae=H.pending_buf_size-5);;){if(H.lookahead<=1){if(U(H),H.lookahead===0&&ce===u)return A;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var Y=H.block_start+ae;if((H.strstart===0||H.strstart>=Y)&&(H.lookahead=H.strstart-Y,H.strstart=Y,D(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-V&&(D(H,!1),H.strm.avail_out===0))return A}return H.insert=0,ce===c?(D(H,!0),H.strm.avail_out===0?w:_):(H.strstart>H.block_start&&(D(H,!1),H.strm.avail_out),A)}),new L(4,4,8,4,J),new L(4,5,16,8,J),new L(4,6,32,32,J),new L(4,4,16,16,$),new L(8,16,32,32,$),new L(8,16,128,128,$),new L(8,32,128,256,$),new L(32,128,258,1024,$),new L(32,258,258,4096,$)],f.deflateInit=function(H,ce){return se(H,ce,y,15,8,0)},f.deflateInit2=se,f.deflateReset=ne,f.deflateResetKeep=re,f.deflateSetHeader=function(H,ce){return H&&H.state?H.state.wrap!==2?b:(H.state.gzhead=ce,d):b},f.deflate=function(H,ce){var ae,Y,Q,te;if(!H||!H.state||5<ce||ce<0)return H?j(H,b):b;if(Y=H.state,!H.output||!H.input&&H.avail_in!==0||Y.status===666&&ce!==c)return j(H,H.avail_out===0?-5:b);if(Y.strm=H,ae=Y.last_flush,Y.last_flush=ce,Y.status===O)if(Y.wrap===2)H.adler=0,X(Y,31),X(Y,139),X(Y,8),Y.gzhead?(X(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),X(Y,255&Y.gzhead.time),X(Y,Y.gzhead.time>>8&255),X(Y,Y.gzhead.time>>16&255),X(Y,Y.gzhead.time>>24&255),X(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),X(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(X(Y,255&Y.gzhead.extra.length),X(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(H.adler=t(H.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(X(Y,0),X(Y,0),X(Y,0),X(Y,0),X(Y,0),X(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),X(Y,3),Y.status=T);else{var ie=y+(Y.w_bits-8<<4)<<8;ie|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(ie|=32),ie+=31-ie%31,Y.status=T,G(Y,ie),Y.strstart!==0&&(G(Y,H.adler>>>16),G(Y,65535&H.adler)),H.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(Q=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),I(H),Q=Y.pending,Y.pending!==Y.pending_buf_size));)X(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){Q=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),I(H),Q=Y.pending,Y.pending===Y.pending_buf_size)){te=1;break}te=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,X(Y,te)}while(te!==0);Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),te===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){Q=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),I(H),Q=Y.pending,Y.pending===Y.pending_buf_size)){te=1;break}te=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,X(Y,te)}while(te!==0);Y.gzhead.hcrc&&Y.pending>Q&&(H.adler=t(H.adler,Y.pending_buf,Y.pending-Q,Q)),te===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&I(H),Y.pending+2<=Y.pending_buf_size&&(X(Y,255&H.adler),X(Y,H.adler>>8&255),H.adler=0,Y.status=T)):Y.status=T),Y.pending!==0){if(I(H),H.avail_out===0)return Y.last_flush=-1,d}else if(H.avail_in===0&&k(ce)<=k(ae)&&ce!==c)return j(H,-5);if(Y.status===666&&H.avail_in!==0)return j(H,-5);if(H.avail_in!==0||Y.lookahead!==0||ce!==u&&Y.status!==666){var le=Y.strategy===2?(function(ee,oe){for(var de;;){if(ee.lookahead===0&&(U(ee),ee.lookahead===0)){if(oe===u)return A;break}if(ee.match_length=0,de=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,de&&(D(ee,!1),ee.strm.avail_out===0))return A}return ee.insert=0,oe===c?(D(ee,!0),ee.strm.avail_out===0?w:_):ee.last_lit&&(D(ee,!1),ee.strm.avail_out===0)?A:C})(Y,ce):Y.strategy===3?(function(ee,oe){for(var de,fe,be,he,pe=ee.window;;){if(ee.lookahead<=q){if(U(ee),ee.lookahead<=q&&oe===u)return A;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=F&&0<ee.strstart&&(fe=pe[be=ee.strstart-1])===pe[++be]&&fe===pe[++be]&&fe===pe[++be]){he=ee.strstart+q;do;while(fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&fe===pe[++be]&&be<he);ee.match_length=q-(he-be),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=F?(de=o._tr_tally(ee,1,ee.match_length-F),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(de=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),de&&(D(ee,!1),ee.strm.avail_out===0))return A}return ee.insert=0,oe===c?(D(ee,!0),ee.strm.avail_out===0?w:_):ee.last_lit&&(D(ee,!1),ee.strm.avail_out===0)?A:C})(Y,ce):l[Y.level].func(Y,ce);if(le!==w&&le!==_||(Y.status=666),le===A||le===w)return H.avail_out===0&&(Y.last_flush=-1),d;if(le===C&&(ce===1?o._tr_align(Y):ce!==5&&(o._tr_stored_block(Y,0,0,!1),ce===3&&(E(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),I(H),H.avail_out===0))return Y.last_flush=-1,d}return ce!==c?d:Y.wrap<=0?1:(Y.wrap===2?(X(Y,255&H.adler),X(Y,H.adler>>8&255),X(Y,H.adler>>16&255),X(Y,H.adler>>24&255),X(Y,255&H.total_in),X(Y,H.total_in>>8&255),X(Y,H.total_in>>16&255),X(Y,H.total_in>>24&255)):(G(Y,H.adler>>>16),G(Y,65535&H.adler)),I(H),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?d:1)},f.deflateEnd=function(H){var ce;return H&&H.state?(ce=H.state.status)!==O&&ce!==69&&ce!==73&&ce!==91&&ce!==103&&ce!==T&&ce!==666?j(H,b):(H.state=null,ce===T?j(H,-3):d):b},f.deflateSetDictionary=function(H,ce){var ae,Y,Q,te,ie,le,ee,oe,de=ce.length;if(!H||!H.state||(te=(ae=H.state).wrap)===2||te===1&&ae.status!==O||ae.lookahead)return b;for(te===1&&(H.adler=r(H.adler,ce,de,0)),ae.wrap=0,de>=ae.w_size&&(te===0&&(E(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),oe=new s.Buf8(ae.w_size),s.arraySet(oe,ce,de-ae.w_size,ae.w_size,0),ce=oe,de=ae.w_size),ie=H.avail_in,le=H.next_in,ee=H.input,H.avail_in=de,H.next_in=0,H.input=ce,U(ae);ae.lookahead>=F;){for(Y=ae.strstart,Q=ae.lookahead-(F-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[Y+F-1])&ae.hash_mask,ae.prev[Y&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=Y,Y++,--Q;);ae.strstart=Y,ae.lookahead=F-1,U(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=F-1,ae.match_available=0,H.next_in=le,H.input=ee,H.avail_in=ie,ae.wrap=te,d},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,h,f){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,h,f){h.exports=function(l,s){var o,r,t,n,u,c,d,b,g,p,x,y,v,S,N,R,B,M,F,q,V,O,T,A,C;o=l.state,r=l.next_in,A=l.input,t=r+(l.avail_in-5),n=l.next_out,C=l.output,u=n-(s-l.avail_out),c=n+(l.avail_out-257),d=o.dmax,b=o.wsize,g=o.whave,p=o.wnext,x=o.window,y=o.hold,v=o.bits,S=o.lencode,N=o.distcode,R=(1<<o.lenbits)-1,B=(1<<o.distbits)-1;e:do{v<15&&(y+=A[r++]<<v,v+=8,y+=A[r++]<<v,v+=8),M=S[y&R];t:for(;;){if(y>>>=F=M>>>24,v-=F,(F=M>>>16&255)===0)C[n++]=65535&M;else{if(!(16&F)){if((64&F)==0){M=S[(65535&M)+(y&(1<<F)-1)];continue t}if(32&F){o.mode=12;break e}l.msg="invalid literal/length code",o.mode=30;break e}q=65535&M,(F&=15)&&(v<F&&(y+=A[r++]<<v,v+=8),q+=y&(1<<F)-1,y>>>=F,v-=F),v<15&&(y+=A[r++]<<v,v+=8,y+=A[r++]<<v,v+=8),M=N[y&B];r:for(;;){if(y>>>=F=M>>>24,v-=F,!(16&(F=M>>>16&255))){if((64&F)==0){M=N[(65535&M)+(y&(1<<F)-1)];continue r}l.msg="invalid distance code",o.mode=30;break e}if(V=65535&M,v<(F&=15)&&(y+=A[r++]<<v,(v+=8)<F&&(y+=A[r++]<<v,v+=8)),d<(V+=y&(1<<F)-1)){l.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=F,v-=F,(F=n-u)<V){if(g<(F=V-F)&&o.sane){l.msg="invalid distance too far back",o.mode=30;break e}if(T=x,(O=0)===p){if(O+=b-F,F<q){for(q-=F;C[n++]=x[O++],--F;);O=n-V,T=C}}else if(p<F){if(O+=b+p-F,(F-=p)<q){for(q-=F;C[n++]=x[O++],--F;);if(O=0,p<q){for(q-=F=p;C[n++]=x[O++],--F;);O=n-V,T=C}}}else if(O+=p-F,F<q){for(q-=F;C[n++]=x[O++],--F;);O=n-V,T=C}for(;2<q;)C[n++]=T[O++],C[n++]=T[O++],C[n++]=T[O++],q-=3;q&&(C[n++]=T[O++],1<q&&(C[n++]=T[O++]))}else{for(O=n-V;C[n++]=C[O++],C[n++]=C[O++],C[n++]=C[O++],2<(q-=3););q&&(C[n++]=C[O++],1<q&&(C[n++]=C[O++]))}break}}break}}while(r<t&&n<c);r-=q=v>>3,y&=(1<<(v-=q<<3))-1,l.next_in=r,l.next_out=n,l.avail_in=r<t?t-r+5:5-(r-t),l.avail_out=n<c?c-n+257:257-(n-c),o.hold=y,o.bits=v}},{}],49:[function(e,h,f){var l=e("../utils/common"),s=e("./adler32"),o=e("./crc32"),r=e("./inffast"),t=e("./inftrees"),n=1,u=2,c=0,d=-2,b=1,g=852,p=592;function x(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(O){var T;return O&&O.state?(T=O.state,O.total_in=O.total_out=T.total=0,O.msg="",T.wrap&&(O.adler=1&T.wrap),T.mode=b,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new l.Buf32(g),T.distcode=T.distdyn=new l.Buf32(p),T.sane=1,T.back=-1,c):d}function S(O){var T;return O&&O.state?((T=O.state).wsize=0,T.whave=0,T.wnext=0,v(O)):d}function N(O,T){var A,C;return O&&O.state?(C=O.state,T<0?(A=0,T=-T):(A=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?d:(C.window!==null&&C.wbits!==T&&(C.window=null),C.wrap=A,C.wbits=T,S(O))):d}function R(O,T){var A,C;return O?(C=new y,(O.state=C).window=null,(A=N(O,T))!==c&&(O.state=null),A):d}var B,M,F=!0;function q(O){if(F){var T;for(B=new l.Buf32(512),M=new l.Buf32(32),T=0;T<144;)O.lens[T++]=8;for(;T<256;)O.lens[T++]=9;for(;T<280;)O.lens[T++]=7;for(;T<288;)O.lens[T++]=8;for(t(n,O.lens,0,288,B,0,O.work,{bits:9}),T=0;T<32;)O.lens[T++]=5;t(u,O.lens,0,32,M,0,O.work,{bits:5}),F=!1}O.lencode=B,O.lenbits=9,O.distcode=M,O.distbits=5}function V(O,T,A,C){var w,_=O.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new l.Buf8(_.wsize)),C>=_.wsize?(l.arraySet(_.window,T,A-_.wsize,_.wsize,0),_.wnext=0,_.whave=_.wsize):(C<(w=_.wsize-_.wnext)&&(w=C),l.arraySet(_.window,T,A-C,w,_.wnext),(C-=w)?(l.arraySet(_.window,T,A-C,C,0),_.wnext=C,_.whave=_.wsize):(_.wnext+=w,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=w))),0}f.inflateReset=S,f.inflateReset2=N,f.inflateResetKeep=v,f.inflateInit=function(O){return R(O,15)},f.inflateInit2=R,f.inflate=function(O,T){var A,C,w,_,j,k,E,I,D,X,G,K,U,J,$,L,W,re,ne,se,H,ce,ae,Y,Q=0,te=new l.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return d;(A=O.state).mode===12&&(A.mode=13),j=O.next_out,w=O.output,E=O.avail_out,_=O.next_in,C=O.input,k=O.avail_in,I=A.hold,D=A.bits,X=k,G=E,ce=c;e:for(;;)switch(A.mode){case b:if(A.wrap===0){A.mode=13;break}for(;D<16;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(2&A.wrap&&I===35615){te[A.check=0]=255&I,te[1]=I>>>8&255,A.check=o(A.check,te,2,0),D=I=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&I)<<8)+(I>>8))%31){O.msg="incorrect header check",A.mode=30;break}if((15&I)!=8){O.msg="unknown compression method",A.mode=30;break}if(D-=4,H=8+(15&(I>>>=4)),A.wbits===0)A.wbits=H;else if(H>A.wbits){O.msg="invalid window size",A.mode=30;break}A.dmax=1<<H,O.adler=A.check=1,A.mode=512&I?10:12,D=I=0;break;case 2:for(;D<16;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(A.flags=I,(255&A.flags)!=8){O.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){O.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=I>>8&1),512&A.flags&&(te[0]=255&I,te[1]=I>>>8&255,A.check=o(A.check,te,2,0)),D=I=0,A.mode=3;case 3:for(;D<32;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.head&&(A.head.time=I),512&A.flags&&(te[0]=255&I,te[1]=I>>>8&255,te[2]=I>>>16&255,te[3]=I>>>24&255,A.check=o(A.check,te,4,0)),D=I=0,A.mode=4;case 4:for(;D<16;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.head&&(A.head.xflags=255&I,A.head.os=I>>8),512&A.flags&&(te[0]=255&I,te[1]=I>>>8&255,A.check=o(A.check,te,2,0)),D=I=0,A.mode=5;case 5:if(1024&A.flags){for(;D<16;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.length=I,A.head&&(A.head.extra_len=I),512&A.flags&&(te[0]=255&I,te[1]=I>>>8&255,A.check=o(A.check,te,2,0)),D=I=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(k<(K=A.length)&&(K=k),K&&(A.head&&(H=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),l.arraySet(A.head.extra,C,_,K,H)),512&A.flags&&(A.check=o(A.check,C,K,_)),k-=K,_+=K,A.length-=K),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(k===0)break e;for(K=0;H=C[_+K++],A.head&&H&&A.length<65536&&(A.head.name+=String.fromCharCode(H)),H&&K<k;);if(512&A.flags&&(A.check=o(A.check,C,K,_)),k-=K,_+=K,H)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(k===0)break e;for(K=0;H=C[_+K++],A.head&&H&&A.length<65536&&(A.head.comment+=String.fromCharCode(H)),H&&K<k;);if(512&A.flags&&(A.check=o(A.check,C,K,_)),k-=K,_+=K,H)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;D<16;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(I!==(65535&A.check)){O.msg="header crc mismatch",A.mode=30;break}D=I=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),O.adler=A.check=0,A.mode=12;break;case 10:for(;D<32;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}O.adler=A.check=x(I),D=I=0,A.mode=11;case 11:if(A.havedict===0)return O.next_out=j,O.avail_out=E,O.next_in=_,O.avail_in=k,A.hold=I,A.bits=D,2;O.adler=A.check=1,A.mode=12;case 12:if(T===5||T===6)break e;case 13:if(A.last){I>>>=7&D,D-=7&D,A.mode=27;break}for(;D<3;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}switch(A.last=1&I,D-=1,3&(I>>>=1)){case 0:A.mode=14;break;case 1:if(q(A),A.mode=20,T!==6)break;I>>>=2,D-=2;break e;case 2:A.mode=17;break;case 3:O.msg="invalid block type",A.mode=30}I>>>=2,D-=2;break;case 14:for(I>>>=7&D,D-=7&D;D<32;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if((65535&I)!=(I>>>16^65535)){O.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&I,D=I=0,A.mode=15,T===6)break e;case 15:A.mode=16;case 16:if(K=A.length){if(k<K&&(K=k),E<K&&(K=E),K===0)break e;l.arraySet(w,C,_,K,j),k-=K,_+=K,E-=K,j+=K,A.length-=K;break}A.mode=12;break;case 17:for(;D<14;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(A.nlen=257+(31&I),I>>>=5,D-=5,A.ndist=1+(31&I),I>>>=5,D-=5,A.ncode=4+(15&I),I>>>=4,D-=4,286<A.nlen||30<A.ndist){O.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;D<3;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.lens[ie[A.have++]]=7&I,I>>>=3,D-=3}for(;A.have<19;)A.lens[ie[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,ae={bits:A.lenbits},ce=t(0,A.lens,0,19,A.lencode,0,A.work,ae),A.lenbits=ae.bits,ce){O.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;L=(Q=A.lencode[I&(1<<A.lenbits)-1])>>>16&255,W=65535&Q,!(($=Q>>>24)<=D);){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(W<16)I>>>=$,D-=$,A.lens[A.have++]=W;else{if(W===16){for(Y=$+2;D<Y;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(I>>>=$,D-=$,A.have===0){O.msg="invalid bit length repeat",A.mode=30;break}H=A.lens[A.have-1],K=3+(3&I),I>>>=2,D-=2}else if(W===17){for(Y=$+3;D<Y;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}D-=$,H=0,K=3+(7&(I>>>=$)),I>>>=3,D-=3}else{for(Y=$+7;D<Y;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}D-=$,H=0,K=11+(127&(I>>>=$)),I>>>=7,D-=7}if(A.have+K>A.nlen+A.ndist){O.msg="invalid bit length repeat",A.mode=30;break}for(;K--;)A.lens[A.have++]=H}}if(A.mode===30)break;if(A.lens[256]===0){O.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,ae={bits:A.lenbits},ce=t(n,A.lens,0,A.nlen,A.lencode,0,A.work,ae),A.lenbits=ae.bits,ce){O.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,ae={bits:A.distbits},ce=t(u,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,ae),A.distbits=ae.bits,ce){O.msg="invalid distances set",A.mode=30;break}if(A.mode=20,T===6)break e;case 20:A.mode=21;case 21:if(6<=k&&258<=E){O.next_out=j,O.avail_out=E,O.next_in=_,O.avail_in=k,A.hold=I,A.bits=D,r(O,G),j=O.next_out,w=O.output,E=O.avail_out,_=O.next_in,C=O.input,k=O.avail_in,I=A.hold,D=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;L=(Q=A.lencode[I&(1<<A.lenbits)-1])>>>16&255,W=65535&Q,!(($=Q>>>24)<=D);){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(L&&(240&L)==0){for(re=$,ne=L,se=W;L=(Q=A.lencode[se+((I&(1<<re+ne)-1)>>re)])>>>16&255,W=65535&Q,!(re+($=Q>>>24)<=D);){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}I>>>=re,D-=re,A.back+=re}if(I>>>=$,D-=$,A.back+=$,A.length=W,L===0){A.mode=26;break}if(32&L){A.back=-1,A.mode=12;break}if(64&L){O.msg="invalid literal/length code",A.mode=30;break}A.extra=15&L,A.mode=22;case 22:if(A.extra){for(Y=A.extra;D<Y;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.length+=I&(1<<A.extra)-1,I>>>=A.extra,D-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;L=(Q=A.distcode[I&(1<<A.distbits)-1])>>>16&255,W=65535&Q,!(($=Q>>>24)<=D);){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if((240&L)==0){for(re=$,ne=L,se=W;L=(Q=A.distcode[se+((I&(1<<re+ne)-1)>>re)])>>>16&255,W=65535&Q,!(re+($=Q>>>24)<=D);){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}I>>>=re,D-=re,A.back+=re}if(I>>>=$,D-=$,A.back+=$,64&L){O.msg="invalid distance code",A.mode=30;break}A.offset=W,A.extra=15&L,A.mode=24;case 24:if(A.extra){for(Y=A.extra;D<Y;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}A.offset+=I&(1<<A.extra)-1,I>>>=A.extra,D-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){O.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(E===0)break e;if(K=G-E,A.offset>K){if((K=A.offset-K)>A.whave&&A.sane){O.msg="invalid distance too far back",A.mode=30;break}U=K>A.wnext?(K-=A.wnext,A.wsize-K):A.wnext-K,K>A.length&&(K=A.length),J=A.window}else J=w,U=j-A.offset,K=A.length;for(E<K&&(K=E),E-=K,A.length-=K;w[j++]=J[U++],--K;);A.length===0&&(A.mode=21);break;case 26:if(E===0)break e;w[j++]=A.length,E--,A.mode=21;break;case 27:if(A.wrap){for(;D<32;){if(k===0)break e;k--,I|=C[_++]<<D,D+=8}if(G-=E,O.total_out+=G,A.total+=G,G&&(O.adler=A.check=A.flags?o(A.check,w,G,j-G):s(A.check,w,G,j-G)),G=E,(A.flags?I:x(I))!==A.check){O.msg="incorrect data check",A.mode=30;break}D=I=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;D<32;){if(k===0)break e;k--,I+=C[_++]<<D,D+=8}if(I!==(4294967295&A.total)){O.msg="incorrect length check",A.mode=30;break}D=I=0}A.mode=29;case 29:ce=1;break e;case 30:ce=-3;break e;case 31:return-4;case 32:default:return d}return O.next_out=j,O.avail_out=E,O.next_in=_,O.avail_in=k,A.hold=I,A.bits=D,(A.wsize||G!==O.avail_out&&A.mode<30&&(A.mode<27||T!==4))&&V(O,O.output,O.next_out,G-O.avail_out)?(A.mode=31,-4):(X-=O.avail_in,G-=O.avail_out,O.total_in+=X,O.total_out+=G,A.total+=G,A.wrap&&G&&(O.adler=A.check=A.flags?o(A.check,w,G,O.next_out-G):s(A.check,w,G,O.next_out-G)),O.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(X==0&&G===0||T===4)&&ce===c&&(ce=-5),ce)},f.inflateEnd=function(O){if(!O||!O.state)return d;var T=O.state;return T.window&&(T.window=null),O.state=null,c},f.inflateGetHeader=function(O,T){var A;return O&&O.state?(2&(A=O.state).wrap)==0?d:((A.head=T).done=!1,c):d},f.inflateSetDictionary=function(O,T){var A,C=T.length;return O&&O.state?(A=O.state).wrap!==0&&A.mode!==11?d:A.mode===11&&s(1,T,C,0)!==A.check?-3:V(O,T,C,C)?(A.mode=31,-4):(A.havedict=1,c):d},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,h,f){var l=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],t=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(n,u,c,d,b,g,p,x){var y,v,S,N,R,B,M,F,q,V=x.bits,O=0,T=0,A=0,C=0,w=0,_=0,j=0,k=0,E=0,I=0,D=null,X=0,G=new l.Buf16(16),K=new l.Buf16(16),U=null,J=0;for(O=0;O<=15;O++)G[O]=0;for(T=0;T<d;T++)G[u[c+T]]++;for(w=V,C=15;1<=C&&G[C]===0;C--);if(C<w&&(w=C),C===0)return b[g++]=20971520,b[g++]=20971520,x.bits=1,0;for(A=1;A<C&&G[A]===0;A++);for(w<A&&(w=A),O=k=1;O<=15;O++)if(k<<=1,(k-=G[O])<0)return-1;if(0<k&&(n===0||C!==1))return-1;for(K[1]=0,O=1;O<15;O++)K[O+1]=K[O]+G[O];for(T=0;T<d;T++)u[c+T]!==0&&(p[K[u[c+T]]++]=T);if(B=n===0?(D=U=p,19):n===1?(D=s,X-=257,U=o,J-=257,256):(D=r,U=t,-1),O=A,R=g,j=T=I=0,S=-1,N=(E=1<<(_=w))-1,n===1&&852<E||n===2&&592<E)return 1;for(;;){for(M=O-j,q=p[T]<B?(F=0,p[T]):p[T]>B?(F=U[J+p[T]],D[X+p[T]]):(F=96,0),y=1<<O-j,A=v=1<<_;b[R+(I>>j)+(v-=y)]=M<<24|F<<16|q|0,v!==0;);for(y=1<<O-1;I&y;)y>>=1;if(y!==0?(I&=y-1,I+=y):I=0,T++,--G[O]==0){if(O===C)break;O=u[c+p[T]]}if(w<O&&(I&N)!==S){for(j===0&&(j=w),R+=A,k=1<<(_=O-j);_+j<C&&!((k-=G[_+j])<=0);)_++,k<<=1;if(E+=1<<_,n===1&&852<E||n===2&&592<E)return 1;b[S=I&N]=w<<24|_<<16|R-g|0}}return I!==0&&(b[R+I]=O-j<<24|64<<16|0),x.bits=w,0}},{"../utils/common":41}],51:[function(e,h,f){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,h,f){var l=e("../utils/common"),s=0,o=1;function r(Q){for(var te=Q.length;0<=--te;)Q[te]=0}var t=0,n=29,u=256,c=u+1+n,d=30,b=19,g=2*c+1,p=15,x=16,y=7,v=256,S=16,N=17,R=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(c+2));r(V);var O=new Array(2*d);r(O);var T=new Array(512);r(T);var A=new Array(256);r(A);var C=new Array(n);r(C);var w,_,j,k=new Array(d);function E(Q,te,ie,le,ee){this.static_tree=Q,this.extra_bits=te,this.extra_base=ie,this.elems=le,this.max_length=ee,this.has_stree=Q&&Q.length}function I(Q,te){this.dyn_tree=Q,this.max_code=0,this.stat_desc=te}function D(Q){return Q<256?T[Q]:T[256+(Q>>>7)]}function X(Q,te){Q.pending_buf[Q.pending++]=255&te,Q.pending_buf[Q.pending++]=te>>>8&255}function G(Q,te,ie){Q.bi_valid>x-ie?(Q.bi_buf|=te<<Q.bi_valid&65535,X(Q,Q.bi_buf),Q.bi_buf=te>>x-Q.bi_valid,Q.bi_valid+=ie-x):(Q.bi_buf|=te<<Q.bi_valid&65535,Q.bi_valid+=ie)}function K(Q,te,ie){G(Q,ie[2*te],ie[2*te+1])}function U(Q,te){for(var ie=0;ie|=1&Q,Q>>>=1,ie<<=1,0<--te;);return ie>>>1}function J(Q,te,ie){var le,ee,oe=new Array(p+1),de=0;for(le=1;le<=p;le++)oe[le]=de=de+ie[le-1]<<1;for(ee=0;ee<=te;ee++){var fe=Q[2*ee+1];fe!==0&&(Q[2*ee]=U(oe[fe]++,fe))}}function $(Q){var te;for(te=0;te<c;te++)Q.dyn_ltree[2*te]=0;for(te=0;te<d;te++)Q.dyn_dtree[2*te]=0;for(te=0;te<b;te++)Q.bl_tree[2*te]=0;Q.dyn_ltree[2*v]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function L(Q){8<Q.bi_valid?X(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function W(Q,te,ie,le){var ee=2*te,oe=2*ie;return Q[ee]<Q[oe]||Q[ee]===Q[oe]&&le[te]<=le[ie]}function re(Q,te,ie){for(var le=Q.heap[ie],ee=ie<<1;ee<=Q.heap_len&&(ee<Q.heap_len&&W(te,Q.heap[ee+1],Q.heap[ee],Q.depth)&&ee++,!W(te,le,Q.heap[ee],Q.depth));)Q.heap[ie]=Q.heap[ee],ie=ee,ee<<=1;Q.heap[ie]=le}function ne(Q,te,ie){var le,ee,oe,de,fe=0;if(Q.last_lit!==0)for(;le=Q.pending_buf[Q.d_buf+2*fe]<<8|Q.pending_buf[Q.d_buf+2*fe+1],ee=Q.pending_buf[Q.l_buf+fe],fe++,le===0?K(Q,ee,te):(K(Q,(oe=A[ee])+u+1,te),(de=B[oe])!==0&&G(Q,ee-=C[oe],de),K(Q,oe=D(--le),ie),(de=M[oe])!==0&&G(Q,le-=k[oe],de)),fe<Q.last_lit;);K(Q,v,te)}function se(Q,te){var ie,le,ee,oe=te.dyn_tree,de=te.stat_desc.static_tree,fe=te.stat_desc.has_stree,be=te.stat_desc.elems,he=-1;for(Q.heap_len=0,Q.heap_max=g,ie=0;ie<be;ie++)oe[2*ie]!==0?(Q.heap[++Q.heap_len]=he=ie,Q.depth[ie]=0):oe[2*ie+1]=0;for(;Q.heap_len<2;)oe[2*(ee=Q.heap[++Q.heap_len]=he<2?++he:0)]=1,Q.depth[ee]=0,Q.opt_len--,fe&&(Q.static_len-=de[2*ee+1]);for(te.max_code=he,ie=Q.heap_len>>1;1<=ie;ie--)re(Q,oe,ie);for(ee=be;ie=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],re(Q,oe,1),le=Q.heap[1],Q.heap[--Q.heap_max]=ie,Q.heap[--Q.heap_max]=le,oe[2*ee]=oe[2*ie]+oe[2*le],Q.depth[ee]=(Q.depth[ie]>=Q.depth[le]?Q.depth[ie]:Q.depth[le])+1,oe[2*ie+1]=oe[2*le+1]=ee,Q.heap[1]=ee++,re(Q,oe,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],(function(pe,ke){var Ce,Ee,Oe,Te,ye,Ae,Fe=ke.dyn_tree,Re=ke.max_code,ge=ke.stat_desc.static_tree,xe=ke.stat_desc.has_stree,we=ke.stat_desc.extra_bits,je=ke.stat_desc.extra_base,Se=ke.stat_desc.max_length,Ie=0;for(Te=0;Te<=p;Te++)pe.bl_count[Te]=0;for(Fe[2*pe.heap[pe.heap_max]+1]=0,Ce=pe.heap_max+1;Ce<g;Ce++)Se<(Te=Fe[2*Fe[2*(Ee=pe.heap[Ce])+1]+1]+1)&&(Te=Se,Ie++),Fe[2*Ee+1]=Te,Re<Ee||(pe.bl_count[Te]++,ye=0,je<=Ee&&(ye=we[Ee-je]),Ae=Fe[2*Ee],pe.opt_len+=Ae*(Te+ye),xe&&(pe.static_len+=Ae*(ge[2*Ee+1]+ye)));if(Ie!==0){do{for(Te=Se-1;pe.bl_count[Te]===0;)Te--;pe.bl_count[Te]--,pe.bl_count[Te+1]+=2,pe.bl_count[Se]--,Ie-=2}while(0<Ie);for(Te=Se;Te!==0;Te--)for(Ee=pe.bl_count[Te];Ee!==0;)Re<(Oe=pe.heap[--Ce])||(Fe[2*Oe+1]!==Te&&(pe.opt_len+=(Te-Fe[2*Oe+1])*Fe[2*Oe],Fe[2*Oe+1]=Te),Ee--)}})(Q,te),J(oe,he,Q.bl_count)}function H(Q,te,ie){var le,ee,oe=-1,de=te[1],fe=0,be=7,he=4;for(de===0&&(be=138,he=3),te[2*(ie+1)+1]=65535,le=0;le<=ie;le++)ee=de,de=te[2*(le+1)+1],++fe<be&&ee===de||(fe<he?Q.bl_tree[2*ee]+=fe:ee!==0?(ee!==oe&&Q.bl_tree[2*ee]++,Q.bl_tree[2*S]++):fe<=10?Q.bl_tree[2*N]++:Q.bl_tree[2*R]++,oe=ee,he=(fe=0)===de?(be=138,3):ee===de?(be=6,3):(be=7,4))}function ce(Q,te,ie){var le,ee,oe=-1,de=te[1],fe=0,be=7,he=4;for(de===0&&(be=138,he=3),le=0;le<=ie;le++)if(ee=de,de=te[2*(le+1)+1],!(++fe<be&&ee===de)){if(fe<he)for(;K(Q,ee,Q.bl_tree),--fe!=0;);else ee!==0?(ee!==oe&&(K(Q,ee,Q.bl_tree),fe--),K(Q,S,Q.bl_tree),G(Q,fe-3,2)):fe<=10?(K(Q,N,Q.bl_tree),G(Q,fe-3,3)):(K(Q,R,Q.bl_tree),G(Q,fe-11,7));oe=ee,he=(fe=0)===de?(be=138,3):ee===de?(be=6,3):(be=7,4)}}r(k);var ae=!1;function Y(Q,te,ie,le){G(Q,(t<<1)+(le?1:0),3),(function(ee,oe,de,fe){L(ee),X(ee,de),X(ee,~de),l.arraySet(ee.pending_buf,ee.window,oe,de,ee.pending),ee.pending+=de})(Q,te,ie)}f._tr_init=function(Q){ae||((function(){var te,ie,le,ee,oe,de=new Array(p+1);for(ee=le=0;ee<n-1;ee++)for(C[ee]=le,te=0;te<1<<B[ee];te++)A[le++]=ee;for(A[le-1]=ee,ee=oe=0;ee<16;ee++)for(k[ee]=oe,te=0;te<1<<M[ee];te++)T[oe++]=ee;for(oe>>=7;ee<d;ee++)for(k[ee]=oe<<7,te=0;te<1<<M[ee]-7;te++)T[256+oe++]=ee;for(ie=0;ie<=p;ie++)de[ie]=0;for(te=0;te<=143;)V[2*te+1]=8,te++,de[8]++;for(;te<=255;)V[2*te+1]=9,te++,de[9]++;for(;te<=279;)V[2*te+1]=7,te++,de[7]++;for(;te<=287;)V[2*te+1]=8,te++,de[8]++;for(J(V,c+1,de),te=0;te<d;te++)O[2*te+1]=5,O[2*te]=U(te,5);w=new E(V,B,u+1,c,p),_=new E(O,M,0,d,p),j=new E(new Array(0),F,0,b,y)})(),ae=!0),Q.l_desc=new I(Q.dyn_ltree,w),Q.d_desc=new I(Q.dyn_dtree,_),Q.bl_desc=new I(Q.bl_tree,j),Q.bi_buf=0,Q.bi_valid=0,$(Q)},f._tr_stored_block=Y,f._tr_flush_block=function(Q,te,ie,le){var ee,oe,de=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=(function(fe){var be,he=4093624447;for(be=0;be<=31;be++,he>>>=1)if(1&he&&fe.dyn_ltree[2*be]!==0)return s;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return o;for(be=32;be<u;be++)if(fe.dyn_ltree[2*be]!==0)return o;return s})(Q)),se(Q,Q.l_desc),se(Q,Q.d_desc),de=(function(fe){var be;for(H(fe,fe.dyn_ltree,fe.l_desc.max_code),H(fe,fe.dyn_dtree,fe.d_desc.max_code),se(fe,fe.bl_desc),be=b-1;3<=be&&fe.bl_tree[2*q[be]+1]===0;be--);return fe.opt_len+=3*(be+1)+5+5+4,be})(Q),ee=Q.opt_len+3+7>>>3,(oe=Q.static_len+3+7>>>3)<=ee&&(ee=oe)):ee=oe=ie+5,ie+4<=ee&&te!==-1?Y(Q,te,ie,le):Q.strategy===4||oe===ee?(G(Q,2+(le?1:0),3),ne(Q,V,O)):(G(Q,4+(le?1:0),3),(function(fe,be,he,pe){var ke;for(G(fe,be-257,5),G(fe,he-1,5),G(fe,pe-4,4),ke=0;ke<pe;ke++)G(fe,fe.bl_tree[2*q[ke]+1],3);ce(fe,fe.dyn_ltree,be-1),ce(fe,fe.dyn_dtree,he-1)})(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,de+1),ne(Q,Q.dyn_ltree,Q.dyn_dtree)),$(Q),le&&L(Q)},f._tr_tally=function(Q,te,ie){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=te>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&te,Q.pending_buf[Q.l_buf+Q.last_lit]=255&ie,Q.last_lit++,te===0?Q.dyn_ltree[2*ie]++:(Q.matches++,te--,Q.dyn_ltree[2*(A[ie]+u+1)]++,Q.dyn_dtree[2*D(te)]++),Q.last_lit===Q.lit_bufsize-1},f._tr_align=function(Q){G(Q,2,3),K(Q,v,V),(function(te){te.bi_valid===16?(X(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)})(Q)}},{"../utils/common":41}],53:[function(e,h,f){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,h,f){(function(l){(function(s,o){if(!s.setImmediate){var r,t,n,u,c=1,d={},b=!1,g=s.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(s);p=p&&p.setTimeout?p:s,r={}.toString.call(s.process)==="[object process]"?function(S){process.nextTick(function(){y(S)})}:(function(){if(s.postMessage&&!s.importScripts){var S=!0,N=s.onmessage;return s.onmessage=function(){S=!1},s.postMessage("","*"),s.onmessage=N,S}})()?(u="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",v,!1):s.attachEvent("onmessage",v),function(S){s.postMessage(u+S,"*")}):s.MessageChannel?((n=new MessageChannel).port1.onmessage=function(S){y(S.data)},function(S){n.port2.postMessage(S)}):g&&"onreadystatechange"in g.createElement("script")?(t=g.documentElement,function(S){var N=g.createElement("script");N.onreadystatechange=function(){y(S),N.onreadystatechange=null,t.removeChild(N),N=null},t.appendChild(N)}):function(S){setTimeout(y,0,S)},p.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var N=new Array(arguments.length-1),R=0;R<N.length;R++)N[R]=arguments[R+1];var B={callback:S,args:N};return d[c]=B,r(c),c++},p.clearImmediate=x}function x(S){delete d[S]}function y(S){if(b)setTimeout(y,0,S);else{var N=d[S];if(N){b=!0;try{(function(R){var B=R.callback,M=R.args;switch(M.length){case 0:B();break;case 1:B(M[0]);break;case 2:B(M[0],M[1]);break;case 3:B(M[0],M[1],M[2]);break;default:B.apply(o,M)}})(N)}finally{x(S),b=!1}}}}function v(S){S.source===s&&typeof S.data=="string"&&S.data.indexOf(u)===0&&y(+S.data.slice(u.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qn)),qn.exports}var gg=pg();const bg=ii(gg),fa=(m,a=2)=>{if(m===0)return"0 Bytes";const e=1024,h=a<0?0:a,f=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(m)/Math.log(e));return parseFloat((m/Math.pow(e,l)).toFixed(h))+" "+f[l]},ha=m=>{try{return localStorage.getItem(`file_${m}`)||""}catch(a){return console.error("Error reading file from localStorage:",a),""}},ma=m=>{switch(m){case ir.Approved:return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case ir.Submitted:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case ir.RequiresRevision:return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200"}},xg=({projectGroups:m})=>{const[a,e]=Z.useState(""),[h,f]=Z.useState({key:"submittedAt",direction:"descending"}),[l,s]=Z.useState(!1),[o,r]=Z.useState(""),[t,n]=Z.useState({key:"submittedAt",direction:"descending"}),[u,c]=Z.useState(!1),d=At(),b=Ue(),{preDefenseRows:g,postDefenseRows:p}=Z.useMemo(()=>{const M=[],F=[];return m.forEach(q=>{var O,T;const V=q.students.map(A=>`${A.name} ${A.surname}`).join(", ");(O=q.project.finalSubmissions)!=null&&O.preDefenseFile&&M.push({projectId:q.project.projectId,studentNames:V,advisorName:q.project.advisorName,submissionType:"Pre-Defense",file:q.project.finalSubmissions.preDefenseFile}),(T=q.project.finalSubmissions)!=null&&T.postDefenseFile&&F.push({projectId:q.project.projectId,studentNames:V,advisorName:q.project.advisorName,submissionType:"Post-Defense",file:q.project.finalSubmissions.postDefenseFile})}),{preDefenseRows:M,postDefenseRows:F}},[m]),x=M=>{let F="ascending";h&&h.key===M&&h.direction==="ascending"&&(F="descending"),f({key:M,direction:F})},y=M=>{let F="ascending";t&&t.key===M&&t.direction==="ascending"&&(F="descending"),n({key:M,direction:F})},v=(M,F,q)=>{let V=[...M];if(F){const O=F.toLowerCase();V=V.filter(T=>T.projectId.toLowerCase().includes(O)||T.studentNames.toLowerCase().includes(O)||T.advisorName.toLowerCase().includes(O)||T.file.name.toLowerCase().includes(O))}return q!==null&&V.sort((O,T)=>{let A,C;return q.key==="submittedAt"?(A=new Date(O.file.submittedAt).getTime(),C=new Date(T.file.submittedAt).getTime()):q.key==="status"?(A=O.file.status,C=T.file.status):(A=O[q.key],C=T[q.key]),A<C?q.direction==="ascending"?-1:1:A>C?q.direction==="ascending"?1:-1:0}),V},S=Z.useMemo(()=>v(g,a,h),[g,a,h]),N=Z.useMemo(()=>v(p,o,t),[p,o,t]),R=M=>{const F=ha(M.file.fileId);if(F){const q=M.studentNames.replace(/, /g," and ").replace(/\s+/g,"_"),V=M.file.name.split("."),O=V.length>1?V.pop():"file",T=M.submissionType.replace(/\s+/g,"_"),A=`${M.projectId}_${q}_${T}.${O}`,C=document.createElement("a");C.href=F,C.download=A,document.body.appendChild(C),C.click(),document.body.removeChild(C)}else d({type:"error",message:b("couldNotRetrieveFile")})},B=Z.useCallback(async M=>{const F=M==="pre"?S:N,q=M==="pre"?s:c,V=M==="pre"?"Pre_Defense_Submissions":"Post_Defense_Submissions";if(F.length===0){d({type:"info",message:b("noFilesToDownload")});return}q(!0),d({type:"info",message:b("preparingDownload")});const O=new bg;for(const T of F){const A=ha(T.file.fileId);if(A){const C=A.split(",")[1];if(C){const w=T.studentNames.replace(/, /g," and ").replace(/\s+/g," ").trim(),_=T.file.name.split("."),j=_.length>1?_.pop():"file",I=`${`${T.projectId} ${w} ${T.submissionType}`.replace(/[^a-zA-Z0-9 ._-]/g,"").replace(/\s/g,"_")}.${j}`;O.file(I,C,{base64:!0})}}}try{const T=await O.generateAsync({type:"blob"}),A=document.createElement("a");A.href=URL.createObjectURL(T),A.download=`${V}_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(A.href),d({type:"success",message:b("zipSuccess")})}catch(T){console.error("Error creating zip file:",T),d({type:"error",message:b("zipFailed")})}finally{q(!1)}},[S,N,d,b]);return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Lr,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:b("preDefenseTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:b("preDefenseDescription")})]})]}),i.jsx("button",{onClick:()=>B("pre"),disabled:l,className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 disabled:bg-slate-400 disabled:cursor-not-allowed",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),b("zipping")]}):i.jsxs(i.Fragment,{children:[i.jsx(Hr,{className:"w-5 h-5 mr-2"}),b("downloadAll").replace("${count}",String(S.length))]})})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:b("searchSubmissionsPlaceholder"),value:a,onChange:M=>e(M.target.value)})]})}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"projectId",title:b("projectId"),sortConfig:h,requestSort:x}),i.jsx(We,{sortKey:"studentNames",title:b("students"),sortConfig:h,requestSort:x}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:b("fileName")}),i.jsx(We,{sortKey:"submittedAt",title:b("submitted"),sortConfig:h,requestSort:x}),i.jsx(We,{sortKey:"status",title:b("status"),sortConfig:h,requestSort:x}),i.jsx(We,{sortKey:"advisorName",title:b("advisor"),sortConfig:h,requestSort:x}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:b("download")})]})}),i.jsx("tbody",{children:S.map(M=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:M.projectId}),i.jsx("td",{className:"px-6 py-4",children:M.studentNames}),i.jsxs("td",{className:"px-6 py-4 truncate max-w-xs",title:M.file.name,children:[M.file.name," ",i.jsxs("span",{className:"text-slate-400 text-xs",children:["(",fa(M.file.size),")"]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(M.file.submittedAt).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ma(M.file.status)}`,children:M.file.status})}),i.jsx("td",{className:"px-6 py-4",children:M.advisorName}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx("button",{onClick:()=>R(M),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Hr,{className:"w-5 h-5"})})})]},`${M.projectId}-pre`))})]}),S.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:a?`${b("noProjectsForQuery").replace("${query}",a)}`:b("noPreDefenseFiles")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Lr,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:b("postDefenseTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:b("postDefenseDescription")})]})]}),i.jsx("button",{onClick:()=>B("post"),disabled:u,className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 disabled:bg-slate-400 disabled:cursor-not-allowed",children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),b("zipping")]}):i.jsxs(i.Fragment,{children:[i.jsx(Hr,{className:"w-5 h-5 mr-2"}),b("downloadAll").replace("${count}",String(N.length))]})})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:b("searchSubmissionsPlaceholder"),value:o,onChange:M=>r(M.target.value)})]})}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"projectId",title:b("projectId"),sortConfig:t,requestSort:y}),i.jsx(We,{sortKey:"studentNames",title:b("students"),sortConfig:t,requestSort:y}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:b("fileName")}),i.jsx(We,{sortKey:"submittedAt",title:b("submitted"),sortConfig:t,requestSort:y}),i.jsx(We,{sortKey:"status",title:b("status"),sortConfig:t,requestSort:y}),i.jsx(We,{sortKey:"advisorName",title:b("advisor"),sortConfig:t,requestSort:y}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:b("download")})]})}),i.jsx("tbody",{children:N.map(M=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:M.projectId}),i.jsx("td",{className:"px-6 py-4",children:M.studentNames}),i.jsxs("td",{className:"px-6 py-4 truncate max-w-xs",title:M.file.name,children:[M.file.name," ",i.jsxs("span",{className:"text-slate-400 text-xs",children:["(",fa(M.file.size),")"]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(M.file.submittedAt).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ma(M.file.status)}`,children:M.file.status})}),i.jsx("td",{className:"px-6 py-4",children:M.advisorName}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx("button",{onClick:()=>R(M),className:"p-2 text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(Hr,{className:"w-5 h-5"})})})]},`${M.projectId}-post`))})]}),N.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:o?`${b("noProjectsForQuery").replace("${query}",o)}`:b("noPostDefenseFiles")})]})]})]})},yg=({projectGroups:m,advisors:a,majors:e,committeeCounts:h,updateProjectCommittee:f,updateProjectDefenseSchedule:l,onSelectProject:s,defenseSettings:o,bulkUpdateSchedules:r,autoScheduleDefenses:t,clearAllSchedulesAndCommittees:n,onNavigate:u,user:c})=>{const[d,b]=Z.useState({key:"projectId",direction:"ascending"}),[g,p]=Z.useState({key:"defenseDate",direction:"ascending"}),[x,y]=Z.useState(""),[v,S]=Z.useState({}),[N,R]=Z.useState("edit"),[B,M]=Z.useState("all"),[F,q]=Z.useState("all"),[V,O]=Z.useState(!1),[T,A]=Z.useState([]),[C,w]=Z.useState(null),[_,j]=Z.useState(!1),k=Z.useRef(null),E=At(),I=Ue(),D=Z.useMemo(()=>o.timeSlots.split(",").map(ee=>ee.trim()).filter(Boolean),[o.timeSlots]),X=Z.useMemo(()=>o.rooms.map(ee=>ee.name),[o.rooms]),G=ee=>{let oe="ascending";d&&d.key===ee&&d.direction==="ascending"&&(oe="descending"),b({key:ee,direction:oe})},K=ee=>{let oe="ascending";g&&g.key===ee&&g.direction==="ascending"&&(oe="descending"),p({key:ee,direction:oe})},U=Z.useMemo(()=>{let ee=[...m];if(x){const oe=x.toLowerCase();ee=ee.filter(de=>de.project.projectId.toLowerCase().includes(oe)||de.project.topicEng.toLowerCase().includes(oe)||de.project.advisorName.toLowerCase().includes(oe)||de.students.some(fe=>`${fe.name} ${fe.surname}`.toLowerCase().includes(oe)))}return B!=="all"&&(ee=ee.filter(oe=>{const de=oe.project.defenseDate&&oe.project.defenseTime&&oe.project.defenseRoom;return B==="scheduled"?de:!de})),F!=="all"&&(ee=ee.filter(oe=>{const{mainCommitteeId:de,secondCommitteeId:fe,thirdCommitteeId:be}=oe.project,he=[de,fe,be].filter(Boolean).length;return F==="full"?he===3:F==="partial"?he>0&&he<3:F==="unassigned"?he===0:!0})),ee},[m,x,B,F]),J=Z.useCallback(ee=>{var oe;return ee?((oe=a.find(de=>de.id===ee))==null?void 0:oe.name)||"Unknown":I("na")},[a,I]),$=Z.useMemo(()=>{let ee=[...U];return d!==null&&N==="edit"?ee.sort((oe,de)=>{const fe=oe.project[d.key],be=de.project[d.key];return fe<be?d.direction==="ascending"?-1:1:fe>be?d.direction==="ascending"?1:-1:0}):N==="view"&&ee.sort((oe,de)=>{var ke,Ce;const fe=["defenseDate","defenseTime","defenseRoom"],be=(g==null?void 0:g.key)||"defenseDate",he=(g==null?void 0:g.direction)||"ascending",pe=[be,...fe.filter(Ee=>Ee!==be)];for(const Ee of pe){const Te=(Ee===be?he:"ascending")==="ascending"?1:-1;let ye,Ae;switch(Ee){case"defenseDate":ye=oe.project.defenseDate||"z",Ae=de.project.defenseDate||"z";break;case"defenseTime":ye=oe.project.defenseTime||"z",Ae=de.project.defenseTime||"z";break;case"defenseRoom":ye=oe.project.defenseRoom||"z",Ae=de.project.defenseRoom||"z";break;case"studentId":ye=((ke=oe.students[0])==null?void 0:ke.studentId)||"",Ae=((Ce=de.students[0])==null?void 0:Ce.studentId)||"";break;case"projectId":ye=oe.project.projectId,Ae=de.project.projectId;break;case"topicEng":ye=oe.project.topicEng,Ae=de.project.topicEng;break;case"advisorName":ye=oe.project.advisorName,Ae=de.project.advisorName;break;default:ye="",Ae=""}const Fe=ye.localeCompare(Ae,void 0,{numeric:Ee==="defenseRoom"});if(Fe!==0)return Fe*Te}return oe.project.projectId.localeCompare(de.project.projectId)}),ee},[U,d,g,N]),L=(ee,oe,de)=>{var be;f(ee,c,oe,de);const fe=de?(be=a.find(he=>he.id===de))==null?void 0:be.name:"None";E({type:"success",message:I("committeeUpdatedToast").replace("${projectId}",ee).replace("${advisorName}",fe)})},W=(ee,oe,de)=>{var be;const fe=(be=m.find(he=>he.project.projectId===ee))==null?void 0:be.project;fe&&S(he=>{var pe,ke,Ce;return{...he,[ee]:{date:((pe=he[ee])==null?void 0:pe.date)??fe.defenseDate??"",time:((ke=he[ee])==null?void 0:ke.time)??fe.defenseTime??"",room:((Ce=he[ee])==null?void 0:Ce.room)??fe.defenseRoom??"",[oe]:de}}})},re=ee=>{const oe=v[ee];oe&&(l(ee,c,{date:oe.date||null,time:oe.time||null,room:oe.room||null}),S(de=>{const fe={...de};return delete fe[ee],fe}),E({type:"success",message:I("scheduleUpdatedToast").replace("${projectId}",ee)}))},ne=ee=>{w(ee)},se=()=>{C&&(l(C,c,{date:null,time:null,room:null}),S(ee=>{const oe={...ee};return delete oe[C],oe}),E({type:"success",message:I("scheduleClearedToast").replace("${scheduleToDelete}",C)}),w(null))},H=()=>{var ee;(ee=k.current)==null||ee.click()},ce=ee=>{var fe;const oe=(fe=ee.target.files)==null?void 0:fe[0];if(!oe)return;const de=new FileReader;de.onload=be=>{var he;try{const pe=(he=be.target)==null?void 0:he.result,ke=XLSX.read(pe,{type:"binary",cellDates:!0}),Ce=ke.SheetNames[0],Ee=ke.Sheets[Ce],Oe=XLSX.utils.sheet_to_json(Ee),Te=new Set(m.map(Ae=>Ae.project.projectId)),ye=Oe.filter(Ae=>Ae["Project ID"]&&Ae["Project ID"].toString().trim()).map(Ae=>{var we,je,Se;const Fe=(we=Ae["Project ID"])==null?void 0:we.toString().trim();let Re=Ae["Defense Date"];if(Re instanceof Date){const Ie=Re.getFullYear(),He=(Re.getMonth()+1).toString().padStart(2,"0"),ze=Re.getDate().toString().padStart(2,"0");Re=`${Ie}-${He}-${ze}`}else typeof Re=="string"?Re=Re.trim():Re="";const ge=(je=Ae["Defense Time"])==null?void 0:je.toString().trim(),xe=(Se=Ae["Defense Room"])==null?void 0:Se.toString().trim();return Fe?Te.has(Fe)?Re&&isNaN(new Date(Re).getTime())?{projectId:Fe,date:Re,time:ge,room:xe,_status:"error",_error:"Invalid date format. Use YYYY-MM-DD."}:ge&&!D.includes(ge)?{projectId:Fe,date:Re,time:ge,room:xe,_status:"error",_error:`Time slot "${ge}" is not in settings.`}:xe&&!X.includes(xe)?{projectId:Fe,date:Re,time:ge,room:xe,_status:"error",_error:`Room "${xe}" is not in settings.`}:{projectId:Fe,date:Re||"",time:ge||"",room:xe||"",_status:"update"}:{projectId:Fe,date:Re,time:ge,room:xe,_status:"error",_error:"Project ID not found."}:{projectId:"",date:"",time:"",room:"",_status:"error",_error:"Missing Project ID"}});A(ye),O(!0)}catch(pe){E({type:"error",message:I("fileParseError")}),console.error("File parse error:",pe)}finally{ee.target&&(ee.target.value="")}},de.readAsBinaryString(oe)},ae=ee=>{const oe=ee.map(de=>({projectId:de.projectId,date:de.date||null,time:de.time||null,room:de.room||null}));r(oe),E({type:"success",message:I("importSchedulesSuccessToast").replace("${count}",String(oe.length))}),O(!1)},Y=Z.useCallback(()=>{const oe=[[I("defenseDate"),I("defenseTime"),I("defenseRoom"),I("projectId"),I("topicLao"),I("topicEng"),I("mainAdvisor"),I("mainCommittee"),I("secondCommittee"),I("thirdCommittee"),I("studentId"),I("gender"),I("studentName"),I("major")]],de=[];let fe=1;if($.forEach(ke=>{const Ce=ke.project,Ee=ke.students[0],Oe=ke.students[1],Te=[Ce.defenseDate||I("na"),Ce.defenseTime||I("na"),Ce.defenseRoom||I("na"),Ce.projectId,Ce.topicLao,Ce.topicEng,Ce.advisorName,J(Ce.mainCommitteeId),J(Ce.secondCommitteeId),J(Ce.thirdCommitteeId)],ye=Ee?[Ee.studentId,Ee.gender,`${Ee.name} ${Ee.surname}`,Ee.major]:Array(4).fill("");oe.push([...Te,...ye]);const Ae=Array(Te.length).fill(""),Fe=Oe?[Oe.studentId,Oe.gender,`${Oe.name} ${Oe.surname}`,Oe.major]:Array(4).fill("");oe.push([...Ae,...Fe]);for(let Re=0;Re<10;Re++)de.push({s:{r:fe,c:Re},e:{r:fe+1,c:Re}});fe+=2}),oe.length<=1){E({type:"info",message:I("noDataToExport")});return}const be=XLSX.utils.aoa_to_sheet(oe);be["!merges"]=de;const he=[{wch:15},{wch:15},{wch:15},{wch:15},{wch:40},{wch:40},{wch:25},{wch:25},{wch:25},{wch:25},{wch:20},{wch:10},{wch:25},{wch:25}];be["!cols"]=he;const pe=XLSX.utils.book_new();XLSX.utils.book_append_sheet(pe,be,"Committee Schedules"),XLSX.writeFile(pe,"committee_schedules_merged.xlsx"),E({type:"success",message:I("exportMergedSuccessToast")})},[$,J,E,I]),Q=Z.useCallback(()=>{const ee=[I("projectId"),I("defenseDate"),I("defenseTime"),I("defenseRoom")],oe=XLSX.utils.aoa_to_sheet([ee]),de=[[I("noteScheduleFormat")],[I("availableTimes").replace("${timeSlots}",D.join(", "))],[I("availableRooms").replace("${roomOptions}",X.join(", "))]];XLSX.utils.sheet_add_aoa(oe,de,{origin:"A2"});const fe=XLSX.utils.book_new();XLSX.utils.book_append_sheet(fe,oe,"Schedule Template");const be=[{wch:15},{wch:15},{wch:20},{wch:15}];oe["!cols"]=be,XLSX.writeFile(fe,"committee_schedule_template.xlsx"),E({type:"success",message:I("scheduleTemplateDownloaded")})},[E,D,X,I]),te=()=>{const{committeesAssigned:ee,defensesScheduled:oe}=t(o);let de=I("autoScheduleCompleteToast");ee>0&&oe>0?de=I("autoScheduleResultToast").replace("${committeesAssigned}",String(ee)).replace("${defensesScheduled}",String(oe)):ee>0?de=I("autoScheduleCommitteesToast").replace("${committeesAssigned}",String(ee)):oe>0?de=I("autoScheduleDefensesToast").replace("${defensesScheduled}",String(oe)):de=I("autoScheduleNoChangesToast"),E({type:"success",message:de})},ie=()=>{n(),j(!1)},le=(ee,oe)=>{const{project:de,students:fe}=ee,be=`${oe}CommitteeId`,he=`${oe}CommitteeQuota`,pe=e.find(ke=>{var Ce;return ke.name===((Ce=fe[0])==null?void 0:Ce.major)});return i.jsxs("select",{value:de[be]||"",onChange:ke=>L(de.projectId,oe,ke.target.value||null),className:"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600",children:[i.jsxs("option",{value:"",children:["-- ",I("selectAnAdvisor")," --"]}),a.map(ke=>{var ge,xe;const Ce=((ge=h[ke.id])==null?void 0:ge[oe])||0,Ee=ke[he],Oe=Ce>=Ee,Te=ke.name===de.advisorName,ye=ke.id===de.mainCommitteeId&&oe!=="main"||ke.id===de.secondCommitteeId&&oe!=="second"||ke.id===de.thirdCommitteeId&&oe!=="third",Ae=pe&&((xe=ke.specializedMajorIds)==null?void 0:xe.includes(pe.id)),Fe=(!Ae||Oe||ye||Te)&&ke.id!==de[be];let Re=`${ke.name} (${Ce}/${Ee})`;if(Fe&&ke.id!==de[be]){const we=[];Ae||we.push(I("notSpecialized")),Oe&&we.push(I("quotaFull")),ye&&we.push(I("assigned")),Te&&we.push(I("mainAdvisor")),we.length>0&&(Re+=` - ${we.join(", ")}`)}return i.jsx("option",{value:ke.id,disabled:Fe,children:Re},ke.id)})]})};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(lr,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:I("committeeManagement")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:I("committeeManagementDescription")})]})]}),i.jsxs("div",{className:"flex items-center flex-wrap gap-2 mt-4 sm:mt-0",children:[i.jsxs("button",{onClick:()=>j(!0),className:"flex items-center justify-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Gt,{className:"w-5 h-5 mr-2"}),I("clearAll")]}),i.jsxs("button",{onClick:te,className:"flex items-center justify-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Ft,{className:"w-5 h-5 mr-2"}),I("autoSchedule")]}),i.jsxs("button",{onClick:()=>u("settings"),className:"flex items-center justify-center bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Cs,{className:"w-5 h-5 mr-2"}),I("settings")]}),i.jsx("input",{type:"file",ref:k,onChange:ce,className:"hidden",accept:".xlsx, .xls"}),i.jsxs("button",{onClick:Q,className:"flex items-center justify-center bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Hr,{className:"w-5 h-5 mr-2"})," ",I("template")]}),i.jsxs("button",{onClick:H,className:"flex items-center justify-center bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(Xr,{className:"w-5 h-5 mr-2"})," ",I("import")]}),i.jsxs("button",{onClick:Y,className:"flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"})," ",I("export")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("button",{onClick:()=>R("edit"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${N==="edit"?"bg-blue-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:I("editView")}),i.jsx("button",{onClick:()=>R("view"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${N==="view"?"bg-blue-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:I("detailView")})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4",children:[i.jsxs("div",{className:"relative w-full sm:w-auto sm:flex-grow",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:I("searchByIdTopicAdvisor"),value:x,onChange:ee=>y(ee.target.value)})]}),i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{htmlFor:"schedule-filter",className:"sr-only",children:I("allSchedules")}),i.jsxs("select",{id:"schedule-filter",value:B,onChange:ee=>M(ee.target.value),className:"block w-full rounded-md border-0 py-2 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600",children:[i.jsx("option",{value:"all",children:I("allSchedules")}),i.jsx("option",{value:"scheduled",children:I("scheduled")}),i.jsx("option",{value:"unscheduled",children:I("unscheduled")})]})]}),i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{htmlFor:"committee-filter",className:"sr-only",children:I("committees")}),i.jsxs("select",{id:"committee-filter",value:F,onChange:ee=>q(ee.target.value),className:"block w-full rounded-md border-0 py-2 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600",children:[i.jsx("option",{value:"all",children:I("allCommittees")}),i.jsx("option",{value:"full",children:I("fullyAssigned")}),i.jsx("option",{value:"partial",children:I("partiallyAssigned")}),i.jsx("option",{value:"unassigned",children:I("unassigned")})]})]})]}),N==="edit"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:$.map(ee=>{var fe,be,he;const oe=!!v[ee.project.projectId],de=!!(ee.project.defenseDate||ee.project.defenseTime||ee.project.defenseRoom);return i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:ee.project.projectId}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 truncate",children:ee.project.topicEng}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[I("advisor"),": ",ee.project.advisorName]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("mainCommittee")}),le(ee,"main")]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("secondCommittee")}),le(ee,"second")]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("thirdCommittee")}),le(ee,"third")]})]}),i.jsxs("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:I("defenseSchedule")}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("defenseDate")}),i.jsx("input",{type:"date",min:o.startDefenseDate||void 0,value:((fe=v[ee.project.projectId])==null?void 0:fe.date)??ee.project.defenseDate??"",onChange:pe=>W(ee.project.projectId,"date",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("defenseTime")}),i.jsxs("select",{value:((be=v[ee.project.projectId])==null?void 0:be.time)??ee.project.defenseTime??"",onChange:pe=>W(ee.project.projectId,"time",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsxs("option",{value:"",children:["-- ",I("selectTime")," --"]}),D.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:I("defenseRoom")}),i.jsxs("select",{value:((he=v[ee.project.projectId])==null?void 0:he.room)??ee.project.defenseRoom??"",onChange:pe=>W(ee.project.projectId,"room",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsxs("option",{value:"",children:["-- ",I("selectRoom")," --"]}),X.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})]}),i.jsxs("div",{className:"flex justify-end pt-2 space-x-2",children:[i.jsxs("button",{onClick:()=>ne(ee.project.projectId),disabled:!de,className:"flex items-center gap-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed px-3 py-1.5",children:[i.jsx(Gt,{className:"w-4 h-4"})," ",I("clearAll")]}),i.jsxs("button",{onClick:()=>re(ee.project.projectId),disabled:!oe,className:"flex items-center gap-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed px-3 py-1.5",children:[i.jsx(es,{className:"w-4 h-4"})," ",I("saveChanges")]})]})]})]},ee.project.projectId)})}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-2 py-3",children:I("defenseDate")}),i.jsx("th",{scope:"col",className:"px-2 py-3",children:I("defenseTime")}),i.jsx("th",{scope:"col",className:"px-2 py-3",children:I("defenseRoom")}),i.jsx(We,{sortKey:"projectId",title:I("projectId"),sortConfig:d,requestSort:G}),i.jsx(We,{sortKey:"topicEng",title:I("topicEng"),sortConfig:d,requestSort:G}),i.jsx(We,{sortKey:"advisorName",title:I("mainAdvisor"),sortConfig:d,requestSort:G}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("mainCommittee")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("secondCommittee")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("thirdCommittee")}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:I("actions")})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:$.map(ee=>{var fe,be,he;const oe=!!v[ee.project.projectId],de=!!(ee.project.defenseDate||ee.project.defenseTime||ee.project.defenseRoom);return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-2 py-2 w-40",children:i.jsx("input",{type:"date",min:o.startDefenseDate||void 0,value:((fe=v[ee.project.projectId])==null?void 0:fe.date)??ee.project.defenseDate??"",onChange:pe=>W(ee.project.projectId,"date",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})}),i.jsx("td",{className:"px-2 py-2 w-48",children:i.jsxs("select",{value:((be=v[ee.project.projectId])==null?void 0:be.time)??ee.project.defenseTime??"",onChange:pe=>W(ee.project.projectId,"time",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsxs("option",{value:"",children:["-- ",I("selectTime")," --"]}),D.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})}),i.jsx("td",{className:"px-2 py-2 w-36",children:i.jsxs("select",{value:((he=v[ee.project.projectId])==null?void 0:he.room)??ee.project.defenseRoom??"",onChange:pe=>W(ee.project.projectId,"room",pe.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsxs("option",{value:"",children:["-- ",I("selectRoom")," --"]}),X.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})}),i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:ee.project.projectId}),i.jsx("td",{className:"px-6 py-4",children:ee.project.topicEng}),i.jsx("td",{className:"px-6 py-4",children:ee.project.advisorName}),i.jsx("td",{className:"px-6 py-4 w-52",children:le(ee,"main")}),i.jsx("td",{className:"px-6 py-4 w-52",children:le(ee,"second")}),i.jsx("td",{className:"px-6 py-4 w-52",children:le(ee,"third")}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>re(ee.project.projectId),disabled:!oe,className:"p-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed","aria-label":I("saveSchedule"),children:i.jsx(es,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>ne(ee.project.projectId),disabled:!de,className:"p-2 text-white bg-red-600 hover:bg-red-700 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed","aria-label":I("deleteSchedule"),children:i.jsx(Gt,{className:"w-5 h-5"})})]})]},ee.project.projectId)})})]}),$.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:x?I("noProjectsForQuery").replace("${query}",x):I("noProjectsAvailable")})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:$.map(ee=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 space-y-3",children:[i.jsxs("div",{className:"pb-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:ee.project.projectId}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 truncate",children:ee.project.topicEng})]}),i.jsxs("div",{className:"text-xs space-y-1",children:[i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("defenseDate"),":"]})," ",ee.project.defenseDate||"N/A"]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("defenseTime"),":"]})," ",ee.project.defenseTime||"N/A"]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("defenseRoom"),":"]})," ",ee.project.defenseRoom||"N/A"]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("advisor"),":"]})," ",ee.project.advisorName]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("mainCommittee"),":"]})," ",J(ee.project.mainCommitteeId)]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("secondCommittee"),":"]})," ",J(ee.project.secondCommitteeId)]}),i.jsxs("p",{children:[i.jsxs("strong",{className:"font-medium text-slate-500 dark:text-slate-400",children:[I("thirdCommittee"),":"]})," ",J(ee.project.thirdCommitteeId)]})]}),ee.students.map((oe,de)=>i.jsxs("div",{className:`pt-2 ${de>0?"border-t border-slate-200 dark:border-slate-700":""}`,children:[i.jsxs("p",{className:"font-semibold text-sm",children:[oe.name," ",oe.surname]}),i.jsxs("p",{className:"text-xs text-slate-500",children:[oe.studentId," - ",oe.major]})]},oe.studentId)),i.jsx("div",{className:"flex justify-end pt-2",children:i.jsx("button",{onClick:()=>s(ee),className:"px-2.5 py-1 text-xs font-semibold text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors",children:I("view")})})]},ee.project.projectId))}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"defenseDate",title:I("defenseDate"),sortConfig:g,requestSort:K}),i.jsx(We,{sortKey:"defenseTime",title:I("defenseTime"),sortConfig:g,requestSort:K}),i.jsx(We,{sortKey:"defenseRoom",title:I("defenseRoom"),sortConfig:g,requestSort:K}),i.jsx(We,{sortKey:"studentId",title:I("studentId"),sortConfig:g,requestSort:K}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("gender")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("name")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("major")}),i.jsx(We,{sortKey:"projectId",title:I("projectId"),sortConfig:g,requestSort:K}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("topicLao")}),i.jsx(We,{sortKey:"topicEng",title:I("topicEng"),sortConfig:g,requestSort:K}),i.jsx(We,{sortKey:"advisorName",title:I("mainAdvisor"),sortConfig:g,requestSort:K}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("mainCommittee")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("secondCommittee")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:I("thirdCommittee")})]})}),i.jsx("tbody",{children:$.map(ee=>{const{project:oe,students:de}=ee,fe=de[0],be=de[1];return i.jsxs(Dr.Fragment,{children:[i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 align-top",children:[i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.defenseDate||I("na")}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.defenseTime||I("na")}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.defenseRoom||I("na")}),i.jsx("td",{className:"px-6 py-4",children:fe.studentId}),i.jsx("td",{className:"px-6 py-4",children:fe.gender}),i.jsxs("td",{className:"px-6 py-4",children:[fe.name," ",fe.surname]}),i.jsx("td",{className:"px-6 py-4",children:fe.major}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:i.jsx("button",{onClick:()=>s(ee),className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",children:oe.projectId})}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.topicLao}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.topicEng}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:oe.advisorName}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:J(oe.mainCommitteeId)}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:J(oe.secondCommitteeId)}),i.jsx("td",{rowSpan:2,className:"px-6 py-4 align-top",children:J(oe.thirdCommitteeId)})]}),i.jsx("tr",{className:"bg-white dark:bg-slate-800 border-b dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 align-top",children:be?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-6 py-4",children:be.studentId}),i.jsx("td",{className:"px-6 py-4",children:be.gender}),i.jsxs("td",{className:"px-6 py-4",children:[be.name," ",be.surname]}),i.jsx("td",{className:"px-6 py-4",children:be.major})]}):i.jsx("td",{className:"px-6 py-4",colSpan:4,children:" "})})]},oe.projectId)})})]}),$.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:x?I("noProjectsForQuery").replace("${query}",x):I("noProjectsAvailable")})]})]}),V&&i.jsx(vi,{isOpen:V,onClose:()=>O(!1),onConfirm:ae,data:T,columns:[{key:"_status",header:"Status"},{key:"projectId",header:"Project ID"},{key:"date",header:"Defense Date"},{key:"time",header:"Defense Time"},{key:"room",header:"Defense Room"},{key:"_error",header:"Error"}],dataTypeName:I("schedules")}),C&&i.jsx(dr,{isOpen:!!C,onClose:()=>w(null),onConfirm:se,title:I("clearScheduleTitle"),message:I("clearScheduleMessage").replace("${projectId}",C),confirmText:I("clearScheduleConfirm"),confirmButtonClass:"bg-red-600 hover:bg-red-700 focus:ring-red-500"}),_&&i.jsx(dr,{isOpen:_,onClose:()=>j(!1),onConfirm:ie,title:I("clearAllTitle"),message:I("clearAllMessage"),confirmText:I("clearAllConfirm"),confirmButtonClass:"bg-red-600 hover:bg-red-700 focus:ring-red-500"})]})},vg=({projectGroups:m,scoringSettings:a,onSelectProject:e,advisors:h})=>{const[f,l]=Z.useState({key:"projectId",direction:"ascending"}),[s,o]=Z.useState(""),r=At(),t=Ue(),n=Z.useMemo(()=>m.filter(x=>x.project.defenseDate&&x.project.mainCommitteeId&&x.project.secondCommitteeId&&x.project.thirdCommitteeId),[m]),u=x=>{let y="ascending";f&&f.key===x&&f.direction==="ascending"&&(y="descending"),l({key:x,direction:y})},c=Z.useCallback(x=>{const{mainAdvisorScore:y,mainCommitteeScore:v,secondCommitteeScore:S,thirdCommitteeScore:N}=x;if(y===null||v===null||S===null||N===null)return null;const R=(v+S+N)/3;return y+R},[]),d=Z.useCallback(x=>{if(x===null)return t("incomplete");const y=a.gradeBoundaries.find(v=>x>=v.minScore);return y?y.grade:"F"},[a.gradeBoundaries,t]),b=Z.useMemo(()=>n.map(x=>{const y=c(x.project);return{...x,finalScore:y,finalGrade:d(y),studentNames:x.students.map(v=>`${v.name} ${v.surname}`).join(", "),committeeAvgScore:x.project.mainCommitteeScore!==null&&x.project.secondCommitteeScore!==null&&x.project.thirdCommitteeScore!==null?(x.project.mainCommitteeScore+x.project.secondCommitteeScore+x.project.thirdCommitteeScore)/3:null}}),[n,c,d]),g=Z.useMemo(()=>{let x=[...b];if(s){const y=s.toLowerCase();x=x.filter(v=>v.project.projectId.toLowerCase().includes(y)||v.project.topicEng.toLowerCase().includes(y)||v.studentNames.toLowerCase().includes(y)||v.project.advisorName.toLowerCase().includes(y))}return f&&x.sort((y,v)=>{let S,N;switch(f.key){case"finalScore":S=y.finalScore===null?-1:y.finalScore,N=v.finalScore===null?-1:v.finalScore;break;case"finalGrade":S=y.finalGrade,N=v.finalGrade;break;case"studentNames":S=y.studentNames,N=v.studentNames;break;default:S=y.project[f.key],N=v.project[f.key]}return S===null||S==="Incomplete"?1:N===null||N==="Incomplete"?-1:S<N?f.direction==="ascending"?-1:1:S>N?f.direction==="ascending"?1:-1:0}),x},[b,s,f]),p=Z.useCallback(()=>{const x=g.map(S=>{var N,R,B;return{"Project ID":S.project.projectId,Students:S.studentNames,Advisor:S.project.advisorName,"Advisor Score":((N=S.project.mainAdvisorScore)==null?void 0:N.toFixed(2))??"N/A","Committee Avg.":((R=S.committeeAvgScore)==null?void 0:R.toFixed(2))??"N/A","Final Score":((B=S.finalScore)==null?void 0:B.toFixed(2))??"N/A","Final Grade":S.finalGrade}});if(x.length===0){r({type:"info",message:t("noDataToExport")});return}const y=XLSX.utils.json_to_sheet(x),v=XLSX.utils.book_new();XLSX.utils.book_append_sheet(v,y,"Scoring"),y["!cols"]=[{wch:15},{wch:40},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}],XLSX.writeFile(v,"scoring_report.xlsx"),r({type:"success",message:t("exportScoringSuccess")})},[g,r,t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Bs,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:t("manageScoringTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t("manageScoringDescription")})]})]}),i.jsxs("button",{onClick:p,className:"mt-4 sm:mt-0 flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),t("exportScoringReport")]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:t("searchByIdTopicStudent"),value:s,onChange:x=>o(x.target.value)})]})}),i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"projectId",title:t("projectId"),sortConfig:f,requestSort:u}),i.jsx(We,{sortKey:"studentNames",title:t("students"),sortConfig:f,requestSort:u}),i.jsx(We,{sortKey:"advisorName",title:t("advisor"),sortConfig:f,requestSort:u}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:t("advisorScore")}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:t("committeeAvg")}),i.jsx(We,{sortKey:"finalScore",title:t("finalScore"),sortConfig:f,requestSort:u}),i.jsx(We,{sortKey:"finalGrade",title:t("finalGrade"),sortConfig:f,requestSort:u}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:t("details")})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:g.map(x=>{var y,v,S;return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium",children:x.project.projectId}),i.jsx("td",{className:"px-6 py-4",children:x.studentNames}),i.jsx("td",{className:"px-6 py-4",children:x.project.advisorName}),i.jsx("td",{className:"px-6 py-4",children:((y=x.project.mainAdvisorScore)==null?void 0:y.toFixed(2))??t("na")}),i.jsx("td",{className:"px-6 py-4",children:((v=x.committeeAvgScore)==null?void 0:v.toFixed(2))??t("na")}),i.jsx("td",{className:"px-6 py-4 font-semibold",children:((S=x.finalScore)==null?void 0:S.toFixed(2))??t("na")}),i.jsx("td",{className:"px-6 py-4 font-bold",children:x.finalGrade}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("button",{onClick:()=>e(x),className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",children:t("view")})})]},x.project.projectId)})})]}),g.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:s?t("noProjectsForQuery").replace("${query}",s):t("noScoreableProjects")})]})]})},wg=m=>{try{return localStorage.getItem(`file_${m}`)||""}catch(a){return console.error("Error reading file from localStorage:",a),""}},_g=({projectGroups:m,advisors:a,updateProjectGrade:e})=>{const[h,f]=Z.useState({key:"projectId",direction:"ascending"}),[l,s]=Z.useState(""),[o,r]=Z.useState({}),t=At(),n=Ue(),u=Z.useMemo(()=>m.filter(y=>{var v,S;return((S=(v=y.project.finalSubmissions)==null?void 0:v.postDefenseFile)==null?void 0:S.status)===ir.Approved}),[m]),c=y=>{let v="ascending";h&&h.key===y&&h.direction==="ascending"&&(v="descending"),f({key:y,direction:v})},d=Z.useMemo(()=>{let y=[...u];if(l){const v=l.toLowerCase();y=y.filter(S=>S.project.projectId.toLowerCase().includes(v)||S.project.topicEng.toLowerCase().includes(v)||S.project.advisorName.toLowerCase().includes(v)||S.students.some(N=>`${N.name} ${N.surname}`.toLowerCase().includes(v)))}return h&&y.sort((v,S)=>{let N,R;switch(h.key){case"studentNames":N=v.students.map(B=>B.name).join(", "),R=S.students.map(B=>B.name).join(", ");break;case"finalGrade":N=v.project.finalGrade||"",R=S.project.finalGrade||"";break;default:N=v.project[h.key],R=S.project[h.key]}return N<R?h.direction==="ascending"?-1:1:N>R?h.direction==="ascending"?1:-1:0}),y},[u,l,h]),b=(y,v)=>{r(S=>({...S,[y]:v.toUpperCase()}))},g=y=>{const v=o[y];v!==void 0&&(e(y,v||null),t({type:"success",message:n("gradeSavedToast").replace("${projectId}",y)}),r(S=>{const N={...S};return delete N[y],N}))},p=y=>{var N;const v=(N=y.project.finalSubmissions)==null?void 0:N.postDefenseFile;if(!v)return;const S=wg(v.fileId);if(S){const B=y.students.map(O=>`${O.name}_${O.surname}`).join("_and_").replace(/\s+/g,"_"),M=v.name.split("."),F=M.length>1?M.pop():"file",q=`${y.project.projectId}_${B}_Final_Report.${F}`,V=document.createElement("a");V.href=S,V.download=q,document.body.appendChild(V),V.click(),document.body.removeChild(V)}else t({type:"error",message:n("couldNotRetrieveFile")})},x=Z.useCallback(()=>{const y=d.map(N=>({"Project ID":N.project.projectId,Topic:N.project.topicEng,Students:N.students.map(R=>`${R.name} ${R.surname} (${R.studentId})`).join(", "),Advisor:N.project.advisorName,"Final Grade":N.project.finalGrade||"Not Graded"}));if(y.length===0){t({type:"info",message:n("noDataToExport")});return}const v=XLSX.utils.json_to_sheet(y),S=XLSX.utils.book_new();XLSX.utils.book_append_sheet(S,v,"Final Grades"),v["!cols"]=[{wch:15},{wch:40},{wch:40},{wch:25},{wch:15}],XLSX.writeFile(S,"final_project_grades.xlsx"),t({type:"success",message:n("exportGradesSuccessToast")})},[d,t,n]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(La,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:n("finalGradesReports")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:n("finalGradesDescription")})]})]}),i.jsxs("button",{onClick:x,className:"mt-4 sm:mt-0 flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),n("exportGrades")]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full sm:w-1/2 lg:w-1/3",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(rr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 dark:placeholder:text-gray-400",placeholder:n("searchByIdTopicStudent"),value:l,onChange:y=>s(y.target.value)})]})}),i.jsx("div",{className:"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-4",children:d.map(y=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg shadow-md p-4 space-y-3",children:[i.jsxs("div",{className:"pb-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:y.project.projectId}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 truncate",children:y.project.topicEng}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[n("advisor"),": ",y.project.advisorName]})]}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:[n("students"),":"]})," ",y.students.map(v=>`${v.name} ${v.surname}`).join(", ")]}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:[n("finalReport"),":"]})," ",i.jsxs("button",{onClick:()=>p(y),className:"inline-flex items-center text-blue-600 hover:underline dark:text-blue-400",children:[n("download")," ",i.jsx(Hr,{className:"w-4 h-4 ml-1"})]})]}),i.jsxs("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:n("finalGrades")}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("input",{type:"text",value:o[y.project.projectId]??y.project.finalGrade??"",onChange:v=>b(y.project.projectId,v.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),o[y.project.projectId]!==void 0&&i.jsx("button",{onClick:()=>g(y.project.projectId),className:"p-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg",children:i.jsx(es,{className:"w-5 h-5"})})]})]})]},y.project.projectId))}),i.jsxs("div",{className:"hidden lg:block overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-slate-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx(We,{sortKey:"projectId",title:n("projectId"),sortConfig:h,requestSort:c}),i.jsx(We,{sortKey:"studentNames",title:n("students"),sortConfig:h,requestSort:c}),i.jsx(We,{sortKey:"advisorName",title:n("advisor"),sortConfig:h,requestSort:c}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:n("finalReport")}),i.jsx(We,{sortKey:"finalGrade",title:n("finalGrades"),sortConfig:h,requestSort:c}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:n("actions")})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:d.map(y=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:y.project.projectId}),i.jsx("td",{className:"px-6 py-4",children:y.students.map(v=>`${v.name} ${v.surname}`).join(", ")}),i.jsx("td",{className:"px-6 py-4",children:y.project.advisorName}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("button",{onClick:()=>p(y),className:"inline-flex items-center text-blue-600 hover:underline dark:text-blue-400",children:[i.jsx(Hr,{className:"w-4 h-4 mr-1"}),n("download")]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("input",{type:"text",value:o[y.project.projectId]??y.project.finalGrade??"",onChange:v=>b(y.project.projectId,v.target.value),className:"block w-24 text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})}),i.jsx("td",{className:"px-6 py-4 text-right",children:o[y.project.projectId]!==void 0&&i.jsx("button",{onClick:()=>g(y.project.projectId),className:"p-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg","aria-label":n("saveChanges"),children:i.jsx(es,{className:"w-5 h-5"})})})]},y.project.projectId))})]}),d.length===0&&i.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:l?`${n("noProjectsForQuery").replace("${query}",l)}`:n("noProjectsToDisplay")})]})]})},kg=[{value:"Asia/Bangkok",label:"(UTC+07:00) Bangkok, Hanoi, Jakarta, Vientiane"},{value:"Asia/Singapore",label:"(UTC+08:00) Singapore, Kuala Lumpur, Shanghai"},{value:"Asia/Tokyo",label:"(UTC+09:00) Tokyo, Seoul"},{value:"Europe/London",label:"(UTC+00:00) London, Dublin"},{value:"America/New_York",label:"(UTC-05:00) Eastern Time (US & Canada)"},{value:"America/Chicago",label:"(UTC-06:00) Central Time (US & Canada)"},{value:"America/Los_Angeles",label:"(UTC-08:00) Pacific Time (US & Canada)"},{value:"UTC",label:"(UTC+00:00) Coordinated Universal Time"}],jg=({defenseSettings:m,majors:a,advisors:e,updateDefenseSettings:h,autoScheduleDefenses:f})=>{const[l,s]=Z.useState(m),o=At(),r=Ue();Z.useEffect(()=>{s(m)},[m]);const t=Z.useCallback((x,y)=>{s(v=>({...v,[x]:y}))},[]),n=()=>{s(x=>{const y=x.rooms.map(N=>parseInt(N.name.replace("Room ",""))||0),v=y.length>0?Math.max(...y)+1:1,S={id:`R${Date.now()}`,name:`Room ${v}`,majorIds:[]};return{...x,rooms:[...x.rooms,S]}})},u=x=>{s(y=>({...y,rooms:y.rooms.filter(v=>v.id!==x),stationaryAdvisors:{...y.stationaryAdvisors,[x]:null}}))},c=(x,y)=>{s(v=>({...v,rooms:v.rooms.map(S=>S.id===x?{...S,name:y}:S)}))},d=(x,y,v)=>{s(S=>({...S,rooms:S.rooms.map(N=>{if(N.id===x){const R=v?[...N.majorIds,y]:N.majorIds.filter(B=>B!==y);return{...N,majorIds:R}}return N})}))},b=(x,y)=>{s(v=>({...v,stationaryAdvisors:{...v.stationaryAdvisors,[x]:y||null}}))},g=()=>{h(l)},p=()=>{if(!l.startDefenseDate){o({type:"error",message:r("setStartDateFirst")});return}h(l);const{committeesAssigned:x,defensesScheduled:y}=f(l);let v=r("autoScheduleCompleteToast");x>0&&y>0?v=r("autoScheduleResultToast").replace("${committeesAssigned}",String(x)).replace("${defensesScheduled}",String(y)):x>0?v=r("autoScheduleCommitteesToast").replace("${committeesAssigned}",String(x)):y>0?v=r("autoScheduleDefensesToast").replace("${defensesScheduled}",String(y)):v=r("autoScheduleNoChangesToast"),o({type:"success",message:v})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r("generalScheduleSettings")}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"startDefenseDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:r("startDefenseDate")}),i.jsx("input",{type:"date",id:"startDefenseDate",value:l.startDefenseDate,onChange:x=>t("startDefenseDate",x.target.value),className:"block w-full sm:w-1/2 mt-1 text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"timeSlots",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:r("defenseTimeSlots")}),i.jsx("input",{type:"text",id:"timeSlots",value:l.timeSlots,onChange:x=>t("timeSlots",x.target.value),placeholder:"09:00-10:00,10:15-11:15",className:"block w-full mt-1 text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r("timeSlotsHelp")})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:r("timezone")}),i.jsx("select",{id:"timezone",value:l.timezone,onChange:x=>t("timezone",x.target.value),className:"block w-full sm:w-1/2 mt-1 text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:kg.map(x=>i.jsx("option",{value:x.value,children:x.label},x.value))}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:r("timezoneHelp")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r("roomAssignments")}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r("roomAssignmentsHelp")})]}),i.jsxs("button",{type:"button",onClick:n,className:"flex-shrink-0 flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(or,{className:"w-4 h-4 mr-1"})," ",r("addRoom")]})]}),i.jsx("div",{className:"mt-4 space-y-3 max-h-80 overflow-y-auto pr-2",children:l.rooms.map(x=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-md",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("input",{type:"text",value:x.name,onChange:y=>c(x.id,y.target.value),className:"font-semibold text-slate-800 dark:text-slate-200 bg-transparent border-0 border-b-2 border-transparent focus:border-blue-500 focus:ring-0 p-1 -ml-1"}),i.jsx("button",{type:"button",onClick:()=>u(x.id),className:"text-slate-500 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400","aria-label":`Remove ${x.name}`,children:i.jsx(Gt,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-x-4 gap-y-2 mt-2",children:a.map(y=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:`room-${x.id}-major-${y.id}`,type:"checkbox",checked:x.majorIds.includes(y.id),onChange:v=>d(x.id,y.id,v.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`room-${x.id}-major-${y.id}`,className:"ml-2 block text-sm text-slate-800 dark:text-slate-200 truncate",title:y.name,children:y.abbreviation})]},y.id))})]},x.id))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r("stationaryAssignments")}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r("stationaryAssignmentsHelp")}),i.jsx("div",{className:"mt-4 space-y-3",children:l.rooms.map(x=>{var y;return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center p-3 bg-slate-50 dark:bg-slate-900/50 rounded-md",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:x.name}),i.jsxs("select",{value:((y=l.stationaryAdvisors)==null?void 0:y[x.id])||"",onChange:v=>b(x.id,v.target.value),className:"block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",children:r("anyAdvisor")}),e.map(v=>i.jsx("option",{value:v.id,children:v.name},v.id))]})]},x.id)})})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-6 py-2 text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:g,children:r("saveSettings")}),i.jsxs("button",{type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-6 py-2 text-base font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",onClick:p,children:[i.jsx(Ft,{className:"w-5 h-5 mr-2"}),r("runAutoScheduler")]})]})]})},Sg=({rubricType:m,targetScore:a,onClose:e,onSave:h})=>{const[f,l]=Z.useState(""),[s,o]=Z.useState(!1),[r,t]=Z.useState(null),n=At(),u=Ue(),c=async()=>{if(!f.trim()){n({type:"error",message:"Please enter a description for the rubric."});return}{n({type:"error",message:"AI feature is not configured."});return}},d=()=>{r&&h(r)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Ft,{className:"w-6 h-6 text-purple-500"}),u("aiRubricGenerator")]}),i.jsx("button",{onClick:e,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 flex-grow overflow-y-auto pr-2 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"rubric-prompt",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:u("rubricGeneratorDescription").replace("{targetScore}",String(a))}),i.jsx("textarea",{id:"rubric-prompt",rows:3,value:f,onChange:b=>l(b.target.value),className:"mt-1 block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"e.g., focus on research quality, presentation skills, and originality"})]}),i.jsx("button",{onClick:c,disabled:s,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),u("generating")]}):u("generateRubric")}),r&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200 mb-2",children:u("generatedRubricPreview")}),i.jsx("ul",{className:"space-y-2",children:r.map(b=>i.jsxs("li",{className:"flex justify-between items-center p-2 bg-slate-100 dark:bg-slate-700/50 rounded-md",children:[i.jsx("span",{className:"text-sm text-slate-800 dark:text-slate-200",children:b.name}),i.jsxs("span",{className:"text-sm font-bold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-0.5 rounded-full",children:[b.maxScore," pts"]})]},b.id))})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t dark:border-slate-700 mt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:u("cancel")}),i.jsx("button",{type:"button",onClick:d,disabled:!r,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:u("acceptAndReplace")})]})]})})},pa=({rubrics:m,setRubrics:a,onGenerate:e,title:h})=>{const f=Ue(),l=Z.useMemo(()=>m.reduce((t,n)=>t+(Number(n.maxScore)||0),0),[m]),s=()=>a(t=>[...t,{id:Ar(),name:"",maxScore:10}]),o=t=>a(n=>n.filter(u=>u.id!==t)),r=(t,n,u)=>{a(c=>c.map(d=>d.id===t?{...d,[n]:u}:d))};return i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[i.jsxs("h4",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:[h," (",f("totalPoints"),": ",l,")"]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:e,className:"flex items-center text-xs font-semibold text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:[i.jsx(Ft,{className:"w-4 h-4 mr-1"}),f("generateWithAI")]}),i.jsxs("button",{type:"button",onClick:s,className:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400",children:[i.jsx(or,{className:"w-4 h-4 mr-1"})," ",f("addItem")]})]})]}),i.jsx("div",{className:"mt-2 space-y-2 max-h-60 overflow-y-auto pr-2",children:m.map(t=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[i.jsx("input",{type:"text",value:t.name,onChange:n=>r(t.id,"name",n.target.value),placeholder:"Criterion Name",className:"col-span-7 block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsx("input",{type:"number",value:t.maxScore,onChange:n=>r(t.id,"maxScore",Number(n.target.value)),min:"1",className:"col-span-3 block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsx("div",{className:"col-span-2 flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>o(t.id),className:"text-slate-500 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400","aria-label":"Remove item",children:i.jsx(Gt,{className:"w-5 h-5"})})})]},t.id))})]})},Cg=({scoringSettings:m,updateScoringSettings:a})=>{const[e,h]=Z.useState(m.advisorRubrics),[f,l]=Z.useState(m.committeeRubrics),[s,o]=Z.useState(m.gradeBoundaries),[r,t]=Z.useState({}),[n,u]=Z.useState(!1),[c,d]=Z.useState("advisor"),b=Ue();Z.useEffect(()=>{h(m.advisorRubrics),l(m.committeeRubrics),o(m.gradeBoundaries)},[m]);const g=Z.useMemo(()=>e.reduce((B,M)=>B+(Number(M.maxScore)||0),0),[e]),p=Z.useMemo(()=>f.reduce((B,M)=>B+(Number(M.maxScore)||0),0),[f]),x=(B,M,F)=>{const q=[...s];q[B][M]=F,o(q)},y=()=>{o([...s,{grade:"",minScore:0}])},v=B=>{o(s.filter((M,F)=>F!==B))},S=()=>{const B={},M=g+p;M!==100&&(B.total=b("totalPointsMustBe").replace("{total}","100").replace("{current}",String(M)));const F=new Set;if(s.forEach((q,V)=>{F.has(q.minScore)&&(B[`boundary_${V}`]=b("duplicateMinScoreError").replace("{score}",String(q.minScore))),F.add(q.minScore),(q.minScore<0||q.minScore>100)&&(B[`boundary_${V}`]=b("gradeScoreError").replace("{grade}",q.grade))}),t(B),Object.keys(B).length===0){const q=[...s].sort((V,O)=>O.minScore-V.minScore);a({...m,advisorRubrics:e,committeeRubrics:f,gradeBoundaries:q})}},N=B=>{d(B),u(!0)},R=B=>{c==="advisor"?h(B):l(B),u(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-4",children:[i.jsx(pa,{title:b("advisorRubric"),rubrics:e,setRubrics:h,onGenerate:()=>N("advisor")}),i.jsx(pa,{title:b("committeeRubric"),rubrics:f,setRubrics:l,onGenerate:()=>N("committee")}),r.total&&i.jsx("p",{className:"text-red-500 text-sm font-semibold text-center",children:r.total})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:b("gradeBoundaries")}),i.jsxs("button",{type:"button",onClick:y,className:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400",children:[i.jsx(or,{className:"w-4 h-4 mr-1"})," ",b("addItem")]})]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:b("gradeBoundariesDescription")}),i.jsx("div",{className:"mt-4 space-y-2",children:s.map((B,M)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[i.jsx("div",{className:"col-span-5",children:i.jsx("input",{type:"text",value:B.grade,onChange:F=>x(M,"grade",F.target.value),placeholder:"Grade",className:"block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})}),i.jsx("div",{className:"col-span-5",children:i.jsx("input",{type:"number",value:B.minScore,onChange:F=>x(M,"minScore",Number(F.target.value)),placeholder:"Min Score",className:"block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})}),i.jsx("div",{className:"col-span-2 flex items-center pt-2",children:i.jsx("button",{type:"button",onClick:()=>v(M),className:"text-slate-500 hover:text-red-600",children:i.jsx(Gt,{className:"w-5 h-5"})})}),r[`boundary_${M}`]&&i.jsx("p",{className:"text-red-500 text-xs col-span-12",children:r[`boundary_${M}`]})]},M))})]}),i.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{type:"button",className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-6 py-2 text-base font-medium text-white bg-blue-600 hover:bg-blue-700",onClick:S,children:b("saveSettings")})}),n&&i.jsx(Sg,{rubricType:c,targetScore:c==="advisor"?g:p,onClose:()=>u(!1),onSave:R})]})},ga=({active:m,onClick:a,children:e,icon:h})=>i.jsxs("button",{type:"button",onClick:a,className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-t-lg transition-colors border-b-2
      ${m?"text-blue-600 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-slate-500 border-transparent hover:text-slate-700 dark:text-slate-400 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-600"}`,children:[h,e]}),Ng=m=>{const[a,e]=Z.useState("defense"),h=Ue();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cs,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:h("settings")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:h("settingsDescription")})]})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex -mb-px",children:[i.jsx(ga,{active:a==="defense",onClick:()=>e("defense"),icon:i.jsx(li,{className:"w-5 h-5"}),children:h("defenseScheduling")}),i.jsx(ga,{active:a==="scoring",onClick:()=>e("scoring"),icon:i.jsx(Bs,{className:"w-5 h-5"}),children:h("scoringGrading")})]})}),i.jsxs("div",{children:[a==="defense"&&i.jsx(jg,{...m}),a==="scoring"&&i.jsx(Cg,{...m})]})]})},Ag=({date:m,events:a,onSelectEvent:e,onClose:h,target:f,t:l})=>{const s=Z.useRef(null),[o,r]=Z.useState({});return Z.useEffect(()=>{const t=n=>{s.current&&!s.current.contains(n.target)&&h()};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[h]),Z.useEffect(()=>{if(s.current&&f){const t=f.getBoundingClientRect(),n=s.current.getBoundingClientRect(),u={position:"fixed",top:`${t.bottom+8}px`,left:`${t.left+t.width/2-n.width/2}px`};t.left+t.width/2+n.width/2>window.innerWidth&&(u.left=`${window.innerWidth-n.width-8}px`),t.left+t.width/2-n.width/2<0&&(u.left="8px"),r(u)}},[f]),i.jsxs("div",{ref:s,className:"z-20 w-64 p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl",style:o,children:[i.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:m.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),i.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.map(t=>i.jsx("li",{children:i.jsx("button",{onClick:()=>e(t),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:`w-2 h-2 rounded-full mr-2 flex-shrink-0 ${t.type==="milestone"?t.isOverdue?"bg-red-500":"bg-blue-500":"bg-green-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold truncate",children:t.title}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.project.project.projectId})]})]})})},t.id))})]})},Tg=({projectGroups:m,user:a,advisors:e,onSelectProject:h})=>{const[f,l]=Z.useState(new Date),[s,o]=Z.useState(null),r=Ue(),t=()=>l(new Date(f.getFullYear(),f.getMonth()-1,1)),n=()=>l(new Date(f.getFullYear(),f.getMonth()+1,1)),u=Z.useMemo(()=>{const b=new Map,g=new Date;return g.setHours(0,0,0,0),m.filter(x=>a.role==="Admin"||a.role==="DepartmentAdmin"?!0:a.role==="Student"?x.students.some(y=>y.studentId===a.id):a.role==="Advisor"?x.project.advisorName===a.name||x.project.mainCommitteeId===a.id||x.project.secondCommitteeId===a.id||x.project.thirdCommitteeId===a.id:!1).forEach(x=>{var y;if((y=x.project.milestones)==null||y.forEach(v=>{const S=new Date(v.dueDate),N=S.toISOString().split("T")[0],R=S<g&&v.status!==bt.Approved&&v.status!==bt.Submitted,B={id:v.id,type:"milestone",title:v.name,project:x,isOverdue:R,date:S};b.has(N)||b.set(N,[]),b.get(N).push(B)}),x.project.defenseDate){const v=new Date(x.project.defenseDate),S=v.toISOString().split("T")[0],N={id:`${x.project.projectId}-defense`,type:"defense",title:`${r("defense")}: ${x.project.projectId}`,project:x,date:v};b.has(S)||b.set(S,[]),b.get(S).push(N)}}),b},[m,a,e,r]),c=Z.useMemo(()=>{const b=f.getFullYear(),g=f.getMonth(),p=new Date(b,g,1),y=new Date(b,g+1,0).getDate(),v=p.getDay(),S=[],N=new Date;N.setHours(0,0,0,0);for(let B=0;B<v;B++){const M=new Date(b,g,B-v+1);S.push({date:M,isCurrentMonth:!1,isToday:!1,events:[]})}for(let B=1;B<=y;B++){const M=new Date(b,g,B),F=M.toISOString().split("T")[0],q=M.getTime()===N.getTime();S.push({date:M,isCurrentMonth:!0,isToday:q,events:u.get(F)||[]})}const R=42-S.length;for(let B=1;B<=R;B++){const M=new Date(b,g+1,B);S.push({date:M,isCurrentMonth:!1,isToday:!1,events:[]})}return S},[f,u]),d=(b,g,p)=>{g.length>2?o({date:p,target:b.currentTarget}):g.length>0&&h(g[0].project)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6",children:[i.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(_n,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:r("calendar")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:r("calendarDescription")})]})]})}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx($a,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:f.toLocaleString("default",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(qs,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-sm text-slate-600 dark:text-slate-300 mb-2",children:[r("sun"),r("mon"),r("tue"),r("wed"),r("thu"),r("fri"),r("sat")].map(b=>i.jsx("div",{className:"py-2",children:b},b))}),i.jsx("div",{className:"grid grid-cols-7 gap-1",children:c.map(({date:b,isCurrentMonth:g,isToday:p,events:x},y)=>i.jsxs("div",{className:`relative h-28 p-2 border border-slate-200 dark:border-slate-700 rounded-md transition-colors ${g?"bg-white dark:bg-slate-800":"bg-slate-50 dark:bg-slate-800/50"}`,onClick:v=>d(v,x,b),children:[i.jsx("span",{className:`text-sm font-semibold ${p?"bg-blue-600 text-white rounded-full flex items-center justify-center w-6 h-6":g?"text-slate-800 dark:text-slate-200":"text-slate-400 dark:text-slate-500"}`,children:b.getDate()}),i.jsxs("div",{className:"mt-1 space-y-1 overflow-hidden",children:[x.slice(0,2).map(v=>i.jsx("div",{className:"text-xs font-semibold text-white px-1.5 py-0.5 rounded truncate cursor-pointer",style:{backgroundColor:v.type==="milestone"?v.isOverdue?"#ef4444":"#3b82f6":"#10b981"},children:v.title},v.id)),x.length>2&&i.jsxs("div",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",children:["+",x.length-2," ",r("more")]})]})]},y))}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-4 mt-4 border-t border-slate-200 dark:border-slate-700 text-xs",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-blue-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:r("milestone")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-red-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:r("overdueMilestone")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"w-2.5 h-2.5 rounded-full mr-1.5 bg-green-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:r("defense")})]})]})]}),s&&i.jsx(Ag,{date:s.date,events:u.get(s.date.toISOString().split("T")[0])||[],onSelectEvent:b=>{h(b.project),o(null)},onClose:()=>o(null),target:s.target,t:r})]})},Eg=({allColumns:m,selectedColumns:a,setSelectedColumns:e})=>{const[h,f]=Z.useState(!1),l=Z.useRef(null),s=Ue();Z.useEffect(()=>{const t=n=>{l.current&&!l.current.contains(n.target)&&f(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const o=t=>{const n=a.includes(t)?a.filter(u=>u!==t):[...a,t];e(n)},r=()=>{a.length===m.length?e([]):e(m.map(t=>t.key))};return i.jsxs("div",{className:"relative",ref:l,children:[i.jsxs("button",{type:"button",onClick:()=>f(!h),className:"relative w-full cursor-default rounded-md bg-white dark:bg-slate-700 py-2 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-600 sm:text-sm sm:leading-6",children:[i.jsx("span",{className:"block truncate",children:s("columnsSelected").replace("{count}",String(a.length))}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:i.jsx(ui,{className:"h-5 w-5 text-gray-400"})})]}),h&&i.jsxs("div",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:[i.jsx("div",{className:"px-3 py-2 border-b dark:border-slate-600",children:i.jsxs("label",{className:"flex items-center space-x-3 text-sm",children:[i.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:a.length===m.length,onChange:r}),i.jsx("span",{children:s("allColumns")})]})}),m.map(t=>i.jsxs("label",{className:"relative flex cursor-pointer select-none py-2 pl-3 pr-9 text-gray-900 dark:text-white hover:bg-slate-100 dark:hover:bg-slate-600",children:[i.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3",checked:a.includes(t.key),onChange:()=>o(t.key)}),i.jsx("span",{className:"block truncate",children:t.label})]},t.key))]})]})},sn=20,ba=["projectId","topicEng","status","advisorName","studentId","studentName","majorName"],Ig=["studentId","studentName","gender","majorName","classroom","email","status"],Mg=({projectGroups:m,advisors:a,students:e,majors:h,classrooms:f,committeeCounts:l})=>{const[s,o]=Z.useState("project"),[r,t]=Z.useState({}),[n,u]=Z.useState(ba),[c,d]=Z.useState(null),[b,g]=Z.useState(null),[p,x]=Z.useState(1),[y,v]=Z.useState(null),[S,N]=Z.useState(!1),R=At(),B=Ue(),M=Z.useMemo(()=>[{key:"projectId",label:B("projectId"),types:["project"]},{key:"topicEng",label:B("topicEng"),types:["project"]},{key:"topicLao",label:B("topicLao"),types:["project"]},{key:"status",label:B("projectStatus"),types:["project","student"]},{key:"advisorName",label:B("advisor"),types:["project"]},{key:"studentId",label:B("studentId"),types:["project","student"]},{key:"studentName",label:B("studentName"),types:["project","student"]},{key:"gender",label:B("gender"),types:["project","student"]},{key:"majorName",label:B("major"),types:["project","student"]},{key:"classroom",label:B("classroom"),types:["project","student"]},{key:"tel",label:B("telephone"),types:["student"]},{key:"email",label:B("email"),types:["student"]},{key:"defenseDate",label:B("defenseDate"),types:["project"]},{key:"finalGrade",label:B("finalGrade"),types:["project"]}],[B]);Z.useEffect(()=>{t({}),d(null),g(null),x(1),v(null),u(s==="project"?ba:Ig)},[s]);const F=Z.useMemo(()=>M.filter(j=>j.types.includes(s)),[s,M]),q=Z.useMemo(()=>{const j=new Map(a.map(k=>[k.id,k.name]));return m.flatMap(k=>k.students.map(E=>({...E,...k.project,studentName:`${E.name} ${E.surname}`,majorName:E.major,mainCommittee:j.get(k.project.mainCommitteeId||"")||"N/A",secondCommittee:j.get(k.project.secondCommitteeId||"")||"N/A",thirdCommittee:j.get(k.project.thirdCommitteeId||"")||"N/A"})))},[m,a]),V=()=>{let j=s==="project"?q:e;Object.entries(r).forEach(([k,E])=>{E&&E!=="all"&&(j=j.filter(I=>I[k]===E))}),d(j),x(1),g(null),v(null),R({type:"success",message:B("reportGeneratedSuccess").replace("{count}",String(j.length))})},O=Z.useMemo(()=>{if(!c)return[];let j=[...c];return b&&j.sort((k,E)=>{const I=k[b.key]??"",D=E[b.key]??"";return I<D?b.direction==="ascending"?-1:1:I>D?b.direction==="ascending"?1:-1:0}),j},[c,b]),T=Z.useMemo(()=>{const j=(p-1)*sn;return O.slice(j,j+sn)},[O,p]),A=Z.useCallback(()=>{if(!c){R({type:"info",message:B("generateReportFirst")});return}const j=O.map(I=>{const D={};return n.forEach(X=>{var G;D[((G=M.find(K=>K.key===X))==null?void 0:G.label)||X]=I[X]??""}),D}),k=XLSX.utils.json_to_sheet(j),E=XLSX.utils.book_new();XLSX.utils.book_append_sheet(E,k,"Report"),XLSX.writeFile(E,`${s}_report_${new Date().toISOString().slice(0,10)}.xlsx`)},[c,O,n,s,R,B,M]),C=async()=>{if(!c||c.length===0){R({type:"info",message:B("generateReportWithDataFirst")});return}{R({type:"error",message:B("aiFeatureNotConfigured")});return}},w=()=>{switch(s){case"project":return i.jsxs(i.Fragment,{children:[i.jsxs("select",{onChange:j=>t(k=>({...k,majorName:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("allMajors")}),h.map(j=>i.jsx("option",{value:j.name,children:j.name},j.id))]}),i.jsxs("select",{onChange:j=>t(k=>({...k,advisorName:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("allAdvisors")}),a.map(j=>i.jsx("option",{value:j.name,children:j.name},j.id))]}),i.jsxs("select",{onChange:j=>t(k=>({...k,status:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("allStatuses")}),Object.values(it).map(j=>i.jsx("option",{value:j,children:j},j))]})]});case"student":return i.jsxs(i.Fragment,{children:[i.jsxs("select",{onChange:j=>t(k=>({...k,major:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("allMajors")}),h.map(j=>i.jsx("option",{value:j.name,children:j.name},j.id))]}),i.jsxs("select",{onChange:j=>t(k=>({...k,classroom:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("classrooms")}),f.map(j=>i.jsx("option",{value:j.name,children:j.name},j.id))]}),i.jsxs("select",{onChange:j=>t(k=>({...k,gender:j.target.value})),className:"select-style",children:[i.jsx("option",{value:"all",children:B("allGenders")}),Object.values(qt).map(j=>i.jsx("option",{value:j,children:j},j))]})]});default:return null}},_=j=>{g(k=>({key:j,direction:(k==null?void 0:k.key)===j&&k.direction==="ascending"?"descending":"ascending"}))};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("style",{children:`.select-style { appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; display: block; width: 100%; border-radius: 0.375rem; border-width: 0; padding-top: 0.5rem; padding-bottom: 0.5rem; padding-left: 0.75rem; color: #111827; ring: 1px solid #d1d5db; --tw-ring-inset: inset; } .dark .select-style { background-color: #374151; color: #fff; ring-color: #4b5563; } .label-style { display: block; font-size: 0.875rem; line-height: 1.25rem; font-weight: 500; color: #374151; margin-bottom: 0.25rem; } .dark .label-style { color: #d1d5db; } .btn-primary { background-color: #2563eb; color: #fff; font-weight: 700; padding: 0.5rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; } .btn-primary:hover { background-color: #1d4ed8; } .btn-primary:disabled { background-color: #9ca3af; cursor: not-allowed; } .btn-secondary { background-color: #4b5563; color: #fff; font-weight: 700; padding: 0.5rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; } .btn-secondary:hover { background-color: #374151; } .btn-secondary:disabled { background-color: #9ca3af; cursor: not-allowed; } .btn-special { background-color: #7c3aed; color: #fff; font-weight: 700; padding: 0.5rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; } .btn-special:hover { background-color: #6d28d9; } .btn-special:disabled { background-color: #9ca3af; cursor: not-allowed; }`}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Oa,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:B("reportingInsights")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:B("reportingDescription")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:B("reportType")}),i.jsxs("select",{value:s,onChange:j=>o(j.target.value),className:"select-style",children:[i.jsx("option",{value:"project",children:B("projectReport")}),i.jsx("option",{value:"student",children:B("studentReport")})]})]}),w(),i.jsxs("div",{className:"md:col-span-2 lg:col-span-4",children:[i.jsx("label",{className:"label-style",children:B("columns")}),i.jsx(Eg,{allColumns:F,selectedColumns:n,setSelectedColumns:u})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:V,className:"btn-primary w-full sm:w-auto",children:B("generateReport")}),i.jsxs("button",{onClick:A,disabled:!c,className:"btn-secondary w-full sm:w-auto",children:[i.jsx(kr,{className:"w-5 h-5 mr-2"}),B("exportToExcel")]}),i.jsxs("button",{onClick:C,disabled:!c||S,className:"btn-special w-full sm:w-auto",children:[i.jsx(Ft,{className:"w-5 h-5 mr-2"}),B("aiSummary")]})]})]}),y&&i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[i.jsx(Ft,{className:"w-5 h-5"}),B("aiSummary")]}),i.jsx("div",{className:"prose prose-sm max-w-none text-purple-700 dark:text-purple-300 mt-2",dangerouslySetInnerHTML:{__html:y.replace(/\n/g,"<br />")}})]}),c&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsx("tr",{children:n.map(j=>{var k;return i.jsx(Dr.Fragment,{children:i.jsx(We,{sortKey:j,title:((k=M.find(E=>E.key===j))==null?void 0:k.label)||j,sortConfig:b,requestSort:_,className:"px-4 py-3 text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"})},j)})})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:T.map((j,k)=>i.jsx("tr",{children:n.map(E=>i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-slate-700 dark:text-slate-300",children:j[E]??""},E))},k))})]})}),c.length===0&&i.jsx("p",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:B("noDataForFilters")}),i.jsx(Es,{currentPage:p,totalPages:Math.ceil(O.length/sn),totalItems:O.length,itemsPerPage:sn,onPageChange:x})]})]})},nn=({title:m,description:a,icon:e,children:h})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[i.jsx("div",{className:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/50 rounded-full p-3",children:e}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:m}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:a})]})]}),i.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:h})]}),Rg=({user:m,projectGroups:a,advisors:e,students:h,majors:f,advisorProjectCounts:l,systemHealthIssues:s,isAnalyzingSystemHealth:o,onRunSystemHealthAnalysis:r,securityIssues:t,isAnalyzingSecurity:n,onRunSecurityAudit:u})=>{const c=At(),d=Ue(),[b,g]=Z.useState(""),[p,x]=Z.useState(null),[y,v]=Z.useState(!1),[S,N]=Z.useState(""),[R,B]=Z.useState(null),[M,F]=Z.useState(!1),q=Z.useMemo(()=>a.filter(T=>T.project.status==="Pending"),[a]),V=async()=>{if(!b){c({type:"error",message:d("selectProjectFirst")});return}{c({type:"error",message:d("aiFeatureNotConfigured")});return}},O=async()=>{if(!S.trim()){c({type:"error",message:d("enterTopicToCheck")});return}{c({type:"error",message:d("aiFeatureNotConfigured")});return}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ft,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:d("aiToolsTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:d("aiToolsShortDescription")})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(nn,{title:d("systemHealthCheckTitle"),description:d("systemHealthCheckDescription"),icon:i.jsx(fi,{className:"w-6 h-6 text-blue-600"}),children:[i.jsx("button",{onClick:r,disabled:o,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:o?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d("runAnalysis")}),i.jsxs("div",{className:"mt-4 space-y-3 max-h-60 overflow-y-auto pr-2",children:[s===null&&!o&&i.jsx("p",{className:"text-sm text-center text-slate-500 dark:text-slate-400",children:d("runAnalysisToSeeResults")}),o&&i.jsx("div",{className:"text-sm text-center text-slate-500 dark:text-slate-400",children:d("analyzing")}),(s==null?void 0:s.length)===0&&i.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[i.jsx(Kt,{className:"w-5 h-5"})," ",i.jsx("p",{children:d("noSystemHealthIssues")})]}),s&&s.length>0&&s.map((T,A)=>i.jsxs("div",{className:"p-2 bg-slate-100 dark:bg-slate-700/50 rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm",children:T.type}),i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[T.description," ",i.jsx("em",{className:"text-slate-500",children:T.recommendation})]})]},A))]})]}),i.jsxs(nn,{title:d("securityAuditTitle"),description:d("securityAuditDescription"),icon:i.jsx(qa,{className:"w-6 h-6 text-blue-600"}),children:[i.jsx("button",{onClick:u,disabled:n,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:n?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d("runSecurityAudit")}),i.jsxs("div",{className:"mt-4 space-y-3 max-h-60 overflow-y-auto pr-2",children:[t===null&&!n&&i.jsx("p",{className:"text-sm text-center text-slate-500 dark:text-slate-400",children:d("runAnalysisToSeeResults")}),n&&i.jsx("div",{className:"text-sm text-center text-slate-500 dark:text-slate-400",children:d("analyzing")}),(t==null?void 0:t.length)===0&&i.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[i.jsx(Kt,{className:"w-5 h-5"})," ",i.jsx("p",{children:d("noSecurityIssues")})]}),t&&t.length>0&&t.map((T,A)=>i.jsxs("div",{className:"p-2 bg-slate-100 dark:bg-slate-700/50 rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm",children:T.type}),i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[T.description," ",i.jsx("em",{className:"text-slate-500",children:T.recommendation})]})]},A))]})]}),i.jsx(nn,{title:d("advisorSuggesterTitle"),description:d("advisorSuggesterDescription"),icon:i.jsx(_r,{className:"w-6 h-6 text-blue-600"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"project-select",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:d("selectPendingProject")}),i.jsxs("select",{id:"project-select",value:b,onChange:T=>g(T.target.value),className:"mt-1 block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",disabled:!0,children:d("selectAProject")}),q.map(T=>i.jsxs("option",{value:T.project.projectId,children:[T.project.projectId," - ",T.project.topicEng]},T.project.projectId))]})]}),i.jsx("button",{onClick:V,disabled:y||!b,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:y?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d("suggestAdvisors")}),p&&i.jsx("div",{className:"space-y-3 pt-2",children:p.map(T=>i.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:T.advisorName}),i.jsxs("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:[d("match"),": ",T.matchScore,"%"]})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[d("majors"),": ",T.specializedMajors," | ",d("workload"),": ",T.currentWorkload]}),i.jsxs("p",{className:"text-xs italic text-slate-600 dark:text-slate-300 mt-1",children:['"',T.reasoning,'"']})]},T.advisorName))})]})}),i.jsx(nn,{title:d("similarityCheckerTitle"),description:d("similarityCheckerDescription"),icon:i.jsx(rr,{className:"w-6 h-6 text-blue-600"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"topic-check",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:d("topicToCheck")}),i.jsx("textarea",{id:"topic-check",rows:2,value:S,onChange:T=>N(T.target.value),className:"mt-1 block w-full text-sm rounded-md border-gray-300 shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Enter a new project topic in English..."})]}),i.jsx("button",{onClick:O,disabled:M||!S,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:M?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d("checkForSimilarity")}),R&&i.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-semibold",children:[d("result"),": ",i.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[R.similarityPercentage.toFixed(1),"% ",d("similar")]})]}),R.similarProjectId&&i.jsxs("p",{className:"text-xs",children:[d("mostSimilarTo"),": ",R.similarProjectId]}),i.jsxs("p",{className:"text-xs italic mt-1",children:['"',R.reason,'"']})]})]})})]})]})},Pg=m=>{const[a,e]=Z.useState(!1),[h,f]=Z.useState(0);Z.useEffect(()=>{if(!m){e(!1);return}const t=setTimeout(()=>{try{localStorage.getItem(`tourCompleted_${m}`)||(e(!0),f(0))}catch(n){console.error("Could not access localStorage:",n)}},500);return()=>clearTimeout(t)},[m]);const l=Z.useCallback(()=>{m&&(e(!0),f(0))},[m]),s=Z.useCallback(()=>{f(t=>t+1)},[]),o=Z.useCallback(()=>{f(t=>Math.max(0,t-1))},[]),r=Z.useCallback(()=>{if(m)try{localStorage.setItem(`tourCompleted_${m}`,"true")}catch(t){console.error("Could not write to localStorage:",t)}e(!1)},[m]);return{isActive:a,currentStep:h,startTour:l,nextStep:s,prevStep:o,finishTour:r}},Dg=m=>[{target:"#welcome-panel",title:m("tourWelcomeTitle"),content:m("tourWelcomeContent"),placement:"bottom"},{target:"#register-project-btn-welcome",title:m("tourRegisterTitle"),content:m("tourRegisterContent"),placement:"bottom"},{target:"#advisor-workload-panel",title:m("tourAdvisorTitle"),content:m("tourAdvisorContent"),placement:"left"}],Fg=m=>[{target:"#dashboard-stats-grid",title:m("tourAdvisorWelcomeTitle"),content:m("tourAdvisorWelcomeContent"),placement:"bottom"},{target:"#needs-review-btn",title:m("tourActionItemsTitle"),content:m("tourActionItemsContent"),placement:"bottom"},{target:".project-table-row",title:m("tourProjectListTitle"),content:m("tourProjectListContent"),placement:"bottom"},{target:".project-table-row",title:m("tourProjectDetailsTitle"),content:m("tourProjectDetailsContent"),placement:"top"}],Lg=({isActive:m,currentStep:a,tourSteps:e,nextStep:h,prevStep:f,finishTour:l})=>{const[s,o]=Z.useState(null),r=e[a],t=Ue();if(Z.useLayoutEffect(()=>{if(m&&(r!=null&&r.target)){const b=document.querySelector(r.target);if(b){const g=b.getBoundingClientRect();o(g),b.classList.add("tour-highlight")}else o(null)}return()=>{if(r!=null&&r.target){const b=document.querySelector(r.target);b==null||b.classList.remove("tour-highlight")}}},[m,a,r]),!m||!r||!s)return null;const n={},u={},c=r.placement||"bottom";switch(c){case"top":n.top=`${s.top-8}px`,n.left=`${s.left+s.width/2}px`,n.transform="translate(-50%, -100%)",u.top="100%",u.left="50%",u.transform="translateX(-50%)",u.borderTopColor="rgb(30 41 59)",u.borderBottomColor="transparent";break;case"left":n.top=`${s.top+s.height/2}px`,n.left=`${s.left-8}px`,n.transform="translate(-100%, -50%)",u.left="100%",u.top="50%",u.transform="translateY(-50%)",u.borderLeftColor="rgb(30 41 59)",u.borderRightColor="transparent";break;case"right":n.top=`${s.top+s.height/2}px`,n.left=`${s.right+8}px`,n.transform="translateY(-50%)",u.right="100%",u.top="50%",u.transform="translateY(-50%)",u.borderRightColor="rgb(30 41 59)",u.borderLeftColor="transparent";break;case"center":n.top="50%",n.left="50%",n.transform="translate(-50%, -50%)";break;case"bottom":default:n.top=`${s.bottom+8}px`,n.left=`${s.left+s.width/2}px`,n.transform="translateX(-50%)",u.bottom="100%",u.left="50%",u.transform="translateX(-50%)",u.borderBottomColor="rgb(30 41 59)",u.borderTopColor="transparent";break}const d=a===e.length-1;return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:".tour-highlight { z-index: 10001 !important; position: relative !important; box-shadow: 0 0 0 9999px rgba(0,0,0,0.5); border-radius: 4px; }"}),i.jsx(fc,{in:!0,children:i.jsx(at,{sx:{position:"fixed",inset:0,zIndex:1e4},children:i.jsxs(yn,{elevation:24,sx:{position:"fixed",...n,bgcolor:"grey.800",color:"white",borderRadius:2,p:2,width:288,zIndex:10002},role:"dialog","aria-labelledby":"tour-title",children:[c!=="center"&&i.jsx(at,{sx:{position:"absolute",width:0,height:0,border:"8px solid",...u}}),i.jsxs(Tr,{spacing:2,children:[i.jsxs(at,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(Qe,{id:"tour-title",variant:"subtitle1",fontWeight:"bold",children:r.title}),i.jsx(Qr,{onClick:l,size:"small",sx:{color:"grey.400","&:hover":{color:"white"}},children:i.jsx(vn,{fontSize:"small"})})]}),i.jsx(Qe,{variant:"body2",sx:{color:"grey.300"},children:r.content}),i.jsxs(at,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs(Qe,{variant:"caption",sx:{color:"grey.500"},children:[a+1," / ",e.length]}),i.jsxs(Tr,{direction:"row",spacing:1,children:[a>0&&i.jsx(pr,{onClick:f,size:"small",variant:"contained",sx:{bgcolor:"grey.600","&:hover":{bgcolor:"grey.500"},textTransform:"none"},children:t("back")}),i.jsx(pr,{onClick:d?l:h,size:"small",variant:"contained",color:"primary",sx:{textTransform:"none"},children:t(d?"finish":"next")})]})]})]})]})})})]})},Og=m=>{const a=m.toLowerCase();return a.includes("approved")?{Icon:Kt,color:"text-green-500"}:a.includes("rejected")?{Icon:Ba,color:"text-red-500"}:a.includes("submitted")||a.includes("submission")?{Icon:Xr,color:"text-blue-500"}:a.includes("feedback")?{Icon:Or,color:"text-purple-500"}:a.includes("updated")||a.includes("changed")?{Icon:er,color:"text-yellow-500"}:a.includes("transferred")?{Icon:Ss,color:"text-orange-500"}:a.includes("assigned")?{Icon:Fr,color:"text-indigo-500"}:a.includes("scheduled")?{Icon:_n,color:"text-teal-500"}:{Icon:js,color:"text-slate-500"}},Sl=({notifications:m,onSelectNotification:a})=>{const e=m.slice(0,10),h=Ue();return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 h-full",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-full mr-3",children:i.jsx(Vc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h("recentActivity")})]}),e.length>0?i.jsx("ul",{className:"space-y-2",children:e.map(f=>{const{Icon:l,color:s}=Og(f.message);return i.jsx("li",{children:i.jsx("button",{onClick:()=>a(f),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx(l,{className:`w-5 h-5 ${s}`})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:f.message}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:ls(f.timestamp,h)})]})]})})},f.id)})}):i.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400 py-4",children:h("noRecentActivity")})]})},on=({title:m,value:a,icon:e,onClick:h,color:f})=>i.jsxs("button",{onClick:h,disabled:!h,className:`bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex items-center space-x-4 w-full text-left ${h?"transition-transform transform hover:scale-105 hover:shadow-lg":"cursor-default"}`,children:[i.jsx("div",{className:`flex-shrink-0 ${f} rounded-full p-3`,children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a})]})]}),an=({title:m,count:a,quota:e,colorClass:h})=>{const f=e>0?a/e*100:0,l=a>e,s=l?100:f,o=l?"bg-red-500":h;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsxs("p",{className:`text-sm font-semibold ${l?"text-red-500 dark:text-red-400":"text-slate-800 dark:text-slate-100"}`,children:[a," / ",e]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-2",children:i.jsx("div",{className:`${o} h-2 rounded-full transition-all duration-500`,style:{width:`${s}%`}})})]})},Bg=m=>{var I,D,X,G;const{user:a,projectGroups:e,students:h,advisors:f,committeeCounts:l,announcements:s,notifications:o,onSelectNotification:r,onSelectProject:t,onUpdateStatus:n,updateDetailedScore:u,addToast:c,scoringSettings:d,onOpenAiAssistant:b,majors:g,onNavigate:p}=m,[x,y]=Z.useState(!1),[v,S]=Z.useState(null),N=Ue(),R=Z.useMemo(()=>f.find(K=>K.id===a.id),[f,a.id]),B=Z.useMemo(()=>e.filter(K=>K.project.advisorName===a.name),[e,a.name]),{studentCount:M,projectCount:F}=Z.useMemo(()=>{const K=new Set;return B.forEach(U=>U.students.forEach(J=>K.add(J.studentId))),{studentCount:K.size,projectCount:B.length}},[B]),q=Z.useMemo(()=>B.filter(K=>K.project.status===it.Pending),[B]),V=Z.useMemo(()=>{const K=[];return B.forEach(U=>{var J;(J=U.project.milestones)==null||J.forEach($=>{$.status==="Submitted"&&K.push({projectGroupId:U.project.projectId,milestoneName:$.name,studentNames:U.students.map(L=>`${L.name} ${L.surname}`).join(", ")})})}),K},[B]),O=Z.useMemo(()=>e.filter(K=>K.project.mainCommitteeId===a.id||K.project.secondCommitteeId===a.id||K.project.thirdCommitteeId===a.id),[e,a.id]),T=Z.useMemo(()=>[...B].sort((K,U)=>{var L,W,re,ne;const J=((W=(L=K.project.log)==null?void 0:L[K.project.log.length-1])==null?void 0:W.timestamp)||0,$=((ne=(re=U.project.log)==null?void 0:re[U.project.log.length-1])==null?void 0:ne.timestamp)||0;return new Date($).getTime()-new Date(J).getTime()}).slice(0,5),[B]),A=Z.useMemo(()=>d.committeeRubrics.reduce((K,U)=>K+U.maxScore,0),[d.committeeRubrics]),C=Z.useMemo(()=>o.filter(K=>K.userIds.includes(a.id)),[o,a.id]),w=Z.useMemo(()=>{const K=new Date;K.setHours(0,0,0,0);const U=new Date(K);U.setDate(K.getDate()+7);const J=[];return e.filter(L=>L.project.advisorName===a.name||L.project.mainCommitteeId===a.id||L.project.secondCommitteeId===a.id||L.project.thirdCommitteeId===a.id).forEach(L=>{var W;if(L.project.advisorName===a.name&&((W=L.project.milestones)==null||W.forEach(re=>{const ne=new Date(re.dueDate);ne>=K&&ne<=U&&J.push({date:ne,type:"milestone",text:`${N("milestoneDue")}: ${re.name}`,project:L})})),L.project.defenseDate){const re=new Date(L.project.defenseDate);if(re>=K&&re<=U){let ne="";L.project.advisorName===a.name?ne=N("mainAdvisor"):L.project.mainCommitteeId===a.id?ne=N("mainCommittee"):L.project.secondCommitteeId===a.id?ne=N("secondCommittee"):L.project.thirdCommitteeId===a.id&&(ne=N("thirdCommittee")),ne&&J.push({date:re,type:"defense",text:`${N("defense")} (${ne})`,project:L})}}}),J.sort((L,W)=>L.date.getTime()-W.date.getTime())},[e,a,N]),_=(K,U)=>K.mainCommitteeId===U?N("mainCommittee"):K.secondCommitteeId===U?N("secondCommittee"):K.thirdCommitteeId===U?N("thirdCommittee"):"",j=K=>{S({project:K,rubric:d.committeeRubrics,evaluatorId:a.id,evaluatorName:a.name,maxTotalScore:A}),y(!0)},k=K=>{v&&(u(v.project.projectId,v.evaluatorId,K),c({type:"success",message:N("committeeScoreSubmitted")})),y(!1)},E=K=>{const U=new Date;U.setHours(0,0,0,0);const J=new Date(U);J.setDate(U.getDate()+1);const $=new Date(K);return $.setHours(0,0,0,0),$.getTime()===U.getTime()?N("today"):$.getTime()===J.getTime()?N("tomorrow"):K.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:N("advisorDashboardWelcome").replace("{name}",a.name)}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:N("advisorDashboardDescription")})]}),i.jsxs("div",{id:"dashboard-stats-grid",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(on,{title:N("projectsToReview"),value:q.length,icon:i.jsx(lr,{className:"w-6 h-6 text-orange-800"}),color:"bg-orange-100 dark:bg-orange-900/50"}),i.jsx(on,{title:N("milestonesToReview"),value:V.length,icon:i.jsx(Lr,{className:"w-6 h-6 text-blue-800"}),color:"bg-blue-100 dark:bg-blue-900/50"}),i.jsx(on,{title:N("supervisingProjects"),value:F,icon:i.jsx(_r,{className:"w-6 h-6 text-green-800"}),onClick:()=>p("projects"),color:"bg-green-100 dark:bg-green-900/50"}),i.jsx(on,{title:N("totalStudents"),value:M,icon:i.jsx(Fr,{className:"w-6 h-6 text-indigo-800"}),color:"bg-indigo-100 dark:bg-indigo-900/50"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:N("actionCenter")}),q.length===0&&V.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:N("allCaughtUp")}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-600 dark:text-slate-300 mb-2",children:N("projectApprovals")}),i.jsx("div",{className:"space-y-3",children:q.length>0?q.map(K=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline cursor-pointer truncate",onClick:()=>t(K),children:K.project.topicEng}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:K.students.map(U=>`${U.name} ${U.surname}`).join(", ")}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("button",{onClick:()=>n(K.project.projectId,it.Approved,a,{}),className:"flex-1 text-xs text-white bg-green-600 hover:bg-green-700 rounded-md px-2 py-1",children:N("approve")}),i.jsx("button",{onClick:()=>n(K.project.projectId,it.Rejected,a,{}),className:"flex-1 text-xs text-white bg-red-600 hover:bg-red-700 rounded-md px-2 py-1",children:N("reject")})]})]},K.project.projectId)):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:N("noProjectsAwaitingApproval")})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-600 dark:text-slate-300 mb-2",children:N("milestoneReviews")}),i.jsx("div",{className:"space-y-3",children:V.length>0?V.map(K=>{const U=B.find(J=>J.project.projectId===K.projectGroupId);return i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline cursor-pointer truncate",onClick:()=>U&&t(U),children:K.milestoneName}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:K.studentNames}),i.jsx("button",{onClick:()=>U&&t(U),className:"mt-2 w-full text-xs text-white bg-blue-600 hover:bg-blue-700 rounded-md px-2 py-1",children:N("reviewSubmission")})]},K.projectGroupId+K.milestoneName)}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:N("noMilestonesToReview")})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:N("recentlyUpdatedProjects")}),i.jsx("button",{onClick:()=>p("projects"),className:"text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:N("viewAllMyProjects")})]}),i.jsx("div",{className:"space-y-3",children:T.map(K=>{var U;return i.jsxs("button",{onClick:()=>t(K),className:"w-full text-left p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 truncate",children:K.project.topicEng}),i.jsxs("div",{className:"flex justify-between items-baseline text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{children:K.students.map(J=>J.name).join(", ")}),i.jsxs("span",{children:[N("lastActivity"),": ",(U=K.project.log)!=null&&U.length?ls(K.project.log[K.project.log.length-1].timestamp,N):N("na")]})]})]},K.project.projectId)})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:N("committeeAssignments")}),O.length>0?i.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:O.map(K=>{const U=_(K.project,a.id);let J=null;return U===N("mainCommittee")?J=K.project.mainCommitteeScore:U===N("secondCommittee")?J=K.project.secondCommitteeScore:U===N("thirdCommittee")&&(J=K.project.thirdCommitteeScore),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("button",{onClick:()=>t(K),className:"text-left",children:[i.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:K.project.projectId}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:U})]}),K.project.defenseDate&&i.jsx("button",{onClick:()=>j(K.project),className:"text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-full px-3 py-1",children:N(J!==null?"editScore":"scoreNow")})]})},K.project.projectId)})}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:N("noCommitteeAssignments")})]})]}),i.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:N("yourWorkload")}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(an,{title:N("projectSupervision"),count:F,quota:R.quota,colorClass:"bg-blue-600"}),i.jsx(an,{title:N("mainCommittee"),count:((I=l[a.id])==null?void 0:I.main)||0,quota:R.mainCommitteeQuota,colorClass:"bg-green-600"}),i.jsx(an,{title:N("secondCommittee"),count:((D=l[a.id])==null?void 0:D.second)||0,quota:R.secondCommitteeQuota,colorClass:"bg-yellow-500"}),i.jsx(an,{title:N("thirdCommittee"),count:((X=l[a.id])==null?void 0:X.third)||0,quota:R.thirdCommitteeQuota,colorClass:"bg-purple-500"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:N("yourWeekAhead")}),w.length>0?i.jsx("ul",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:w.map((K,U)=>i.jsx("li",{children:i.jsx("button",{onClick:()=>t(K.project),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-shrink-0 text-center w-12",children:[i.jsx("p",{className:"font-bold text-blue-600 dark:text-blue-400",children:E(K.date)}),K.type==="defense"&&i.jsx("p",{className:"text-xs",children:K.project.project.defenseTime})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:`w-1 h-full rounded-full mr-2 ${K.type==="milestone"?"bg-blue-500":"bg-green-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold truncate",children:K.text}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:K.project.project.projectId})]})]})]})})},U))}):i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx(_n,{className:"w-10 h-10 mx-auto text-slate-400 mb-2"}),i.jsx("p",{className:"text-sm",children:N("noUpcomingEvents")})]})]}),i.jsx(Sl,{notifications:C,onSelectNotification:r})]})]}),x&&v&&i.jsx(jn,{isOpen:x,onClose:()=>y(!1),onSave:k,rubric:v.rubric,initialScores:((G=v.project.detailedScores)==null?void 0:G[v.evaluatorId])||{},evaluatorName:v.evaluatorName,maxTotalScore:v.maxTotalScore})]})},Ug=({onClose:m,onSelectTopic:a,student:e,majors:h})=>{const[f,l]=Z.useState(""),[s,o]=Z.useState([]),[r,t]=Z.useState(!1),n=At(),u=Ue(),c=Z.useMemo(()=>h.find(g=>g.name===e.major),[e,h]),d=async()=>{if(!f.trim()){n({type:"error",message:u("interestRequiredError")});return}{n({type:"error",message:u("aiFeatureNotConfigured")});return}},b=g=>{a({lao:g.topicLao,eng:g.topicEng})};return i.jsxs(Ta,{open:!0,onClose:m,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{maxHeight:"90vh"}},children:[i.jsx(Ea,{children:i.jsxs(at,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs(at,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[i.jsx(hc,{sx:{fontSize:28,color:"warning.main"}}),i.jsx(Qe,{variant:"h5",fontWeight:"bold",children:u("aiTopicSuggester")})]}),i.jsx(Qr,{onClick:m,size:"small",children:i.jsx(vn,{})})]})}),i.jsx(Ia,{dividers:!0,children:i.jsxs(Tr,{spacing:3,children:[i.jsx(Qe,{variant:"body2",color:"text.secondary",children:u("topicSuggesterDescription").replace("{majorName}",(c==null?void 0:c.name)||"Business")}),i.jsxs(Tr,{direction:"row",spacing:1,children:[i.jsx(nr,{fullWidth:!0,value:f,onChange:g=>l(g.target.value),placeholder:u("topicSuggesterPlaceholder"),size:"small",onKeyPress:g=>{g.key==="Enter"&&!r&&d()}}),i.jsx(pr,{variant:"contained",onClick:d,disabled:r,startIcon:r?i.jsx(Ma,{size:20,color:"inherit"}):i.jsx(Ra,{}),sx:{minWidth:120},children:u("generate")})]}),s.length>0&&i.jsx(mc,{sx:{maxHeight:"400px",overflow:"auto"},children:s.map((g,p)=>i.jsxs(pc,{component:yn,elevation:1,sx:{mb:2,flexDirection:"column",alignItems:"stretch",p:2,"&:hover":{bgcolor:"action.hover"}},children:[i.jsx(gc,{primary:i.jsx(Qe,{variant:"subtitle1",fontWeight:"bold",children:g.topicEng}),secondary:i.jsx(Qe,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:g.topicLao})}),i.jsx(at,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:i.jsx(pr,{size:"small",onClick:()=>b(g),sx:{textTransform:"none"},children:u("useThisTopic")})})]},p))})]})})]})},$g=({user:m,onClose:a,studentProjectGroup:e,allProjects:h,allAdvisors:f,allStudents:l})=>{const[s,o]=Z.useState(null),[r,t]=Z.useState([]),[n,u]=Z.useState(""),[c,d]=Z.useState(!1),b=Z.useRef(null),g=Z.useRef(null),p=()=>{var v;(v=b.current)==null||v.scrollIntoView({behavior:"smooth"})};Z.useEffect(()=>{p()},[r]),Z.useEffect(()=>{g.current&&(g.current.style.height="auto",g.current.style.height=`${g.current.scrollHeight}px`)},[n]);const x=Z.useCallback(()=>{{t([{role:"system",text:"AI Assistant is not configured. Missing API key."}]);return}},[m,e,h,l,f]);Z.useEffect(()=>{x()},[x]);const y=async v=>{if(v.preventDefault(),!n.trim()||c||!s)return;const S={role:"user",text:n};t(N=>[...N,S]),u(""),d(!0);try{const N=await s.sendMessageStream({message:n});let R="";t(B=>[...B,{role:"model",text:""}]);for await(const B of N)R+=B.text,t(M=>{const F=[...M];return F[F.length-1].text=R,F})}catch(N){console.error("Gemini API error:",N),t(R=>[...R,{role:"system",text:"Sorry, I encountered an error. Please try again."}])}finally{d(!1)}};return i.jsxs("div",{className:"fixed bottom-6 right-6 sm:bottom-8 sm:right-8 z-50 w-[calc(100%-3rem)] sm:w-96 h-[70vh] sm:h-[600px] flex flex-col bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ft,{className:"w-6 h-6 text-purple-500"}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"AI Assistant"})]}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white","aria-label":"Close chat",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[r.map((v,S)=>i.jsx("div",{className:`flex ${v.role==="user"?"justify-end":"justify-start"}`,children:v.role==="system"?i.jsx("div",{className:"text-center w-full text-xs text-red-500 dark:text-red-400 bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:v.text}):i.jsx("div",{className:`p-3 rounded-2xl max-w-[85%] text-sm ${v.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-bl-none"}`,children:i.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:v.text.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />")}})})},S)),c&&i.jsx("div",{className:"flex justify-start",children:i.jsxs("div",{className:"p-3 rounded-2xl bg-slate-200 dark:bg-slate-700 rounded-bl-none flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.2s]"}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.4s]"})]})}),i.jsx("div",{ref:b})]}),i.jsx("form",{onSubmit:y,className:"p-4 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("textarea",{ref:g,value:n,onChange:v=>u(v.target.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&y(v)},placeholder:"Ask me anything...",disabled:!s||c,rows:1,className:"block w-full rounded-lg border-0 p-2.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 dark:bg-slate-700 dark:text-white dark:ring-slate-600 resize-none"}),i.jsx("button",{type:"submit",disabled:!s||c||!n.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold p-2.5 rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed",children:i.jsx(di,{className:"w-5 h-5"})})]})})]})},Vn=({title:m,status:a,message:e})=>{const h={success:{icon:i.jsx(Kt,{className:"w-6 h-6 text-green-500"}),color:"border-green-500"},warning:{icon:i.jsx(cr,{className:"w-6 h-6 text-yellow-500"}),color:"border-yellow-500"},error:{icon:i.jsx(cr,{className:"w-6 h-6 text-red-500"}),color:"border-red-500"},info:{icon:i.jsx(za,{className:"w-6 h-6 text-blue-500"}),color:"border-blue-500"}},{icon:f,color:l}=h[a];return i.jsxs("div",{className:`flex items-start gap-4 p-3 border-l-4 ${l}`,children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:f}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-100",children:m}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e})]})]})},zg=({onClose:m,advisors:a,majors:e,classrooms:h,defenseSettings:f,scoringSettings:l,milestoneTemplates:s,projectGroups:o,students:r})=>{const t=Ue(),[n,u]=Z.useState(0),c=Z.useMemo(()=>{const d={title:t("defenseSettingsConfigured"),status:"error",message:t("defenseSettingsConfigured_error")};f.startDefenseDate&&f.timeSlots&&f.rooms.length>0&&(d.status="success",d.message=t("defenseSettingsConfigured_ok"));const b={title:t("scoringSettingsConfigured"),status:"error",message:t("scoringSettingsConfigured_error")};l.gradeBoundaries.length>0&&l.advisorRubrics.length>0&&l.committeeRubrics.length>0&&(b.status="success",b.message=t("scoringSettingsConfigured_ok"));const g={title:t("milestoneTemplatesExist"),status:"warning",message:t("milestoneTemplatesExist_warning")};s.length>0&&(g.status="success",g.message=t("milestoneTemplatesExist_ok"));const p={title:t("advisorsExist"),status:"error",message:t("advisorsExist_error")};a.length>0&&(p.status="success",p.message=t("advisorsExist_ok"));const x={title:t("majorsExist"),status:"error",message:t("majorsExist_error")};e.length>0&&(x.status="success",x.message=t("majorsExist_ok"));const y={title:t("classroomsExist"),status:"warning",message:t("classroomsExist_warning")};h.length>0&&(y.status="success",y.message=t("classroomsExist_ok"));const v=new Set(o.flatMap(V=>V.students.map(O=>O.studentId))),S=r.filter(V=>V.status==="Approved"&&!v.has(V.studentId)),N={title:t("studentsWithoutProjects"),status:"success",message:t("studentsWithoutProjects_ok")};S.length>0&&(N.status="info",N.message=t("studentsWithoutProjects_warning").replace("{count}",String(S.length)));const R=o.reduce((V,O)=>((O.project.status===it.Approved||O.project.status===it.Pending)&&(V[O.project.advisorName]=(V[O.project.advisorName]||0)+1),V),{}),B=a.filter(V=>(R[V.name]||0)>V.quota),M={title:t("advisorsOverQuota"),status:"success",message:t("advisorsOverQuota_ok")};B.length>0&&(M.status="warning",M.message=t("advisorsOverQuota_warning").replace("{count}",String(B.length)).replace("{names}",B.map(V=>V.name).join(", ")));const F=o.filter(V=>V.project.status===it.Approved&&(!V.project.milestones||V.project.milestones.length===0)),q={title:t("projectsWithoutMilestones"),status:"success",message:t("projectsWithoutMilestones_ok")};return F.length>0&&(q.status="warning",q.message=t("projectsWithoutMilestones_warning").replace("{count}",String(F.length))),{configuration:[d,b,g],coreData:[p,x,y],dataIntegrity:[N,M,q]}},[n,a,e,h,f,l,s,o,r,t]);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:t("appReadinessStatus")}),i.jsx("button",{onClick:m,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"my-4 text-sm text-slate-600 dark:text-slate-400",children:i.jsx("p",{children:t("readinessCheckDescription")})}),i.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700 dark:text-slate-200",children:t("readinessConfiguration")}),i.jsx("div",{className:"space-y-3",children:c.configuration.map(d=>i.jsx(Vn,{...d},d.title))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700 dark:text-slate-200",children:t("readinessCoreData")}),i.jsx("div",{className:"space-y-3",children:c.coreData.map(d=>i.jsx(Vn,{...d},d.title))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700 dark:text-slate-200",children:t("readinessDataIntegrity")}),i.jsx("div",{className:"space-y-3",children:c.dataIntegrity.map(d=>i.jsx(Vn,{...d},d.title))})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 mt-4 border-t border-slate-700",children:[i.jsxs("button",{onClick:()=>u(d=>d+1),className:"flex items-center gap-2 bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500 font-bold py-2 px-4 rounded-lg",children:[i.jsx($s,{className:"w-5 h-5"})," ",t("rerunChecks")]}),i.jsx("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:t("closeBtn")})]})]})})},ln=({title:m,value:a,icon:e,onClick:h,color:f})=>i.jsxs("button",{onClick:h,disabled:!h,className:`bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex items-center space-x-4 w-full text-left ${h?"transition-transform transform hover:scale-105 hover:shadow-lg":"cursor-default"}`,children:[i.jsx("div",{className:`flex-shrink-0 ${f} rounded-full p-3`,children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a})]})]}),qg=m=>{const{user:a,projectGroups:e,advisors:h,students:f,announcements:l,notifications:s,advisorProjectCounts:o,onViewProjects:r,onSelectNotification:t,onNavigate:n,onSelectProject:u,onManageAdvisorProjects:c,onApproveStudent:d,addToast:b,defenseSettings:g,scoringSettings:p,milestoneTemplates:x,classrooms:y,majors:v}=m,S=Ue(),[N,R]=Z.useState(!1),B=Dr.useMemo(()=>e.filter(T=>T.project.status===it.Pending),[e]),M=Dr.useMemo(()=>f.filter(T=>T.status==="Pending"),[f]),F=T=>{d({...T,status:"Approved"}),b({type:"success",message:S("approvedStudent").replace("${name}",`${T.name} ${T.surname}`)})},{overloadedAdvisors:q,averageLoad:V,mostLoadedAdvisors:O}=Z.useMemo(()=>{const T=h.filter(_=>(o[_.name]||0)>_.quota),A=Object.values(o).reduce((_,j)=>_+(j||0),0),C=h.length>0?(A/h.length).toFixed(1):"0.0",w=[...h].sort((_,j)=>(o[j.name]||0)-(o[_.name]||0));return{overloadedAdvisors:T,averageLoad:C,mostLoadedAdvisors:w.slice(0,3)}},[h,o]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:S("adminDashboardTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:S("adminDashboardDescription")})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(ln,{title:S("totalProjects"),value:e.length,icon:i.jsx(lr,{className:"w-6 h-6 text-blue-800"}),onClick:()=>n("projects"),color:"bg-blue-100 dark:bg-blue-900/50"}),i.jsx(ln,{title:S("totalStudents"),value:f.length,icon:i.jsx(Fr,{className:"w-6 h-6 text-green-800"}),onClick:()=>n("students"),color:"bg-green-100 dark:bg-green-900/50"}),i.jsx(ln,{title:S("totalAdvisors"),value:h.length,icon:i.jsx(_r,{className:"w-6 h-6 text-indigo-800"}),onClick:()=>n("advisors"),color:"bg-indigo-100 dark:bg-indigo-900/50"}),i.jsx(ln,{title:S("pendingProjects"),value:B.length,icon:i.jsx(Er,{className:"w-6 h-6 text-yellow-800"}),onClick:()=>r("pending"),color:"bg-yellow-100 dark:bg-yellow-900/50"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:S("actionCenter")}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-slate-600 dark:text-slate-300 mb-2",children:[S("pendingProjectsToReview")," (",B.length,")"]}),B.length>0?i.jsxs("button",{onClick:()=>r("pending"),className:"w-full text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg px-4 py-2 flex justify-between items-center",children:[i.jsx("span",{children:S("viewPendingProjects")}),i.jsx(qs,{className:"w-4 h-4"})]}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:S("noPendingProjectsToReview")})]}),i.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-semibold text-slate-600 dark:text-slate-300 mb-2",children:[S("pendingStudentApprovals")," (",M.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:M.length>0?M.map(T=>i.jsxs("div",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 p-2 rounded-md",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:[T.name," ",T.surname]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.major})]}),i.jsx("button",{onClick:()=>F(T),className:"text-xs font-semibold text-white bg-green-600 hover:bg-green-700 rounded-full px-3 py-1",children:S("approve")})]},T.studentId)):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:S("noPendingStudents")})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:S("systemTools")}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:S("checkAppReadinessDescription")}),i.jsxs("button",{onClick:()=>R(!0),className:"w-full flex items-center justify-center gap-2 text-sm text-white bg-slate-600 hover:bg-slate-700 rounded-lg px-4 py-2",children:[i.jsx(qa,{className:"w-5 h-5"}),i.jsx("span",{children:S("checkAppReadiness")})]})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:S("advisorWorkloadSnapshot")}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-900/50 rounded-md",children:[i.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:S("overloadedAdvisors")}),i.jsx("span",{className:`font-bold ${q.length>0?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-100"}`,children:q.length})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-900/50 rounded-md",children:[i.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:S("avgLoad")}),i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100",children:V})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 mb-2",children:S("mostLoadedAdvisors")}),i.jsx("div",{className:"space-y-2",children:O.map(T=>i.jsx("button",{onClick:()=>c(T.name),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:T.name}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:[o[T.name]||0," / ",T.quota," ",S("projects")]})]})},T.id))})]})]})]}),i.jsx(Sl,{notifications:s,onSelectNotification:t})]}),i.jsx(Tn,{announcements:l,user:a})]})]}),N&&i.jsx(zg,{onClose:()=>R(!1),advisors:h,majors:v,classrooms:y,defenseSettings:g,scoringSettings:p,milestoneTemplates:x,projectGroups:e,students:f})]})},xa=({progress:m,label:a,color:e,bgColor:h})=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:a}),i.jsxs("p",{className:`text-sm font-bold ${e}`,children:[m.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:`${h} h-2.5 rounded-full`,style:{width:`${m}%`}})})]}),Vg=({userProgress:m,majorAverageProgress:a})=>{const e=Ue();return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-4",children:[i.jsx(mn,{className:"w-6 h-6 text-blue-500"}),e("progressComparison")]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(xa,{progress:m,label:e("yourProgress"),color:"text-blue-500",bgColor:"bg-blue-500"}),a!==null?i.jsx(xa,{progress:a,label:e("majorAverage"),color:"text-green-500",bgColor:"bg-green-500"}):i.jsx("p",{className:"text-xs text-center text-slate-500 dark:text-slate-400 pt-2",children:e("noDataForMajorComparison")})]})]})},Hg=({skillsAnalysis:m,isAnalyzing:a,onAnalyze:e})=>{const h=Ue();return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-4",children:[i.jsx(lr,{className:"w-6 h-6 text-blue-500"}),h("aiSkillsAnalysis")]}),!m&&i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:h("aiSkillsAnalysisDescription")}),i.jsx("button",{onClick:e,disabled:a,className:"inline-flex items-center gap-2 rounded-md bg-purple-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-purple-700 disabled:bg-slate-400",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h("analyzing")]}):i.jsxs(i.Fragment,{children:[i.jsx(Ft,{className:"w-5 h-5"}),h("analyzeMySkills")]})})]}),m&&i.jsxs("div",{className:"space-y-3 text-sm animate-fade-in",children:[i.jsx("p",{className:"italic text-slate-600 dark:text-slate-400",children:m.summary}),i.jsx("ul",{className:"space-y-2",children:m.skills.map(f=>i.jsxs("li",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("strong",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[f.skill,":"]})," ",f.justification]},f.skill))})]})]})},Wg=()=>{const m=Ue(),a=[{title:"Thesis Writing Guide",url:"#"},{title:"Presentation Skills Workshop",url:"#"},{title:"Library Research Database",url:"#"}];return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-4",children:[i.jsx(oi,{className:"w-6 h-6 text-blue-500"}),m("resourceHub")]}),i.jsx("ul",{className:"space-y-2",children:a.map((e,h)=>i.jsx("li",{children:i.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:[i.jsx(Bc,{className:"w-4 h-4"}),i.jsx("span",{children:e.title})]})},h))})]})},Hn=({title:m,value:a,icon:e})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg flex items-center gap-4",children:[i.jsx("div",{className:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/50 rounded-full p-3 text-blue-600 dark:text-blue-400",children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:m}),i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white truncate",children:a})]})]}),ya={Submission:{icon:Lr,color:"text-blue-500"},Approval:{icon:Kt,color:"text-green-500"},Feedback:{icon:er,color:"text-purple-500"},Mention:{icon:Or,color:"text-indigo-500"},Message:{icon:Or,color:"text-slate-500"},System:{icon:Cs,color:"text-orange-500"}},Gg=({user:m,projectGroup:a,allProjectGroups:e,studentData:h,announcements:f,onViewProject:l,notifications:s,onSelectNotification:o})=>{const{project:r}=a,t=Ue(),{skillsAnalysis:n,isAnalyzingSkills:u,analyzeSkills:c}=jl(a,m),d=Dr.useMemo(()=>(r.milestones||[]).filter(x=>x.status!==bt.Approved).sort((x,y)=>new Date(x.dueDate).getTime()-new Date(y.dueDate).getTime()).slice(0,3),[r.milestones]),b=Dr.useMemo(()=>{const x=s.filter(y=>!y.read);return(x.length>0?x:s).slice(0,5)},[s]),{userProgress:g,majorAverageProgress:p}=Z.useMemo(()=>{const x=(r.milestones||[]).filter(B=>B.status===bt.Approved).length,y=(r.milestones||[]).length,v=y>0?x/y*100:0,S=e.filter(B=>B.students.some(M=>M.major===h.major)&&B.project.projectId!==r.projectId&&(B.project.milestones||[]).length>0);if(S.length===0)return{userProgress:v,majorAverageProgress:null};const R=S.reduce((B,M)=>{const F=(M.project.milestones||[]).filter(V=>V.status===bt.Approved).length,q=(M.project.milestones||[]).length;return B+(q>0?F/q*100:0)},0)/S.length;return{userProgress:v,majorAverageProgress:R}},[r,e,h.major]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t("studentDashboardTitle")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:t("studentDashboardDescription")})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:r.projectId}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-1",children:r.topicEng}),i.jsx("p",{className:"text-md text-slate-500 dark:text-slate-400",children:r.topicLao})]}),i.jsxs("button",{onClick:l,className:"flex-shrink-0 inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 transition-transform transform hover:scale-105",children:[t("viewFullDetails"),i.jsx(qs,{className:"w-4 h-4"})]})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(Hn,{title:t("projectStatus"),value:i.jsx(kn,{project:r,user:m,onUpdateStatus:()=>{}}),icon:i.jsx(lr,{className:"w-6 h-6"})}),i.jsx(Hn,{title:t("advisor"),value:r.advisorName,icon:i.jsx(_r,{className:"w-6 h-6"})}),i.jsx(Hn,{title:t("nextMilestoneDue"),value:d.length>0?new Date(d[0].dueDate).toLocaleDateString():t("allDone"),icon:i.jsx(Er,{className:"w-6 h-6"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsx(Vg,{userProgress:g,majorAverageProgress:p}),i.jsx(Hg,{skillsAnalysis:n,isAnalyzing:u,onAnalyze:c}),i.jsx(Tn,{announcements:f,user:m})]}),i.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:t("yourNotifications")}),b.length>0?i.jsx("ul",{className:"space-y-2",children:b.map(x=>{const y=ya[x.type]||ya.System,v=y.icon;return i.jsx("li",{children:i.jsx("button",{onClick:()=>o(x),className:`w-full text-left p-2 rounded-md transition-colors ${x.read?"":"bg-blue-50 dark:bg-blue-900/20"} hover:bg-slate-100 dark:hover:bg-slate-700`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx(v,{className:`w-5 h-5 ${y.color}`})}),i.jsxs("div",{children:[x.title&&i.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-100",children:x.title}),i.jsx("p",{className:`text-sm ${x.title?"text-slate-600 dark:text-slate-400":"text-slate-700 dark:text-slate-300"}`,children:x.message}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:ls(x.timestamp,t)})]}),!x.read&&i.jsx("div",{className:"flex-shrink-0 mt-1.5 h-2 w-2 rounded-full bg-blue-500"})]})})},x.id)})}):i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx(js,{className:"mx-auto h-10 w-10 text-slate-400"}),i.jsx("p",{className:"mt-2 text-sm",children:t("noNotificationsYet")})]})]}),i.jsx(Wg,{})]})]})]})},va={Submission:{icon:Lr,color:"text-blue-500"},Approval:{icon:Kt,color:"text-green-500"},Feedback:{icon:er,color:"text-purple-500"},Mention:{icon:Or,color:"text-indigo-500"},Message:{icon:Or,color:"text-slate-500"},System:{icon:Cs,color:"text-orange-500"}},Xg=({notifications:m,onSelectNotification:a,onMarkAllRead:e})=>{const h=Ue();return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-4 sm:p-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(js,{className:"w-8 h-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:h("notifications")}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:h("allUpdatesAndMentions")})]})]}),i.jsx("button",{onClick:e,className:"mt-4 sm:mt-0 text-sm font-medium text-blue-600 hover:underline dark:text-blue-400 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m.some(f=>!f.read),children:h("markAllAsRead")})]}),m.length>0?i.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:m.map(f=>{const l=va[f.type]||va.System,s=l.icon;return i.jsx("li",{children:i.jsx("button",{onClick:()=>a(f),className:`w-full text-left p-4 transition-colors ${f.read?"":"bg-blue-50 dark:bg-blue-900/20"} hover:bg-slate-100 dark:hover:bg-slate-700`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(s,{className:`w-6 h-6 mt-0.5 flex-shrink-0 ${l.color}`}),i.jsxs("div",{className:"flex-grow",children:[f.title&&i.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-100",children:f.title}),i.jsx("p",{className:`text-sm ${f.title?"text-slate-600 dark:text-slate-400":"text-slate-700 dark:text-slate-300"}`,children:f.message}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:ls(f.timestamp,h)})]}),!f.read&&i.jsx("span",{className:"mt-1.5 block h-2.5 w-2.5 flex-shrink-0 rounded-full bg-blue-500"})]})})},f.id)})}):i.jsxs("div",{className:"text-center py-16 text-slate-500 dark:text-slate-400",children:[i.jsx(js,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold",children:h("allCaughtUp")}),i.jsx("p",{children:h("noNotifications")})]})]})},Yg=({selectedCount:m,onClear:a,onSendMessage:e})=>{const h=Ue();return i.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-xl mb-4 z-40",children:i.jsxs("div",{className:"bg-slate-800 text-white rounded-lg shadow-lg p-3 flex justify-between items-center animate-fade-in-up",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-semibold text-sm",children:h("bulkActionsSelected").replace("${count}",String(m))}),i.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md",children:[i.jsx(Or,{className:"w-5 h-5"})," ",h("sendMessage")]})]}),i.jsx("button",{onClick:a,className:"p-1.5 rounded-full hover:bg-slate-700",children:i.jsx(Ot,{className:"w-5 h-5"})})]})})},Kg=({isOpen:m,onClose:a,onSend:e,selectedProjects:h,user:f})=>{const[l,s]=Z.useState(""),[o,r]=Z.useState(!1),t=At(),n=Ue();if(!m)return null;const u=async d=>{r(!0);try{throw new Error("API key not configured.")}catch(b){console.error("AI message generation failed:",b),t({type:"error",message:n("couldNotGenerateMessage")})}finally{r(!1)}},c=()=>{if(!l.trim()){t({type:"error",message:n("messageCannotBeEmpty")});return}e(l)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:n("sendBulkMessage")}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"my-4",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:n("messageWillBeSentTo").replace("${count}",String(h.length))}),i.jsx("ul",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2 list-disc list-inside max-h-24 overflow-y-auto",children:h.map(d=>i.jsxs("li",{children:[d.project.projectId," - ",d.students.map(b=>b.name).join(", ")]},d.project.projectId))})]}),i.jsxs("div",{className:"flex-grow flex flex-col",children:[i.jsx("label",{htmlFor:"bulk-message",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:n("message")}),i.jsx("textarea",{id:"bulk-message",rows:6,value:l,onChange:d=>s(d.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:n("typeYourMessage")}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:n("aiTemplates")}),i.jsxs("button",{onClick:()=>u("reminder"),disabled:o,className:"flex items-center text-xs font-semibold text-purple-600 hover:underline disabled:opacity-50",children:[i.jsx(Ft,{className:"w-4 h-4 mr-1"}),n("deadlineReminder")]}),i.jsxs("button",{onClick:()=>u("overdue"),disabled:o,className:"flex items-center text-xs font-semibold text-purple-600 hover:underline disabled:opacity-50",children:[i.jsx(Ft,{className:"w-4 h-4 mr-1"}),n("overdueNotice")]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t dark:border-slate-700 mt-4",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:n("cancel")}),i.jsxs("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i.jsx(di,{className:"w-5 h-5"})," ",n("sendMessage")]})]})]})})},Jg=({isOpen:m,onClose:a,result:e,isLoading:h})=>{const f=Ue();if(!m)return null;const l={Positive:{icon:i.jsx(Kt,{className:"w-5 h-5 text-green-500"}),text:f("positive"),classes:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300"},Neutral:{icon:i.jsx(Er,{className:"w-5 h-5 text-slate-500"}),text:f("neutral"),classes:"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-300"},"Needs Attention":{icon:i.jsx(cr,{className:"w-5 h-5 text-yellow-500"}),text:f("needsAttention"),classes:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300"}},s={Improving:{icon:i.jsx(Uc,{className:"w-4 h-4 text-green-500"}),text:f("improving")},Declining:{icon:i.jsx($c,{className:"w-4 h-4 text-red-500"}),text:f("declining")},Stable:{icon:i.jsx(Ss,{className:"w-4 h-4 text-slate-500"}),text:f("stable")},Mixed:{icon:i.jsx(Ss,{className:"w-4 h-4 text-purple-500"}),text:f("mixed")}},o=({icon:n,label:u,value:c})=>i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[n,i.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:u})]}),i.jsx("div",{className:"mt-1 text-sm font-bold text-slate-800 dark:text-slate-100",children:c})]}),r=e&&l[e.sentiment]||l.Neutral,t=e&&s[e.sentimentTrend]||s.Stable;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ft,{className:"w-7 h-7 text-purple-500"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:f("aiCommunicationAnalysis")})]}),i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white",children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"mt-4 flex-grow overflow-y-auto pr-2",children:h?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),i.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:f("analyzingLog")})]}):e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-2",children:[i.jsx(lr,{className:"w-5 h-5 text-blue-500"}),f("executiveSummary")]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 prose prose-sm max-w-none dark:prose-invert",children:e.summary})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(o,{icon:i.jsx(fi,{className:"w-5 h-5 text-pink-500"}),label:f("overallSentiment"),value:i.jsxs("span",{className:`inline-flex items-center gap-2 px-2 py-0.5 rounded-full text-xs font-semibold ${r.classes}`,children:[r.icon,r.text]})}),i.jsx(o,{icon:t.icon,label:f("sentimentTrend"),value:t.text}),i.jsx(o,{icon:i.jsx(Er,{className:"w-5 h-5 text-cyan-500"}),label:f("responseTime"),value:e.responseTime}),i.jsx(o,{icon:i.jsx(zc,{className:"w-5 h-5 text-yellow-500"}),label:f("advisorFeedback"),value:e.feedbackClarity}),i.jsx(o,{icon:i.jsx(Fr,{className:"w-5 h-5 text-indigo-500"}),label:f("studentEngagement"),value:e.studentEngagement})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-2",children:[i.jsx(Kt,{className:"w-5 h-5 text-green-500"}),f("actionItems")]}),e.actionItems.length>0?i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-600 dark:text-slate-300",children:e.actionItems.map((n,u)=>i.jsx("li",{children:n},u))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f("noActionItems")})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 flex items-center gap-2 mb-2",children:[i.jsx(cr,{className:"w-5 h-5 text-red-500"}),f("potentialIssues")]}),e.potentialIssues.length>0?i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-600 dark:text-slate-300",children:e.potentialIssues.map((n,u)=>i.jsx("li",{children:n},u))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f("noIssuesDetected")})]})]}):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400",children:f("couldNotGenerateAnalysis")})}),i.jsx("div",{className:"flex justify-end pt-4 border-t dark:border-slate-700 mt-4 flex-shrink-0",children:i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-white font-bold py-2 px-4 rounded-lg",children:f("closeBtn")})})]})})},Zg=({isOpen:m,onClose:a,isLoading:e,result:h,fileName:f,originalText:l})=>{const s=Ue();return m?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",role:"dialog",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-6 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-slate-700",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Ft,{className:"w-6 h-6 text-purple-500"}),s("aiWritingAssistant")]}),i.jsx("button",{onClick:a,children:i.jsx(Ot,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4 flex-grow overflow-y-auto pr-2 space-y-4",children:[i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[s("analyzingDocument"),": ",i.jsx("span",{className:"font-semibold",children:f})]}),e?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px]",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),i.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400",children:s("analyzingDocument")})]}):h?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:s("summaryOfImprovements")}),i.jsx("p",{className:"text-sm mt-1 text-slate-600 dark:text-slate-400",children:h.summary})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:s("originalText")}),i.jsx("div",{className:"mt-2 p-3 h-64 overflow-y-auto rounded-md bg-slate-100 dark:bg-slate-900 text-sm whitespace-pre-wrap",children:l})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:s("suggestedText")}),i.jsx("div",{className:"mt-2 p-3 h-64 overflow-y-auto rounded-md bg-green-50 dark:bg-green-900/50 text-sm whitespace-pre-wrap",children:h.correctedText})]})]})]}):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400",children:s("couldNotGenerateAnalysis")})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t dark:border-slate-700 mt-4",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500 font-bold py-2 px-4 rounded-lg",children:s("closeBtn")}),i.jsx("button",{type:"button",onClick:a,disabled:!h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-slate-400",children:s("acceptAndReplace")})]})]})}):null},cn=20,Qg=m=>{const{onLogout:a,user:e,effectiveRole:h,onSwitchRole:f,projectGroups:l,advisors:s,students:o,majors:r,classrooms:t,milestoneTemplates:n,announcements:u,defenseSettings:c,scoringSettings:d,addProject:b,updateProject:g,deleteProject:p,advisorProjectCounts:x,committeeCounts:y,updateProjectStatus:v,updateMilestone:S,updateFinalSubmissions:N,reviewFinalSubmission:R,reorderMilestones:B,transferProject:M,addProjectLogEntry:F,bulkAddProjectLogEntries:q,updateProjectCommittee:V,updateProjectDefenseSchedule:O,updateDefenseSettings:T,updateScoringSettings:A,updateDetailedScore:C,updateProjectGrade:w,autoScheduleDefenses:_,bulkUpdateSchedules:j,clearAllSchedulesAndCommittees:k,addAdvisor:E,updateAdvisor:I,deleteAdvisor:D,deleteAdvisors:X,bulkAddOrUpdateAdvisors:G,bulkUpdateAdvisors:K,addStudent:U,updateStudent:J,deleteStudent:$,bulkAddOrUpdateStudents:L,bulkUpdateStudents:W,bulkDeleteStudents:re,addMajor:ne,updateMajor:se,deleteMajor:H,addClassroom:ce,updateClassroom:ae,deleteClassroom:Y,addMilestoneTemplate:Q,updateMilestoneTemplate:te,deleteMilestoneTemplate:ie,addAnnouncement:le,updateAnnouncement:ee,deleteAnnouncement:oe,currentAcademicYear:de,availableYears:fe,onYearChange:be,onStartNewYear:he,notifications:pe,onMarkNotificationsAsRead:ke,onMarkSingleNotificationAsRead:Ce,isPasswordChangeForced:Ee,onPasswordChanged:Oe}=m,[Te,ye]=Z.useState(!1),[Ae,Fe]=Z.useState(null),[Re,ge]=Z.useState(null),[xe,we]=Z.useState(""),[je,Se]=Z.useState("all"),[Ie,He]=Z.useState(null),[ze,Le]=Z.useState(null),[Ge,Ke]=Z.useState("dashboard"),[Ye,ut]=Z.useState(!1),[ht,rt]=Z.useState(!1),[me,ve]=Z.useState(!1),[Ne,$e]=Z.useState(!1),[ot,Ve]=Z.useState(null),[lt,Ze]=Z.useState(!1),[et,ft]=Z.useState({}),[ct,xt]=Z.useState(!1),[Dt,Tt]=Z.useState(null),[Bt,Vt]=Z.useState(!1),[Jt,ue]=Z.useState(),[_e,Me]=Z.useState(null),[Pe,Je]=Z.useState(!1),[Be,qe]=Z.useState("all"),[gt,pt]=Z.useState("all"),[mt,nt]=Z.useState("all"),[wt,jt]=Z.useState("all"),[kt,Mt]=Z.useState(!1),[It,Lt]=Z.useState(new Set),[sr,br]=Z.useState(!1),[Sr,Cr]=Z.useState(1),[Ir,St]=Z.useState(!1),[_t,Mr]=Z.useState(null),[Rr,Is]=Z.useState(!1),[Zt,xr]=Z.useState(!1),[ur,ds]=Z.useState(null),[us,Zr]=Z.useState(null),[Nr,In]=Z.useState(!1),[fs,Ws]=Z.useState(""),Wt=At(),Rt=Ue(),[fr,hs]=Z.useState({key:"projectId",direction:"ascending"}),ms=De=>{let dt="ascending";fr&&fr.key===De&&fr.direction==="ascending"&&(dt="descending"),hs({key:De,direction:dt})},Ms=Z.useMemo(()=>!e||!pe?[]:pe.filter(De=>De.userIds.includes(e.id)),[pe,e.id]),Mn=Z.useMemo(()=>h==="Admin"||h==="DepartmentAdmin"?!0:h==="Student"||h==="Advisor"?e.isAiAssistantEnabled??!0:!1,[e,h]),wi=h==="DepartmentAdmin",{projectGroups:yt,advisors:Ut,students:yr,majors:Xt,classrooms:Rs,advisorProjectCounts:Ur,committeeCounts:Gs}=Z.useMemo(()=>{if(wi){const De=e,dt=new Set(De.specializedMajorIds||[]),tt=r.filter(Et=>dt.has(Et.id)),$t=new Set(tt.map(Et=>Et.name)),vr=o.filter(Et=>$t.has(Et.major)),$r=s.filter(Et=>Et.specializedMajorIds.some(bs=>dt.has(bs))),gs=l.filter(Et=>Et.students.length>0&&$t.has(Et.students[0].major)),Ys=t.filter(Et=>dt.has(Et.majorId)),Kl=gs.reduce((Et,bs)=>((bs.project.status===it.Approved||bs.project.status===it.Pending)&&(Et[bs.project.advisorName]=(Et[bs.project.advisorName]||0)+1),Et),{}),zr={};return $r.forEach(Et=>{zr[Et.id]={main:0,second:0,third:0}}),gs.forEach(Et=>{Et.project.mainCommitteeId&&zr[Et.project.mainCommitteeId]&&zr[Et.project.mainCommitteeId].main++,Et.project.secondCommitteeId&&zr[Et.project.secondCommitteeId]&&zr[Et.project.secondCommitteeId].second++,Et.project.thirdCommitteeId&&zr[Et.project.thirdCommitteeId]&&zr[Et.project.thirdCommitteeId].third++}),{projectGroups:gs,advisors:$r,students:vr,majors:tt,classrooms:Ys,advisorProjectCounts:Kl,committeeCounts:zr}}return{projectGroups:l,advisors:s,students:o,majors:r,classrooms:t,advisorProjectCounts:x,committeeCounts:y}},[e,wi,l,s,o,r,t,x,y]),Pr=Z.useMemo(()=>h!=="Student"?null:yt.find(De=>De.students.some(dt=>dt.studentId===e.id)),[yt,e,h]),Rn=Z.useMemo(()=>{if(h!=="Advisor")return new Set;const De=new Set;return yt.forEach(dt=>{var tt;dt.project.advisorName===e.name&&(dt.project.status===it.Pending||(tt=dt.project.milestones)!=null&&tt.some($t=>$t.status===bt.Submitted))&&De.add(dt.project.projectId)}),De},[h,yt,e.name]),_i=Pg(h==="Student"&&!Pr?"student-welcome-tour":h==="Advisor"&&!Re?"advisor-dashboard-tour":null),Rl=Z.useMemo(()=>h==="Student"&&!Pr?Dg(Rt):h==="Advisor"&&!Re?Fg(Rt):[],[h,Pr,Re,Rt]),Xs=Z.useMemo(()=>e.role==="Student"?yr.find(De=>De.studentId===e.id):e.role==="Advisor"||e.role==="DepartmentAdmin"?Ut.find(De=>De.id===e.id):null,[e,yr,Ut]);Z.useEffect(()=>{Ee&&ve(!0)},[Ee]),Z.useEffect(()=>{ge(De=>{if(!De)return null;const dt=yt.find(tt=>tt.project.projectId===De.project.projectId);return dt?JSON.stringify(dt)!==JSON.stringify(De)?dt:De:null})},[yt]),Z.useEffect(()=>{ge(null),we(""),Se("all"),Ke("dashboard"),ft({}),Lt(new Set),Cr(1)},[de]),Z.useEffect(()=>{Ke("dashboard"),ge(null)},[h,e.role]),Z.useEffect(()=>{Cr(1),Lt(new Set)},[xe,je,Be,gt,mt,wt,kt]);const Pn=()=>{Fe(null),ye(!0)},Pl=()=>$e(!0),Dl=De=>{Ve(De),$e(!1),ye(!0)},ki=De=>{Fe(De),ye(!0)},ji=De=>He(De),hr=Z.useCallback(De=>{Ke("projects"),ge(De)},[]),Dn=Z.useCallback((De,dt)=>{const tt=yt.find($t=>$t.project.projectId===De);tt&&Le({project:tt,action:dt==="Approved"?"approve":"reject"})},[yt]),Fl=De=>{if(!ze)return;const{project:dt,action:tt}=ze;if(tt==="reject"&&De.transferTo)M(dt.project.projectId,De.transferTo,e,De.comment),Wt({type:"info",message:Rt("projectTransferred").replace("${advisorName}",De.transferTo)});else{const $t=tt==="approve"?it.Approved:it.Rejected;v(dt.project.projectId,$t,e,{comment:De.comment.trim()?De.comment:void 0,templateId:De.templateId}),Wt({type:tt==="approve"?"success":"info",message:Rt(tt==="approve"?"projectApproved":"projectRejected")})}Le(null)},Ll=()=>{Ie&&(p(Ie.project.projectId),He(null),ge(null),Wt({type:"success",message:Rt("projectDeleted")}))},Ol=()=>He(null),Bl=()=>{if(ye(!1),Ae&&Re){const De=yt.find(dt=>dt.project.projectId===Ae.project.projectId);De&&ge(De)}Fe(null)},Ul=()=>{he(),ut(!1)},$l=Z.useCallback(()=>{ge(null),rt(De=>!De)},[]);Z.useCallback(async()=>{},[yt,e,h,Wt,Rt]);const zl=Z.useCallback(async()=>{},[l,s,o,x,y,h,Wt,Rt]),ql=Z.useCallback(async()=>{},[l,s,o,h,Wt,Rt]),Si=Z.useCallback(async De=>{{Wt({type:"error",message:Rt("aiFeatureNotConfigured")});return}},[Mn,Wt,Rt]),Ci=async De=>{{Wt({type:"error",message:Rt("aiFeatureNotConfigured")});return}},Vl=Z.useMemo(()=>Array.from(It).map(De=>yt.find(dt=>dt.project.projectId===De)).filter(Boolean),[It,yt]),Hl=De=>{const dt={type:"message",authorId:e.id,authorName:e.name,authorRole:h,message:De};q(Array.from(It),dt),Wt({type:"success",message:Rt("bulkMessageSuccess")}),br(!1),Lt(new Set)},ps=Z.useMemo(()=>{let De=ht?yt.filter(tt=>Rn.has(tt.project.projectId)):yt;if(xe){const tt=xe.toLowerCase();De=De.filter($t=>$t.project.projectId.toLowerCase().includes(tt)||$t.project.topicLao.toLowerCase().includes(tt)||$t.project.topicEng.toLowerCase().includes(tt)||$t.students.some(vr=>vr.studentId.toLowerCase().includes(tt)||`${vr.name} ${vr.surname}`.toLowerCase().includes(tt)))}je!=="all"&&h!=="Advisor"&&(De=De.filter(tt=>tt.project.advisorName===je)),Be!=="all"&&(De=De.filter(tt=>tt.students.some($t=>$t.gender===Be))),gt!=="all"&&(De=De.filter(tt=>tt.students.some($t=>$t.major===gt))),mt!=="all"&&(De=De.filter(tt=>tt.project.status===mt));const dt=tt=>!!(tt.project.defenseDate&&tt.project.defenseTime&&tt.project.defenseRoom);return wt!=="all"&&(De=De.filter(tt=>wt==="scheduled"?dt(tt):!dt(tt))),kt&&(De=De.filter(tt=>!!tt.project.similarityInfo)),fr&&De.sort((tt,$t)=>{var gs,Ys;let vr,$r;switch(fr.key){case"studentId":vr=((gs=tt.students[0])==null?void 0:gs.studentId)||"",$r=((Ys=$t.students[0])==null?void 0:Ys.studentId)||"";break;case"projectId":vr=tt.project.projectId,$r=$t.project.projectId;break;case"advisorName":vr=tt.project.advisorName,$r=$t.project.advisorName;break;default:return 0}return vr<$r?fr.direction==="ascending"?-1:1:vr>$r?fr.direction==="ascending"?1:-1:0}),De},[yt,xe,je,fr,h,ht,Rn,Be,gt,mt,wt,kt]),Wl=Z.useMemo(()=>{const De=(Sr-1)*cn;return ps.slice(De,De+cn)},[ps,Sr]),Gl=De=>{Lt(dt=>{const tt=new Set(dt);return tt.has(De)?tt.delete(De):tt.add(De),tt})},Xl=()=>{It.size===ps.length?Lt(new Set):Lt(new Set(ps.map(De=>De.project.projectId)))},Yl=()=>{switch(Ge){case"dashboard":return h==="Student"?Pr?i.jsx(Gg,{user:e,projectGroup:Pr,allProjectGroups:yt,studentData:Xs,announcements:u,onViewProject:()=>Ke("projects"),notifications:Ms,onSelectNotification:De=>{if(Ce(De.id),De.projectId){const dt=yt.find(tt=>tt.project.projectId===De.projectId);dt&&hr(dt)}}}):i.jsx(Z0,{onRegisterClick:Pn,onOpenSuggester:Pl,advisors:Ut,advisorProjectCounts:Ur,allProjects:yt,announcements:u,user:e,onStartTour:_i.startTour,onSelectProject:hr,majors:Xt}):h==="Advisor"?i.jsx(Bg,{user:e,projectGroups:yt,students:yr,advisors:Ut,committeeCounts:Gs,announcements:u,notifications:Ms,onSelectNotification:De=>{if(Ce(De.id),De.projectId){const dt=yt.find(tt=>tt.project.projectId===De.projectId);dt&&hr(dt)}},onSelectProject:hr,onUpdateStatus:v,updateDetailedScore:C,addToast:Wt,scoringSettings:d,onOpenAiAssistant:()=>Ze(!0),majors:Xt,onNavigate:Ke}):h==="Admin"||h==="DepartmentAdmin"?i.jsx(qg,{user:e,projectGroups:yt,advisors:Ut,students:yr,majors:Xt,announcements:u,notifications:Ms,advisorProjectCounts:Ur,onViewProjects:De=>{De==="pending"&&nt("Pending"),Ke("projects")},onSelectNotification:De=>{if(Ce(De.id),De.projectId){const dt=yt.find(tt=>tt.project.projectId===De.projectId);dt&&hr(dt)}},onNavigate:Ke,onSelectProject:hr,onManageAdvisorProjects:De=>{Se(De),Ke("projects")},onApproveStudent:J,addToast:Wt,defenseSettings:c,scoringSettings:d,milestoneTemplates:n,classrooms:Rs}):null;case"projects":return Re?i.jsx(ia,{projectGroup:Re,user:e,effectiveRole:h,onBack:()=>ge(null),onEdit:ki,onDelete:ji,onUpdateStatus:Dn,onUpdateMilestone:S,onUpdateFinalSubmissions:N,onReviewFinalSubmission:R,onReorderMilestones:B,transferProject:M,addProjectLogEntry:F,onAnalyzeCommunication:Si,onGrammarCheck:Ci,advisors:Ut,advisorProjectCounts:Ur,announcements:u,scoringSettings:d,updateDetailedScore:C,onOpenAssistant:()=>Ze(!0),majors:Xt,allProjectGroups:l}):h==="Student"&&Pr?i.jsx(ia,{projectGroup:Pr,user:e,effectiveRole:h,onEdit:ki,onDelete:ji,onUpdateStatus:Dn,onUpdateMilestone:S,onUpdateFinalSubmissions:N,onReviewFinalSubmission:R,addProjectLogEntry:F,onAnalyzeCommunication:Si,onGrammarCheck:Ci,announcements:u,onOpenAssistant:()=>Ze(!0),allProjectGroups:l}):i.jsxs(at,{sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsx(vl,{user:e,searchQuery:xe,setSearchQuery:we,advisorFilter:je,setAdvisorFilter:Se,advisors:Ut,majors:Xt,genderFilter:Be,setGenderFilter:qe,majorFilter:gt,setMajorFilter:pt,statusFilter:mt,setStatusFilter:nt,scheduleFilter:wt,setScheduleFilter:jt,similarityFilter:kt,setSimilarityFilter:Mt}),i.jsx(Ga,{user:e,effectiveRole:h,projectGroups:Wl,onSelectProject:hr,onRegisterClick:Pn,sortConfig:fr,requestSort:ms,onUpdateStatus:Dn,scoringSettings:d,updateDetailedScore:C,addToast:Wt,projectHealth:et,onOpenAiAssistant:()=>Ze(!0),selectedIds:It,onSelect:Gl,onSelectAll:Xl}),i.jsx(Es,{currentPage:Sr,totalPages:Math.ceil(ps.length/cn),totalItems:ps.length,itemsPerPage:cn,onPageChange:Cr})]});case"students":return i.jsx(O0,{user:e,students:yr,projectGroups:yt,majors:Xt,classrooms:Rs,addStudent:U,updateStudent:J,deleteStudent:$,bulkAddOrUpdateStudents:L,bulkUpdateStudents:W,bulkDeleteStudents:re,initialFilter:Jt,onFilterConsumed:()=>ue(void 0)});case"advisors":return i.jsx(q0,{user:e,advisors:Ut,projectGroups:yt,majors:Xt,advisorProjectCounts:Ur,committeeCounts:Gs,addAdvisor:E,updateAdvisor:I,deleteAdvisor:D,deleteAdvisors:X,bulkAddOrUpdateAdvisors:G,bulkUpdateAdvisors:K});case"deptAdmins":return i.jsx(V0,{user:e,advisors:Ut,projectGroups:yt,majors:Xt,addAdvisor:E,updateAdvisor:I});case"majors":return i.jsx(G0,{majors:Xt,students:yr,classrooms:Rs,projectGroups:yt,addMajor:ne,updateMajor:se,deleteMajor:H});case"classrooms":return i.jsx(K0,{user:e,classrooms:Rs,students:yr,majors:Xt,projectGroups:yt,addClassroom:ce,updateClassroom:ae,deleteClassroom:Y});case"milestoneTemplates":return i.jsx(tg,{templates:n,addTemplate:Q,updateTemplate:te,deleteTemplate:ie});case"submissions":return i.jsx(xg,{projectGroups:yt});case"timeline":return i.jsx(sg,{projectGroups:yt});case"analytics":return i.jsx(dg,{projectGroups:yt,advisors:Ut,advisorProjectCounts:Ur});case"announcements":return i.jsx(hg,{announcements:u,user:e,addAnnouncement:le,updateAnnouncement:ee,deleteAnnouncement:oe});case"committees":return i.jsx(yg,{projectGroups:yt,advisors:Ut,majors:Xt,user:e,committeeCounts:Gs,updateProjectCommittee:V,updateProjectDefenseSchedule:O,onSelectProject:hr,defenseSettings:c,bulkUpdateSchedules:j,autoScheduleDefenses:_,clearAllSchedulesAndCommittees:k,onNavigate:Ke});case"scoring":return i.jsx(vg,{projectGroups:yt,scoringSettings:d,onSelectProject:hr,advisors:Ut});case"finalGrades":return i.jsx(_g,{projectGroups:yt,advisors:Ut,updateProjectGrade:w});case"settings":return i.jsx(Ng,{defenseSettings:c,majors:Xt,advisors:Ut,updateDefenseSettings:T,autoScheduleDefenses:_,scoringSettings:d,updateScoringSettings:A});case"calendar":return i.jsx(Tg,{projectGroups:yt,user:e,advisors:Ut,onSelectProject:hr});case"reporting":return i.jsx(Mg,{projectGroups:yt,advisors:Ut,students:yr,majors:Xt,classrooms:Rs,committeeCounts:Gs});case"aiTools":return i.jsx(Rg,{user:e,projectGroups:yt,advisors:Ut,students:yr,majors:Xt,advisorProjectCounts:Ur,systemHealthIssues:Dt,isAnalyzingSystemHealth:Bt,onRunSystemHealthAnalysis:zl,securityIssues:_e,isAnalyzingSecurity:Pe,onRunSecurityAudit:ql});case"notifications":return i.jsx(Xg,{notifications:Ms,onSelectNotification:De=>{if(Ce(De.id),De.projectId){const dt=yt.find(tt=>tt.project.projectId===De.projectId);dt&&hr(dt)}else Ke("dashboard")},onMarkAllRead:()=>ke(e.id)});default:return i.jsx(at,{children:Rt("pageNotFound")})}};return i.jsxs(at,{sx:{p:{xs:2,sm:3,lg:4},maxWidth:"1280px",mx:"auto"},children:[i.jsx(Kc,{user:e,effectiveRole:h,onSwitchRole:f,onRegisterClick:Pn,onLogout:a,onExportCsv:()=>{},onExportExcel:()=>{},activeView:Ge,onNavigate:De=>{Ke(De),ge(null)},currentAcademicYear:de,availableYears:fe,onYearChange:be,onStartNewYear:()=>ut(!0),notifications:Ms,projectsToReviewCount:Rn.size,isReviewFilterActive:ht,onToggleReviewFilter:$l,onOpenProfile:()=>ve(!0),onSelectNotification:De=>{if(Ce(De.id),De.projectId){const dt=yt.find(tt=>tt.project.projectId===De.projectId);dt&&hr(dt)}else Ke("dashboard")},onMarkNotificationsAsRead:()=>ke(e.id)}),i.jsx(at,{component:"main",sx:{mt:3},children:Yl()}),Te&&i.jsx(Wp,{onClose:Bl,onAddProject:b,onUpdateProject:g,advisors:Ut,advisorProjectCounts:Ur,allProjects:yt,allStudents:yr,majors:Xt,user:e,projectToEdit:Ae,currentAcademicYear:de,suggestedTopic:ot,onSuggestionUsed:()=>Ve(null)}),Ie&&i.jsx(dr,{isOpen:!!Ie,onClose:Ol,onConfirm:Ll,title:Rt("deleteProjectTitle"),message:Rt("deleteProjectConfirmation").replace("${topic}",Ie.project.topicEng)}),ze&&i.jsx(Q0,{isOpen:!!ze,onClose:()=>Le(null),onConfirm:Fl,projectGroup:ze.project,action:ze.action,advisors:Ut,advisorProjectCounts:Ur,currentAdvisorName:e.name,milestoneTemplates:n,majors:Xt}),Ye&&i.jsx(dr,{isOpen:Ye,onClose:()=>ut(!1),onConfirm:Ul,title:Rt("confirmStartNewYear"),message:Rt("newYearConfirmation").replace("${year}",String(parseInt(de,10)+1)),confirmButtonClass:"bg-blue-600 hover:bg-blue-700",confirmText:Rt("startNewYear")}),me&&i.jsx(mg,{isOpen:me,onClose:()=>ve(!1),user:e,userData:Xs,onUpdateStudent:J,onUpdateAdvisor:I,allAdvisors:Ut,studentProjectGroup:Pr,allProjectGroups:yt,isPasswordChangeForced:!!Ee,onPasswordChanged:Oe}),i.jsx(Lg,{..._i,tourSteps:Rl}),Ne&&Xs&&i.jsx(Ug,{onClose:()=>$e(!1),onSelectTopic:Dl,student:Xs,majors:Xt}),Mn&&lt&&i.jsx($g,{user:e,onClose:()=>Ze(!1),studentProjectGroup:Pr,allProjects:yt,allAdvisors:Ut,allStudents:yr}),Mn&&!lt&&Ge!=="dashboard"&&i.jsx(bc,{onClick:()=>Ze(!0),color:"secondary","aria-label":"Open AI Assistant",sx:{position:"fixed",bottom:{xs:24,sm:32},right:{xs:24,sm:32},zIndex:40,bgcolor:"#9333ea","&:hover":{bgcolor:"#7e22ce",transform:"scale(1.1)"},transition:"transform 0.2s"},children:i.jsx(Ra,{})}),It.size>0&&i.jsx(Yg,{selectedCount:It.size,onClear:()=>Lt(new Set),onSendMessage:()=>br(!0)}),sr&&i.jsx(Kg,{isOpen:sr,onClose:()=>br(!1),onSend:Hl,selectedProjects:Vl,user:e}),Ir&&i.jsx(Jg,{isOpen:Ir,onClose:()=>St(!1),result:_t,isLoading:Rr}),Zt&&i.jsx(Zg,{isOpen:Zt,onClose:()=>xr(!1),isLoading:Nr,result:us,fileName:(ur==null?void 0:ur.name)||"",originalText:fs})]})},eb=({onClose:m,onRegister:a,allStudents:e,majors:h,classrooms:f})=>{const l=At(),s=Ue(),[o,r]=Z.useState(()=>{var R,B;const v=((R=h[0])==null?void 0:R.name)||"",S=h.find(M=>M.name===v),N=S?f.filter(M=>M.majorId===S.id):[];return{gender:qt.Male,major:v,classroom:((B=N[0])==null?void 0:B.name)||""}}),[t,n]=Z.useState(""),[u,c]=Z.useState(""),[d,b]=Z.useState({}),g=Z.useMemo(()=>{if(!o.major)return[];const v=h.find(S=>S.name===o.major);return v?f.filter(S=>S.majorId===v.id):[]},[o.major,h,f]),p=()=>{var M,F,q,V,O,T;const v={},S=/^\d{3}[A-Z]{1,2}\d{3,4}\/\d{2}$/i,N=/^[\d, -]+$/,R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,B=(M=o.studentId)==null?void 0:M.trim();return B?S.test(B)?e.some(A=>{var C;return((C=A.studentId)==null?void 0:C.toLowerCase())===B.toLowerCase()})&&(v.studentId=s("studentIdExists")):v.studentId=s("invalidIdFormat"):v.studentId=s("studentIdRequired"),(F=o.name)!=null&&F.trim()||(v.name=s("nameRequired")),(q=o.surname)!=null&&q.trim()||(v.surname=s("surnameRequired")),(V=o.major)!=null&&V.trim()||(v.major=s("majorRequired")),(O=o.classroom)!=null&&O.trim()||(v.classroom=s("classroomRequired")),(T=o.email)!=null&&T.trim()?R.test(o.email)||(v.email=s("invalidEmail")):v.email=s("emailRequired"),o.tel?N.test(o.tel)||(v.tel=s("invalidTel")):v.tel=s("telRequired"),t.length<6?v.password=s("passwordLengthError"):t!==u&&(v.confirmPassword=s("passwordMismatch")),b(v),Object.keys(v).length===0},x=v=>{if(v.preventDefault(),!p())return;const S={studentId:o.studentId.trim().toUpperCase(),name:o.name.trim(),surname:o.surname.trim(),gender:o.gender,major:o.major,classroom:o.classroom,email:o.email.trim(),tel:o.tel.trim(),status:"Pending",password:t};a(S),l({type:"success",message:s("registrationSuccess")}),m()},y=(v,S)=>{var R;let N={...o,[v]:S};if(v==="studentId"&&(N[v]=S.toUpperCase()),v==="major"){const B=h.find(q=>q.name===S),F=((R=(B?f.filter(q=>q.majorId===B.id):[])[0])==null?void 0:R.name)||"";N.classroom=F}r(N)};return i.jsxs(Ta,{open:!0,onClose:m,maxWidth:"md",fullWidth:!0,"aria-labelledby":"registration-title",children:[i.jsx(Ea,{id:"registration-title",children:i.jsxs(at,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(Qe,{variant:"h5",fontWeight:"bold",children:s("studentRegistration")}),i.jsx(Qr,{onClick:m,"aria-label":s("closeRegistrationModal"),children:i.jsx(vn,{})})]})}),i.jsx(Ia,{dividers:!0,children:i.jsx(at,{component:"form",onSubmit:x,noValidate:!0,children:i.jsxs(zt,{container:!0,spacing:3,children:[i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{fullWidth:!0,label:s("studentId"),id:"studentId",value:o.studentId||"",onChange:v=>y("studentId",v.target.value),placeholder:s("studentIdExample"),error:!!d.studentId,helperText:d.studentId})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsxs(nr,{select:!0,fullWidth:!0,label:s("gender"),id:"gender",value:o.gender||qt.Male,onChange:v=>y("gender",v.target.value),children:[i.jsx(Vr,{value:qt.Male,children:s("male")}),i.jsx(Vr,{value:qt.Female,children:s("female")}),i.jsx(Vr,{value:qt.Monk,children:s("monk")})]})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{fullWidth:!0,label:s("name"),id:"name",value:o.name||"",onChange:v=>y("name",v.target.value),error:!!d.name,helperText:d.name})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{fullWidth:!0,label:s("surname"),id:"surname",value:o.surname||"",onChange:v=>y("surname",v.target.value),error:!!d.surname,helperText:d.surname})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{select:!0,fullWidth:!0,label:s("major"),id:"major",value:o.major||"",onChange:v=>y("major",v.target.value),error:!!d.major,helperText:d.major,children:h.map(v=>i.jsx(Vr,{value:v.name,children:v.name},v.id))})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{select:!0,fullWidth:!0,label:s("classroom"),id:"classroom",value:o.classroom||"",onChange:v=>y("classroom",v.target.value),disabled:g.length===0,error:!!d.classroom,helperText:d.classroom,children:g.length>0?g.map(v=>i.jsx(Vr,{value:v.name,children:v.name},v.id)):i.jsx(Vr,{value:"",disabled:!0,children:s("noClassroomsForMajor")})})}),i.jsx(zt,{size:{xs:12},children:i.jsx(nr,{fullWidth:!0,type:"email",label:s("email"),id:"email",value:o.email||"",onChange:v=>y("email",v.target.value),placeholder:s("emailExample"),error:!!d.email,helperText:d.email})}),i.jsx(zt,{size:{xs:12},children:i.jsx(nr,{fullWidth:!0,type:"tel",label:s("telephone"),id:"tel",value:o.tel||"",onChange:v=>y("tel",v.target.value),placeholder:s("telExample"),error:!!d.tel,helperText:d.tel})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{fullWidth:!0,type:"password",label:s("password"),id:"password",value:t,onChange:v=>n(v.target.value),error:!!d.password,helperText:d.password})}),i.jsx(zt,{size:{xs:12,sm:6},children:i.jsx(nr,{fullWidth:!0,type:"password",label:s("confirmPassword"),id:"confirmPassword",value:u,onChange:v=>c(v.target.value),error:!!d.confirmPassword,helperText:d.confirmPassword})})]})})}),i.jsxs(xc,{sx:{px:3,py:2},children:[i.jsx(pr,{onClick:m,variant:"outlined",color:"inherit",children:s("cancel")}),i.jsx(pr,{onClick:x,variant:"contained",color:"primary",children:s("register")})]})]})},Wn={};class tb{constructor(a=typeof import.meta<"u"&&(Wn==null?void 0:Wn.VITE_API_BASE_URL)||typeof window<"u"&&window.__API_BASE_URL||"https://eduinfo.online"){this.token=null,this.refreshToken=null,this.baseURL=a.endsWith("/")?a.slice(0,-1):a,this.token=localStorage.getItem("auth_token"),this.refreshToken=localStorage.getItem("refresh_token")}setToken(a){this.token=a,localStorage.setItem("auth_token",a)}setTokens(a,e){this.setToken(a),typeof e=="string"&&(this.refreshToken=e,localStorage.setItem("refresh_token",e))}clearToken(){this.token=null,localStorage.removeItem("auth_token"),this.refreshToken=null,localStorage.removeItem("refresh_token")}getHeaders(){const a={"Content-Type":"application/json"};return this.token&&(a.Authorization=`Bearer ${this.token}`),a}async request(a,e={}){const h=a.startsWith("/")?a:`/${a}`,f=`${this.baseURL}${h}`;try{const l=await fetch(f,{...e,headers:{...this.getHeaders(),...e.headers}}),s=async()=>{try{return await l.json()}catch{return null}};let o=await s();if(l.status===401&&this.refreshToken){if(await this.tryRefreshToken()){const t=await fetch(f,{...e,headers:{...this.getHeaders(),...e.headers}});if(o=await s.call({response:t}),!t.ok)throw new Error(o&&o.message||`HTTP ${t.status}`);return{data:o,status:t.status,message:o==null?void 0:o.message}}else if(this.clearToken(),typeof window<"u"&&window.onAuthExpired)try{window.onAuthExpired()}catch{}}if(!l.ok){let r=`HTTP ${l.status}`;o&&(o.non_field_errors&&o.non_field_errors.length>0?r=o.non_field_errors[0]:o.message?r=o.message:o.error?r=o.error:o.detail&&(r=o.detail));const t=new Error(r);throw t.status=l.status,t.data=o,t}return{data:o,status:l.status,message:o==null?void 0:o.message}}catch(l){throw{message:l instanceof Error?l.message:"Unknown error",status:500,details:l}}}async tryRefreshToken(){if(!this.refreshToken)return!1;try{const a=await fetch(`${this.baseURL}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:this.refreshToken})});if(!a.ok)return!1;const e=await a.json(),h=e.access||e.token;return h?(this.setToken(h),!0):!1}catch{return!1}}async get(a){return this.request(a,{method:"GET"})}async post(a,e){return this.request(a,{method:"POST",body:e?JSON.stringify(e):void 0})}async put(a,e){return this.request(a,{method:"PUT",body:e?JSON.stringify(e):void 0})}async delete(a){return this.request(a,{method:"DELETE"})}async patch(a,e){return this.request(a,{method:"PATCH",body:e?JSON.stringify(e):void 0})}async login(a,e){var s,o,r;const h=await this.post("/api/auth/login/",{username:a,password:e}),f=((s=h.data)==null?void 0:s.access)||((o=h.data)==null?void 0:o.token),l=((r=h.data)==null?void 0:r.refresh)||null;return f&&this.setTokens(f,l),h}async register(a){return this.post("/api/auth/register/",a)}async logout(){return this.clearToken(),this.post("/api/auth/logout/")}async getProjects(){return this.get("/api/projects/")}async createProject(a){return this.post("/api/projects/",a)}async updateProject(a,e){return this.put(`/api/projects/${a}/`,e)}async deleteProject(a){return this.delete(`/api/projects/${a}/`)}async getStudents(){return this.get("/api/students/")}async createStudent(a){return this.post("/api/students/",a)}async updateStudent(a,e){return this.put(`/api/students/${a}/`,e)}async getAdvisors(){return this.get("/api/advisors/")}async createAdvisor(a){return this.post("/api/advisors/",a)}async uploadFile(a,e){const h=new FormData;return h.append("file",a),h.append("project",e),this.request("/api/files/upload/",{method:"POST",body:h,headers:{Authorization:this.token?`Bearer ${this.token}`:""}})}async getFiles(a){const e=a?`/api/files/?project=${a}`:"/api/files/";return this.get(e)}async downloadFile(a){return this.get(`/api/files/${a}/download/`)}async getChannels(){return this.get("/api/communication/channels/")}async createChannel(a){return this.post("/api/communication/channels/",a)}async getMessages(a){return this.get(`/api/communication/channels/${a}/messages/`)}async sendMessage(a,e){return this.post(`/api/communication/channels/${a}/messages/`,{content:e})}async checkPlagiarism(a){return this.post("/api/ai-enhancement/plagiarism/",{text:a})}async checkGrammar(a){return this.post("/api/ai-enhancement/grammar/",{text:a})}async getTopicSuggestions(a){return this.get(`/api/ai-enhancement/topics/?project=${a}`)}async getDefenseSchedules(){return this.get("/api/defense/schedules/")}async createDefenseSchedule(a){return this.post("/api/defense/schedules/",a)}async getDefenseSessions(){return this.get("/api/defense/sessions/")}async getAnalytics(){return this.get("/api/analytics/")}async getProjectStatistics(){return this.get("/api/analytics/projects/")}async getSettings(){return this.get("/api/settings/")}async updateSettings(a){return this.put("/api/settings/",a)}async getNotifications(){return this.get("/api/notifications/")}async markNotificationAsRead(a){return this.patch(`/api/notifications/${a}/`,{read:!0})}}const Gn=new tb,rb=()=>{const[m,a]=Z.useState(null),[e,h]=Z.useState(!1),f=At(),l=Ue(),s=Z.useCallback(async(t,n)=>{h(!0);try{const u=await Gn.login(t,n);return a(u.data.user||null),f({type:"success",message:l("loginSuccess")}),u.data}catch(u){const c=u;let d=l("loginError");throw c.message&&(c.message.includes("Invalid credentials")?d="ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":c.message.includes("User account is disabled")?d="บัญชีผู้ใช้นี้ถูกปิดใช้งาน กรุณาติดต่อผู้ดูแลระบบ":c.message.includes("Password change required")?d="จำเป็นต้องเปลี่ยนรหัสผ่าน กรุณาติดต่อผู้ดูแลระบบ":c.message.includes("Must include username and password")?d="กรุณากรอกชื่อผู้ใช้และรหัสผ่าน":c.status===400?d="ข้อมูลที่ส่งไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":c.status===401?d="การเข้าสู่ระบบไม่สำเร็จ กรุณาตรวจสอบข้อมูลอีกครั้ง":c.status===403?d="ไม่มีสิทธิ์เข้าถึง กรุณาติดต่อผู้ดูแลระบบ":c.status===500?d="เกิดข้อผิดพลาดในระบบ กรุณาลองใหม่อีกครั้ง":d=c.message),f({type:"error",message:d}),u}finally{h(!1)}},[f,l]),o=Z.useCallback(async()=>{h(!0);try{await Gn.logout(),a(null),f({type:"success",message:l("logoutSuccess")})}catch(t){f({type:"error",message:t.message||l("logoutError")})}finally{h(!1)}},[f,l]),r=Z.useCallback(async t=>{h(!0);try{const n=await Gn.register(t);return f({type:"success",message:l("registerSuccess")}),n.data}catch(n){throw f({type:"error",message:n.message||l("registerError")}),n}finally{h(!1)}},[f,l]);return{user:m,loading:e,login:s,logout:o,register:r,isAuthenticated:!!m}},sb=({onLogin:m,advisors:a,students:e,addStudent:h,majors:f,classrooms:l,onBackToWelcome:s})=>{const[o,r]=Z.useState("staff"),[t,n]=Z.useState(""),[u,c]=Z.useState(""),[d,b]=Z.useState(""),[g,p]=Z.useState(""),[x,y]=Z.useState(!1),v=Ue(),{login:S}=rb(),N=async R=>{R.preventDefault(),p("");try{const B=(o==="staff"?t:u).trim();if(!B||!d){p(v("invalidStudentCredentials"));return}const M=await S(B,d);M&&M.user&&m(M.user)}catch{p(v("invalidStaffCredentials"))}};return i.jsxs(i.Fragment,{children:[i.jsx(at,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:R=>R.palette.mode==="dark"?"linear-gradient(to bottom right, #1e293b, #0f172a)":"linear-gradient(to bottom right, #f1f5f9, #e2e8f0)",p:2},children:i.jsx(qr,{maxWidth:"xs",children:i.jsxs(yn,{elevation:24,sx:{p:4,borderRadius:4},children:[i.jsxs(at,{sx:{textAlign:"center"},children:[s&&i.jsx(at,{sx:{display:"flex",justifyContent:"flex-start",mb:2},children:i.jsx(pr,{onClick:s,startIcon:i.jsx(yc,{}),sx:{textTransform:"none"},children:"กลับไปหน้าแรก"})}),i.jsx(at,{sx:{display:"flex",justifyContent:"center",mb:2},children:i.jsx(Ds,{sx:{fontSize:48,color:"primary.main"}})}),i.jsx(Qe,{variant:"h4",component:"h1",fontWeight:"bold",gutterBottom:!0,children:v("finalProjectManagement")}),i.jsx(Qe,{variant:"body2",color:"text.secondary",sx:{mt:1},children:v("signInToContinue")})]}),i.jsx(at,{sx:{borderBottom:1,borderColor:"divider",mt:3,mb:3},children:i.jsxs(vc,{value:o,onChange:(R,B)=>{r(B),p(""),b("")},variant:"fullWidth",children:[i.jsx(Ni,{label:v("staff"),value:"staff"}),i.jsx(Ni,{label:v("student"),value:"student"})]})}),i.jsxs(at,{component:"form",onSubmit:N,sx:{display:"flex",flexDirection:"column",gap:3},children:[o==="staff"?i.jsx(nr,{id:"staffName",name:"staffName",type:"text",fullWidth:!0,value:t,onChange:R=>n(R.target.value),placeholder:v("staffNamePlaceholder"),error:!!g,InputProps:{startAdornment:i.jsx(Fn,{position:"start",children:i.jsx(Ai,{color:"action"})})}}):i.jsx(nr,{id:"studentId",name:"studentId",type:"text",fullWidth:!0,value:u,onChange:R=>c(R.target.value),placeholder:v("studentIdPlaceholder"),error:!!g,InputProps:{startAdornment:i.jsx(Fn,{position:"start",children:i.jsx(Ai,{color:"action"})})}}),i.jsx(nr,{id:"password",name:"password",type:"password",fullWidth:!0,value:d,onChange:R=>b(R.target.value),placeholder:v("password"),error:!!g,InputProps:{startAdornment:i.jsx(Fn,{position:"start",children:i.jsx(Pa,{color:"action"})})}}),g&&i.jsx(Da,{severity:"error",children:g}),i.jsx(pr,{type:"submit",variant:"contained",fullWidth:!0,size:"large",sx:{py:1.5},children:v("signIn")})]}),o==="student"&&i.jsx(at,{sx:{textAlign:"center",pt:3,borderTop:1,borderColor:"divider",mt:3},children:i.jsxs(Qe,{variant:"body2",color:"text.secondary",children:[v("newStudent")," ",i.jsx(wc,{component:"button",type:"button",onClick:()=>y(!0),sx:{fontWeight:"medium",cursor:"pointer"},children:v("registerHere")})]})})]})})}),x&&i.jsx(eb,{onClose:()=>y(!1),onRegister:h,allStudents:e,majors:f,classrooms:l})]})},nb=({onLogin:m})=>{const[a,e]=Z.useState(!1);Z.useEffect(()=>{e(!0)},[]);const h=[{icon:Ds,title:"ລະບົບຈັດການບົດໂຄງການຈົບຊັ້ນ",description:"ຈັດການບົດໂຄງການຈົບຊັ້ນຂອງນັກສຶກສາຢ່າງຄົບວົງຈອນ ຕັ້ງແຕ່ການລົງທະບຽນຈົນເຖິງການສົ່ງວຽກສຸດທ້າຍ"},{icon:Ii,title:"ການຈັດການຜູ້ໃຊ້",description:"ຮອງຮັບບົດບາດຜູ້ໃຊ້ຫຼາກຫຼາຍ: ນັກສຶກສາ, ອາຈານທີ່ປຶກສາ, ຜູ້ດູແລພາກວິຊາ, ແລະ ຜູ້ດູແລລະບົບ"},{icon:Cc,title:"ວິເຄາະ ແລະ ລາຍງານ",description:"ລະບົບວິເຄາະຂໍ້ມູນ ແລະ ສ້າງລາຍງານສະຖິຕິເພື່ອການຕັດສິນໃຈທີ່ແມ່ນຍຳ"},{icon:Nc,title:"ການຕັ້ງຄ່າຂັ້ນສູງ",description:"ລະບົບຕັ້ງຄ່າທີ່ຍືດຫຍຸ່ນຮອງຮັບຄວາມຕ້ອງການຂອງແຕ່ລະພາກວິຊາ ແລະ ມະຫາວິທະຍາໄລ"}],f=[{label:"ນັກສຶກສາ",value:"500+",icon:Ii},{label:"ອາຈານທີ່ປຶກສາ",value:"50+",icon:Ds},{label:"ໂປຣເຈັກທີ່ດຳເນີນການ",value:"200+",icon:jc},{label:"ຄວາມພໍໃຈ",value:"98%",icon:Sc}],l=[{icon:xn,title:"ໃຊ້ງານງ່າຍ",description:"ອິນເຕີເຟດທີ່ໃຊ້ງານງ່າຍ ເຂົ້າໃຈໄດ້ທັນທີ ບໍ່ຕ້ອງຮຽນຮູ້ນານ",color:"success"},{icon:Sa,title:"ປະຫຍັດເວລາ",description:"ລະບົບອັດຕະໂນມັດຊ່ວຍຫຼຸດເວລາການເຮັດວຽກ ແລະ ເພີ່ມປະສິດທິພາບ",color:"info"},{icon:Ac,title:"ແຈ້ງເຕືອນອັດຕະໂນມັດ",description:"ລະບົບແຈ້ງເຕືອນທີ່ຊ່ວຍໃຫ້ບໍ່ພາດກຳນົດການສຳຄັນ",color:"secondary"}];return i.jsxs(at,{sx:{minHeight:"100vh",bgcolor:s=>Ks(s.palette.primary.light,.05)},children:[i.jsx(_c,{position:"sticky",sx:{bgcolor:"background.paper",backdropFilter:"blur(8px)",boxShadow:1},children:i.jsx(kc,{children:i.jsxs(qr,{maxWidth:"lg",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:{xs:2,sm:0}},children:[i.jsxs(at,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(at,{sx:{width:40,height:40,background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Ds,{sx:{color:"white",fontSize:24}})}),i.jsxs(at,{sx:{display:{xs:"none",sm:"block"}},children:[i.jsx(Qe,{variant:"h6",fontWeight:"bold",color:"text.primary",children:"EduInfo"}),i.jsx(Qe,{variant:"caption",color:"text.secondary",children:"Final Project Management System"})]})]}),i.jsx(pr,{variant:"contained",onClick:m,endIcon:i.jsx(Ln,{}),sx:{background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",boxShadow:3,"&:hover":{boxShadow:6}},children:"ເຂົ້າສູ່ລະບົບ"})]})})}),i.jsx(qr,{maxWidth:"lg",sx:{py:{xs:8,md:15}},children:i.jsxs(at,{sx:{textAlign:"center",opacity:a?1:0,transform:a?"translateY(0)":"translateY(40px)",transition:"all 1s ease-in-out"},children:[i.jsxs(Qe,{variant:"h2",component:"h1",fontWeight:"bold",gutterBottom:!0,sx:{fontSize:{xs:"2rem",md:"3.5rem"}},children:[i.jsx(Qe,{variant:"h4",component:"span",display:"block",color:"text.secondary",mb:1,sx:{fontSize:{xs:"1.5rem",md:"2rem"}},children:"ລະບົບຈັດການ"}),i.jsx(Qe,{variant:"h2",component:"span",sx:{background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block",fontSize:{xs:"2rem",md:"3.5rem"}},children:"ບົດໂຄງການຈົບຊັ້ນ"}),i.jsx(Qe,{variant:"h4",component:"span",display:"block",color:"text.secondary",mt:1,sx:{fontSize:{xs:"1.5rem",md:"2rem"}},children:"ທີ່ທັນສະໄໝ ແລະ ຄົບຖ້ວນ"})]}),i.jsx(Qe,{variant:"h6",color:"text.secondary",maxWidth:"800px",mx:"auto",mb:2,sx:{fontSize:{xs:"1rem",md:"1.25rem"}},children:"ລະບົບຈັດການບົດໂຄງການຈົບຊັ້ນທີ່ອອກແບບມາເພື່ອຮອງຮັບຄວາມຕ້ອງການຂອງມະຫາວິທະຍາໄລຍຸໃໝ່"}),i.jsx(Qe,{variant:"body1",color:"text.secondary",maxWidth:"800px",mx:"auto",mb:4,children:"ດ້ວຍເຕັກໂນໂລຢີທີ່ທັນສະໄໝ ແລະ ໃຊ້ງານງ່າຍ"}),i.jsxs(Tr,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",mb:4,gap:1,children:[i.jsx(Ls,{icon:i.jsx(Ti,{}),label:"ຄວາມປອດໄພລະດັບ A+",color:"success"}),i.jsx(Ls,{icon:i.jsx(Ei,{}),label:"HTTPS ປອດໄພ",color:"info"}),i.jsx(Ls,{icon:i.jsx(Pa,{}),label:"JWT Authentication",color:"secondary"})]}),i.jsxs(Tr,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"center",children:[i.jsx(pr,{variant:"contained",size:"large",onClick:m,endIcon:i.jsx(Ln,{}),sx:{background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",px:4,py:2,fontSize:"1.1rem",boxShadow:3,"&:hover":{boxShadow:6}},children:"ເລີ່ມຕົ້ນໃຊ້ງານ"}),i.jsx(pr,{variant:"outlined",size:"large",onClick:()=>{var s;return(s=document.getElementById("features"))==null?void 0:s.scrollIntoView({behavior:"smooth"})},sx:{px:4,py:2,fontSize:"1.1rem"},children:"ຮຽນຮູ້ເພີ່ມເຕີມ"})]})]})}),i.jsx(at,{sx:{py:8,bgcolor:s=>Ks(s.palette.background.paper,.5)},children:i.jsx(qr,{maxWidth:"lg",children:i.jsx(zt,{container:!0,spacing:4,children:f.map((s,o)=>{const r=s.icon;return i.jsx(zt,{size:{xs:6,md:3},children:i.jsxs(at,{textAlign:"center",children:[i.jsx(at,{sx:{width:64,height:64,background:t=>Ks(t.palette.primary.main,.1),borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:i.jsx(r,{sx:{fontSize:32,color:"primary.main"}})}),i.jsx(Qe,{variant:"h3",fontWeight:"bold",mb:1,sx:{fontSize:{xs:"2rem",md:"3rem"}},children:s.value}),i.jsx(Qe,{variant:"body2",color:"text.secondary",children:s.label})]})},o)})})})}),i.jsxs(qr,{id:"features",maxWidth:"lg",sx:{py:10},children:[i.jsxs(at,{textAlign:"center",mb:8,children:[i.jsx(Qe,{variant:"h3",fontWeight:"bold",mb:2,children:"ຄຸນສົມບັດຫຼັກຂອງລະບົບ"}),i.jsx(Qe,{variant:"h6",color:"text.secondary",maxWidth:"600px",mx:"auto",children:"ລະບົບທີ່ອອກແບບມາເພື່ອຕອບສະໜອງຄວາມຕ້ອງການຂອງທຸກພາກສ່ວນໃນມະຫາວິທະຍາໄລ"})]}),i.jsx(zt,{container:!0,spacing:3,children:h.map((s,o)=>{const r=s.icon;return i.jsx(zt,{size:{xs:12,sm:6,md:3},children:i.jsx(Ca,{sx:{height:"100%",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:i.jsxs(Na,{children:[i.jsx(at,{sx:{width:48,height:48,background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:i.jsx(r,{sx:{color:"white",fontSize:24}})}),i.jsx(Qe,{variant:"h6",fontWeight:"bold",mb:1.5,children:s.title}),i.jsx(Qe,{variant:"body2",color:"text.secondary",children:s.description})]})})},o)})})]}),i.jsxs(qr,{maxWidth:"lg",sx:{py:10},children:[i.jsxs(at,{textAlign:"center",mb:8,children:[i.jsx(Qe,{variant:"h3",fontWeight:"bold",mb:2,children:"ຂໍ້ດີຂອງການໃຊ້ລະບົບ"}),i.jsx(Qe,{variant:"h6",color:"text.secondary",maxWidth:"600px",mx:"auto",children:"ລະບົບທີ່ອອກແບບມາເພື່ອເພີ່ມປະສິດທິພາບ ແລະ ຄວາມສະດວກໃນການເຮັດວຽກ"})]}),i.jsx(zt,{container:!0,spacing:4,children:l.map((s,o)=>{const r=s.icon;return i.jsx(zt,{size:{xs:12,md:4},children:i.jsxs(at,{textAlign:"center",children:[i.jsx(at,{sx:{width:64,height:64,bgcolor:t=>Ks(t.palette[s.color].main,.1),borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:i.jsx(r,{sx:{fontSize:32,color:`${s.color}.main`}})}),i.jsx(Qe,{variant:"h5",fontWeight:"bold",mb:2,children:s.title}),i.jsx(Qe,{variant:"body1",color:"text.secondary",children:s.description})]})},o)})})]}),i.jsx(at,{sx:{py:12,background:"linear-gradient(135deg, #424242 0%, #212121 100%)",color:"white"},children:i.jsx(qr,{maxWidth:"md",children:i.jsxs(at,{textAlign:"center",children:[i.jsx(Qe,{variant:"h3",fontWeight:"bold",mb:3,color:"white",children:"ພ້ອມເລີ່ມຕົ້ນໃຊ້ງານແລ້ວຫຼືຍັງ?"}),i.jsx(Qe,{variant:"h6",sx:{color:"rgba(255,255,255,0.7)",mb:4},children:"ເຂົ້າຮ່ວມກັບມະຫາວິທະຍາໄລອື່ນໆ ທີ່ໃຊ້ລະບົບຈັດການບົດໂຄງການຈົບຊັ້ນທີ່ທັນສະໄໝທີ່ສຸດ"}),i.jsx(pr,{variant:"contained",size:"large",onClick:m,endIcon:i.jsx(Ln,{}),sx:{background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",px:4,py:2,fontSize:"1.1rem",boxShadow:6,"&:hover":{boxShadow:10}},children:"ເລີ່ມຕົ້ນໃຊ້ງານຕອນນີ້"})]})})}),i.jsx(at,{sx:{bgcolor:"grey.900",color:"white",py:6},children:i.jsxs(qr,{maxWidth:"lg",children:[i.jsxs(zt,{container:!0,spacing:4,children:[i.jsxs(zt,{size:{xs:12,md:4},children:[i.jsxs(at,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(at,{sx:{width:32,height:32,background:"linear-gradient(135deg, #1976d2 0%, #5e35b1 100%)",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Ds,{sx:{color:"white",fontSize:20}})}),i.jsx(Qe,{variant:"h6",fontWeight:"bold",children:"EduInfo"})]}),i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ລະບົບຈັດການບົດໂຄງການຈົບຊັ້ນທີ່ທັນສະໄໝ ແລະ ຄົບຖ້ວນສຳລັບມະຫາວິທະຍາໄລ"})]}),i.jsxs(zt,{size:{xs:12,md:4},children:[i.jsx(Qe,{variant:"h6",fontWeight:"bold",mb:2,children:"ລະບົບຫຼັກ"}),i.jsxs(Tr,{spacing:1,children:[i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ຈັດການນັກສຶກສາ"}),i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ຈັດການອາຈານທີ່ປຶກສາ"}),i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ຈັດການໂປຣເຈັກ"}),i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ລະບົບແຈ້ງເຕືອນ"})]})]}),i.jsxs(zt,{size:{xs:12,md:4},children:[i.jsx(Qe,{variant:"h6",fontWeight:"bold",mb:2,children:"ຂໍ້ມູນລະບົບ"}),i.jsxs(Tr,{spacing:1,children:[i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ເວີຊັນ: 1.0.0"}),i.jsx(Qe,{variant:"body2",color:"grey.400",children:"ສະຖານະ: Online"}),i.jsxs(at,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Ti,{sx:{fontSize:16,color:"success.main"}}),i.jsx(Qe,{variant:"body2",color:"success.main",children:"ຄວາມປອດໄພ: A+"})]}),i.jsxs(at,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Ei,{sx:{fontSize:16,color:"info.main"}}),i.jsx(Qe,{variant:"body2",color:"info.main",children:"HTTPS: ເປີດໃຊ້ງານ"})]})]})]})]}),i.jsx(Aa,{sx:{my:4,borderColor:"grey.800"}}),i.jsx(Qe,{variant:"body2",textAlign:"center",color:"grey.500",children:"© 2024 EduInfo - Final Project Management System. All rights reserved."})]})})]})},ib=({toast:m,onDismiss:a})=>{const e=Ue(),h={success:e("success"),error:e("error"),info:e("information")};Z.useEffect(()=>{const l=setTimeout(()=>{a(m.id)},4e3);return()=>{clearTimeout(l)}},[m.id,a]);const f=h[m.type]||h.info;return i.jsx(at,{sx:{maxWidth:"400px",width:"100%",pointerEvents:"auto"},children:i.jsxs(Da,{severity:m.type,variant:"filled",action:i.jsx(Qr,{"aria-label":e("close"),color:"inherit",size:"small",onClick:()=>a(m.id),children:i.jsx(vn,{fontSize:"inherit"})}),sx:{boxShadow:3},children:[i.jsx(Tc,{children:f}),m.message]})})},ob=()=>{const m=Z.useContext(hi);if(!m)return null;const{toasts:a,removeToast:e}=m;return i.jsx(at,{"aria-live":"assertive",sx:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:{xs:"flex-end",sm:"flex-start"},px:2,py:3,pointerEvents:"none",zIndex:9999},children:i.jsx(Tr,{spacing:2,sx:{width:"100%",alignItems:{xs:"center",sm:"flex-end"}},children:a.map(h=>i.jsx(ib,{toast:h,onDismiss:e},h.id))})})},Xn={},Cl=[{id:"TPL01",name:"Standard 5-Chapter Final Project",description:"A standard template for research-based projects with five chapters.",tasks:[{id:"TSK01",name:"Chapter 1: Introduction",durationDays:30},{id:"TSK02",name:"Chapter 2: Literature Review",durationDays:30},{id:"TSK03",name:"Chapter 3: Methodology",durationDays:30},{id:"TSK04",name:"Results & Discussion",durationDays:30},{id:"TSK05",name:"Chapter 5: Conclusion & Defense Prep",durationDays:30}]},{id:"TPL02",name:"Software Development Project",description:"A template for software engineering projects focusing on development cycles.",tasks:[{id:"TSK01",name:"Requirement Analysis & Design Document",durationDays:25},{id:"TSK02",name:"Prototype/Alpha Version Submission",durationDays:40},{id:"TSK03",name:"Beta Version & Testing Report",durationDays:45},{id:"TSK04",name:"Final Version & User Manual",durationDays:30},{id:"TSK05",name:"Project Defense",durationDays:20}]}],Nl=(m,a)=>Math.floor(Math.random()*(a-m+1))+m,ar=m=>m[Nl(0,m.length-1)],ab=["Thongchai","Soudalath","Ketsana","Bounthanh","Anousone","Vilayphone","Phonexay","Sompasong","Latsamy","Phouthone","Chinda","Vansy","Pany","Somsanouk","Dalavanh","Amphone","Khamla","Maly","Souksanh","Phasouk","Vilakone","Chansamone","Seng-aloun","Khamphou","Bounma","Vanida","Somchit","Nalee","Sitthixay","Phoumy"],lb=["Vongvilay","Phommasone","Inthavong","Sihalath","Chanthavong","Douangphachanh","Siphanthong","Phanthavong","Saysanavong","Keobounphanh","Souvannavong","Pholsena","Rattanakone","Sipasert","Vorachith","Phomvihane","Thammavongsa","Insisiengmay","Chaleunsouk","Phengphachan"],cb=["ການວິເຄາະກົນລະຍຸດ","ການພັດທະນາແຜນທຸລະກິດ","ລະບົບการຈັດການລູກຄ້າສຳພັນ","ແພລດຟອມการຕະຫຼາດດິຈິຕອນ","การສຶກສາความເປັນໄປໄດ້ຂອງໂຄງການ","ການວິໄຈຕະຫຼາດ"],db=["Strategic Analysis of","Business Plan Development for","CRM System for","Digital Marketing Platform for","Feasibility Study for","Market Research on"],ub=["ຂະແໜງการຄິດໄລ່","ອຸດສາຫະກຳการບໍລິການ","ທຸລະກິດສົ່ງອອກ","ສະຕາດອັບເຕັກໂນໂລຊີ","ວິສາຫະກິດເພື່ອສັງຄົມ","ແຟຣນໄຊອາຫານ ແລະ ເຄື່ອງດື່ມ","ການທ່ອງທ່ຽວແບບນິເວດ"],fb=["the Retail Sector","the Hospitality Industry","an Export Business","a Tech Startup","a Social Enterprise","a Food & Beverage Franchise","Eco-Tourism"],hb=["ໂດຍໃຊ້ SWOT Analysis","ໂດຍເນັ້ນໃສ່ Social Media","ໂດຍໃຊ້ E-commerce","ຕາມ BCG Matrix","ໂດຍເປົ້າໝາຍໃສ່ກຸ່ມ Millennial","ເພື່ອการขะຫຍາຍຕົວສູ່ສາກົນ"],mb=["using SWOT Analysis","with a focus on Social Media","leveraging E-commerce","based on the BCG Matrix","targeting Millennial Consumers","for International Expansion"],pb=[{name:"Ms. Souphap",isDepartmentAdmin:!0},{name:"Assoc. Prof. Phayvanh",isDepartmentAdmin:!1},{name:"Ms. Phetsamone",isDepartmentAdmin:!1},{name:"Ms. Bounmy",isDepartmentAdmin:!1},{name:"Assoc. Prof. Phonesavanh",isDepartmentAdmin:!1},{name:"Assoc. Prof. Bounmy",isDepartmentAdmin:!1},{name:"Mr. Bounpheng",isDepartmentAdmin:!1},{name:"Dr. Chanthone",isDepartmentAdmin:!1},{name:"Ms. Sengdeuane",isDepartmentAdmin:!1},{name:"Ms. Daovong",isDepartmentAdmin:!1},{name:"Dr. Bounthavy",isDepartmentAdmin:!1},{name:"Dr. Somphone",isDepartmentAdmin:!1},{name:"Mr. Bounmy",isDepartmentAdmin:!1},{name:"Prof. Phaythoune",isDepartmentAdmin:!0},{name:"Dr. Malee",isDepartmentAdmin:!1},{name:"Ms. Khammany",isDepartmentAdmin:!1},{name:"Dr. Aloun",isDepartmentAdmin:!1},{name:"Mr. Bounthavy",isDepartmentAdmin:!1},{name:"Ms. Phayvanh",isDepartmentAdmin:!1}],Yr=pb.map((m,a)=>({id:`A${String(a+1).padStart(2,"0")}`,name:m.name,quota:m.isDepartmentAdmin?4:3,mainCommitteeQuota:m.isDepartmentAdmin?4:3,secondCommitteeQuota:m.isDepartmentAdmin?4:3,thirdCommitteeQuota:m.isDepartmentAdmin?4:3,specializedMajorIds:[],isDepartmentAdmin:m.isDepartmentAdmin,password:"password123",isAiAssistantEnabled:!0})),Al=[{id:"M01",name:"Business Administration (IBM)",abbreviation:"IBM"},{id:"M02",name:"Business Administration (BM)",abbreviation:"BM"},{id:"M03",name:"Business Administration (Continuing) (BMC)",abbreviation:"BMC"},{id:"M04",name:"Marketing (MK)",abbreviation:"MK"}],Tl=[{id:"C01",name:"IBM-4A",majorId:"M01",majorName:"Business Administration (IBM)"},{id:"C02",name:"IBM-4B",majorId:"M01",majorName:"Business Administration (IBM)"},{id:"C03",name:"BM-4A",majorId:"M02",majorName:"Business Administration (BM)"},{id:"C04",name:"BM-4B",majorId:"M02",majorName:"Business Administration (BM)"},{id:"C05",name:"BMC-2A",majorId:"M03",majorName:"Business Administration (Continuing) (BMC)"},{id:"C06",name:"MK-4A",majorId:"M04",majorName:"Marketing (MK)"},{id:"C07",name:"MK-4B",majorId:"M04",majorName:"Marketing (MK)"}],En="M01",El=["M02","M03","M04"],wa=Yr.find(m=>m.name==="Ms. Souphap");wa&&(wa.specializedMajorIds=[En]);const _a=Yr.find(m=>m.name==="Prof. Phaythoune");_a&&(_a.specializedMajorIds=El);const gb=Yr.filter(m=>!m.isDepartmentAdmin),bb=6;gb.forEach((m,a)=>{a<bb?m.specializedMajorIds=[En]:m.specializedMajorIds=El});const xb=Yr.filter(m=>m.specializedMajorIds.includes(En)),yb=Yr.filter(m=>!m.specializedMajorIds.includes(En)),vb=m=>{const a=[];for(let e=0;e<m;e++){const h=ar(Tl);a.push({studentId:`155N${String(1e3+e).padStart(4,"0")}/21`,gender:ar([qt.Male,qt.Female,qt.Monk]),name:ar(ab),surname:ar(lb),major:h.majorName,classroom:h.name,tel:`020-555-${Nl(1e3,9999)}`,email:`student${e}@university.edu`,status:"Approved",password:"password123",isAiAssistantEnabled:!0})}return a},Il=vb(140),wb=[...Il],_b=Yr,kb=m=>{const a=[];let e=[...wb],h=0;const f={};Yr.forEach(l=>f[l.name]=0);for(const[l,s]of Object.entries(m)){const o=Al.find(n=>n.id===l);let r=e.filter(n=>n.major===o.name);const t=l==="M01"?xb:yb;for(let n=0;n<s;n++){if(r.length===0){console.warn(`Ran out of students for major ${o.name} while generating projects.`);break}const u=[],c=r.pop();if(u.push(c),e=e.filter(S=>S.studentId!==c.studentId),Math.random()<.4&&r.length>0){const S=r.pop();u.push(S),e=e.filter(N=>N.studentId!==S.studentId)}let d=t.filter(S=>f[S.name]<S.quota),b;if(d.length>0)b=ar(d);else{const S=Yr.filter(N=>f[N.name]<N.quota);S.length>0&&(b=ar(S),console.warn(`No specialized advisors with quota for major ${o.name}. Using any available advisor: ${b.name}`))}if(!b){console.error("Could not find an available advisor. Halting project generation for this major.");break}const g=`${ar(db)} ${ar(fb)} ${ar(mb)}`,p=`${ar(cb)} ${ar(ub)} ${ar(hb)}`,x=ar([it.Approved,it.Approved,it.Pending,it.Pending,it.Rejected]),y=u[0].name,v={projectId:`P24${String(h+1).padStart(3,"0")}`,topicLao:p,topicEng:g,advisorName:b.name,comment:"Initial submission.",status:x,history:[{status:it.Pending,timestamp:"2024-07-28T10:00:00Z",actorName:y,comment:"Project created and submitted."}],milestones:[],similarityInfo:null,finalSubmissions:{preDefenseFile:null,postDefenseFile:null},mainCommitteeId:null,secondCommitteeId:null,thirdCommitteeId:null,defenseDate:null,defenseTime:null,defenseRoom:null,finalGrade:null,mainAdvisorScore:null,mainCommitteeScore:null,secondCommitteeScore:null,thirdCommitteeScore:null,log:[],detailedScores:null};a.push({project:v,students:u}),x!==it.Rejected&&f[b.name]++,h++}}return a},jb={M01:25,M02:15,M03:5,M04:14},Sb=kb(jb),Cb=[{id:"ANN01",title:"Welcome to the New Academic Year!",content:"Welcome everyone to the **2024 academic year**. Please ensure your personal information is up-to-date and start thinking about your final project topics. Good luck!",audience:"All",authorName:"Admin",createdAt:"2024-08-01T09:00:00Z",updatedAt:"2024-08-01T09:00:00Z"}],tr=typeof import.meta<"u"&&(Xn==null?void 0:Xn.VITE_API_BASE_URL)||"https://eduinfo.online",ka=tr.endsWith("/")?tr.slice(0,-1):tr,Nt={getAllDataForYear:async m=>{try{const a=localStorage.getItem("auth_token"),e={"Content-Type":"application/json"};a&&(e.Authorization=`Bearer ${a}`);const h=ka?`${ka}/api/data/${m}/`:`/api/data/${m}/`,f=await fetch(h,{method:"GET",headers:e});if(!f.ok)throw new Error(`Backend not available: ${f.statusText}`);const l=await f.json();return Object.keys(l).forEach(s=>{l[s]&&localStorage.setItem(`${s}_${m}`,JSON.stringify(l[s]))}),l}catch(a){console.warn("Backend fetch failed, falling back to localStorage.",a);const e=h=>{const f=localStorage.getItem(`${h}_${m}`);return f?JSON.parse(f):void 0};return{projectGroups:e("projectGroups"),students:e("students"),advisors:e("advisors"),majors:e("majors"),classrooms:e("classrooms"),milestoneTemplates:e("milestoneTemplates"),announcements:e("announcements"),defenseSettings:e("defenseSettings"),scoringSettings:e("scoringSettings")}}},updateCollection:async(m,a,e)=>{try{const h=tr?`${tr}/api/${m}/${a}`:`/api/${m}/${a}`,f=await fetch(h,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!f.ok)throw new Error(`Failed to update collection ${a}`);const l=await f.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(l)),l}catch(h){return console.warn(`Backend update failed for ${a}, falling back to localStorage.`,h),localStorage.setItem(`${a}_${m}`,JSON.stringify(e)),e}},bulkUpdateCollection:async(m,a,e,h)=>{try{const f=tr?`${tr}/api/${m}/${a}`:`/api/${m}/${a}`,l=await fetch(f,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,updates:h})});if(!l.ok)throw new Error(`Failed to bulk update collection ${a}`);const s=await l.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(s)),s}catch(f){console.warn(`Backend bulk update failed for ${a}, falling back to localStorage.`,f);const l=localStorage.getItem(`${a}_${m}`),s=l?JSON.parse(l):[],o=a==="students"?"studentId":"id",r=s.map(t=>e.includes(t[o])?{...t,...h}:t);return localStorage.setItem(`${a}_${m}`,JSON.stringify(r)),r}},addCollectionItem:async(m,a,e)=>{try{const h=tr?`${tr}/api/${m}/${a}`:`/api/${m}/${a}`,f=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!f.ok)throw new Error(`Failed to add item to ${a}`);const l=await f.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(l)),l}catch(h){console.warn(`Backend add failed for ${a}, falling back to localStorage.`,h);const f=localStorage.getItem(`${a}_${m}`),s=[...f?JSON.parse(f):[],e];return localStorage.setItem(`${a}_${m}`,JSON.stringify(s)),s}},deleteCollectionItem:async(m,a,e)=>{try{const h=tr?`${tr}/api/${m}/${a}/${e}`:`/api/${m}/${a}/${e}`,f=await fetch(h,{method:"DELETE"});if(!f.ok)throw new Error(`Failed to delete item from ${a}`);const l=await f.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(l)),l}catch(h){console.warn(`Backend delete failed for ${a}, falling back to localStorage.`,h);const f=localStorage.getItem(`${a}_${m}`),l=f?JSON.parse(f):[],s=a==="students"?"studentId":"id",o=l.filter(r=>r[s]!==e);return localStorage.setItem(`${a}_${m}`,JSON.stringify(o)),o}},bulkDeleteCollection:async(m,a,e)=>{try{const h=tr?`${tr}/api/${m}/${a}/bulk_delete`:`/api/${m}/${a}/bulk_delete`,f=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})});if(!f.ok)throw new Error(`Failed to bulk delete from ${a}`);const l=await f.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(l)),l}catch(h){console.warn(`Backend bulk delete failed for ${a}, falling back to localStorage.`,h);const f=localStorage.getItem(`${a}_${m}`),l=f?JSON.parse(f):[],s=a==="students"?"studentId":"id",o=l.filter(r=>!e.includes(r[s]));return localStorage.setItem(`${a}_${m}`,JSON.stringify(o)),o}},updateSettings:async(m,a,e)=>{try{const h=tr?`${tr}/api/${m}/settings/${a}`:`/api/${m}/settings/${a}`,f=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!f.ok)throw new Error(`Failed to update settings for ${a}`);const l=await f.json();return localStorage.setItem(`${a}_${m}`,JSON.stringify(l)),l}catch(h){return console.warn(`Backend settings update failed for ${a}, falling back to localStorage.`,h),localStorage.setItem(`${a}_${m}`,JSON.stringify(e)),e}}},Nb=(m,a,e)=>{const[h,f]=Z.useState(!0),[l,s]=Z.useState([]),[o,r]=Z.useState([]),[t,n]=Z.useState([]),[u,c]=Z.useState([]),[d,b]=Z.useState([]),[g,p]=Z.useState([]),[x,y]=Z.useState([]),[v,S]=Z.useState({startDefenseDate:"",timeSlots:"09:00-10:00,10:15-11:15,13:00-14:00,14:15-15:15",rooms:[],stationaryAdvisors:{},timezone:"Asia/Bangkok"}),[N,R]=Z.useState({mainAdvisorWeight:60,committeeWeight:40,gradeBoundaries:[],advisorRubrics:[],committeeRubrics:[]}),B=Ue();Z.useEffect(()=>{(async()=>{if(m){f(!0);try{const xe=await Nt.getAllDataForYear(m);s(xe.projectGroups||[]),r(xe.students||[]),n(xe.advisors||[]),c(xe.majors||[]),b(xe.classrooms||[]),p(xe.milestoneTemplates||Cl),y(xe.announcements||[]),S(xe.defenseSettings||{startDefenseDate:"",timeSlots:"09:00-10:00,10:15-11:15,13:00-14:00,14:15-15:15",rooms:[],stationaryAdvisors:{},timezone:"Asia/Bangkok"}),R(xe.scoringSettings||{mainAdvisorWeight:60,committeeWeight:40,gradeBoundaries:[],advisorRubrics:[],committeeRubrics:[]})}catch(xe){console.error("Failed to load data from storage:",xe),e({type:"error",message:"Could not load local data. Please try clearing your browser cache."})}finally{f(!1)}}})()},[m,e]);const M=Z.useMemo(()=>l.reduce((ge,xe)=>((xe.project.status===it.Approved||xe.project.status===it.Pending)&&(ge[xe.project.advisorName]=(ge[xe.project.advisorName]||0)+1),ge),{}),[l]),F=Z.useMemo(()=>{const ge={};return t.forEach(xe=>{ge[xe.id]={main:0,second:0,third:0}}),l.forEach(xe=>{xe.project.mainCommitteeId&&ge[xe.project.mainCommitteeId]&&ge[xe.project.mainCommitteeId].main++,xe.project.secondCommitteeId&&ge[xe.project.secondCommitteeId]&&ge[xe.project.secondCommitteeId].second++,xe.project.thirdCommitteeId&&ge[xe.project.thirdCommitteeId]&&ge[xe.project.thirdCommitteeId].third++}),ge},[l,t]),q=Z.useCallback(ge=>{var xe;return ge?((xe=t.find(we=>we.id===ge))==null?void 0:xe.name)||"Unknown":"N/A"},[t]),V=Z.useCallback(async ge=>{const xe=l.map(ge);try{const we=await Nt.updateCollection(m,"projectGroups",xe);s(we)}catch(we){console.error("Failed to update project groups:",we),e({type:"error",message:"Failed to save project updates."})}},[l,m,e]),O=Z.useCallback(async(ge,xe,we=null)=>{const je=/@([\w\s.]+)/g,Se=[...xe.message.matchAll(je)];if(Se.length>0){const Ie=Se.map(ze=>ze[1].trim()),He=[...t,...o].filter(ze=>Ie.includes(ze.name)||Ie.includes(`${ze.name} ${ze.surname}`));if(He.length>0){const ze=He.map(Le=>Le.studentId||Le.id);a({title:B("youWereMentioned").replace("${projectId}",ge),message:`${xe.authorName}: "${xe.message}"`,userIds:ze,projectId:ge,type:"Mention"})}}await V(Ie=>{if(Ie.project.projectId===ge){const He={...xe,id:Ar(),timestamp:new Date().toISOString(),file:null};if(we){const Le=Ar();try{localStorage.setItem(`file_${Le}`,we.dataUrl),He.file={fileId:Le,name:we.name,type:we.type,size:we.size}}catch(Ge){e({type:"error",message:B("storageLimitReached")}),console.error("Local storage error:",Ge)}}const ze=[...Ie.project.log||[],He];return{...Ie,project:{...Ie.project,log:ze}}}return Ie})},[a,t,o,e,B,V]),T=Z.useCallback(async(ge,xe,we)=>{const je={status:it.Pending,timestamp:new Date().toISOString(),actorName:we.name,comment:"Project created and submitted for approval."},Ie={project:{...ge,history:[je]},students:xe};try{const He=await Nt.addCollectionItem(m,"projectGroups",Ie);s(He),O(ge.projectId,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:"Project registered."});const ze=t.find(Le=>Le.name===ge.advisorName);ze&&a({title:B("newProjectSubmissionTitle"),message:B("newProjectSubmissionMessage").replace("${topic}",ge.topicEng),userIds:[ze.id],projectId:ge.projectId,type:"Submission"})}catch{e({type:"error",message:"Failed to add project."})}},[t,a,O,B,m,e]),A=Z.useCallback(async(ge,xe)=>{const we=l.find(ze=>ze.project.projectId===ge.project.projectId);if(!we)return;let je="Project details updated.";we.project.topicEng!==ge.project.topicEng&&(je+=" Topic changed."),we.project.advisorName!==ge.project.advisorName&&(je+=` Advisor changed to ${ge.project.advisorName}.`);const Se={status:ge.project.status,timestamp:new Date().toISOString(),actorName:xe.name,comment:je},Ie=[...ge.project.history,Se],He={...ge.project,history:Ie};await V(ze=>ze.project.projectId===ge.project.projectId?{...ge,project:He}:ze),O(ge.project.projectId,{type:"event",authorId:xe.id,authorName:xe.name,authorRole:xe.role,message:je})},[l,O,V]),C=Z.useCallback(async ge=>{try{const xe=await Nt.deleteCollectionItem(m,"projectGroups",ge);s(xe)}catch(xe){console.error(`Could not delete project ${ge}:`,xe),e({type:"error",message:`Failed to delete project ${ge}.`})}},[m,e]),w=Z.useCallback(async(ge,xe,we,je)=>{await V(Se=>{if(Se.project.projectId===ge){const Ie=je.comment||(xe===it.Approved?"Project approved.":"Project rejected."),He={status:xe,timestamp:new Date().toISOString(),actorName:we.name,comment:Ie},ze={...Se.project,status:xe,history:[...Se.project.history,He]};if(xe===it.Approved&&je.templateId){const Ke=g.find(Ye=>Ye.id===je.templateId);if(Ke){let ut=new Date;ze.milestones=Ke.tasks.map(ht=>{const rt=new Date(ut);return rt.setDate(rt.getDate()+ht.durationDays),ut=rt,{id:ht.id,name:ht.name,status:bt.Pending,dueDate:rt.toISOString(),submittedDate:null,feedback:null,submittedFile:null}})}}O(ge,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:`Project status changed to ${xe}. ${Ie}`});const Le=Se.students.map(Ke=>Ke.studentId),Ge=xe===it.Approved?"Approval":"Feedback";return a({title:B("projectStatusUpdateTitle").replace("${status}",xe),message:B("projectStatusUpdateMessage").replace("${topic}",Se.project.topicEng).replace("${status}",xe.toLowerCase()).replace("${comment}",Ie),userIds:Le,projectId:ge,type:Ge}),{...Se,project:ze}}return Se})},[g,a,O,B,V]),_=Z.useCallback(async(ge,xe,we,je)=>{await V(Se=>{if(Se.project.projectId===ge){const Ie=[...Se.project.milestones||[]],He=Ie.findIndex(me=>me.id===xe);if(He===-1)return Se;const ze=Ie[He],Le={...ze},Ge=[];let Ke="",Ye="",ut=null,ht=[];if(je.status&&(Le.status=je.status,Ge.push(`status set to ${je.status}`),je.status===bt.Submitted&&(Le.submittedDate=new Date().toISOString())),je.feedback!==void 0&&(Le.feedback=je.feedback,Ge.push("feedback provided")),je.submittedFile){const me=Ar();try{localStorage.setItem(`file_${me}`,je.submittedFile.dataUrl),Le.submittedFile={fileId:me,name:je.submittedFile.name,type:je.submittedFile.type,size:je.submittedFile.size},Ge.push("file submitted"),Le.submittedDate=new Date().toISOString(),we.role==="Student"&&(ze.status===bt.Pending||ze.status===bt.RequiresRevision)&&(Le.status=bt.Submitted)}catch(ve){e({type:"error",message:B("storageLimitReached")}),console.error("Local storage error:",ve)}}je.dueDate&&(Le.dueDate=je.dueDate,Ge.push(`due date changed to ${new Date(je.dueDate).toLocaleDateString()}`)),O(ge,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:`Milestone "${ze.name}" updated by ${we.name}: ${Ge.join(", ")}.`});const rt=t.find(me=>me.name===Se.project.advisorName);return we.role==="Student"&&(je.submittedFile||je.status===bt.Submitted)?(ut="Submission",Ye=B("milestoneSubmittedTitle"),Ke=B("milestoneSubmittedMessage").replace("${milestoneName}",ze.name).replace("${projectId}",ge),rt&&ht.push(rt.id)):we.role!=="Student"&&je.status?(ut=je.status===bt.Approved?"Approval":"Feedback",Ye=B("milestoneStatusUpdateTitle").replace("${status}",je.status),Ke=B("milestoneStatusUpdateMessage").replace("${milestoneName}",ze.name).replace("${status}",je.status),ht=Se.students.map(me=>me.studentId)):we.role!=="Student"&&je.dueDate&&(ut="System",Ye=B("milestoneDueDateUpdated"),Ke=B("milestoneDueDateUpdatedMessage").replace("${milestoneName}",ze.name).replace("${newDate}",new Date(je.dueDate).toLocaleDateString()),ht=Se.students.map(me=>me.studentId)),ut&&ht.length>0&&a({title:Ye,message:Ke,userIds:ht,projectId:ge,type:ut}),Ie[He]=Le,{...Se,project:{...Se.project,milestones:Ie}}}return Se})},[a,O,B,t,e,V]),j=Z.useCallback(async(ge,xe,we)=>{await V(je=>{if(je.project.projectId===ge&&je.project.milestones){const Se=[...je.project.milestones],Ie=Se.findIndex(Le=>Le.id===xe),He=we?Se.findIndex(Le=>Le.id===we):Se.length;if(Ie===-1)return je;const[ze]=Se.splice(Ie,1);return Se.splice(He,0,ze),{...je,project:{...je.project,milestones:Se}}}return je})},[V]),k=(ge,xe,we)=>Z.useCallback(async(...je)=>{try{const Se=await ge(...je);xe(Se)}catch(Se){console.error(we,Se),e({type:"error",message:we})}},[e,we]),E=k(ge=>Nt.addCollectionItem(m,"students",{...ge,isAiAssistantEnabled:!0}),r,"Failed to add student."),I=Z.useCallback(async ge=>{try{const xe=await Nt.updateCollection(m,"students",o.map(we=>we.studentId===ge.studentId?ge:we));r(xe)}catch(xe){console.error("Failed to update student.",xe),e({type:"error",message:"Failed to update student."})}},[o,m,e]),D=k(ge=>Nt.deleteCollectionItem(m,"students",ge),r,"Failed to delete student."),X=k(ge=>{const xe=new Map(o.map(je=>[je.studentId,je]));ge.forEach(je=>xe.set(je.studentId,{...je,isAiAssistantEnabled:!0}));const we=Array.from(xe.values());return Nt.updateCollection(m,"students",we)},r,"Failed to bulk update students."),G=k((ge,xe)=>Nt.bulkUpdateCollection(m,"students",ge,xe),r,"Failed to bulk update students."),K=k(ge=>Nt.bulkDeleteCollection(m,"students",ge),r,"Failed to bulk delete students."),U=k(ge=>{const xe=`A${t.length+1}`;return Nt.addCollectionItem(m,"advisors",{...ge,id:xe,isAiAssistantEnabled:!0})},n,"Failed to add advisor."),J=Z.useCallback(async ge=>{try{const xe=await Nt.updateCollection(m,"advisors",t.map(we=>we.id===ge.id?ge:we));n(xe)}catch(xe){console.error("Failed to update advisor.",xe),e({type:"error",message:"Failed to update advisor."})}},[t,m,e]),$=k(ge=>Nt.deleteCollectionItem(m,"advisors",ge),n,"Failed to delete advisor."),L=k(ge=>Nt.bulkDeleteCollection(m,"advisors",ge),n,"Failed to delete advisors."),W=k(async ge=>{const xe=new Map(t.map(je=>[je.id,je]));ge.forEach(je=>{if("id"in je&&je.id)xe.set(je.id,{isAiAssistantEnabled:!0,...je});else{const Se=`A${xe.size+1+Math.random()}`;xe.set(Se,{...je,id:Se,isAiAssistantEnabled:!0})}});const we=Array.from(xe.values());return Nt.updateCollection(m,"advisors",we)},n,"Failed to bulk update advisors."),re=k((ge,xe)=>Nt.bulkUpdateCollection(m,"advisors",ge,xe),n,"Failed to bulk update advisors."),ne=k(ge=>Nt.addCollectionItem(m,"majors",{...ge,id:`M${u.length+1}`}),c,"Failed to add major."),se=k(ge=>Nt.updateCollection(m,"majors",u.map(xe=>xe.id===ge.id?ge:xe)),c,"Failed to update major."),H=k(ge=>Nt.deleteCollectionItem(m,"majors",ge),c,"Failed to delete major."),ce=k(ge=>Nt.addCollectionItem(m,"classrooms",{...ge,id:`C${d.length+1}`}),b,"Failed to add classroom."),ae=k(ge=>Nt.updateCollection(m,"classrooms",d.map(xe=>xe.id===ge.id?ge:xe)),b,"Failed to update classroom."),Y=k(ge=>Nt.deleteCollectionItem(m,"classrooms",ge),b,"Failed to delete classroom."),Q=k(ge=>Nt.addCollectionItem(m,"milestoneTemplates",{...ge,id:`TPL${g.length+1}`}),p,"Failed to add template."),te=k(ge=>Nt.updateCollection(m,"milestoneTemplates",g.map(xe=>xe.id===ge.id?ge:xe)),p,"Failed to update template."),ie=k(ge=>Nt.deleteCollectionItem(m,"milestoneTemplates",ge),p,"Failed to delete template."),le=k(ge=>Nt.addCollectionItem(m,"announcements",{...ge,id:`ANN${x.length+1}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),y,"Failed to add announcement."),ee=k(ge=>Nt.updateCollection(m,"announcements",x.map(xe=>xe.id===ge.id?{...ge,updatedAt:new Date().toISOString()}:xe)),y,"Failed to update announcement."),oe=k(ge=>Nt.deleteCollectionItem(m,"announcements",ge),y,"Failed to delete announcement."),de=k(ge=>Nt.updateSettings(m,"defenseSettings",ge),S,"Failed to save defense settings."),fe=k(ge=>Nt.updateSettings(m,"scoringSettings",ge),R,"Failed to save scoring settings."),be=Z.useCallback(async()=>{await V(ge=>({...ge,project:{...ge.project,mainCommitteeId:null,secondCommitteeId:null,thirdCommitteeId:null,defenseDate:null,defenseTime:null,defenseRoom:null}})),e({type:"success",message:B("allSchedulesCleared")})},[e,B,V]),he=Z.useCallback(async ge=>{const xe=new Map(ge.map(we=>[we.projectId,we]));await V(we=>{if(xe.has(we.project.projectId)){const je=xe.get(we.project.projectId);return{...we,project:{...we.project,defenseDate:je.date,defenseTime:je.time,defenseRoom:je.room}}}return we})},[V]),pe=Z.useCallback(async ge=>{},[]),ke=Z.useCallback(async(ge,xe,we,je)=>{await V(Se=>{if(Se.project.projectId===ge){const Ie=Se.project.advisorName,He={status:Se.project.status,timestamp:new Date().toISOString(),actorName:we.name,comment:`Transferred from ${Ie} to ${xe}. Reason: ${je}`},ze={...Se.project,advisorName:xe,history:[...Se.project.history,He]};O(ge,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:He.comment});const Le=t.find(Ge=>Ge.name===xe);return Le&&a({title:B("projectTransferredTitle"),message:B("projectTransferredMessage").replace("${projectId}",ge).replace("${newAdvisorName}",xe),userIds:[Le.id,...Se.students.map(Ge=>Ge.studentId)],projectId:ge,type:"System"}),{...Se,project:ze}}return Se})},[O,a,t,B,V]),Ce=Z.useCallback(async(ge,xe)=>{const we=new Set(ge);await V(je=>{if(we.has(je.project.projectId)){const Se={...xe,id:Ar(),timestamp:new Date().toISOString()},Ie=[...je.project.log||[],Se],He={...je.project,log:Ie};return{...je,project:He}}return je})},[V]),Ee=Z.useCallback(async(ge,xe,we,je)=>{await V(Se=>{if(Se.project.projectId===ge){const Ie=`${we}CommitteeId`,He={...Se.project,[Ie]:je};return{...Se,project:He}}return Se})},[V]),Oe=Z.useCallback(async(ge,xe,we)=>{await V(je=>{if(je.project.projectId===ge){const Se={...je.project,defenseDate:we.date,defenseTime:we.time,defenseRoom:we.room};return{...je,project:Se}}return je})},[V]),Te=Z.useCallback(async(ge,xe,we,je)=>{await V(Se=>{if(Se.project.projectId===ge){const Ie=Ar();try{localStorage.setItem(`file_${Ie}`,je.dataUrl)}catch{return e({type:"error",message:"Storage limit reached."}),Se}const He={fileId:Ie,name:je.name,type:je.type,size:je.size,submittedAt:new Date().toISOString(),status:ir.Submitted},ze={...Se.project.finalSubmissions||{preDefenseFile:null,postDefenseFile:null},[xe]:He},Le={...Se.project,finalSubmissions:ze};O(ge,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:`${xe==="preDefenseFile"?"Pre-defense":"Post-defense"} file submitted.`},je);const Ge=t.find(Ke=>Ke.name===Se.project.advisorName);return Ge&&a({title:B("finalDocumentSubmittedTitle"),message:B("finalDocumentSubmittedMessage").replace("${type}",xe==="preDefenseFile"?"pre-defense":"post-defense").replace("${projectId}",ge),userIds:[Ge.id],projectId:ge,type:"Submission"}),{...Se,project:Le}}return Se})},[O,a,t,e,B,V]),ye=Z.useCallback(async(ge,xe,we,je,Se)=>{await V(Ie=>{if(Ie.project.projectId===ge&&Ie.project.finalSubmissions){const He=Ie.project.finalSubmissions[xe];if(!He)return Ie;const ze={...He,status:je,feedback:Se,approvedAt:je===ir.Approved?new Date().toISOString():null},Le={...Ie.project.finalSubmissions,[xe]:ze},Ge={...Ie.project,finalSubmissions:Le};return O(ge,{type:"event",authorId:we.id,authorName:we.name,authorRole:we.role,message:`Final submission (${xe}) status updated to ${je}. Feedback: ${Se}`}),a({title:B("submissionStatusUpdateTitle").replace("${status}",je),message:B("submissionStatusUpdateMessage").replace("${type}",xe).replace("${status}",je),userIds:Ie.students.map(Ke=>Ke.studentId),projectId:ge,type:"Feedback"}),{...Ie,project:Ge}}return Ie})},[O,a,B,V]),Ae=Z.useCallback(async(ge,xe,we)=>{await V(je=>{if(je.project.projectId===ge){const Se={...je.project},Ie=t.find(Ge=>Ge.id===xe),He=(Ie==null?void 0:Ie.name)===je.project.advisorName;let ze;He?ze=N.advisorRubrics:ze=N.committeeRubrics;const Le=ze.reduce((Ge,Ke)=>Ge+(we[Ke.id]||0),0);return He?Se.mainAdvisorScore=Le:xe===je.project.mainCommitteeId?Se.mainCommitteeScore=Le:xe===je.project.secondCommitteeId?Se.secondCommitteeScore=Le:xe===je.project.thirdCommitteeId&&(Se.thirdCommitteeScore=Le),Se.detailedScores={...Se.detailedScores||{},[xe]:we},{...je,project:Se}}return je})},[t,N,V]),Fe=Z.useCallback(async(ge,xe)=>{await V(we=>we.project.projectId===ge?{...we,project:{...we.project,finalGrade:xe}}:we)},[V]),Re=Z.useCallback(()=>(e({type:"info",message:"Auto-scheduling is not fully implemented."}),{committeesAssigned:0,defensesScheduled:0}),[e]);return{loading:h,projectGroups:l,students:o,advisors:t,majors:u,classrooms:d,milestoneTemplates:g,announcements:x,defenseSettings:v,scoringSettings:N,advisorProjectCounts:M,committeeCounts:F,getAdvisorNameById:q,addProject:T,updateProject:A,deleteProject:C,updateProjectStatus:w,updateMilestone:_,reorderMilestones:j,transferProject:ke,addProjectLogEntry:O,bulkAddProjectLogEntries:Ce,updateProjectCommittee:Ee,updateProjectDefenseSchedule:Oe,autoScheduleDefenses:Re,bulkUpdateSchedules:he,clearAllSchedulesAndCommittees:be,updateFinalSubmissions:Te,reviewFinalSubmission:ye,updateDetailedScore:Ae,updateProjectGrade:Fe,addStudent:E,updateStudent:I,deleteStudent:D,bulkAddOrUpdateStudents:X,bulkUpdateStudents:G,bulkDeleteStudents:K,addAdvisor:U,updateAdvisor:J,deleteAdvisor:$,deleteAdvisors:L,bulkAddOrUpdateAdvisors:W,bulkUpdateAdvisors:re,addMajor:ne,updateMajor:se,deleteMajor:H,addClassroom:ce,updateClassroom:ae,deleteClassroom:Y,addMilestoneTemplate:Q,updateMilestoneTemplate:te,deleteMilestoneTemplate:ie,addAnnouncement:le,updateAnnouncement:ee,deleteAnnouncement:oe,updateDefenseSettings:de,updateScoringSettings:fe,updateGeneralSettings:pe}},Ab=()=>{const[m,a]=Z.useState(null),[e,h]=Z.useState(null),[f,l]=Z.useState(""),[s,o]=Z.useState([]),[r,t]=Z.useState(!1),[n,u]=Z.useState([]),[c,d]=Z.useState(!1),[b,g]=Z.useState(!0),p=At(),x=Ue();Z.useEffect(()=>{const E=localStorage.getItem("academicYears");if(E){const I=JSON.parse(E);o(I),l(I[I.length-1])}else{const I="2024";localStorage.setItem("academicYears",JSON.stringify([I])),localStorage.setItem(`projectGroups_${I}`,JSON.stringify(Sb)),localStorage.setItem(`students_${I}`,JSON.stringify(Il)),localStorage.setItem(`advisors_${I}`,JSON.stringify(_b)),localStorage.setItem(`majors_${I}`,JSON.stringify(Al)),localStorage.setItem(`classrooms_${I}`,JSON.stringify(Tl)),localStorage.setItem(`milestoneTemplates_${I}`,JSON.stringify(Cl)),localStorage.setItem(`announcements_${I}`,JSON.stringify(Cb)),localStorage.setItem(`notifications_${I}`,"[]"),o([I]),l(I)}t(!0)},[]),Z.useEffect(()=>{if(f){const E=localStorage.getItem(`notifications_${f}`);u(E?JSON.parse(E):[])}else u([])},[f]),Z.useEffect(()=>{f&&localStorage.setItem(`notifications_${f}`,JSON.stringify(n))},[n,f]);const y=Z.useCallback(E=>{const I={id:Ar(),timestamp:new Date().toISOString(),read:!1,...E};u(D=>[I,...D])},[]),v=Z.useCallback(E=>{u(I=>I.map(D=>D.userIds.includes(E)&&!D.read?{...D,read:!0}:D))},[]),S=Z.useCallback(E=>{u(I=>I.map(D=>D.id===E?{...D,read:!0}:D))},[]),N=Nb(f,y,p),R=Z.useCallback(E=>{a(E),h(E.role),g(!1),E.mustChangePassword&&(p({type:"info",message:x("updatePasswordPrompt")}),d(!0))},[p,x]),B=Z.useCallback(()=>{g(!1)},[]),M=Z.useCallback(()=>{a(null),h(null),d(!1),g(!0)},[]);Z.useEffect(()=>(window.onAuthExpired=()=>{a(null),h(null),d(!1),p({type:"warning",message:x("sessionExpired")})},()=>{delete window.onAuthExpired}),[p,x]);const F=Z.useCallback(E=>{(m==null?void 0:m.role)==="DepartmentAdmin"&&(E==="Advisor"||E==="DepartmentAdmin")&&(h(E),p({type:"info",message:x("switchedToView").replace("${role}",E)}))},[m,p,x]),q=Z.useCallback(()=>{if(!f)return;const E=String(parseInt(f,10)+1),I=JSON.stringify(N.advisors),D=JSON.stringify(N.majors),X=JSON.stringify(N.classrooms),G=JSON.stringify(N.milestoneTemplates);localStorage.setItem(`advisors_${E}`,I),localStorage.setItem(`majors_${E}`,D),localStorage.setItem(`classrooms_${E}`,X),localStorage.setItem(`milestoneTemplates_${E}`,G),localStorage.setItem(`projectGroups_${E}`,"[]"),localStorage.setItem(`students_${E}`,"[]"),localStorage.setItem(`announcements_${E}`,"[]"),localStorage.setItem(`notifications_${E}`,"[]");const K=[...s,E];localStorage.setItem("academicYears",JSON.stringify(K)),o(K),l(E),p({type:"success",message:x("newYearStarted").replace("${year}",E)})},[f,s,N.advisors,N.majors,N.classrooms,N.milestoneTemplates,p,x]),{loading:V,projectGroups:O,students:T,advisors:A,...C}=N,{bulkUpdateStudents:w,bulkUpdateAdvisors:_}=C,j=Z.useCallback(async()=>{},[m,e,f,p,x,T,A,O,y,w,_]),k=Z.useRef(j);return Z.useEffect(()=>{k.current=j},[j]),Z.useEffect(()=>{if(!m||e!=="Admin"&&e!=="DepartmentAdmin")return;function E(){k.current()}E();const I=300*1e3,D=setInterval(E,I);return()=>clearInterval(D)},[m,e]),!r||V?i.jsx(at,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",bgcolor:"background.default"},children:i.jsx(Ma,{size:64})}):i.jsx(at,{sx:{minHeight:"100vh",bgcolor:"background.default",color:"text.primary"},children:m&&e?i.jsx(Qg,{user:m,effectiveRole:e,onSwitchRole:F,onLogout:M,projectGroups:O,students:T,advisors:A,majors:N.majors,classrooms:N.classrooms,...C,currentAcademicYear:f,availableYears:s,onYearChange:l,onStartNewYear:q,notifications:n,onMarkNotificationsAsRead:v,onMarkSingleNotificationAsRead:S,isPasswordChangeForced:c,onPasswordChanged:()=>d(!1)}):b?i.jsx(nb,{onLogin:B}):i.jsx(sb,{onLogin:R,advisors:A,students:T,addStudent:C.addStudent,majors:N.majors,classrooms:N.classrooms,onBackToWelcome:()=>g(!0)})})},Tb=()=>i.jsx(Hc,{children:i.jsx(Gc,{children:i.jsxs(id,{children:[i.jsx(Ab,{}),i.jsx(ob,{})]})})}),Ml=document.getElementById("root");if(!Ml)throw new Error("Could not find root element to mount to");const Eb=Rc.createRoot(Ml);Eb.render(i.jsx(Dr.StrictMode,{children:i.jsx(Tb,{})}));
